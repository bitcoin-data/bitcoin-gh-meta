[
   {
      "author_association" : "MEMBER",
      "body" : "> In the light of a new [shared library](https://github.com/bitcoin/bitcoin/pull/bitcoin/bitcoin#24322) it looks reasonable to start checking shared library symbols.\r\n\r\nYes, very good idea, Concept ACK.",
      "created_at" : "2022-05-03T12:34:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#issuecomment-1116047825",
      "id" : 1116047825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25020",
      "node_id" : "IC_kwDOABII585ChYnR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116047825/reactions"
      },
      "updated_at" : "2022-05-03T12:34:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116047825",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r863728938"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863728938"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think one of the most important things to check for shared libraries is that they export the right symbols (to make sure their entire API is available), and only the right symbols (extra and re-exported symbols can cause conflicts).",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2022-05-03T12:36:42Z",
      "diff_hunk" : "@@ -176,77 +180,82 @@ def check_version(max_versions, version, arch) -> bool:\n def check_imported_symbols(binary) -> bool:\n     ok: bool = True\n \n-    for symbol in binary.imported_symbols:\n+    for symbol in binary.concrete.imported_symbols:\n         if not symbol.imported:\n             continue\n \n         version = symbol.symbol_version if symbol.has_version else None\n \n         if version:\n             aux_version = version.symbol_version_auxiliary.name if version.has_auxiliary_version else None\n-            if aux_version and not check_version(MAX_VERSIONS, aux_version, binary.header.machine_type):\n+            if aux_version and not check_version(MAX_VERSIONS, aux_version, binary.concrete.header.machine_type):\n                 print(f'{filename}: symbol {symbol.name} from unsupported version {version}')\n                 ok = False\n     return ok\n \n def check_exported_symbols(binary) -> bool:\n     ok: bool = True\n+    if binary.abstract.header.object_type == lief.OBJECT_TYPES.LIBRARY:\n+        return ok",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r863728938",
      "id" : 863728938,
      "line" : 199,
      "node_id" : "PRRC_kwDOABII584ze3Uq",
      "original_commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "original_line" : 199,
      "original_position" : 66,
      "original_start_line" : null,
      "path" : "contrib/devtools/symbol-check.py",
      "position" : 66,
      "pull_request_review_id" : 960307529,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863728938/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-03T13:29:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863728938",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r863763301"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863763301"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yea, that is what I assumed this would be doing when I first looked. Otherwise I think the checks currently being added are ~0.",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2022-05-03T13:18:46Z",
      "diff_hunk" : "@@ -176,77 +180,82 @@ def check_version(max_versions, version, arch) -> bool:\n def check_imported_symbols(binary) -> bool:\n     ok: bool = True\n \n-    for symbol in binary.imported_symbols:\n+    for symbol in binary.concrete.imported_symbols:\n         if not symbol.imported:\n             continue\n \n         version = symbol.symbol_version if symbol.has_version else None\n \n         if version:\n             aux_version = version.symbol_version_auxiliary.name if version.has_auxiliary_version else None\n-            if aux_version and not check_version(MAX_VERSIONS, aux_version, binary.header.machine_type):\n+            if aux_version and not check_version(MAX_VERSIONS, aux_version, binary.concrete.header.machine_type):\n                 print(f'{filename}: symbol {symbol.name} from unsupported version {version}')\n                 ok = False\n     return ok\n \n def check_exported_symbols(binary) -> bool:\n     ok: bool = True\n+    if binary.abstract.header.object_type == lief.OBJECT_TYPES.LIBRARY:\n+        return ok",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r863763301",
      "id" : 863763301,
      "in_reply_to_id" : 863728938,
      "line" : 199,
      "node_id" : "PRRC_kwDOABII584ze_tl",
      "original_commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "original_line" : 199,
      "original_position" : 66,
      "original_start_line" : null,
      "path" : "contrib/devtools/symbol-check.py",
      "position" : 66,
      "pull_request_review_id" : 960357378,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863763301/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-03T13:18:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863763301",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r863765821"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863765821"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> 2012abe043ca00525ef39b31c844f52ecf1963d9: contrib: Always explicitly cast lief.Binary object \r\n\r\nWhy?",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2022-05-03T13:21:38Z",
      "diff_hunk" : "@@ -176,76 +176,76 @@ def check_version(max_versions, version, arch) -> bool:\n def check_imported_symbols(binary) -> bool:\n     ok: bool = True\n \n-    for symbol in binary.imported_symbols:\n+    for symbol in binary.concrete.imported_symbols:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r863765821",
      "id" : 863765821,
      "line" : 183,
      "node_id" : "PRRC_kwDOABII584zfAU9",
      "original_commit_id" : "2012abe043ca00525ef39b31c844f52ecf1963d9",
      "original_line" : 179,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "contrib/devtools/symbol-check.py",
      "position" : 5,
      "pull_request_review_id" : 960361089,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863765821/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-03T13:21:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863765821",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r885637804"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885637804"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Let's not hardcode this name here. If we need to skip this, please define another constant for the list of libraries to skip.",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2022-05-31T13:27:14Z",
      "diff_hunk" : "@@ -176,77 +180,82 @@ def check_version(max_versions, version, arch) -> bool:\n def check_imported_symbols(binary) -> bool:\n     ok: bool = True\n \n-    for symbol in binary.imported_symbols:\n+    for symbol in binary.concrete.imported_symbols:\n         if not symbol.imported:\n             continue\n \n         version = symbol.symbol_version if symbol.has_version else None\n \n         if version:\n             aux_version = version.symbol_version_auxiliary.name if version.has_auxiliary_version else None\n-            if aux_version and not check_version(MAX_VERSIONS, aux_version, binary.header.machine_type):\n+            if aux_version and not check_version(MAX_VERSIONS, aux_version, binary.concrete.header.machine_type):\n                 print(f'{filename}: symbol {symbol.name} from unsupported version {version}')\n                 ok = False\n     return ok\n \n def check_exported_symbols(binary) -> bool:\n     ok: bool = True\n+    if binary.abstract.header.object_type == lief.OBJECT_TYPES.LIBRARY:\n+        return ok\n \n-    for symbol in binary.dynamic_symbols:\n+    for symbol in binary.concrete.dynamic_symbols:\n         if not symbol.exported:\n             continue\n         name = symbol.name\n-        if binary.header.machine_type == lief.ELF.ARCH.RISCV or name in IGNORE_EXPORTS:\n+        if binary.concrete.header.machine_type == lief.ELF.ARCH.RISCV or name in IGNORE_EXPORTS:\n             continue\n-        print(f'{binary.name}: export of symbol {name} not allowed!')\n+        print(f'{filename}: export of symbol {name} not allowed!')\n         ok = False\n     return ok\n \n def check_ELF_libraries(binary) -> bool:\n     ok: bool = True\n-    for library in binary.libraries:\n+    for library in binary.concrete.libraries:\n         if library not in ELF_ALLOWED_LIBRARIES:\n             print(f'{filename}: {library} is not in ALLOWED_LIBRARIES!')\n             ok = False\n     return ok\n \n def check_MACHO_libraries(binary) -> bool:\n     ok: bool = True\n-    for dylib in binary.libraries:\n-        split = dylib.name.split('/')\n-        if split[-1] not in MACHO_ALLOWED_LIBRARIES:\n-            print(f'{split[-1]} is not in ALLOWED_LIBRARIES!')\n+    for dylib in binary.concrete.libraries:\n+        library = dylib.name.split('/')[-1]\n+        if binary.abstract.header.object_type == lief.OBJECT_TYPES.LIBRARY and library == 'libbitcoinconsensus.0.dylib':",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r885637804",
      "id" : 885637804,
      "line" : 223,
      "node_id" : "PRRC_kwDOABII5840ycKs",
      "original_commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "original_line" : 223,
      "original_position" : 98,
      "original_start_line" : null,
      "path" : "contrib/devtools/symbol-check.py",
      "position" : 98,
      "pull_request_review_id" : 990450733,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885637804/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-31T13:27:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885637804",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r885641952"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885641952"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I also wonder, it's a bit ugly to have `.concrete` everywhere.",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2022-05-31T13:30:44Z",
      "diff_hunk" : "@@ -176,76 +176,76 @@ def check_version(max_versions, version, arch) -> bool:\n def check_imported_symbols(binary) -> bool:\n     ok: bool = True\n \n-    for symbol in binary.imported_symbols:\n+    for symbol in binary.concrete.imported_symbols:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r885641952",
      "id" : 885641952,
      "in_reply_to_id" : 863765821,
      "line" : 183,
      "node_id" : "PRRC_kwDOABII5840ydLg",
      "original_commit_id" : "2012abe043ca00525ef39b31c844f52ecf1963d9",
      "original_line" : 179,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "contrib/devtools/symbol-check.py",
      "position" : 5,
      "pull_request_review_id" : 990456729,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885641952/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-05-31T13:30:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/885641952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Speaking of checking exported symbols, I checked `libbitcoinconsensus.so` from 23.0 and there's a ton of unnecessary symbols being exported:\r\n```\r\n$ objdump -T bitcoin-23.0/lib/libbitcoinconsensus.so|grep -v UND\r\nbitcoin-23.0/lib/libbitcoinconsensus.so:     file format elf64-x86-64\r\n\r\nDYNAMIC SYMBOL TABLE:\r\n00000000000203f0  w   DF .text  00000000000000d3  Base        _ZNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEC2IS3_EEPKcRKS3_\r\n000000000002b850  w   DF .text  0000000000000373  Base        _ZNSt20__uninitialized_copyILb0EE13__uninit_copyIPK5CTxInPS2_EET0_T_S7_S6_\r\n0000000000026100  w   DF .text  0000000000000062  Base        _ZNSt12_Vector_baseIhSaIhEED1Ev\r\n00000000000293d0 g    DF .text  0000000000000037  Base        bitcoinconsensus_version\r\n0000000000042aa0  w   DF .text  00000000000000e2  Base        _ZNSt6vectorIhSaIhEE7reserveEm\r\n0000000000038010  w   DF .text  0000000000000178  Base        _ZNSt6vectorIhSaIhEE17_M_realloc_insertIJhEEEvN9__gnu_cxx17__normal_iteratorIPhS1_EEDpOT_\r\n0000000000037aa0  w   DF .text  000000000000012d  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE8_M_eraseEN9__gnu_cxx17__normal_iteratorIPS1_S3_EES7_\r\n00000000000059b9  w   DF .text  0000000000000048  Base        _ZSt27__throw_bad_optional_accessv\r\n00000000000375f0  w   DF .text  00000000000000b6  Base        _ZNSt6vectorIhSaIhEEC2ERKS1_\r\n0000000000037e20  w   DF .text  00000000000001e5  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE17_M_default_appendEm\r\n00000000000366d0  w   DF .text  0000000000000042  Base        _ZNSt19bad_optional_accessD2Ev\r\n00000000001719f0  w   DO .data.rel.ro   0000000000000028  Base        _ZTVSt19bad_optional_access\r\n00000000000366d0  w   DF .text  0000000000000042  Base        _ZNSt19bad_optional_accessD1Ev\r\n0000000000054e80  w   DO .rodata        0000000000000018  Base        _ZTSSt19bad_optional_access\r\n00000000000429f0  w   DF .text  00000000000000a7  Base        _ZStplIcSt11char_traitsIcESaIcEENSt7__cxx1112basic_stringIT_T0_T1_EERKS8_PKS5_\r\n0000000000042fb0  w   DF .text  00000000000000d4  Base        _ZNSt8__detail18__from_chars_digitIjEEbRPKcS2_RT_i\r\n0000000000036720  w   DF .text  0000000000000054  Base        _ZNSt19bad_optional_accessD0Ev\r\n0000000000020260  w   DF .text  0000000000000034  Base        _ZNKSt5ctypeIcE8do_widenEc\r\n0000000000021230  w   DF .text  0000000000000073  Base        _ZNSt7__cxx1115basic_stringbufIcSt11char_traitsIcESaIcEED2Ev\r\n0000000000037980  w   DF .text  0000000000000120  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE9push_backERKS1_\r\n000000000002b680  w   DF .text  00000000000001cd  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE17_M_realloc_insertIJEEEvN9__gnu_cxx17__normal_iteratorIPS1_S3_EEDpOT_\r\n0000000000038190  w   DF .text  00000000000001e5  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE17_M_realloc_insertIJS1_EEEvN9__gnu_cxx17__normal_iteratorIPS1_S3_EEDpOT_\r\n0000000000021230  w   DF .text  0000000000000073  Base        _ZNSt7__cxx1115basic_stringbufIcSt11char_traitsIcESaIcEED1Ev\r\n00000000000212b0  w   DF .text  0000000000000081  Base        _ZNSt7__cxx1115basic_stringbufIcSt11char_traitsIcESaIcEED0Ev\r\n00000000000361e0  w   DF .text  0000000000000039  Base        _ZNKSt19bad_optional_access4whatEv\r\n00000000000267f0  w   DF .text  0000000000000373  Base        _ZNSt20__uninitialized_copyILb0EE13__uninit_copyIN9__gnu_cxx17__normal_iteratorIPK5CTxInSt6vectorIS4_SaIS4_EEEEPS4_EET0_T_SD_SC_\r\n00000000001719a8  w   DO .data.rel.ro   0000000000000018  Base        _ZTISt19bad_optional_access\r\n0000000000036820  w   DF .text  0000000000000062  Base        _ZNSt6vectorIhSaIhEED2Ev\r\n00000000000375f0  w   DF .text  00000000000000b6  Base        _ZNSt6vectorIhSaIhEEC1ERKS1_\r\n00000000000203f0  w   DF .text  00000000000000d3  Base        _ZNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEC1IS3_EEPKcRKS3_\r\n0000000000036820  w   DF .text  0000000000000062  Base        _ZNSt6vectorIhSaIhEED1Ev\r\n000000000002ae10 g    DF .text  000000000000006d  Base        bitcoinconsensus_verify_script\r\n0000000000051994 g    DF .fini  0000000000000000  Base        _fini\r\n0000000000004000 g    DF .init  0000000000000000  Base        _init\r\n0000000000037550  w   DF .text  000000000000009e  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EED2Ev\r\n00000000000376b0  w   DF .text  00000000000002cd  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE17_M_realloc_insertIJRKS1_EEEvN9__gnu_cxx17__normal_iteratorIPS1_S3_EEDpOT_\r\n0000000000037550  w   DF .text  000000000000009e  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EED1Ev\r\n0000000000037cc0  w   DF .text  0000000000000160  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE13_M_insert_auxIS1_EEvN9__gnu_cxx17__normal_iteratorIPS1_S3_EEOT_\r\n0000000000037bd0  w   DF .text  00000000000000e3  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE8_M_eraseEN9__gnu_cxx17__normal_iteratorIPS1_S3_EE\r\n000000000002adc0 g    DF .text  0000000000000049  Base        bitcoinconsensus_verify_script_with_amount\r\n0000000000042b90  w   DF .text  0000000000000178  Base        _ZNSt6vectorIhSaIhEE17_M_realloc_insertIJRKhEEEvN9__gnu_cxx17__normal_iteratorIPhS1_EEDpOT_\r\n0000000000042d10  w   DF .text  00000000000000dc  Base        _ZNSt8__detail18__from_chars_digitImEEbRPKcS2_RT_i\r\n000000000002af00  w   DF .text  00000000000000ce  Base        _ZStplIcSt11char_traitsIcESaIcEENSt7__cxx1112basic_stringIT_T0_T1_EEOS8_PKS5_\r\n0000000000026100  w   DF .text  0000000000000062  Base        _ZNSt12_Vector_baseIhSaIhEED2Ev\r\n```\r\nMost are related to C++ standard library (like vector), it seems? I wonder if there's a way to avoid this.",
      "created_at" : "2022-05-31T13:40:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#issuecomment-1142151675",
      "id" : 1142151675,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25020",
      "node_id" : "IC_kwDOABII585EE9n7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142151675/reactions"
      },
      "updated_at" : "2022-05-31T13:40:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1142151675",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj \r\n> Speaking of checking exported symbols, I checked `libbitcoinconsensus.so` from 23.0 and there's a ton of unnecessary symbols being exported:\r\n> \r\n> Most are related to C++ standard library (like vector), it seems? I wonder if there's a way to avoid this.\r\n\r\nIt appears, #24994 fixes it:\r\n```\r\n$ objdump -T bitcoin-c28bb15a117e-x86_64-linux-gnu/bitcoin-c28bb15a117e/lib/libbitcoinconsensus.so.0 | grep -v UND\r\n\r\nbitcoin-c28bb15a117e-x86_64-linux-gnu/bitcoin-c28bb15a117e/lib/libbitcoinconsensus.so.0:     file format elf64-x86-64\r\n\r\nDYNAMIC SYMBOL TABLE:\r\n0000000000003000 g    DF .init\t0000000000000000  Base        _init\r\n0000000000045494 g    DF .fini\t0000000000000000  Base        _fini\r\n0000000000004de0 g    DF .text\t0000000000000037  Base        bitcoinconsensus_version\r\n0000000000005230 g    DF .text\t0000000000000049  Base        bitcoinconsensus_verify_script_with_amount\r\n0000000000005280 g    DF .text\t000000000000006d  Base        bitcoinconsensus_verify_script\r\n\r\n\r\n```",
      "created_at" : "2022-06-05T11:17:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#issuecomment-1146786122",
      "id" : 1146786122,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25020",
      "node_id" : "IC_kwDOABII585EWpFK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1146786122/reactions"
      },
      "updated_at" : "2022-06-05T11:17:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1146786122",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r889683665"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889683665"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Exactly. It was the initial idea of this PR. When I faced with a crowd of exported symbols, I decided to make this PR focused on introducing a tool, and leave fighting with linker issues for follow ups.",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2022-06-05T11:47:26Z",
      "diff_hunk" : "@@ -176,77 +180,82 @@ def check_version(max_versions, version, arch) -> bool:\n def check_imported_symbols(binary) -> bool:\n     ok: bool = True\n \n-    for symbol in binary.imported_symbols:\n+    for symbol in binary.concrete.imported_symbols:\n         if not symbol.imported:\n             continue\n \n         version = symbol.symbol_version if symbol.has_version else None\n \n         if version:\n             aux_version = version.symbol_version_auxiliary.name if version.has_auxiliary_version else None\n-            if aux_version and not check_version(MAX_VERSIONS, aux_version, binary.header.machine_type):\n+            if aux_version and not check_version(MAX_VERSIONS, aux_version, binary.concrete.header.machine_type):\n                 print(f'{filename}: symbol {symbol.name} from unsupported version {version}')\n                 ok = False\n     return ok\n \n def check_exported_symbols(binary) -> bool:\n     ok: bool = True\n+    if binary.abstract.header.object_type == lief.OBJECT_TYPES.LIBRARY:\n+        return ok",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r889683665",
      "id" : 889683665,
      "in_reply_to_id" : 863728938,
      "line" : 199,
      "node_id" : "PRRC_kwDOABII5841B37R",
      "original_commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "original_line" : 199,
      "original_position" : 66,
      "original_start_line" : null,
      "path" : "contrib/devtools/symbol-check.py",
      "position" : 66,
      "pull_request_review_id" : 995999248,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889683665/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-05T11:47:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/889683665",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It appears, https://github.com/bitcoin/bitcoin/pull/24994 fixes it:\r\n\r\nThat's beautiful!",
      "created_at" : "2022-06-27T07:28:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#issuecomment-1166985971",
      "id" : 1166985971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25020",
      "node_id" : "IC_kwDOABII585Fjsrz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1166985971/reactions"
      },
      "updated_at" : "2022-06-27T07:28:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1166985971",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [laanwj](https://github.com/bitcoin/bitcoin/pull/25020#issuecomment-1116047825) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25573](https://github.com/bitcoin/bitcoin/pull/25573) ([POC] guix: produce a fully -static-pie x86_64 bitcoind using GCC and glibc by fanquake)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-07-09T02:01:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#issuecomment-1179458598",
      "id" : 1179458598,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25020",
      "node_id" : "IC_kwDOABII585GTRwm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1179458598/reactions"
      },
      "updated_at" : "2022-12-05T12:16:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1179458598",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "GUIX hashes\r\n\r\nx86:\r\n```\r\n$ find guix-build-$(git rev-parse --short=12 HEAD)/output/ -type f -print0 | env LC_ALL=C sort -z | xargs -r0 sha256sum\r\n\r\n685eafd7b1826282626d56c3163675f439075175f4f2260ec9888d3409455d49  guix-build-39947be79510/output/aarch64-linux-gnu/SHA256SUMS.part\r\n767b608e51868ba8dcf3ea3ad6eedbed33dbb90e2cd9eb0e1474bf83189e3134  guix-build-39947be79510/output/aarch64-linux-gnu/bitcoin-39947be79510-aarch64-linux-gnu-debug.tar.gz\r\n66705528b8caf1a084b5f0b2243899334c882144ead3c9c8da4395283a6cb08b  guix-build-39947be79510/output/aarch64-linux-gnu/bitcoin-39947be79510-aarch64-linux-gnu.tar.gz\r\n3d2e68cd61c69a78285f6f9af4391767b0051130e17d36522e2773a78590f875  guix-build-39947be79510/output/arm-linux-gnueabihf/SHA256SUMS.part\r\nb3e8e66bb49599630b6f0ed8afdf36b659752e5db9d7d624969ea9b7baf12350  guix-build-39947be79510/output/arm-linux-gnueabihf/bitcoin-39947be79510-arm-linux-gnueabihf-debug.tar.gz\r\n8ba02617f70e311bcce65a042f9bf6f61438180fba1778bb16e207e9800d5e53  guix-build-39947be79510/output/arm-linux-gnueabihf/bitcoin-39947be79510-arm-linux-gnueabihf.tar.gz\r\n1cf0a2d9d5ea4bd3cce72ef3b85346ab7a88408f3abb4d950f889a5a0fa4493d  guix-build-39947be79510/output/arm64-apple-darwin/SHA256SUMS.part\r\n10701eb3db3c5e149671de41c869660a477657ddcf36eeff2fb5ed26d8d80e1f  guix-build-39947be79510/output/arm64-apple-darwin/bitcoin-39947be79510-arm64-apple-darwin-unsigned.dmg\r\nda367910b71a8276ae3d037754d98eaf2160b0ddd1b239a9e158a2b10f994dd6  guix-build-39947be79510/output/arm64-apple-darwin/bitcoin-39947be79510-arm64-apple-darwin-unsigned.tar.gz\r\n257d838cecaa16696369cff794cc6cd40ce937a3536c20947116e35244ec9cfb  guix-build-39947be79510/output/arm64-apple-darwin/bitcoin-39947be79510-arm64-apple-darwin.tar.gz\r\neba655f2303debef2332e57b14be2639c1c2e0f9e94b40ea0709e79868cb7ac5  guix-build-39947be79510/output/dist-archive/bitcoin-39947be79510.tar.gz\r\n22e90ffa6022d6cbf4fa6e61e1ac4072fe7143af798ad8439f270854ac872c54  guix-build-39947be79510/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n9bdd90ab918ff84be1011162e768195accf93a7cf9f9b01c2e3aff130ed8676c  guix-build-39947be79510/output/powerpc64-linux-gnu/bitcoin-39947be79510-powerpc64-linux-gnu-debug.tar.gz\r\n22895d20bc3758dbb8b98e9c4ab42e447ce83af19ff259ea32ed15889907e972  guix-build-39947be79510/output/powerpc64-linux-gnu/bitcoin-39947be79510-powerpc64-linux-gnu.tar.gz\r\n278f5e8d22b9aacb08926d888d02d0e8cf16be325d8667fa99272297d78bad70  guix-build-39947be79510/output/powerpc64le-linux-gnu/SHA256SUMS.part\r\n0691d58065ef1442d04e7213c288ab0209825a0a0ea6f58b390fb33d604805e8  guix-build-39947be79510/output/powerpc64le-linux-gnu/bitcoin-39947be79510-powerpc64le-linux-gnu-debug.tar.gz\r\na25aad55afd40b639f83ed47c4b5c3b4d5f79f561ba2836b49c58145641b3dfd  guix-build-39947be79510/output/powerpc64le-linux-gnu/bitcoin-39947be79510-powerpc64le-linux-gnu.tar.gz\r\n9d0e17eda2b4c7a61e602a047fb410ced01ba61065e45b8c3a0229ebec4f1970  guix-build-39947be79510/output/riscv64-linux-gnu/SHA256SUMS.part\r\n1bf94397e26474bb44cf0c330325733accbf90a773f8b3e8d4b26873fca399ad  guix-build-39947be79510/output/riscv64-linux-gnu/bitcoin-39947be79510-riscv64-linux-gnu-debug.tar.gz\r\n70cb2fce41838a0147bdaec6647c747082793e53c1866bd2da459a1a6824fbc6  guix-build-39947be79510/output/riscv64-linux-gnu/bitcoin-39947be79510-riscv64-linux-gnu.tar.gz\r\n4d471e209f6064eb7dc58bc19ee863453d6721847a0356ef5d5ad593b8bbbb73  guix-build-39947be79510/output/x86_64-apple-darwin/SHA256SUMS.part\r\n64db9126af7e8e8cb8a6f52d656ebe041fc8f306bff3ca6b5b2d1ad84296a0fc  guix-build-39947be79510/output/x86_64-apple-darwin/bitcoin-39947be79510-x86_64-apple-darwin-unsigned.dmg\r\n2e5f2a30f949974ceebda65237dc9ebb9414090142aba1ab974581fda271790d  guix-build-39947be79510/output/x86_64-apple-darwin/bitcoin-39947be79510-x86_64-apple-darwin-unsigned.tar.gz\r\n8a3d18b0d926d7af4e13d29cb49babfbf69d3bb3da3119f9891ca559cece4e59  guix-build-39947be79510/output/x86_64-apple-darwin/bitcoin-39947be79510-x86_64-apple-darwin.tar.gz\r\ne05ba2639a4c34e905417ab980faddd828a212569e6c73f7a8f8be58ee9323bb  guix-build-39947be79510/output/x86_64-linux-gnu/SHA256SUMS.part\r\n1ce9d619f3d7e0d83e8f1aac7372a5945d31ca25bd29763044736a3635a946de  guix-build-39947be79510/output/x86_64-linux-gnu/bitcoin-39947be79510-x86_64-linux-gnu-debug.tar.gz\r\nc6f4a0406d31735423a9bafcaeb48f4317c7f323f74830972a5a3fc4f0e6fa29  guix-build-39947be79510/output/x86_64-linux-gnu/bitcoin-39947be79510-x86_64-linux-gnu.tar.gz\r\n433b3a7cdb3b4e6b152b065d6b7d9fa97efa6d99a28ca238c5f8e5fdc29d2015  guix-build-39947be79510/output/x86_64-w64-mingw32/SHA256SUMS.part\r\ncbcc56d16fea9a4fda26b6ea2c76984ccf4afa83334b147241a2a266ae8a5edc  guix-build-39947be79510/output/x86_64-w64-mingw32/bitcoin-39947be79510-win64-debug.zip\r\n191c2cb75a46f4e77274e699d90f6e26d38383ebf20eff90489f02d94cfd6bad  guix-build-39947be79510/output/x86_64-w64-mingw32/bitcoin-39947be79510-win64-setup-unsigned.exe\r\n89fdd8f58ba6b1b66a9c1ff0e15b5103be446b0c1365918930a37213f71f9da4  guix-build-39947be79510/output/x86_64-w64-mingw32/bitcoin-39947be79510-win64-unsigned.tar.gz\r\nf1ee2b31ba734de374c20f842de941565dad7f91cc9e315d8d070d5da763aebd  guix-build-39947be79510/output/x86_64-w64-mingw32/bitcoin-39947be79510-win64.zip\r\n```\r\n\r\narm64:\r\n```\r\n$ env HOSTS='arm-linux-gnueabihf arm64-apple-darwin powerpc64-linux-gnu powerpc64le-linux-gnu riscv64-linux-gnu x86_64-apple-darwin x86_64-linux-gnu x86_64-w64-mingw32' ./contrib/guix/guix-build\r\n$ find guix-build-$(git rev-parse --short=12 HEAD)/output/ -type f -print0 | env LC_ALL=C sort -z | xargs -r0 sha256sum\r\n\r\n014f518074afd8db1c2f0280640159737d097aeeb330269622859f9a8c6839e7  guix-build-39947be79510/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n3f7d1b51158355f9f0d1861359f99cbbaf2c2129e1333b5e70ebd9d869e0bad9  guix-build-39947be79510/output/arm-linux-gnueabihf/bitcoin-39947be79510-arm-linux-gnueabihf-debug.tar.gz\r\n77f51ce9a46f19f3f76d93f32aa55bee54838012438edcc9fafcb60ff1646245  guix-build-39947be79510/output/arm-linux-gnueabihf/bitcoin-39947be79510-arm-linux-gnueabihf.tar.gz\r\n4e04ed55cc8edbdef142ea49fe0fee8f5d7b608200a08cc9277949b9e0bd9729  guix-build-39947be79510/output/arm64-apple-darwin/SHA256SUMS.part\r\nb2e9994348e1e530350557717fcc7e27fe3b88fb7de443f89aa37e16c5be055a  guix-build-39947be79510/output/arm64-apple-darwin/bitcoin-39947be79510-arm64-apple-darwin-unsigned.dmg\r\n3e27e59e62e88fe6864811464ffb8773ec6d46c1e4057f0fb07d97ebdcd19bee  guix-build-39947be79510/output/arm64-apple-darwin/bitcoin-39947be79510-arm64-apple-darwin-unsigned.tar.gz\r\n5e50fb1743fe3c636747768b4de4661b42513b709bea86bbd7c0f767ef37b60d  guix-build-39947be79510/output/arm64-apple-darwin/bitcoin-39947be79510-arm64-apple-darwin.tar.gz\r\neba655f2303debef2332e57b14be2639c1c2e0f9e94b40ea0709e79868cb7ac5  guix-build-39947be79510/output/dist-archive/bitcoin-39947be79510.tar.gz\r\n91bb02e0756bfe35a5ec893a4b6ce1b7ef3fec815b241710ebbf48745fafe3a2  guix-build-39947be79510/output/powerpc64-linux-gnu/SHA256SUMS.part\r\nd4689b64c02c408c6cc2e463354186d958019610b4b3de5ae85f20dbcdc1c2ee  guix-build-39947be79510/output/powerpc64-linux-gnu/bitcoin-39947be79510-powerpc64-linux-gnu-debug.tar.gz\r\naf9fb50aef2a198e8ae69dde784343e423373f96767f5a291c79f1748fc29343  guix-build-39947be79510/output/powerpc64-linux-gnu/bitcoin-39947be79510-powerpc64-linux-gnu.tar.gz\r\nb914013794cc88dc15e595c731245f3915d32d34c088c0b71b721f494b7140c5  guix-build-39947be79510/output/powerpc64le-linux-gnu/SHA256SUMS.part\r\nc4218a3de76d470db7134465c6250f9a53137d25199ed280dc40a4b2b366c1d8  guix-build-39947be79510/output/powerpc64le-linux-gnu/bitcoin-39947be79510-powerpc64le-linux-gnu-debug.tar.gz\r\n38cdc7cb10049849c5600cb592389f1d9f2b993485c05403dae1c06283de7182  guix-build-39947be79510/output/powerpc64le-linux-gnu/bitcoin-39947be79510-powerpc64le-linux-gnu.tar.gz\r\nf803397aa1e0352a7f23fa906002814a7837e547182d471abb14ec5def3551d6  guix-build-39947be79510/output/riscv64-linux-gnu/SHA256SUMS.part\r\na48852558522c224a794d1a09ddf36ba4b2a5adbd86651c734626c3399ee51fd  guix-build-39947be79510/output/riscv64-linux-gnu/bitcoin-39947be79510-riscv64-linux-gnu-debug.tar.gz\r\ncf282980458922da5ef570ea7a6072338368a14fd0aa35f6172e1cb75b56f4b0  guix-build-39947be79510/output/riscv64-linux-gnu/bitcoin-39947be79510-riscv64-linux-gnu.tar.gz\r\n4d471e209f6064eb7dc58bc19ee863453d6721847a0356ef5d5ad593b8bbbb73  guix-build-39947be79510/output/x86_64-apple-darwin/SHA256SUMS.part\r\n64db9126af7e8e8cb8a6f52d656ebe041fc8f306bff3ca6b5b2d1ad84296a0fc  guix-build-39947be79510/output/x86_64-apple-darwin/bitcoin-39947be79510-x86_64-apple-darwin-unsigned.dmg\r\n2e5f2a30f949974ceebda65237dc9ebb9414090142aba1ab974581fda271790d  guix-build-39947be79510/output/x86_64-apple-darwin/bitcoin-39947be79510-x86_64-apple-darwin-unsigned.tar.gz\r\n8a3d18b0d926d7af4e13d29cb49babfbf69d3bb3da3119f9891ca559cece4e59  guix-build-39947be79510/output/x86_64-apple-darwin/bitcoin-39947be79510-x86_64-apple-darwin.tar.gz\r\n5c4ef430b11b92f4e09e7acf800eb6efd22af78808956da15451a87a80cd7a5f  guix-build-39947be79510/output/x86_64-linux-gnu/SHA256SUMS.part\r\n3da30e0ddb006ecc9914fc3fe2f3d01947e2614c00393fa3e3d3a97b4fa7ea67  guix-build-39947be79510/output/x86_64-linux-gnu/bitcoin-39947be79510-x86_64-linux-gnu-debug.tar.gz\r\ned6b6c5a3dee4a72ccf6a26db21be539826bfda29c63a6fd878a3abf3d53a687  guix-build-39947be79510/output/x86_64-linux-gnu/bitcoin-39947be79510-x86_64-linux-gnu.tar.gz\r\n5a5e316f09135df7282845d3ac1a7298f15642ad647e3ae7c4b287ee185fd0b1  guix-build-39947be79510/output/x86_64-w64-mingw32/SHA256SUMS.part\r\ne98d34d9c57daaab228c63f8923c9a81a256e4dd1e25610d5bd9a13111fb481a  guix-build-39947be79510/output/x86_64-w64-mingw32/bitcoin-39947be79510-win64-debug.zip\r\n191c2cb75a46f4e77274e699d90f6e26d38383ebf20eff90489f02d94cfd6bad  guix-build-39947be79510/output/x86_64-w64-mingw32/bitcoin-39947be79510-win64-setup-unsigned.exe\r\n89fdd8f58ba6b1b66a9c1ff0e15b5103be446b0c1365918930a37213f71f9da4  guix-build-39947be79510/output/x86_64-w64-mingw32/bitcoin-39947be79510-win64-unsigned.tar.gz\r\n572f9eb018017ae054620cd81a4751e90795297722013f20540c136333196447  guix-build-39947be79510/output/x86_64-w64-mingw32/bitcoin-39947be79510-win64.zip\r\n```",
      "created_at" : "2022-07-29T04:28:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#issuecomment-1198868071",
      "id" : 1198868071,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25020",
      "node_id" : "IC_kwDOABII585HdUZn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1198868071/reactions"
      },
      "updated_at" : "2022-07-29T14:51:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1198868071",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23396902?v=4",
         "events_url" : "https://api.github.com/users/jarolrod/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jarolrod/followers",
         "following_url" : "https://api.github.com/users/jarolrod/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jarolrod/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jarolrod",
         "id" : 23396902,
         "login" : "jarolrod",
         "node_id" : "MDQ6VXNlcjIzMzk2OTAy",
         "organizations_url" : "https://api.github.com/users/jarolrod/orgs",
         "received_events_url" : "https://api.github.com/users/jarolrod/received_events",
         "repos_url" : "https://api.github.com/users/jarolrod/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jarolrod/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jarolrod/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jarolrod"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1039507179"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039507179"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is there a nicer way to do this? Would rather not re-introduce `sed`.",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2022-12-05T12:03:24Z",
      "diff_hunk" : "@@ -995,9 +995,19 @@ clean-local:\n \t## FIXME: How to get the appropriate modulename_CPPFLAGS in here?\n \t$(AM_V_GEN) $(WINDRES) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(CPPFLAGS) -DWINDRES_PREPROC -i $< -o $@\n \n-check-symbols: $(bin_PROGRAMS)\n+if TARGET_LINUX\n+  LIBEXT = .so.0\n+endif\n+if TARGET_DARWIN\n+  LIBEXT = .0.dylib\n+endif\n+if TARGET_WINDOWS\n+  LIBEXT = -0.dll\n+endif\n+\n+check-symbols: $(bin_PROGRAMS) $(LIBBITCOINCONSENSUS)\n \t@echo \"Running symbol and dynamic library checks...\"\n-\t$(AM_V_at) $(PYTHON) $(top_srcdir)/contrib/devtools/symbol-check.py $(bin_PROGRAMS)\n+\t$(AM_V_at) $(PYTHON) $(top_srcdir)/contrib/devtools/symbol-check.py $(bin_PROGRAMS) $(builddir)/.libs/$$(echo $(LIBBITCOINCONSENSUS) | sed \"s/.la//\")$(LIBEXT)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1039507179",
      "id" : 1039507179,
      "line" : 1010,
      "node_id" : "PRRC_kwDOABII58499Z7r",
      "original_commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "original_line" : 1010,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/Makefile.am",
      "position" : 18,
      "pull_request_review_id" : 1204404204,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039507179/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-05T12:16:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039507179",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1039507737"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039507737"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think adding the executable name to every line is an improvement. It's already printed in the failure.",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2022-12-05T12:03:59Z",
      "diff_hunk" : "@@ -117,7 +117,7 @@ def test_MACHO(self):\n         ''')\n \n         self.assertEqual(call_symbol_check(cc, source, executable, ['-lexpat', '-Wl,-platform_version','-Wl,macos', '-Wl,11.4', '-Wl,11.4']),\n-            (1, 'libexpat.1.dylib is not in ALLOWED_LIBRARIES!\\n' +\n+            (1, f'{executable}: libexpat.1.dylib is not in ALLOWED_LIBRARIES!\\n' +",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1039507737",
      "id" : 1039507737,
      "line" : 120,
      "node_id" : "PRRC_kwDOABII58499aEZ",
      "original_commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "original_line" : 120,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "contrib/devtools/test-symbol-check.py",
      "position" : 5,
      "pull_request_review_id" : 1204404204,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039507737/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-05T12:16:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039507737",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1039517621"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039517621"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In general, I don't really like how these changes are mixing up the binary and library checks.",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2022-12-05T12:14:59Z",
      "diff_hunk" : "@@ -176,77 +180,82 @@ def check_version(max_versions, version, arch) -> bool:\n def check_imported_symbols(binary) -> bool:\n     ok: bool = True\n \n-    for symbol in binary.imported_symbols:\n+    for symbol in binary.concrete.imported_symbols:\n         if not symbol.imported:\n             continue\n \n         version = symbol.symbol_version if symbol.has_version else None\n \n         if version:\n             aux_version = version.symbol_version_auxiliary.name if version.has_auxiliary_version else None\n-            if aux_version and not check_version(MAX_VERSIONS, aux_version, binary.header.machine_type):\n+            if aux_version and not check_version(MAX_VERSIONS, aux_version, binary.concrete.header.machine_type):\n                 print(f'{filename}: symbol {symbol.name} from unsupported version {version}')\n                 ok = False\n     return ok\n \n def check_exported_symbols(binary) -> bool:\n     ok: bool = True\n+    if binary.abstract.header.object_type == lief.OBJECT_TYPES.LIBRARY:\n+        return ok\n \n-    for symbol in binary.dynamic_symbols:\n+    for symbol in binary.concrete.dynamic_symbols:\n         if not symbol.exported:\n             continue\n         name = symbol.name\n-        if binary.header.machine_type == lief.ELF.ARCH.RISCV or name in IGNORE_EXPORTS:\n+        if binary.concrete.header.machine_type == lief.ELF.ARCH.RISCV or name in IGNORE_EXPORTS:\n             continue\n-        print(f'{binary.name}: export of symbol {name} not allowed!')\n+        print(f'{filename}: export of symbol {name} not allowed!')\n         ok = False\n     return ok\n \n def check_ELF_libraries(binary) -> bool:\n     ok: bool = True\n-    for library in binary.libraries:\n+    for library in binary.concrete.libraries:\n         if library not in ELF_ALLOWED_LIBRARIES:\n             print(f'{filename}: {library} is not in ALLOWED_LIBRARIES!')\n             ok = False\n     return ok\n \n def check_MACHO_libraries(binary) -> bool:\n     ok: bool = True\n-    for dylib in binary.libraries:\n-        split = dylib.name.split('/')\n-        if split[-1] not in MACHO_ALLOWED_LIBRARIES:\n-            print(f'{split[-1]} is not in ALLOWED_LIBRARIES!')\n+    for dylib in binary.concrete.libraries:\n+        library = dylib.name.split('/')[-1]\n+        if binary.abstract.header.object_type == lief.OBJECT_TYPES.LIBRARY and library == 'libbitcoinconsensus.0.dylib':",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1039517621",
      "id" : 1039517621,
      "in_reply_to_id" : 885637804,
      "line" : 223,
      "node_id" : "PRRC_kwDOABII58499ce1",
      "original_commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "original_line" : 223,
      "original_position" : 98,
      "original_start_line" : null,
      "path" : "contrib/devtools/symbol-check.py",
      "position" : 98,
      "pull_request_review_id" : 1204404204,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039517621/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-05T12:16:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039517621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1039518228"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039518228"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think the PR should be renamed then? If it's not actually doing the thing in the PR title.",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2022-12-05T12:15:42Z",
      "diff_hunk" : "@@ -176,77 +180,82 @@ def check_version(max_versions, version, arch) -> bool:\n def check_imported_symbols(binary) -> bool:\n     ok: bool = True\n \n-    for symbol in binary.imported_symbols:\n+    for symbol in binary.concrete.imported_symbols:\n         if not symbol.imported:\n             continue\n \n         version = symbol.symbol_version if symbol.has_version else None\n \n         if version:\n             aux_version = version.symbol_version_auxiliary.name if version.has_auxiliary_version else None\n-            if aux_version and not check_version(MAX_VERSIONS, aux_version, binary.header.machine_type):\n+            if aux_version and not check_version(MAX_VERSIONS, aux_version, binary.concrete.header.machine_type):\n                 print(f'{filename}: symbol {symbol.name} from unsupported version {version}')\n                 ok = False\n     return ok\n \n def check_exported_symbols(binary) -> bool:\n     ok: bool = True\n+    if binary.abstract.header.object_type == lief.OBJECT_TYPES.LIBRARY:\n+        return ok",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1039518228",
      "id" : 1039518228,
      "in_reply_to_id" : 863728938,
      "line" : 199,
      "node_id" : "PRRC_kwDOABII58499coU",
      "original_commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "original_line" : 199,
      "original_position" : 66,
      "original_start_line" : null,
      "path" : "contrib/devtools/symbol-check.py",
      "position" : 66,
      "pull_request_review_id" : 1204404204,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039518228/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-05T12:16:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039518228",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Is this change (going to be) dependant on #24994, or not? If so, maybe mark as a draft for now, and add that to the PR description?\r\n\r\nDrafted.",
      "created_at" : "2022-12-14T13:49:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#issuecomment-1351391528",
      "id" : 1351391528,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25020",
      "node_id" : "IC_kwDOABII585QjJko",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1351391528/reactions"
      },
      "updated_at" : "2022-12-14T13:49:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1351391528",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1106015544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1106015544"
         }
      },
      "author_association" : "MEMBER",
      "body" : "NACK. This is accomodating a bug (in the DLL), and doing so in such a way, that it could leak into the actual binaries.",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2023-02-14T15:52:53Z",
      "diff_hunk" : "@@ -141,14 +142,17 @@\n }\n \n PE_ALLOWED_LIBRARIES = {\n+# libbitcoinconsensus-0.dll, bitcoind.exe and bitcoin-qt.exe\n 'ADVAPI32.dll', # security & registry\n-'IPHLPAPI.DLL', # IP helper API\n 'KERNEL32.dll', # win32 base APIs\n 'msvcrt.dll', # C standard library for MSVC\n+'libssp-0.dll', # mingw-w64 stack smashing protection",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1106015544",
      "id" : 1106015544,
      "line" : 149,
      "node_id" : "PRRC_kwDOABII585B7HU4",
      "original_commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "original_line" : 149,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "contrib/devtools/symbol-check.py",
      "position" : 33,
      "pull_request_review_id" : 1297890927,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1106015544/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-14T15:52:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1106015544",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1106019516"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1106019516"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> This is accomodating a bug...\r\n\r\nWhich one?",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2023-02-14T15:55:52Z",
      "diff_hunk" : "@@ -141,14 +142,17 @@\n }\n \n PE_ALLOWED_LIBRARIES = {\n+# libbitcoinconsensus-0.dll, bitcoind.exe and bitcoin-qt.exe\n 'ADVAPI32.dll', # security & registry\n-'IPHLPAPI.DLL', # IP helper API\n 'KERNEL32.dll', # win32 base APIs\n 'msvcrt.dll', # C standard library for MSVC\n+'libssp-0.dll', # mingw-w64 stack smashing protection",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1106019516",
      "id" : 1106019516,
      "in_reply_to_id" : 1106015544,
      "line" : 149,
      "node_id" : "PRRC_kwDOABII585B7IS8",
      "original_commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "original_line" : 149,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "contrib/devtools/symbol-check.py",
      "position" : 33,
      "pull_request_review_id" : 1297897089,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1106019516/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-14T15:55:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1106019516",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1106020657"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1106020657"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Non-static libssp.",
      "commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "created_at" : "2023-02-14T15:56:42Z",
      "diff_hunk" : "@@ -141,14 +142,17 @@\n }\n \n PE_ALLOWED_LIBRARIES = {\n+# libbitcoinconsensus-0.dll, bitcoind.exe and bitcoin-qt.exe\n 'ADVAPI32.dll', # security & registry\n-'IPHLPAPI.DLL', # IP helper API\n 'KERNEL32.dll', # win32 base APIs\n 'msvcrt.dll', # C standard library for MSVC\n+'libssp-0.dll', # mingw-w64 stack smashing protection",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#discussion_r1106020657",
      "id" : 1106020657,
      "in_reply_to_id" : 1106015544,
      "line" : 149,
      "node_id" : "PRRC_kwDOABII585B7Ikx",
      "original_commit_id" : "39947be795102e8a8e11aba9a13d9cfe768a092c",
      "original_line" : 149,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "contrib/devtools/symbol-check.py",
      "position" : 33,
      "pull_request_review_id" : 1297899199,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25020",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1106020657/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-14T15:56:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1106020657",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > Is this change (going to be) dependant on #24994, or not? If so, maybe mark as a draft for now, and add that to the PR description?\r\n> \r\n> Drafted.\r\n\r\nClosing.",
      "created_at" : "2023-02-23T14:35:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25020#issuecomment-1441900180",
      "id" : 1441900180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25020",
      "node_id" : "IC_kwDOABII585V8aaU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1441900180/reactions"
      },
      "updated_at" : "2023-02-23T14:35:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1441900180",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
