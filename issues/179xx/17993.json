{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Rationale:\r\n\r\nThe height based polling in the GUI is an issue on chain reorgs. Any new tip signal with the same height as the one that it's cached in the model was not triggering the GUI update (interpreting it as the same same block when it could receive a different one). Ending up with bad information presented in the GUI.\r\n\r\nThis PR essentially changes the last cached height to be a last cached block hash.\r\n\r\n---\r\n\r\nOld historical information of this PR.\r\n\r\nAs the tip height is cached and updated via signaling in clientModel, there is no need to continue locking `cs_main` on every balance poll (`m_node.getNumBlocks()` method call).\r\n\r\nExtra topic:\r\n\r\nWould suggest to change the `cachedNumBlocks` field inside `walletModel` to a more understandable name, maybe `nLastBalanceUpdateHeight`.\r\n\r\nAnd finally, this will have the equal height reorg issue mentioned [here](https://github.com/bitcoin/bitcoin/pull/17905#issuecomment-577324304), whatever is presented to fix it, this should use the same flow too.\r\n\r\n**[Edit - 24/01/2020]**\r\n\r\nHave added #[17905](https://github.com/bitcoin/bitcoin/pull/17905#issuecomment-577324304) comment fix here too.",
   "closed_at" : "2020-05-29T09:02:14Z",
   "closed_by" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
      "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
      "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
      "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
      "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/jonasschnelli",
      "id" : 178464,
      "login" : "jonasschnelli",
      "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
      "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
      "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
      "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/jonasschnelli"
   },
   "comments" : 22,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17993/comments",
   "created_at" : "2020-01-23T18:39:06Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17993/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/17993",
   "id" : 554333550,
   "labels" : [
      {
         "color" : "02d7e1",
         "default" : false,
         "description" : null,
         "id" : 135946,
         "name" : "GUI",
         "node_id" : "MDU6TGFiZWwxMzU5NDY=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17993/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0MzY2NTA2NjYw",
   "number" : 17993,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/17993.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17993",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/17993.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17993"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "gui: Balance/TxStatus polling update based on last block hash.",
   "updated_at" : "2020-05-29T09:02:14Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17993",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/5377650?v=4",
      "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
      "followers_url" : "https://api.github.com/users/furszy/followers",
      "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
      "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/furszy",
      "id" : 5377650,
      "login" : "furszy",
      "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
      "organizations_url" : "https://api.github.com/users/furszy/orgs",
      "received_events_url" : "https://api.github.com/users/furszy/received_events",
      "repos_url" : "https://api.github.com/users/furszy/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/furszy"
   }
}
