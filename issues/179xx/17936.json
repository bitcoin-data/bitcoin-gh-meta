{
   "active_lock_reason" : null,
   "assignee" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
      "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
      "followers_url" : "https://api.github.com/users/achow101/followers",
      "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/achow101",
      "id" : 3782274,
      "login" : "achow101",
      "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
      "organizations_url" : "https://api.github.com/users/achow101/orgs",
      "received_events_url" : "https://api.github.com/users/achow101/received_events",
      "repos_url" : "https://api.github.com/users/achow101/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/achow101"
   },
   "assignees" : [
      {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   ],
   "author_association" : "NONE",
   "body" : "**Is your feature request related to a problem? Please describe.**\r\n\r\nIn the context of creating a sophisticated wallet management application, a Bitcoin exchange wants to send unconfirmed funds that he *knows* are safe because they are from an external wallet under its control. It is crucial that this these transactions be confirmed as soon as possible. Not being able to spend the unconfirmed funds effectively doubles the transaction time.\r\n\r\nThe developpers of this wallet management solution are using the Bitcoin Core RPC. They would prefer to continue relaying on Bitcoin Core to create the transaction and fund it with the coinselection of Bitcoin Core. As such, they want to keep using the \"sendtoaddress\" RPC. \r\n\r\nHowever, it would appear that Bitcoin Core considers unconfirmed outputs that are from an external wallet as not \"safe\" and does not include them in the coin selection when using the \"sendtoaddress\" and \"fundrawtransaction\" RPC.\r\n\r\nI believe that this is a well-intended policy to protect some users from themselves, and that it assumes that advanced users will be able to bypass it by using \"createrawtransaction\". However, the degree of complexity of using \"createrawtransaction\" is significantly higher than \"sendtoaddress\" and can actually make it more likely to do a mistake. In addition, using the wallet RPC already denotes some degree of sophistication. \r\n\r\nA few wallets, for example Electrum, allows users to spend unconfirmed funds. This has been useful personally for me on many occasion. However, when building applications, one cannot rely on such wallets and it is always preferable to use Bitcoin Core wallet itself, in my opinion. \r\n\r\nI think a good compromise would be to have a configuration  (.conf) that allows unconfirmed outputs to be included in the \"sendtoaddress\" and \"fundrawtransaction\" RPC calls.\r\n\r\n**Describe the solution you'd like**\r\n\r\nA configuration that allow unconfirmed outputs to be included in the \"sendtoaddress\" and \"fundrawtransaction\" RPC calls.\r\n\r\nAnother option would be to add a boolean flag (default=false) like \"allow_unconfirmed\" in the RPC on a per-call basis. \r\n\r\n**Describe alternatives you've considered**\r\nUsing createrawtransaction \r\n\r\n\r\n**References**\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/af05bd9e1e362c3148e3b434b7fac96a9a5155a1/src/wallet/rpcwallet.cpp#L2835\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/ac61ec9da6793f00b29ba11f784b9b1c3ae662e9/src/wallet/wallet.h#L556\r\n\r\n`\\\"safe\\\" : xxx  (bool) Whether this output is considered safe to spend. Unconfirmed transactions  from outside keys and unconfirmed replacement transactions are considered unsafe and are not eligible for spending by fundrawtransaction and sendtoaddress.`",
   "closed_at" : "2023-04-30T21:17:53Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
      "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
      "followers_url" : "https://api.github.com/users/achow101/followers",
      "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/achow101",
      "id" : 3782274,
      "login" : "achow101",
      "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
      "organizations_url" : "https://api.github.com/users/achow101/orgs",
      "received_events_url" : "https://api.github.com/users/achow101/received_events",
      "repos_url" : "https://api.github.com/users/achow101/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/achow101"
   },
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17936/comments",
   "created_at" : "2020-01-15T21:46:16Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17936/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/17936",
   "id" : 550447444,
   "labels" : [
      {
         "color" : "7cf575",
         "default" : false,
         "description" : null,
         "id" : 64583,
         "name" : "Feature",
         "node_id" : "MDU6TGFiZWw2NDU4Mw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature"
      },
      {
         "color" : "08a781",
         "default" : false,
         "description" : null,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17936/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU1NTA0NDc0NDQ=",
   "number" : 17936,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 1,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 1,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17936/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "state_reason" : "not_planned",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17936/timeline",
   "title" : "Consider unconfirmed unspent outputs from external wallet as safe for spending for \"sendtoaddress\" and \"fundrawtransaction\" RPC",
   "updated_at" : "2023-04-30T21:17:54Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17936",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/7997682?v=4",
      "events_url" : "https://api.github.com/users/FrancisPouliot/events{/privacy}",
      "followers_url" : "https://api.github.com/users/FrancisPouliot/followers",
      "following_url" : "https://api.github.com/users/FrancisPouliot/following{/other_user}",
      "gists_url" : "https://api.github.com/users/FrancisPouliot/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/FrancisPouliot",
      "id" : 7997682,
      "login" : "FrancisPouliot",
      "node_id" : "MDQ6VXNlcjc5OTc2ODI=",
      "organizations_url" : "https://api.github.com/users/FrancisPouliot/orgs",
      "received_events_url" : "https://api.github.com/users/FrancisPouliot/received_events",
      "repos_url" : "https://api.github.com/users/FrancisPouliot/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/FrancisPouliot/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/FrancisPouliot/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/FrancisPouliot"
   }
}
