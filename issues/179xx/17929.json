{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "This PR adds `-Wl,O2` to our gitian and guix LDFLAGS. This makes the linker perform certain optimisations (and is different from LTO).\r\n\r\nAny -O argument will enable optimizations in GNU ld. We can use -O2 here, as this matches our compile flags. Note that this would also enable additional optimizations if using the lld or gold linkers, when compared to -O0.\r\n\r\nA nice writeup + diagrams of some of these optimizations is  available here: http://lwn.net/Articles/192624/.\r\n\r\n#### master\r\n```bash\r\n# bitcoind\r\nHistogram for `.gnu.hash' bucket list length (total of 3 buckets)\r\n Length  Number     % of total  Coverage\r\n      0  1          ( 33.3%)       0.0%\r\n      1  0          (  0.0%)       0.0%\r\n      2  1          ( 33.3%)      40.0%\r\n      3  1          ( 33.3%)     100.0%\r\n```\r\n```bash\r\n# bitcoin-qt \r\nHistogram for `.gnu.hash' bucket list length (total of 3 buckets)\r\n Length  Number     % of total  Coverage\r\n      0  0          (  0.0%)       0.0%\r\n      1  1          ( 33.3%)      10.0%\r\n      2  0          (  0.0%)      10.0%\r\n      3  0          (  0.0%)      10.0%\r\n      4  1          ( 33.3%)      50.0%\r\n      5  1          ( 33.3%)     100.0%\r\n```\r\n\r\n#### this PR:\r\n```bash\r\n# bitcoind\r\nHistogram for `.gnu.hash' bucket list length (total of 8 buckets)\r\n Length  Number     % of total  Coverage\r\n      0  3          ( 37.5%)       0.0%\r\n      1  5          ( 62.5%)     100.0%\r\n```\r\n```bash\r\n# bitcoin-qt\r\nHistogram for `.gnu.hash' bucket list length (total of 19 buckets)\r\n Length  Number     % of total  Coverage\r\n      0  9          ( 47.4%)       0.0%\r\n      1  10         ( 52.6%)     100.0%\r\n```\r\n\r\n#### GNU ld -O\r\n\r\n> If level is a numeric values greater than zero ld optimizes the output. This might take significantly longer and therefore probably should only be enabled for the final binary. At the moment this option only affects ELF shared library generation. Future releases of the linker may make more use of this option. Also currently there is no difference in the linkerâs behaviour for different non-zero values of this option. Again this may change with future releases.\r\n\r\n#### lld -O\r\n\r\n> Optimize output file size\r\n",
   "closed_at" : "2020-04-15T07:18:01Z",
   "closed_by" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "node_id" : "MDQ6VXNlcjg2MzczMA==",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   },
   "comments" : 14,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17929/comments",
   "created_at" : "2020-01-15T12:01:27Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17929/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/17929",
   "id" : 550144451,
   "labels" : [
      {
         "color" : "5319e7",
         "default" : false,
         "description" : null,
         "id" : 61889416,
         "name" : "Build system",
         "node_id" : "MDU6TGFiZWw2MTg4OTQxNg==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system"
      },
      {
         "color" : "bfd4f2",
         "default" : false,
         "description" : "",
         "id" : 1947349437,
         "name" : "Needs Guix build",
         "node_id" : "MDU6TGFiZWwxOTQ3MzQ5NDM3",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20Guix%20build"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17929/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0MzYzMTAyODk4",
   "number" : 17929,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/17929.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17929",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/17929.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17929"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "build: add linker optimisation flags to gitian & guix (Linux)",
   "updated_at" : "2020-04-15T07:19:39Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17929",
   "user" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
      "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fanquake/followers",
      "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fanquake",
      "id" : 863730,
      "login" : "fanquake",
      "node_id" : "MDQ6VXNlcjg2MzczMA==",
      "organizations_url" : "https://api.github.com/users/fanquake/orgs",
      "received_events_url" : "https://api.github.com/users/fanquake/received_events",
      "repos_url" : "https://api.github.com/users/fanquake/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fanquake"
   }
}
