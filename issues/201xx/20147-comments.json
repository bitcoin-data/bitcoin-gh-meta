[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2020-10-14T20:52:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-708653738",
      "id" : 708653738,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwODY1MzczOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-14T20:52:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/708653738",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 9e5626d \r\n\r\n```\r\n$  ./test/lint/git-subtree-check.sh src/secp256k1\r\nsrc/secp256k1 in HEAD currently refers to tree c79797189781d6656eba6cb155c249c57b4f5c9a\r\nsrc/secp256k1 in HEAD was last updated in commit 52380bf304b1c02dda23f1e2fad0159e29b2f7a2 (tree c79797189781d6656eba6cb155c249c57b4f5c9a)\r\nsrc/secp256k1 in HEAD was last updated to upstream commit c6b6b8f1bb044d7d1aa065ebb674adde98a36a8e (tree c79797189781d6656eba6cb155c249c57b4f5c9a)\r\nGOOD\r\n```",
      "created_at" : "2020-10-14T21:06:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-708660206",
      "id" : 708660206,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwODY2MDIwNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-14T21:06:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/708660206",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jamesob this would be a good PR for you to throw into bitcoinperf.",
      "created_at" : "2020-10-15T03:18:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-708869877",
      "id" : 708869877,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwODg2OTg3Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-15T03:18:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/708869877",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ran a local IBD comparison on this for 8000 blocks (height 500_000 - 508_000) and to my surprise didn't see any performance difference. Compared the HEAD of this PR to the commit in master preceding it (https://github.com/bitcoin/bitcoin/commit/c2c4dbaebd955ad2829364f7fa5b8169ca1ba6b9). Could be that this platform is bottlenecked by IO and not CPU?\r\n\r\n![ibd local range 500000 508000](https://user-images.githubusercontent.com/73197/96265349-52482100-0f93-11eb-9ff8-bb4c921f76cb.png)\r\n\r\n### commands index\r\n|          bench name           |                                                                                                    command                                                                                                     |\r\n|-------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| ibd.local.range.500000.508000 | `bitcoind -dbcache=300 -debug=coindb -debug=bench -listen=0 -connect=0 -addnode=127.0.0.1:8888 -prune=9999999 -printtoconsole=0 -assumevalid=000000000000000000176c192f42ad13ab159fdb20198b87e7ba3c001e47b876` |\r\n\r\n\r\n### #20147 vs. c2c4dbaebd955ad2829364f7fa5b8169ca1ba6b9 (absolute)\r\n|                 bench name                 |  x  |           #20147           | c2c4dbaebd955ad2829364f7fa5b8169ca1ba6b9 |\r\n|--------------------------------------------|----:|----------------------------|------------------------------------------|\r\n| ibd.local.range.500000.508000.total_secs   |   2 | 737.8656 (Â± 3.1841)        | 738.3541 (Â± 7.6443)                      |\r\n| ibd.local.range.500000.508000.peak_rss_KiB |   2 | 1746294.0000 (Â± 2362.0000) | 1756260.0000 (Â± 3168.0000)               |\r\n\r\n\r\n### #20147 vs. c2c4dbaebd955ad2829364f7fa5b8169ca1ba6b9 (relative)\r\n|                 bench name                 |  x  | #20147 | c2c4dbaebd955ad2829364f7fa5b8169ca1ba6b9 |\r\n|--------------------------------------------|----:|-------:|-----------------------------------------:|\r\n| ibd.local.range.500000.508000.total_secs   |   2 |      1 |                                    1.001 |\r\n| ibd.local.range.500000.508000.peak_rss_KiB |   2 |      1 |                                    1.006 |\r\n\r\n\r\n",
      "created_at" : "2020-10-16T13:40:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-710053770",
      "id" : 710053770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMDA1Mzc3MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-16T13:40:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/710053770",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jamesob That's certainly possible. With such a low dbcache, it's also possible it's just spending a lot of time in in preparing leveldb updates to flush.",
      "created_at" : "2020-10-16T16:07:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-710149143",
      "id" : 710149143,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMDE0OTE0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-16T16:07:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/710149143",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Your `assumevalid` block is at height 522,000 so you're not checking signatures, I think.",
      "created_at" : "2020-10-16T18:07:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-710344157",
      "id" : 710344157,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMDM0NDE1Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-16T18:07:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/710344157",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Great call @Sjors, that should've occurred to me (d'oh). In any case, here are some much less surprising results showing improvement after disabled assumevalid.\r\n\r\n![ibd local range 500000 508000](https://user-images.githubusercontent.com/73197/96349121-754e0000-107b-11eb-84e0-e1a0351e2165.png)\r\n\r\n### commands index\r\n|          bench name           |                                                                     command                                                                      |\r\n|-------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| ibd.local.range.500000.508000 | `bitcoind -dbcache=300 -debug=coindb -debug=bench -listen=0 -connect=0 -addnode=127.0.0.1:8888 -prune=9999999 -printtoconsole=0 \\-assumevalid=0` |\r\n\r\n\r\n### #20147 vs. c2c4dbae (absolute)\r\n|                 bench name                 |  x  |           #20147            |          c2c4dbae          |\r\n|--------------------------------------------|----:|-----------------------------|----------------------------|\r\n| ibd.local.range.500000.508000.total_secs   |   2 | 1529.8273 (Â± 5.1097)        | 1780.5817 (Â± 5.7187)       |\r\n| ibd.local.range.500000.508000.peak_rss_KiB |   2 | 1718228.0000 (Â± 17852.0000) | 1686864.0000 (Â± 6596.0000) |\r\n\r\n\r\n### #20147 vs. c2c4dbae (relative)\r\n|                 bench name                 |  x  | #20147 | c2c4dbae |\r\n|--------------------------------------------|----:|-------:|---------:|\r\n| ibd.local.range.500000.508000.total_secs   |   2 |  1.000 |    1.164 |\r\n| ibd.local.range.500000.508000.peak_rss_KiB |   2 |  1.019 |    1.000 |\r\n\r\n\r\nFor kicks, here's the utxo cache flush history (I need to normalize the times in this graph...).\r\n\r\n![ibd local range 500000 508000-flush-history](https://user-images.githubusercontent.com/73197/96349130-85fe7600-107b-11eb-9824-814a817a841d.png)\r\n\r\n\r\n",
      "created_at" : "2020-10-17T17:22:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-711051877",
      "id" : 711051877,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMTA1MTg3Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-17T17:22:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/711051877",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @jamesob ð ",
      "created_at" : "2020-10-19T01:00:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20147#issuecomment-711454462",
      "id" : 711454462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20147",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMTQ1NDQ2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-19T01:00:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/711454462",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
