[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19972 (tests/net: Add fuzzing harness for node eviction logic. Make node eviction logic testable. by practicalswift)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-10-20T07:44:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20193#issuecomment-712661633",
      "id" : 712661633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20193",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMjY2MTYzMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-20T07:44:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/712661633",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, but please add a `AttemptToEvictConnection` unit test for this scenario.\r\n\r\nSee #19966 on ideas on how to make `AttemptToEvictConnection` testable, or feel free to cherry-pick in 818dd2a04da1ae7329c58a79a4fade5ec62c549d and df1328fcecc3f359574fa53979402894b4a73a12 from #19972 (\"tests/net: Add fuzzing harness for node eviction logic. Make node eviction logic testable.\") .",
      "created_at" : "2020-10-20T07:49:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20193#issuecomment-712664280",
      "id" : 712664280,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20193",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMjY2NDI4MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-20T07:49:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/712664280",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I agree, but ISTM (a) the code needs refactoring to be unit-testable, (b) refactoring of critical code to make it testable is low priority for reviewers, high risk, and unlikely to be merged (unless someone of v high stature drives it), and (c) ATEC improvements and fixes without tests do see review and have been merged over the years, so I didn't plan to gate this (essentially one-line improvement) on critical refactoring and technical debt reduction.",
      "created_at" : "2020-10-20T08:01:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20193#issuecomment-712670373",
      "id" : 712670373,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20193",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMjY3MDM3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-20T13:15:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/712670373",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonatack \r\n\r\n> unlikely to be merged (unless someone of v high stature drives it)\r\n\r\nI find it very concerning that you're worried that you're not \"high stature\"(!) enough to suggest such a change.\r\n\r\nEither it is in the best interest of our users to have your PR merged (based on _pure_ code and concept review), or it is not.\r\n\r\nWho wrote the code simply doesn't enter that equation.\r\n\r\nFWIW I pledge to never let the probability of a ACK/NACK for a given PR to be conditional on _who_ submitted the PR. That would be ridiculous and obviously not in the best interest of our users.",
      "created_at" : "2020-10-20T08:48:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20193#issuecomment-712696827",
      "id" : 712696827,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20193",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMjY5NjgyNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-20T13:57:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/712696827",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ISTM the bottlenecks to refactoring critical code for testability are risk, expert review, and low review interest. I could refactor ATEC but that doesn't mean people will be eager to review it, and I don't think it's realistic to gate a one-line improvement on a larger technical debt reduction bottleneck like that. I don't believe the previous changes to ATEC have been gated on it either. There are clearly good reasons for that? Perhaps raise this larger topic in an issue or core dev meeting rather than here?",
      "created_at" : "2020-10-20T09:06:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20193#issuecomment-712707745",
      "id" : 712707745,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20193",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMjcwNzc0NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-20T13:22:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/712707745",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I could refactor ATEC but that doesn't mean people will be eager to review it, â¦\r\n\r\nFWIW I would be very eager to review a change which made `AttemptToEvictConnection` unit testable. As demonstrated it can be made unit testable with only few lines of code.\r\n\r\nI've always been somewhat amazed about how little testing `AttemptToEvictConnection` has considering the importance of that function for the network health. See #16660 (August 2019) and #19966 (September 2020) for context.",
      "created_at" : "2020-10-20T09:36:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20193#issuecomment-712725393",
      "id" : 712725393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20193",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMjcyNTM5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-20T09:36:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/712725393",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "As the only person until now who reviewed your ATEC refactoring, I'm aware. I do think global refactoring and writing tests for ATEC is orthogonal and out of scope to this one-line change, and far harder to have reviewed and merged, which is why it was not proposed in the parent #19670. Nor, for that matter, in the other parent PR #19991 that had no tests. Both of these were larger changes. ð¤·ââ ",
      "created_at" : "2020-10-20T09:41:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20193#issuecomment-712728234",
      "id" : 712728234,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20193",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMjcyODIzNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-20T13:50:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/712728234",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Nor, for that matter, in the other parent PR #19991 that had no tests.\r\n\r\nBtw, https://github.com/bitcoin/bitcoin/pull/20172/commits/da8b1092fc2d5fa5ee9da3310dae16d4c919bc1b in #20172 adds a functional test that checks alternative port for Tor onion connections.",
      "created_at" : "2020-10-20T13:01:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20193#issuecomment-712832514",
      "id" : 712832514,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20193",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMjgzMjUxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-20T13:02:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/712832514",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Good!",
      "created_at" : "2020-10-20T13:06:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20193#issuecomment-712835724",
      "id" : 712835724,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20193",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMjgzNTcyNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-20T13:06:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/712835724",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
