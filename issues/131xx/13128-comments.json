[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13128#discussion_r187983294"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13128"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/187983294"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Might as well rename to `m_cs_fee_estimator` according to developer notes.",
      "commit_id" : "dae1423e5aaa9923f1b11be4650e343f3235d46a",
      "created_at" : "2018-05-14T14:52:56Z",
      "diff_hunk" : "@@ -230,10 +230,12 @@ class CBlockPolicyEstimator\n     unsigned int HighestTargetTracked(FeeEstimateHorizon horizon) const;\n \n private:\n-    unsigned int nBestSeenHeight;\n-    unsigned int firstRecordedHeight;\n-    unsigned int historicalFirst;\n-    unsigned int historicalBest;\n+    mutable CCriticalSection cs_feeEstimator;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13128#discussion_r187983294",
      "id" : 187983294,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4Nzk4MzI5NA==",
      "original_commit_id" : "827c86802e736d8cdd1538fcf27292df859e303d",
      "original_position" : 8,
      "path" : "src/policy/fees.h",
      "position" : null,
      "pull_request_review_id" : 119870307,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13128",
      "updated_at" : "2018-12-02T23:14:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/187983294",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke Good idea. Renamed from `cs_feeEstimator` to `m_cs_fee_estimator`. Please re-review :-)",
      "created_at" : "2018-05-14T15:07:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13128#issuecomment-388851373",
      "id" : 388851373,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13128",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM4ODg1MTM3Mw==",
      "updated_at" : "2018-05-14T15:12:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/388851373",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--5d09a71f8925f3f132321140b44b946d-->The last travis run for this pull request was 69 days ago and is thus outdated. To trigger a fresh travis build, this pull request should be closed and re-opened.",
      "created_at" : "2018-07-22T23:49:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13128#issuecomment-406906704",
      "id" : 406906704,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13128",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwNjkwNjcwNA==",
      "updated_at" : "2018-07-22T23:49:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/406906704",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke Would you mind re-review this locking PR you looked at before? :-)",
      "created_at" : "2018-08-27T16:22:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13128#issuecomment-416282681",
      "id" : 416282681,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13128",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQxNjI4MjY4MQ==",
      "updated_at" : "2018-08-27T16:22:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/416282681",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13128#discussion_r214530826"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13128"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214530826"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think we need exclusive locking here, as `GetMaxConfirms` is a read so concurrent access wouldn't result in incoherent data.",
      "commit_id" : "dae1423e5aaa9923f1b11be4650e343f3235d46a",
      "created_at" : "2018-09-02T07:07:12Z",
      "diff_hunk" : "@@ -710,6 +711,7 @@ CFeeRate CBlockPolicyEstimator::estimateRawFee(int confTarget, double successThr\n \n unsigned int CBlockPolicyEstimator::HighestTargetTracked(FeeEstimateHorizon horizon) const\n {\n+    LOCK(m_cs_fee_estimator);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13128#discussion_r214530826",
      "id" : 214530826,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNDUzMDgyNg==",
      "original_commit_id" : "a4d815d5d1ee6b561d855fc60808fc2986bcf9c5",
      "original_position" : 48,
      "path" : "src/policy/fees.cpp",
      "position" : 40,
      "pull_request_review_id" : 151611354,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13128",
      "updated_at" : "2018-12-02T23:14:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214530826",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13128#discussion_r214530840"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13128"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214530840"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`get` is a read of the ptr value, which is only updated in the constructor, so this lock is unnecessary AFAICT. `PT_GUARDED_BY` could be more appropriate.",
      "commit_id" : "dae1423e5aaa9923f1b11be4650e343f3235d46a",
      "created_at" : "2018-09-02T07:07:44Z",
      "diff_hunk" : "@@ -672,6 +672,8 @@ CFeeRate CBlockPolicyEstimator::estimateFee(int confTarget) const\n \n CFeeRate CBlockPolicyEstimator::estimateRawFee(int confTarget, double successThreshold, FeeEstimateHorizon horizon, EstimationResult* result) const\n {\n+    LOCK(m_cs_fee_estimator);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13128#discussion_r214530840",
      "id" : 214530840,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIxNDUzMDg0MA==",
      "original_commit_id" : "a4d815d5d1ee6b561d855fc60808fc2986bcf9c5",
      "original_position" : 31,
      "path" : "src/policy/fees.cpp",
      "position" : null,
      "pull_request_review_id" : 151611364,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13128",
      "updated_at" : "2018-12-02T23:14:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/214530840",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#10443](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/10443.html) (Add fee_est tool for debugging fee estimation code by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-09-20T22:37:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13128#issuecomment-423356718",
      "id" : 423356718,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13128",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyMzM1NjcxOA==",
      "updated_at" : "2018-11-06T22:47:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/423356718",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Empact @MarcoFalke Updated. Would you mind re-reviewing? The current version is annotations only, so no change in locking. In other words: this PR changes only compile-time checking and no runtime behaviour. Should hence hopefully be trivial to review :-)",
      "created_at" : "2018-10-08T13:20:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13128#issuecomment-427829976",
      "id" : 427829976,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13128",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzgyOTk3Ng==",
      "updated_at" : "2018-10-08T13:20:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427829976",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 1a01e1c120809b19ddc9c9c6ee5d6686a90f55b3",
      "created_at" : "2018-12-02T07:11:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13128#issuecomment-443486904",
      "id" : 443486904,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13128",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0MzQ4NjkwNA==",
      "updated_at" : "2018-12-02T07:11:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/443486904",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/11154118?v=4",
         "events_url" : "https://api.github.com/users/ken2812221/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ken2812221/followers",
         "following_url" : "https://api.github.com/users/ken2812221/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ken2812221/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ken2812221",
         "id" : 11154118,
         "login" : "ken2812221",
         "node_id" : "MDQ6VXNlcjExMTU0MTE4",
         "organizations_url" : "https://api.github.com/users/ken2812221/orgs",
         "received_events_url" : "https://api.github.com/users/ken2812221/received_events",
         "repos_url" : "https://api.github.com/users/ken2812221/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ken2812221/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ken2812221/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ken2812221"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/13128#discussion_r238088405"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13128"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/238088405"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: did you try marking these `PT_GUARDED_BY`? Seems it would be appropriate, based on the lock in `estimateRawFee`.",
      "commit_id" : "dae1423e5aaa9923f1b11be4650e343f3235d46a",
      "created_at" : "2018-12-02T08:01:53Z",
      "diff_hunk" : "@@ -241,34 +243,32 @@ class CBlockPolicyEstimator\n     };\n \n     // map of txids to information about that transaction\n-    std::map<uint256, TxStatsInfo> mapMemPoolTxs;\n+    std::map<uint256, TxStatsInfo> mapMemPoolTxs GUARDED_BY(m_cs_fee_estimator);\n \n     /** Classes to track historical data on transaction confirmations */\n     std::unique_ptr<TxConfirmStats> feeStats;\n     std::unique_ptr<TxConfirmStats> shortStats;\n     std::unique_ptr<TxConfirmStats> longStats;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13128#discussion_r238088405",
      "id" : 238088405,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDIzODA4ODQwNQ==",
      "original_commit_id" : "1a01e1c120809b19ddc9c9c6ee5d6686a90f55b3",
      "original_position" : 27,
      "path" : "src/policy/fees.h",
      "position" : null,
      "pull_request_review_id" : 180551252,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/13128",
      "updated_at" : "2018-12-02T23:14:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/238088405",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5470?v=4",
         "events_url" : "https://api.github.com/users/Empact/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Empact/followers",
         "following_url" : "https://api.github.com/users/Empact/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Empact/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Empact",
         "id" : 5470,
         "login" : "Empact",
         "node_id" : "MDQ6VXNlcjU0NzA=",
         "organizations_url" : "https://api.github.com/users/Empact/orgs",
         "received_events_url" : "https://api.github.com/users/Empact/received_events",
         "repos_url" : "https://api.github.com/users/Empact/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Empact/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Empact/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Empact"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Any chance of getting this reviewed? It is a compile time check only :-)",
      "created_at" : "2018-12-19T15:29:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13128#issuecomment-448635770",
      "id" : 448635770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13128",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0ODYzNTc3MA==",
      "updated_at" : "2018-12-19T15:30:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/448635770",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Adding `EXCLUSIVE_LOCKS_REQUIRED(cs_feeEstimator)` to `processBlockTx` caused a bunch of problems in #10443 due to `cs_feeEstimator` being a private member. In [pr/fee.30](https://github.com/ryanofsky/bitcoin/commits/pr/fee.30), `CTxMemPool::removeForBlock` would call `CBlockPolicyEstimator::processBlock`, which would lock `cs_feeEstimator`, and then call a lambda passed from the caller to loop through transactions, calling `CBlockPolicyEstimator::processTx` which would call `CBlockPolicyEstimator::processBlockTx`. The new annotation to added `processBlockTx` caused the compiler to error on these calls.\r\n\r\nThe errors were spurious, since `cs_feeEstimator` was locked the entire time, but because `cs_feeEstimator` was a private member of `CBlockPolicyEstimator`, there was no way to annotate the lambda asserting that `cs_feeEstimator` was locked. Making the mutex public would have solved the problem, but instead in [pr/fee.31](https://github.com/ryanofsky/bitcoin/commits/pr/fee.31) I opted to fix the problem by hiding the `processBlockTx` call in another callback to be less invasive and simplify some other things.\r\n\r\nJust wanted to note this because some people were curious about it. I thought it was interesting because:\r\n\r\n- There can sometimes be a tension between wanting to make mutexes private, and wanting to make assertions about them in code outside the class.\r\n\r\n- There doesn't seem to be any way to annotate a `std::function` variable asserting that a mutex must always be locked before the function is called, and requiring the compiler to check this. It's possible to annotate a lambda assigned to a `std::function` variable, asserting that various mutexes are locked, but these assertions are completely unchecked and uncheckable without a way to annotate std::functions.",
      "created_at" : "2019-01-07T18:26:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13128#issuecomment-452032584",
      "id" : 452032584,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13128",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1MjAzMjU4NA==",
      "updated_at" : "2019-01-07T18:26:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/452032584",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
