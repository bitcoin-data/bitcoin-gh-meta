[
   {
      "author_association" : "NONE",
      "body" : "Ack https://github.com/bitcoin/bitcoin/pull/15195/commits/2fef1852cfacd5a435d78cee51c0059061941dc0\r\nTested open and close wallet behaviour with multiple wallets loaded",
      "created_at" : "2019-01-18T05:39:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-455433740",
      "id" : 455433740,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NTQzMzc0MA==",
      "updated_at" : "2019-01-18T05:39:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/455433740",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/9293647?v=4",
         "events_url" : "https://api.github.com/users/IlyasRidhuan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/IlyasRidhuan/followers",
         "following_url" : "https://api.github.com/users/IlyasRidhuan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/IlyasRidhuan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/IlyasRidhuan",
         "id" : 9293647,
         "login" : "IlyasRidhuan",
         "node_id" : "MDQ6VXNlcjkyOTM2NDc=",
         "organizations_url" : "https://api.github.com/users/IlyasRidhuan/orgs",
         "received_events_url" : "https://api.github.com/users/IlyasRidhuan/received_events",
         "repos_url" : "https://api.github.com/users/IlyasRidhuan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/IlyasRidhuan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/IlyasRidhuan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/IlyasRidhuan"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2019-01-18T09:27:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-455481484",
      "id" : 455481484,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NTQ4MTQ4NA==",
      "updated_at" : "2019-01-18T09:27:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/455481484",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested works for me on Debian stable.  Code not reviewed.  I did get some compiler warnings:\r\n\r\n<details>\r\n\r\n\r\n      CXX      interfaces/libbitcoin_server_a-node.o\r\n    interfaces/node.cpp:42:10: warning: redundant redeclaration of Ã¢ÂÂboost::filesystem::path GetWalletDir()Ã¢ÂÂ in same scope [-Wredundant-decls]\r\n     fs::path GetWalletDir();\r\n              ^~~~~~~~~~~~\r\n    In file included from interfaces/node.cpp:31:0:\r\n    ./wallet/walletutil.h:13:10: note: previous declaration of Ã¢ÂÂboost::filesystem::path GetWalletDir()Ã¢ÂÂ\r\n     fs::path GetWalletDir();\r\n              ^~~~~~~~~~~~\r\n    interfaces/node.cpp:43:23: warning: redundant redeclaration of Ã¢ÂÂstd::vector<boost::filesystem::path> ListWalletDir()Ã¢ÂÂ in same scope [-Wredundant-decls]\r\n     std::vector<fs::path> ListWalletDir();\r\n                           ^~~~~~~~~~~~~\r\n    In file included from interfaces/node.cpp:31:0:\r\n    ./wallet/walletutil.h:16:23: note: previous declaration of Ã¢ÂÂstd::vector<boost::filesystem::path> ListWalletDir()Ã¢ÂÂ\r\n     std::vector<fs::path> ListWalletDir();\r\n                           ^~~~~~~~~~~~~\r\n\r\n\r\n\r\n      CXX      wallet/libbitcoin_wallet_a-rpcwallet.o\r\n    wallet/rpcwallet.cpp:2494:26: warning: redundant redeclaration of Ã¢ÂÂstd::shared_ptr<CWallet> LoadWallet(interfaces::Chain&, const WalletLocation&, std::__cxx11::string&, std::__cxx11::string&)Ã¢ÂÂ in same scope [-Wredundant-decls]\r\n     std::shared_ptr<CWallet> LoadWallet(interfaces::Chain& chain, const WalletLocation& location, std::string& error, std::string& warning);\r\n                              ^~~~~~~~~~\r\n    In file included from ./wallet/coincontrol.h:11:0,\r\n                     from wallet/rpcwallet.cpp:31:\r\n    ./wallet/wallet.h:69:26: note: previous declaration of Ã¢ÂÂstd::shared_ptr<CWallet> LoadWallet(interfaces::Chain&, const WalletLocation&, std::__cxx11::string&, std::__cxx11::string&)Ã¢ÂÂ\r\n     std::shared_ptr<CWallet> LoadWallet(interfaces::Chain& chain, const WalletLocation& location, std::string& error, std::string& warning);\r\n                              ^~~~~~~~~~\r\n\r\n\r\n</details>",
      "created_at" : "2019-01-18T11:53:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-455521881",
      "id" : 455521881,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NTUyMTg4MQ==",
      "updated_at" : "2019-01-18T11:53:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/455521881",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/61096?v=4",
         "events_url" : "https://api.github.com/users/harding/events{/privacy}",
         "followers_url" : "https://api.github.com/users/harding/followers",
         "following_url" : "https://api.github.com/users/harding/following{/other_user}",
         "gists_url" : "https://api.github.com/users/harding/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/harding",
         "id" : 61096,
         "login" : "harding",
         "node_id" : "MDQ6VXNlcjYxMDk2",
         "organizations_url" : "https://api.github.com/users/harding/orgs",
         "received_events_url" : "https://api.github.com/users/harding/received_events",
         "repos_url" : "https://api.github.com/users/harding/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/harding/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/harding/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/harding"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Is it possible to visually separate the wallet name from the question text in the confirmation dialog? For example by putting quotes around it or adding a line break before. \r\n\r\nSilly example: A wallet named `??!?` would currently render\r\n\r\n```\r\nAre you sure you wish to close wallet ??!??\r\n```\r\nThis would look slightly less confusing:\r\n```\r\nAre you sure you wish to close wallet \"??!?\"?\r\n```\r\n",
      "created_at" : "2019-01-18T20:42:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-455681027",
      "id" : 455681027,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NTY4MTAyNw==",
      "updated_at" : "2019-01-18T20:42:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/455681027",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/425166?v=4",
         "events_url" : "https://api.github.com/users/flack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/flack/followers",
         "following_url" : "https://api.github.com/users/flack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/flack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/flack",
         "id" : 425166,
         "login" : "flack",
         "node_id" : "MDQ6VXNlcjQyNTE2Ng==",
         "organizations_url" : "https://api.github.com/users/flack/orgs",
         "received_events_url" : "https://api.github.com/users/flack/received_events",
         "repos_url" : "https://api.github.com/users/flack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/flack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/flack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/flack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@flack good point, I'll see other examples too. ",
      "created_at" : "2019-01-18T20:47:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-455682565",
      "id" : 455682565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NTY4MjU2NQ==",
      "updated_at" : "2019-01-18T20:47:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/455682565",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2019-01-18T22:42:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-455711773",
      "id" : 455711773,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NTcxMTc3Mw==",
      "updated_at" : "2019-02-13T02:18:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/455711773",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\nWhen the node is pruned, can you add a warning that closing the wallet for too long can result in having to resync the entire chain?",
      "created_at" : "2019-01-19T07:37:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-455757697",
      "id" : 455757697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NTc1NzY5Nw==",
      "updated_at" : "2019-01-19T07:37:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/455757697",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15195#discussion_r249246262"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15195"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/249246262"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Isn't this declaration redundant?",
      "commit_id" : "94086fb59d1a05eb9a2960c2aae242e49c0a9103",
      "created_at" : "2019-01-19T14:19:46Z",
      "diff_hunk" : "@@ -2491,6 +2491,8 @@ static UniValue listwallets(const JSONRPCRequest& request)\n     return obj;\n }\n \n+std::shared_ptr<CWallet> LoadWallet(interfaces::Chain& chain, const WalletLocation& location, std::string& error, std::string& warning);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#discussion_r249246262",
      "id" : 249246262,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0OTI0NjI2Mg==",
      "original_commit_id" : "2fef1852cfacd5a435d78cee51c0059061941dc0",
      "original_position" : 4,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 194357840,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15195",
      "updated_at" : "2019-02-12T22:08:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/249246262",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15195#discussion_r249246281"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15195"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/249246281"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`path` should be const reference?",
      "commit_id" : "94086fb59d1a05eb9a2960c2aae242e49c0a9103",
      "created_at" : "2019-01-19T14:20:23Z",
      "diff_hunk" : "@@ -360,6 +368,19 @@ void BitcoinGUI::createActions()\n         connect(usedSendingAddressesAction, &QAction::triggered, walletFrame, &WalletFrame::usedSendingAddresses);\n         connect(usedReceivingAddressesAction, &QAction::triggered, walletFrame, &WalletFrame::usedReceivingAddresses);\n         connect(openAction, &QAction::triggered, this, &BitcoinGUI::openClicked);\n+        connect(m_open_wallet_action->menu(), &QMenu::aboutToShow, [this] {\n+            m_open_wallet_action->menu()->clear();\n+            for (std::string path : m_wallet_controller->getWalletsAvailableToOpen()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#discussion_r249246281",
      "id" : 249246281,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0OTI0NjI4MQ==",
      "original_commit_id" : "2fef1852cfacd5a435d78cee51c0059061941dc0",
      "original_position" : 28,
      "path" : "src/qt/bitcoingui.cpp",
      "position" : null,
      "pull_request_review_id" : 194357862,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15195",
      "updated_at" : "2019-02-12T22:08:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/249246281",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15195#discussion_r249246482"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15195"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/249246482"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: Shadows function `error` from `system.h`.",
      "commit_id" : "94086fb59d1a05eb9a2960c2aae242e49c0a9103",
      "created_at" : "2019-01-19T14:27:52Z",
      "diff_hunk" : "@@ -0,0 +1,133 @@\n+// Copyright (c) 2019 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <qt/walletcontroller.h>\n+\n+#include <interfaces/handler.h>\n+#include <interfaces/node.h>\n+\n+#include <algorithm>\n+\n+#include <QMessageBox>\n+#include <QMutexLocker>\n+#include <QThread>\n+\n+WalletController::WalletController(interfaces::Node& node, const PlatformStyle* platform_style, OptionsModel* options_model, QObject* parent)\n+    : QObject(parent)\n+    , m_node(node)\n+    , m_platform_style(platform_style)\n+    , m_options_model(options_model)\n+{\n+    m_handler_load_wallet = m_node.handleLoadWallet([this](std::unique_ptr<interfaces::Wallet> wallet) {\n+        getOrCreateWallet(std::move(wallet));\n+    });\n+\n+    for (std::unique_ptr<interfaces::Wallet>& wallet : m_node.getWallets()) {\n+        getOrCreateWallet(std::move(wallet));\n+    }\n+}\n+\n+// Not using the default destructor because not all member types definitions are\n+// available in the header, just forward declared.\n+WalletController::~WalletController() {}\n+\n+std::vector<WalletModel*> WalletController::getWallets() const\n+{\n+    QMutexLocker locker(&m_mutex);\n+    return m_wallets;\n+}\n+\n+std::vector<std::string> WalletController::getWalletsAvailableToOpen() const\n+{\n+    QMutexLocker locker(&m_mutex);\n+    std::vector<std::string> wallets = m_node.listWalletDir();\n+    for (WalletModel* wallet_model : m_wallets) {\n+        wallets.erase(std::remove(wallets.begin(), wallets.end(), wallet_model->wallet().getWalletName()));\n+    }\n+    return wallets;\n+}\n+\n+WalletModel* WalletController::openWallet(const std::string& name, QWidget* parent)\n+{\n+    std::string error, warning;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#discussion_r249246482",
      "id" : 249246482,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0OTI0NjQ4Mg==",
      "original_commit_id" : "2fef1852cfacd5a435d78cee51c0059061941dc0",
      "original_position" : 53,
      "path" : "src/qt/walletcontroller.cpp",
      "position" : null,
      "pull_request_review_id" : 194358069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15195",
      "updated_at" : "2019-02-12T22:08:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/249246482",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15195#discussion_r249293181"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15195"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/249293181"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It could be written without `button` variable:\r\n```\r\n    if (QMessageBox::Yes != QMessageBox::question(parent, tr(\"Close wallet\"),\r\n        tr(\"Are you sure you wish to close wallet %1?\").arg(wallet_model->getDisplayName()),\r\n        QMessageBox::Yes|QMessageBox::Cancel,\r\n        QMessageBox::Yes)) return;\r\n```\r\n\r\nAlso [Qt docs](https://doc.qt.io/qt-5/qmessagebox.html#details) do not recommend use the Static Functions API:\r\n\r\n> Using the property-based API is recommended.\r\n\r\n> The _Microsoft Windows User Interface Guidelines_ recommend using the application name as the window's title, which means that if you have an informative text in addition to your main text, you must concatenate it to the `text` parameter.\r\n",
      "commit_id" : "94086fb59d1a05eb9a2960c2aae242e49c0a9103",
      "created_at" : "2019-01-20T19:57:53Z",
      "diff_hunk" : "@@ -62,6 +62,20 @@ WalletModel* WalletController::openWallet(const std::string& name, QWidget* pare\n     return wallet_model;\n }\n \n+void WalletController::closeWallet(WalletModel* wallet_model, QWidget* parent)\n+{\n+    QMessageBox::StandardButton button = QMessageBox::question(parent, tr(\"Close wallet\"),\n+        tr(\"Are you sure you wish to close wallet %1?\").arg(wallet_model->getDisplayName()),\n+        QMessageBox::Yes|QMessageBox::Cancel,\n+        QMessageBox::Yes);\n+    if (button != QMessageBox::Yes) return;\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#discussion_r249293181",
      "id" : 249293181,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0OTI5MzE4MQ==",
      "original_commit_id" : "b1aa998997798bf537e8df51ce3ed48d6e12a49a",
      "original_position" : 11,
      "path" : "src/qt/walletcontroller.cpp",
      "position" : 13,
      "pull_request_review_id" : 194406638,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15195",
      "updated_at" : "2019-02-12T22:08:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/249293181",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase now that open wallet is merged.",
      "created_at" : "2019-02-12T18:26:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-462876735",
      "id" : 462876735,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2Mjg3NjczNQ==",
      "updated_at" : "2019-02-12T18:26:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/462876735",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15195#discussion_r256184471"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15195"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256184471"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done.",
      "commit_id" : "94086fb59d1a05eb9a2960c2aae242e49c0a9103",
      "created_at" : "2019-02-12T23:03:02Z",
      "diff_hunk" : "@@ -62,6 +62,20 @@ WalletModel* WalletController::openWallet(const std::string& name, QWidget* pare\n     return wallet_model;\n }\n \n+void WalletController::closeWallet(WalletModel* wallet_model, QWidget* parent)\n+{\n+    QMessageBox::StandardButton button = QMessageBox::question(parent, tr(\"Close wallet\"),\n+        tr(\"Are you sure you wish to close wallet %1?\").arg(wallet_model->getDisplayName()),\n+        QMessageBox::Yes|QMessageBox::Cancel,\n+        QMessageBox::Yes);\n+    if (button != QMessageBox::Yes) return;\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#discussion_r256184471",
      "id" : 256184471,
      "in_reply_to_id" : 249293181,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NjE4NDQ3MQ==",
      "original_commit_id" : "b1aa998997798bf537e8df51ce3ed48d6e12a49a",
      "original_position" : 11,
      "path" : "src/qt/walletcontroller.cpp",
      "position" : 13,
      "pull_request_review_id" : 202954258,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15195",
      "updated_at" : "2019-02-12T23:03:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/256184471",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@flack currently the wallet name is in italic.\r\n\r\n@practicalswift you reviewed commits that belong #15153, but I'll take them into account once I touch that code again.\r\n\r\n@hebasto changed to property based.\r\n\r\n@Sjors rebased and added your suggestion.",
      "created_at" : "2019-02-12T23:03:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-462975557",
      "id" : 462975557,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2Mjk3NTU1Nw==",
      "updated_at" : "2019-02-12T23:03:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/462975557",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Note to reviewers, closing the wallet doesn't explicitly unloads it, just tries to drop all references to the wallet - in other words, it doesn't wait for some RPC worker thread, if any, to finish its job.\r\n\r\nPlease give feedback if this should unload the wallet, like `unloadwallet` RPC. ",
      "created_at" : "2019-02-12T23:07:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-462976998",
      "id" : 462976998,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2Mjk3Njk5OA==",
      "updated_at" : "2019-02-12T23:07:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/462976998",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Eventually it should unload the wallet, because an advanced user may want to be able to move files around. It would also make it consistent with the RPC if they both call `UnloadWallet()` (which would have to added to an interface).\r\n\r\nIt can be done later as long as it doesn't break stuff. I was able to open and close the same wallet multiple times without a crash, so that's good.\r\n\r\nMuch more useful, once #11082 is merged, is for this menu item to remove the wallet from rw_config, so that it remains closed on the next launch.\r\n\r\ntACK 94086fb",
      "created_at" : "2019-02-13T09:39:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-463128328",
      "id" : 463128328,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MzEyODMyOA==",
      "updated_at" : "2019-02-13T09:39:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/463128328",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested on OS X, seems to work great. tACK 94086fb, notwithstanding the kibbitz below about unloading.\r\n\r\nAs to unloading, am I correctly understanding the process: the unloadwallet RPC will block until the wallet is unloaded, which could take time if someone has taken a reference to the shared_ptr<CWallet>, because UnloadWallet will block until they drop it. The approach taken in this PR is not to block, but to remove the wallet from the UI's list immediately; if someone still has a reference to it, it will not actually be unloaded until they drop the reference?\r\n\r\nIt seems like the worst case here is: a user closes a wallet on which some long-running operation is holding the CWallet open. (Is this possible? I don't know how long a wallet can take to unload.) Then the wallet will appear in the Open Wallet... menu, since getWalletsAvailableToOpen will not find it already open (since it's searching the WalletController's WalletModel list, not the CWallet list.) But if it's clicked, opening it will fail, since it's still open. And if I'm following the logic right, a critical messagebox will pop up displaying the message: \"Wallet file verification failed: Error loading wallet [blah].dat. Duplicate -wallet filename specified. (code -4)\"\r\n\r\nThis is certainly a little weird but doesn't seem terrible.\r\n\r\n(But now I see Sjors's comment, and it's an interesting point that a power user may want to touch the wallet file, and may assume that when it disappears from the list in the GUI, that means it's safe to move it, which would be disastrous if it's not unloaded. If this really is an issue, I don't see any way around this other than putting up a modal \"unloading...\" dialog, ultimately.)",
      "created_at" : "2019-02-13T09:45:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-463130359",
      "id" : 463130359,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MzEzMDM1OQ==",
      "updated_at" : "2019-02-13T09:46:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/463130359",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors right, I thought the same. In order to not block UI with `UnloadWallet` I have to create a `CloseWalletActivity`, so IMO definitely something to improve later - I mean, can be improved even after feature freeze (I think?).",
      "created_at" : "2019-02-13T10:11:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-463139671",
      "id" : 463139671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MzEzOTY3MQ==",
      "updated_at" : "2019-02-13T10:11:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/463139671",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonasschnelli @ryanofsky WDYT about https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-462976998?",
      "created_at" : "2019-02-13T22:14:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-463397322",
      "id" : 463397322,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MzM5NzMyMg==",
      "updated_at" : "2019-02-13T22:14:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/463397322",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "If the question is what do I think should happen when a wallet is slow to unload, it's the same as what I wrote in https://github.com/bitcoin/bitcoin/pull/15153#discussion_r256556392 about what should I think should happen when a wallet is slow to load. Wallet display should show \"Unloading wallet X...\" while the wallet is unloading, and when it's done unloading, the wallet should be removed from the dropdown list, and if it was still selected, the next item in the list should be selected instead.\r\n\r\nWhile the wallet is unloading, the user should be able to switch to other wallets, load and unload other wallets, shut down the program, and do everything else normally except interact with the wallet that's being unloaded. There shouldn't be any popups or modal unloading dialogs or anything like that.",
      "created_at" : "2019-02-13T22:35:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-463403600",
      "id" : 463403600,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MzQwMzYwMA==",
      "updated_at" : "2019-02-13T22:35:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/463403600",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I agree with @ryanofsky. As a long term goal. Unsure if this can be broken down to simpler steps. A wallet can Ã¢ÂÂ currently Ã¢ÂÂÃÂ  consume a decent amount of memory (and eventually CPU) and closing a wallet should IMO unload the wallet (graceful).\r\n\r\nI haven't looked at the code yet,... is there a reason to not unload the wallet synchronously as a first step (blocking the GUI as an initial close seems acceptable)?",
      "created_at" : "2019-02-14T01:45:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-463451365",
      "id" : 463451365,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MzQ1MTM2NQ==",
      "updated_at" : "2019-02-14T01:45:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/463451365",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonasschnelli IMO currently it's not so easily done, it's not the same as the RPC `unloadwallet` where there is only a `std::shared_ptr<CWallet>`. Here we have `interfaces::Wallet` which has a member `CWallet&`. \r\n\r\n```cpp\r\nvoid WalletImpl::unload() override\r\n{\r\n    RemoveWallet(m_shared_wallet);\r\n    UnloadWallet(std::move(m_shred_wallet));\r\n    // now m_wallet is invalid, and this interface is also \"null\"\r\n    // also, this interface would be deleted by the unload notification (?)\r\n}\r\n```\r\n@ryanofsky what do you suggest to fix the above? I thought not calling `UnloadWallet` and then wait for the unload notification..\r\n\r\nAnyway, I think this is ready to merge and then I can follow up with improvements.\r\n",
      "created_at" : "2019-02-14T15:07:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-463661073",
      "id" : 463661073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MzY2MTA3Mw==",
      "updated_at" : "2019-02-14T15:07:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/463661073",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested ACK 94086fb59d1a05eb9a2960c2aae242e49c0a9103\r\nThis is a good first step.",
      "created_at" : "2019-02-14T20:46:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-463788921",
      "id" : 463788921,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2Mzc4ODkyMQ==",
      "updated_at" : "2019-02-14T20:46:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/463788921",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @ryanofsky what do you suggest to fix the above?\r\n\r\nWhat you suggested looks good, but `WalletImpl` class should just have a single `std::shared_ptr<CWallet> m_wallet` member, not two wallet members.",
      "created_at" : "2019-02-14T20:54:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15195#issuecomment-463791974",
      "id" : 463791974,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15195",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2Mzc5MTk3NA==",
      "updated_at" : "2019-02-14T20:54:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/463791974",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
