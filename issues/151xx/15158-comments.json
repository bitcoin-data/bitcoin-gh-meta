[
   {
      "author_association" : "MEMBER",
      "body" : "Tend towards NACK, sorry, on one hand this adds a small convenience butÃ¢ÂÂ\r\n\r\n- This adds a forbidden dependency; RPC is supposed to be independent of the backend (HTTP, GUI console, potentially in the future other things), so there is supposed to be no direct dependency of `rpcserver.cpp` on `httpserver.h`\r\n- 99% of users will use the default localhost bind address, and those that don't, likely understand they need to use that different address\r\n\r\nThe former could be worked around by making `httprpc` query and register the first bind address. But as said, I'm not sure it's worth it.",
      "created_at" : "2019-01-14T12:27:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15158#issuecomment-453988518",
      "id" : 453988518,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1Mzk4ODUxOA==",
      "updated_at" : "2019-01-14T12:27:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/453988518",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15158#discussion_r247492547"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/247492547"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Avoid shadowing `addr` in outer scope :-)",
      "commit_id" : "6e64d177b7fd8e7aea7edc656b61cae187337da0",
      "created_at" : "2019-01-14T13:34:50Z",
      "diff_hunk" : "@@ -327,6 +331,11 @@ static bool HTTPBindAddresses(struct evhttp* http)\n                 LogPrintf(\"WARNING: the RPC server is not safe to expose to untrusted networks such as the public internet\\n\");\n             }\n             boundSockets.push_back(bind_handle);\n+            if (firstBindAddress.empty()) {\n+                std::ostringstream addr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15158#discussion_r247492547",
      "id" : 247492547,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NzQ5MjU0Nw==",
      "original_commit_id" : "66b0f78467c7faeb01524374a6ba1bf72a0ee83e",
      "original_position" : 36,
      "path" : "src/httpserver.cpp",
      "position" : null,
      "pull_request_review_id" : 192152578,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15158",
      "updated_at" : "2019-01-15T08:13:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/247492547",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15158#discussion_r247794565"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15158"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/247794565"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oops, fixed.  Good catch!",
      "commit_id" : "6e64d177b7fd8e7aea7edc656b61cae187337da0",
      "created_at" : "2019-01-15T08:13:21Z",
      "diff_hunk" : "@@ -327,6 +331,11 @@ static bool HTTPBindAddresses(struct evhttp* http)\n                 LogPrintf(\"WARNING: the RPC server is not safe to expose to untrusted networks such as the public internet\\n\");\n             }\n             boundSockets.push_back(bind_handle);\n+            if (firstBindAddress.empty()) {\n+                std::ostringstream addr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15158#discussion_r247794565",
      "id" : 247794565,
      "in_reply_to_id" : 247492547,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0Nzc5NDU2NQ==",
      "original_commit_id" : "66b0f78467c7faeb01524374a6ba1bf72a0ee83e",
      "original_position" : 36,
      "path" : "src/httpserver.cpp",
      "position" : null,
      "pull_request_review_id" : 192522806,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15158",
      "updated_at" : "2019-01-15T08:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/247794565",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@laanwj:  No worries, I expected this to be not a clear case.  But isn't giving an explicit `curl` example in the RPC help text a clear dependence on HTTP as backend in the first place?  If we do that (as we do now), then I think it is good to make it at least correct.\r\n\r\nHowever, a simpler version could be to just use the default (or configured) RPC port from the chain config instead of the hardcoded `8332`.  That way, it would at least be a bit more correct, especially for things like running on regtest.  That is definitely a lot more relevant than an explicit non-standard bind address.",
      "created_at" : "2019-01-15T08:16:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15158#issuecomment-454303272",
      "id" : 454303272,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NDMwMzI3Mg==",
      "updated_at" : "2019-01-15T08:16:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/454303272",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">  But isn't giving an explicit curl example in the RPC help text a clear dependence on HTTP as backend in the first place? If we do that (as we do now), then I think it is good to make it at least correct.\r\n\r\nRight, it is a a semantic dependency, not a code dependency.\r\nIf you want to go all the way to modular design, you'd have a function where the backend (such as `httprpc`) can register RPC example help generation functions, which are then called by the RPC help generator and in turn appended to the help for a call.",
      "created_at" : "2019-01-15T13:52:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15158#issuecomment-454398834",
      "id" : 454398834,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NDM5ODgzNA==",
      "updated_at" : "2019-01-15T13:52:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/454398834",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> If you want to go all the way to modular design, you'd have a function where the backend (such as `httprpc`) can register RPC example help generation functions, which are then called by the RPC help generator and in turn appended to the help for a call.\r\n\r\nTrue, but that seems like overengineering to me.  Do you mean to say that you'd prefer that, or is that just a hypothetical example?\r\n\r\nSo what about using either just the default RPC port from chainparams instead of hardcoding 8332, or perhaps using the `rpcport` if configured?  Neither of that would create a code dependency of the RPC code on the HTTP backend.",
      "created_at" : "2019-01-15T19:01:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15158#issuecomment-454510270",
      "id" : 454510270,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NDUxMDI3MA==",
      "updated_at" : "2019-01-15T19:01:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/454510270",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">  True, but that seems like overengineering to me. Do you mean to say that you'd prefer that, or is that just a hypothetical example?\r\n\r\nNo, what I'd prefer is to not do this at all, as I said I doubt it is worth it. Sorry if I was unclear.\r\n\r\n> So what about using either just the default RPC port from chainparams instead of hardcoding 8332, or perhaps using the rpcport if configured? Neither of that would create a code dependency of the RPC code on the HTTP backend.\r\n\r\nThat would be OK with me, seems straightforward and doesn't add too much code.",
      "created_at" : "2019-01-16T13:35:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15158#issuecomment-454780766",
      "id" : 454780766,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NDc4MDc2Ng==",
      "updated_at" : "2019-01-16T13:54:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/454780766",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > So what about using either just the default RPC port from chainparams instead of hardcoding 8332, or perhaps using the rpcport if configured? Neither of that would create a code dependency of the RPC code on the HTTP backend.\r\n> \r\n> That would be OK with me, seems straightforward and doesn't add too much code.\r\n\r\nSounds good to me.  I'll close this PR then and work on one that just uses the default RPC port for the current chain.",
      "created_at" : "2019-01-16T16:06:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15158#issuecomment-454835534",
      "id" : 454835534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15158",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NDgzNTUzNA==",
      "updated_at" : "2019-01-16T16:06:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/454835534",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/4943644?v=4",
         "events_url" : "https://api.github.com/users/domob1812/events{/privacy}",
         "followers_url" : "https://api.github.com/users/domob1812/followers",
         "following_url" : "https://api.github.com/users/domob1812/following{/other_user}",
         "gists_url" : "https://api.github.com/users/domob1812/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/domob1812",
         "id" : 4943644,
         "login" : "domob1812",
         "node_id" : "MDQ6VXNlcjQ5NDM2NDQ=",
         "organizations_url" : "https://api.github.com/users/domob1812/orgs",
         "received_events_url" : "https://api.github.com/users/domob1812/received_events",
         "repos_url" : "https://api.github.com/users/domob1812/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/domob1812/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/domob1812/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/domob1812"
      }
   }
]
