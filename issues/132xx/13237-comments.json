[
   {
      "author_association" : "MEMBER",
      "body" : "Sounds sensible to add support to replace the 2nd `%s` with the wallet name.\r\n\r\nConcept ACK.\r\n\r\n",
      "created_at" : "2018-05-15T14:52:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/13237#issuecomment-389196330",
      "id" : 389196330,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13237",
      "updated_at" : "2018-05-15T14:52:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/389196330",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Actually it's preferable to use a different placeholder for the wallet name, like @Kexkey suggests, because currently\r\n```cpp\r\nboost::replace_all(strCmd, \"%s\", wtxIn.GetHash().GetHex());\r\n```\r\nso this should work:\r\n```cpp\r\nboost::replace_all(strCmd, \"%w\", GetName());\r\n```",
      "created_at" : "2018-05-15T15:13:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/13237#issuecomment-389204112",
      "id" : 389204112,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13237",
      "updated_at" : "2018-05-15T15:13:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/389204112",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Just throwing my two cents in, this is how I currently deal with incoming transactions.\r\nOthers might not be aware of this or just getting started.\r\nIt could simply adjust someone's perspective and allow them to create something entirely better.\r\n\r\n**Incoming Transaction Pseudocode**\r\n```\r\nInstant Payment URL Notification\r\n-------------------------------------------\r\nwalletnotify=someurl/btc/:txid\r\n[url.get receiver]\r\naddtransaction(get txid parameter in url)\r\n\r\nBackground Cron Job\r\n--------------------------------------------\r\ncron listtransactions every minute\r\niterate through all the txids\r\naddtransaction(txid)\r\n\r\nfunction addtransaction(txid)\r\ntxdata = gettransaction txid\r\nif txdata.account = \"users_wallet\"  \r\n   add txdata as new record in table user_transactions\r\n  confirmations = txdata.confirmations\r\n  trans_amount = txdata.amount\r\n  ...\r\nend if\r\nend function\r\n```\r\n\r\n`if txdata.account = \"users_wallet\"` might be better to do `if txdata.label = \"users_wallet\"`.  Noticed those variables always match up, is the account name being deprecated?\r\n\r\nSample JSON RPC Output - gettransaction <txid>\r\n```\r\n[\r\n  {\r\n    \"account\": \"indospace\",\r\n    \"address\": \"bitcoincash:qq730w3dys53j3msnldex84shw695atvuvh7hj3u3q\",\r\n    \"category\": \"receive\",\r\n    \"amount\": 0.00009754,\r\n    \"label\": \"indospace\",\r\n    \"vout\": 0,\r\n    \"confirmations\": 234,\r\n    \"blockhash\": \"000000000000000000939cd1b4771d1762b86fbac7f89a4cd9618103f7d992d1\",\r\n    \"blockindex\": 106,\r\n    \"blocktime\": 1526261896,\r\n    \"txid\": \"339c1604a03ca14d956b76037fa71e453e7c1edf1029f7fc94a8bbe3bee38c00\",\r\n    \"walletconflicts\": [\r\n    ],\r\n    \"time\": 1526261567,\r\n    \"timereceived\": 1526261567\r\n  }\r\n]\r\n```\r\n\r\n",
      "created_at" : "2018-05-15T15:33:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/13237#issuecomment-389211311",
      "id" : 389211311,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13237",
      "updated_at" : "2018-05-15T15:45:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/389211311",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7561190?v=4",
         "events_url" : "https://api.github.com/users/knoxcard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/knoxcard/followers",
         "following_url" : "https://api.github.com/users/knoxcard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/knoxcard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/knoxcard",
         "id" : 7561190,
         "login" : "knoxcard",
         "organizations_url" : "https://api.github.com/users/knoxcard/orgs",
         "received_events_url" : "https://api.github.com/users/knoxcard/received_events",
         "repos_url" : "https://api.github.com/users/knoxcard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/knoxcard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/knoxcard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/knoxcard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "After taking a good look at this thread, I am leaning towards @Kexkey suggestion.  It is could be worth adding primarily due to programming structure, secondarily to ridding an unnecessary iterative process.  If you are a busy platform receiving thousands of payments, you still have to iterate through every incoming transaction to determine if it belongs to a particular wallet.  Now, what does this cost CPU and memory wise?  Maybe not much at all, but I find it kind of ugly in terms of programmatical structure.  \r\n",
      "created_at" : "2018-05-15T15:49:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/13237#issuecomment-389216766",
      "id" : 389216766,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13237",
      "updated_at" : "2018-05-15T15:57:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/389216766",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7561190?v=4",
         "events_url" : "https://api.github.com/users/knoxcard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/knoxcard/followers",
         "following_url" : "https://api.github.com/users/knoxcard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/knoxcard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/knoxcard",
         "id" : 7561190,
         "login" : "knoxcard",
         "organizations_url" : "https://api.github.com/users/knoxcard/orgs",
         "received_events_url" : "https://api.github.com/users/knoxcard/received_events",
         "repos_url" : "https://api.github.com/users/knoxcard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/knoxcard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/knoxcard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/knoxcard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Should the wallet name be in ZMQ notifications too?",
      "created_at" : "2018-05-30T09:05:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/13237#issuecomment-393087373",
      "id" : 393087373,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13237",
      "updated_at" : "2018-05-30T09:05:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/393087373",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@promag I'd say ZMQ is mostly used for network events (tx and blocks) while walletnotify is tightly related to wallet(s).  So I don't think so.\r\n\r\nBut I was thinking about the credentials... should there be different authentications for the different wallets?  Is that a use case to have one node shared by multiple users/wallets?  In that case, the different usernames/passwords would make sense.\r\n\r\nI personally would share my nodes with my family members or friends, making sure each one has its auth creds and the wallets are independently encrypted.\r\n",
      "created_at" : "2018-06-07T15:38:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/13237#issuecomment-395466896",
      "id" : 395466896,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13237",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5NTQ2Njg5Ng==",
      "updated_at" : "2018-06-07T15:38:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/395466896",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15161742?v=4",
         "events_url" : "https://api.github.com/users/Kexkey/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kexkey/followers",
         "following_url" : "https://api.github.com/users/Kexkey/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kexkey/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kexkey",
         "id" : 15161742,
         "login" : "Kexkey",
         "node_id" : "MDQ6VXNlcjE1MTYxNzQy",
         "organizations_url" : "https://api.github.com/users/Kexkey/orgs",
         "received_events_url" : "https://api.github.com/users/Kexkey/received_events",
         "repos_url" : "https://api.github.com/users/Kexkey/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kexkey/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kexkey/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kexkey"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Instead of using the wallet name, could not we introduce a walletid/walletnamehash?\r\n\r\nThis to avoid escape/unescape (prone to errors) problems, shown in https://github.com/bitcoin/bitcoin/pull/13339\r\n\r\nEDIT:\r\nOf course after that, it will be necessary to introduce new RPC API, and to adapt the existing ones, to use `wallethash`; e.g:\r\n\r\n- `bitcoin-cli wallethash \"walletname\"`  Returns its wallethash \"upserting\" the association in an internal DB (it could be non persistent DB);\r\n- `bitcoin-cli walletname wallethash` Returns its walletname (previously stored with RPC `wallethash`);\r\n\r\netcÃ¢ÂÂ¦",
      "created_at" : "2018-12-12T12:14:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/13237#issuecomment-446567324",
      "id" : 446567324,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13237",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NjU2NzMyNA==",
      "updated_at" : "2018-12-12T12:58:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/446567324",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1006078?v=4",
         "events_url" : "https://api.github.com/users/isghe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/isghe/followers",
         "following_url" : "https://api.github.com/users/isghe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/isghe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/isghe",
         "id" : 1006078,
         "login" : "isghe",
         "node_id" : "MDQ6VXNlcjEwMDYwNzg=",
         "organizations_url" : "https://api.github.com/users/isghe/orgs",
         "received_events_url" : "https://api.github.com/users/isghe/received_events",
         "repos_url" : "https://api.github.com/users/isghe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/isghe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/isghe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/isghe"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@isghe I think an alternative is to use environment variables, however the implementation is not that simple.",
      "created_at" : "2018-12-12T12:22:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/13237#issuecomment-446569203",
      "id" : 446569203,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13237",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ0NjU2OTIwMw==",
      "updated_at" : "2018-12-12T12:22:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/446569203",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
