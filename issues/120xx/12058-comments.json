[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "My 2 cents:\r\n\r\n> I've noticed things tends to speed up a bit as the used dbcache grows.\r\n\r\nThat might be due to the fact that Fusion drives have the most recently used data on the SSD rather than on the hard drive\r\n\r\n> It's a Fusion drive, which means some part of it is SSD, but it's up to the OS where to put stuff. Maybe there's some way to give MacOS a hint which files to be on the SSD part? (Or maybe it eventually figures this out).\r\n\r\nI don't think you can do that, although we could see which files are being stored on the SSD with some cli tricks.",
      "created_at" : "2018-01-01T17:31:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12058#issuecomment-354665207",
      "id" : 354665207,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12058",
      "updated_at" : "2018-01-01T17:31:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/354665207",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/18598959?v=4",
         "events_url" : "https://api.github.com/users/Varunram/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Varunram/followers",
         "following_url" : "https://api.github.com/users/Varunram/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Varunram/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Varunram",
         "id" : 18598959,
         "login" : "Varunram",
         "organizations_url" : "https://api.github.com/users/Varunram/orgs",
         "received_events_url" : "https://api.github.com/users/Varunram/received_events",
         "repos_url" : "https://api.github.com/users/Varunram/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Varunram/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Varunram/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Varunram"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I believe @pstratem had a branch to do that years ago. One simple thing to try is to drop your OS-level disk caches with /proc/sys/vm/drop_caches before load, benchmark a load, and then do a cat ~/.bitcoin/chainstate/* > /dev/null before load and benchmark again to see whether having the DB in OS cache helps.",
      "created_at" : "2018-01-03T19:16:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12058#issuecomment-355100720",
      "id" : 355100720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12058",
      "updated_at" : "2018-01-03T19:16:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355100720",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/649246?v=4",
         "events_url" : "https://api.github.com/users/TheBlueMatt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/TheBlueMatt/followers",
         "following_url" : "https://api.github.com/users/TheBlueMatt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/TheBlueMatt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/TheBlueMatt",
         "id" : 649246,
         "login" : "TheBlueMatt",
         "organizations_url" : "https://api.github.com/users/TheBlueMatt/orgs",
         "received_events_url" : "https://api.github.com/users/TheBlueMatt/received_events",
         "repos_url" : "https://api.github.com/users/TheBlueMatt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/TheBlueMatt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/TheBlueMatt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/TheBlueMatt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Just tried with a Glyph Atom RAID SSD drive connected via USB-C 3.1 Gen 2. About an order of magnitude faster on the same machine. Only downside is that my second monitor which uses the other USB-C port goes bezirk. :-)\r\n\r\n@Varunram I meant that it accelaterated within each session. It's slow again for every subsequent session. So that suggests it gets faster as there's more dbcache hits.\r\n\r\nWould it make sense to just fetch the most recent UTXO's from disk up to some percentage of dbcache, or a function of the number of blocks left to sync? I'm assuming the most recent UTXO's are most likely to be spent.",
      "created_at" : "2018-01-06T17:11:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12058#issuecomment-355760866",
      "id" : 355760866,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12058",
      "updated_at" : "2018-01-06T17:11:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355760866",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Once my additional memory arrives I might try running a pruned node on a RAM disk to see how that performs :-)",
      "created_at" : "2018-01-06T17:13:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12058#issuecomment-355760994",
      "id" : 355760994,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12058",
      "updated_at" : "2018-01-06T17:13:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355760994",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@Sjors Not with the current design. Currently, we just load spent/created UTXOs in RAM, until the cache is full, and then write the whole thing (all modified UTXO entries) to disk, and wipe it, and start over.\n\nYou might think that there's a benefit in keeping some non-dirty recently created UTXOs around, but benchmarks show that this is actually not beneficial, as it reduces the number of updates that can be done before the cache is full again, leading to more frequent flushes.\n\nI would like to change this design to one where flushing happens asynchronously in a different thread, so that it is no longer on the critical path for validation.\n\nIn such a new design loading some percentage of recent UTXOs into memory may be worth it. Right now, I think it's only worth it if you actually have enough memory for (nearly) the entire UTXOs set.",
      "created_at" : "2018-01-06T17:23:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12058#issuecomment-355761578",
      "id" : 355761578,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12058",
      "updated_at" : "2018-01-06T17:23:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/355761578",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I was able to reduce an estimated 30+days full blockchain sync with txindex=1 to a completed sync in ~3-4 days by bumping -dbcache=4000 on a HDD this week. Without that it seemed futile.",
      "created_at" : "2019-01-15T05:00:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/12058#issuecomment-454267791",
      "id" : 454267791,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12058",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1NDI2Nzc5MQ==",
      "updated_at" : "2019-01-15T05:01:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/454267791",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/36613229?v=4",
         "events_url" : "https://api.github.com/users/bitsolemn/events{/privacy}",
         "followers_url" : "https://api.github.com/users/bitsolemn/followers",
         "following_url" : "https://api.github.com/users/bitsolemn/following{/other_user}",
         "gists_url" : "https://api.github.com/users/bitsolemn/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/bitsolemn",
         "id" : 36613229,
         "login" : "bitsolemn",
         "node_id" : "MDQ6VXNlcjM2NjEzMjI5",
         "organizations_url" : "https://api.github.com/users/bitsolemn/orgs",
         "received_events_url" : "https://api.github.com/users/bitsolemn/received_events",
         "repos_url" : "https://api.github.com/users/bitsolemn/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/bitsolemn/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/bitsolemn/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/bitsolemn"
      }
   }
]
