{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "<!-- This issue tracker is only for technical issues related to Bitcoin Core.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the Bitcoin StackExchange at https://bitcoin.stackexchange.com.\r\n\r\nFor reporting security issues, please read instructions at https://bitcoincore.org/en/contact/.\r\n\r\nIf the node is \"stuck\" during sync or giving \"block checksum mismatch\" errors, please ensure your hardware is stable by running memtest and observe CPU temperature with a load-test tool such as linpack before creating an issue! -->\r\n\r\n<!-- Describe the issue -->\r\n<!--- What behavior did you expect? -->\r\nExpected: `make` to compile and build OK\r\n<!--- What was the actual behavior (provide screenshots if the issue is GUI-related)? -->\r\nWhat happens: Make fails to build the miner:\r\n```\r\nMaking all in src\r\n  CXX      libbitcoin_server_a-miner.o\r\nIn file included from miner.cpp:6:\r\nIn file included from ./miner.h:10:\r\nIn file included from ./txmempool.h:25:\r\nIn file included from /usr/local/include/boost/multi_index/ordered_index.hpp:17:\r\n/usr/local/include/boost/multi_index/detail/ord_index_impl.hpp:1181:10: error: no matching function for call to object of type\r\n      'const key_compare' (aka 'const CompareModifiedEntry')\r\n      if(comp_(key(v),key(y->value())))return false;\r\n         ^~~~~\r\n/usr/local/include/boost/multi_index/detail/ord_index_impl.hpp:825:9: note: in instantiation of member function\r\n      'boost::multi_index::detail::ordered_index_impl<boost::multi_index::identity<CTxMemPoolModifiedEntry>, CompareModifiedEntry,\r\n      boost::multi_index::detail::nth_layer<2, CTxMemPoolModifiedEntry,\r\n      boost::multi_index::indexed_by<boost::multi_index::ordered_unique<modifiedentry_iter, CompareCTxMemPoolIter, mpl_::na>,\r\n      boost::multi_index::ordered_non_unique<boost::multi_index::tag<ancestor_score, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na>, boost::multi_index::identity<CTxMemPoolModifiedEntry>, CompareModifiedEntry>, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na>, std::__1::allocator<CTxMemPoolModifiedEntry> >, boost::mpl::v_item<ancestor_score, boost::mpl::vector0<mpl_::na>, 0>,\r\n      boost::multi_index::detail::ordered_non_unique_tag, boost::multi_index::detail::null_augment_policy>::in_place' requested here\r\n      b=in_place(x->value(),x,Category());\r\n        ^\r\n/usr/local/include/boost/multi_index/detail/ord_index_impl.hpp:860:18: note: in instantiation of member function\r\n      'boost::multi_index::detail::ordered_index_impl<boost::multi_index::identity<CTxMemPoolModifiedEntry>, CompareModifiedEntry,\r\n      boost::multi_index::detail::nth_layer<2, CTxMemPoolModifiedEntry,\r\n      boost::multi_index::indexed_by<boost::multi_index::ordered_unique<modifiedentry_iter, CompareCTxMemPoolIter, mpl_::na>,\r\n      boost::multi_index::ordered_non_unique<boost::multi_index::tag<ancestor_score, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na>, boost::multi_index::identity<CTxMemPoolModifiedEntry>, CompareModifiedEntry>, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na>, std::__1::allocator<CTxMemPoolModifiedEntry> >, boost::mpl::v_item<ancestor_score, boost::mpl::vector0<mpl_::na>, 0>,\r\n      boost::multi_index::detail::ordered_non_unique_tag, boost::multi_index::detail::null_augment_policy>::modify_' requested here\r\n      if(!super::modify_(x)){\r\n                 ^\r\n/usr/local/include/boost/multi_index_container.hpp:823:18: note: in instantiation of member function\r\n      'boost::multi_index::detail::ordered_index_impl<modifiedentry_iter, CompareCTxMemPoolIter, boost::multi_index::detail::nth_layer<1,\r\n      CTxMemPoolModifiedEntry, boost::multi_index::indexed_by<boost::multi_index::ordered_unique<modifiedentry_iter, CompareCTxMemPoolIter,\r\n      mpl_::na>, boost::multi_index::ordered_non_unique<boost::multi_index::tag<ancestor_score, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na>, boost::multi_index::identity<CTxMemPoolModifiedEntry>, CompareModifiedEntry>, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na>, std::__1::allocator<CTxMemPoolModifiedEntry> >, boost::mpl::vector0<mpl_::na>,\r\n      boost::multi_index::detail::ordered_unique_tag, boost::multi_index::detail::null_augment_policy>::modify_' requested here\r\n      if(!super::modify_(x)){\r\n                 ^\r\n/usr/local/include/boost/multi_index/detail/index_base.hpp:278:21: note: in instantiation of function template specialization\r\n      'boost::multi_index::multi_index_container<CTxMemPoolModifiedEntry,\r\n      boost::multi_index::indexed_by<boost::multi_index::ordered_unique<modifiedentry_iter, CompareCTxMemPoolIter, mpl_::na>,\r\n      boost::multi_index::ordered_non_unique<boost::multi_index::tag<ancestor_score, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na>, boost::multi_index::identity<CTxMemPoolModifiedEntry>, CompareModifiedEntry>, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na>, std::__1::allocator<CTxMemPoolModifiedEntry> >::modify_<update_for_parent_inclusion>' requested here\r\n    {return final().modify_(mod,x);}\r\n                    ^\r\n/usr/local/include/boost/multi_index/detail/ord_index_impl.hpp:418:18: note: in instantiation of function template specialization\r\n      'boost::multi_index::detail::index_base<CTxMemPoolModifiedEntry,\r\n      boost::multi_index::indexed_by<boost::multi_index::ordered_unique<modifiedentry_iter, CompareCTxMemPoolIter, mpl_::na>,\r\n      boost::multi_index::ordered_non_unique<boost::multi_index::tag<ancestor_score, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na>, boost::multi_index::identity<CTxMemPoolModifiedEntry>, CompareModifiedEntry>, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na>, std::__1::allocator<CTxMemPoolModifiedEntry> >::final_modify_<update_for_parent_inclusion>' requested here\r\n    return this->final_modify_(\r\n                 ^\r\nminer.cpp:269:31: note: in instantiation of function template specialization\r\n      'boost::multi_index::detail::ordered_index_impl<modifiedentry_iter, CompareCTxMemPoolIter, boost::multi_index::detail::nth_layer<1,\r\n      CTxMemPoolModifiedEntry, boost::multi_index::indexed_by<boost::multi_index::ordered_unique<modifiedentry_iter, CompareCTxMemPoolIter,\r\n      mpl_::na>, boost::multi_index::ordered_non_unique<boost::multi_index::tag<ancestor_score, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na>, boost::multi_index::identity<CTxMemPoolModifiedEntry>, CompareModifiedEntry>, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na, mpl_::na,\r\n      mpl_::na, mpl_::na>, std::__1::allocator<CTxMemPoolModifiedEntry> >, boost::mpl::vector0<mpl_::na>,\r\n      boost::multi_index::detail::ordered_unique_tag, boost::multi_index::detail::null_augment_policy>::modify<update_for_parent_inclusion>'\r\n      requested here\r\n                mapModifiedTx.modify(mit, update_for_parent_inclusion(it));\r\n                              ^\r\n./miner.h:74:10: note: candidate function not viable: 'this' argument has type 'const key_compare' (aka 'const CompareModifiedEntry'), but\r\n      method is not marked const\r\n    bool operator()(const CTxMemPoolModifiedEntry &a, const CTxMemPoolModifiedEntry &b)\r\n         ^\r\nIn file included from miner.cpp:6:\r\nIn file included from ./miner.h:10:\r\nIn file included from ./txmempool.h:25:\r\nIn file included from /usr/local/include/boost/multi_index/ordered_index.hpp:17:\r\n/usr/local/include/boost/multi_index/detail/ord_index_impl.hpp:1186:26: error: no matching function for call to object of type\r\n      'const key_compare' (aka 'const CompareModifiedEntry')\r\n    return y==header()||!comp_(key(y->value()),key(v));\r\n                         ^~~~~\r\n./miner.h:74:10: note: candidate function not viable: 'this' argument has type 'const key_compare' (aka 'const CompareModifiedEntry'), but\r\n      method is not marked const\r\n    bool operator()(const CTxMemPoolModifiedEntry &a, const CTxMemPoolModifiedEntry &b)\r\n         ^\r\n2 errors generated.\r\nmake[2]: *** [libbitcoin_server_a-miner.o] Error 1\r\nmake[1]: *** [all-recursive] Error 1\r\nmake: *** [all-recursive] Error 1\r\n```\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\n\r\nHow to reproduce: Follow the OSX install instructions readme\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\n\r\nVersion of core: v0.15.1 (7b57bc998)\r\n\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\n\r\nType of machine: MacbookAir 2015\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\n\r\nExtra information: Seems like an issue with boost:\r\n\r\n```\r\n/usr/local/include/boost/multi_index/detail/ord_index_impl.hpp:1186:26: error: no matching function for call to object of type\r\n      'const key_compare' (aka 'const CompareModifiedEntry')\r\n    return y==header()||!comp_(key(y->value()),key(v));\r\n```\r\n\r\nNote that running `brew install boost --c++11` as indicated in the OSX install readme throws the following warning:\r\n\r\n`Warning: boost: this formula has no --c++11 option so it will be ignored!`\r\n\r\n\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\n",
   "closed_at" : "2018-01-15T14:00:40Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 8,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12009/comments",
   "created_at" : "2017-12-24T15:47:38Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12009/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/12009",
   "id" : 284369725,
   "labels" : [
      {
         "color" : "660000",
         "default" : false,
         "id" : 234879,
         "name" : "macOS",
         "node_id" : "MDU6TGFiZWwyMzQ4Nzk=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/macOS"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12009/labels{/name}",
   "locked" : false,
   "milestone" : {
      "closed_at" : "2018-06-13T08:19:56Z",
      "closed_issues" : 34,
      "created_at" : "2017-08-08T10:25:01Z",
      "creator" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      },
      "description" : "",
      "due_on" : null,
      "html_url" : "https://github.com/bitcoin/bitcoin/milestone/31",
      "id" : 2687782,
      "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/31/labels",
      "node_id" : "MDk6TWlsZXN0b25lMjY4Nzc4Mg==",
      "number" : 31,
      "open_issues" : 0,
      "state" : "closed",
      "title" : "0.15.2",
      "updated_at" : "2018-06-13T08:19:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/31"
   },
   "node_id" : "MDU6SXNzdWUyODQzNjk3MjU=",
   "number" : 12009,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Can't build on macOS Sierra: likely a boost c++11 error?",
   "updated_at" : "2018-04-26T11:36:50Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/12009",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/28029?v=4",
      "events_url" : "https://api.github.com/users/fernandezpablo85/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fernandezpablo85/followers",
      "following_url" : "https://api.github.com/users/fernandezpablo85/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fernandezpablo85/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fernandezpablo85",
      "id" : 28029,
      "login" : "fernandezpablo85",
      "node_id" : "MDQ6VXNlcjI4MDI5",
      "organizations_url" : "https://api.github.com/users/fernandezpablo85/orgs",
      "received_events_url" : "https://api.github.com/users/fernandezpablo85/received_events",
      "repos_url" : "https://api.github.com/users/fernandezpablo85/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fernandezpablo85/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fernandezpablo85/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fernandezpablo85"
   }
}
