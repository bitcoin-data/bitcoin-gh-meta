[
   {
      "author_association" : "MEMBER",
      "body" : "Weird, travis failed with\r\n```\r\n/home/travis/build/bitcoin/bitcoin/build/bitcoin-x86_64-apple-darwin11/build-aux/install-sh: src/qt/bitcoin-qt does not exist.\r\nMakefile:1214: recipe for target 'Bitcoin-Qt.app/Contents/MacOS/Bitcoin-Qt' failed\r\nmake: *** [Bitcoin-Qt.app/Contents/MacOS/Bitcoin-Qt] Error 1\r\nmake: *** Waiting for unfinished jobs....\r\n```\r\nrestarted job.",
      "created_at" : "2018-06-14T00:49:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-397132232",
      "id" : 397132232,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5NzEzMjIzMg==",
      "updated_at" : "2018-06-14T00:49:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/397132232",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK - added 0.17 tag to avoid API breakage in major version",
      "created_at" : "2018-06-14T11:18:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-397259875",
      "id" : 397259875,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5NzI1OTg3NQ==",
      "updated_at" : "2018-06-14T11:20:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/397259875",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't understand. `min-conf` and `watch_only` have never been supported when `account` is not specified:\r\n\r\n```\r\n     if (request.params.size() == 0)\r\n         return  ValueFromAmount(pwallet->GetBalance());\r\n```",
      "created_at" : "2018-06-14T20:00:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-397420474",
      "id" : 397420474,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5NzQyMDQ3NA==",
      "updated_at" : "2018-06-14T20:00:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/397420474",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->Note to reviewers: This pull request conflicts with the following ones:\n\n* #11020 ([wallet] getbalance: Add option to include non-mempool UTXOs by kallewoof)\n* #10973 (Refactor: separate wallet from node by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-06-14T20:10:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-397423107",
      "id" : 397423107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5NzQyMzEwNw==",
      "updated_at" : "2018-06-27T10:47:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/397423107",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I don't understand. min-conf and watch_only have never been supported when account is not specified:\r\n\r\n@jnewbery:\r\nAFAIK, before #9614, one you get the watch-only balance of a wallet by calling `getbalance \"*\" 0 true` which is no longer possible in master.",
      "created_at" : "2018-06-14T20:15:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-397424397",
      "id" : 397424397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5NzQyNDM5Nw==",
      "updated_at" : "2018-06-14T20:15:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/397424397",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've taken another look at this and I don't think that #9614 removed the ability to call `getbalance \"*\" 0 true`. I think it was accidentally removed by #12953 here: https://github.com/bitcoin/bitcoin/commit/109e05dcd163b8ddb7f4b3550db6b9ab833b2c04#diff-df7d84ff2f53fcb2a0dc15a3a51e55ceR891.\r\n\r\nConcept ACK fixing that regression and restoring the functionality to call `getbalance \"*\" 0 true`.\r\n\r\nHowever, note that calling `getbalance \"*\" 0 true` invokes `GetLegacyAddress()`, which 'calculates the balance in a different way [...], and which can count spends twice when there are conflicting pending transactions (such as those created by the bumpfee command), temporarily resulting in low or even negative balances. In general, account balance calculation is not considered reliable and has resulted in confusing outcomes, so it is recommended to avoid passing this argument.'\r\n\r\nThis PR changes the API to allow `getbalance include_watchonly=true`, which will now also call `GetLegacyAddress()`. I'm not sure if that's desirable. At the very least, the help text should make it clear that the balance may not be as expected.\r\n\r\ncc @ryanofsky , who wrote that help text.",
      "created_at" : "2018-06-18T22:22:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-398214153",
      "id" : 398214153,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5ODIxNDE1Mw==",
      "updated_at" : "2018-06-18T22:22:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/398214153",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jnewbery AFAIK there is currently no \"better\" balance calculation if one wants to filter with watch-only & min-confirmation-count,... and I think keeping the old behaviour rather then removing it is preferable.\r\n\r\nBut obviously the whole balance calculation and caching system is inefficient (I guess it'\bs not buggy?) and needs probably a complete overhaul.",
      "created_at" : "2018-06-19T07:14:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-398298667",
      "id" : 398298667,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5ODI5ODY2Nw==",
      "updated_at" : "2018-06-19T07:14:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/398298667",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think it's ok to change the API so that `getbalance include_watchonly=true` works, otherwise there's no way to get the watchonly balance if not using the `-deprecatedrpc=accounts` argument. However, the help text needs to be updated to explain that the balance is calculated in a different way if the `include_watchonly` parameter is used.",
      "created_at" : "2018-06-22T13:58:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-399451677",
      "id" : 399451677,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5OTQ1MTY3Nw==",
      "updated_at" : "2018-06-22T13:58:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/399451677",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> However, the help text needs to be updated to explain that the balance is calculated in a different way if the include_watchonly parameter is used.\r\n\r\nI don't think there's a technical reason why CWallet::GetBalance couldn't support the same `isminefilter filter` and `int minDepth` options that `CWallet::GetLegacyBalance` takes. It should just be matter of forwarding the arguments down to `CWalletTx::GetAvailableCredit` and adding a few lines of filtering code there. This would probably be less confusing that calculating the balance in a different way when filters are present (and having to explain this in documentation and maybe break compatibility in the future).",
      "created_at" : "2018-06-22T16:22:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-399499483",
      "id" : 399499483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5OTQ5OTQ4Mw==",
      "updated_at" : "2018-06-22T16:22:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/399499483",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "There is also CWallet::GetWatchOnlyBalance",
      "created_at" : "2018-06-22T16:23:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-399499877",
      "id" : 399499877,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDM5OTQ5OTg3Nw==",
      "updated_at" : "2018-06-22T16:23:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/399499877",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Added min/max conf filter for `GetWatchOnlyBalance()` and started to use this method for getbalance in conjunction with watchonly. Refactored `GetUnconfirmedWatchOnlyBalance()`.\r\n\r\nNot sure if this is better since the main goal of this PR is to avoid an API break in 0.17.\r\nThe balance methods probably need refactoring which is not the main intention here.\r\n\r\nPing @sipa @ryanofsky ",
      "created_at" : "2018-06-27T07:07:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-400565896",
      "id" : 400565896,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDU2NTg5Ng==",
      "updated_at" : "2018-06-27T07:07:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400565896",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Didn't look extremely close but it seems like 9bbd407936f399c706bbc70c8b5ffa0bba0cfec9 has a few issues:\r\n\r\n* It pretends both minconf and watchonly arguments are null if only one of them is null, instead of warning the user about the ignored option (or simply handling it).\r\n* It interprets \"include_watchonly\" as just GetWatchOnlyBalance instead of GetWatchOnlyBalance + GetBalance?\r\n* Seems to complicate logic unnecessarily by tying in GetWatchOnlyBalance and introducing unused max_depth option?\r\n\r\nI'm not sure if my original suggestion was unclear, unworkable, or just not good, but I wonder why this couldn't just forward `filter` and `minDepth` options down to `GetBalance` `GetAvailableCredit` methods and slightly just tweak logic inside to implement them.\r\n\r\nAlso, this is a minor point, but I think it would be clearer to use `boost::optional` (eventually `std::optional`) for optional values instead of magic numbers like -1.",
      "created_at" : "2018-06-27T14:03:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-400683096",
      "id" : 400683096,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDY4MzA5Ng==",
      "updated_at" : "2018-06-27T14:03:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400683096",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think https://github.com/jnewbery/bitcoin/tree/fix_get_balance does what's required:\r\n\r\n- minconf and watchonly can be set/unset independently\r\n- if `-deprecatedrpc=accounts` is set and `getbalance \"*\" <int> <bool>` is called, then `GetLegacyBalance()` is used (unchanged behaviour)\r\n- if `getbalance minconf=<int> include_watchonly=<bool>` is called without an account, then `GetBalance()` is called\r\n- `GetBalance()` takes `min_conf` and `ismine_filter` arguments\r\n- when `include_watchonly` is set, the returned value includes GetWatchOnlyBalance + GetBalance.\r\n\r\n@ryanofsky - is that what you had in mind?\r\n\r\n@jonasschnelli - if you're happy with that branch, either take it here or let me know and I'll open a PR.",
      "created_at" : "2018-06-27T18:45:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-400789342",
      "id" : 400789342,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDc4OTM0Mg==",
      "updated_at" : "2018-06-27T18:45:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400789342",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @ryanofsky - is that what you had in mind?\r\n\r\nYes, changes from https://github.com/bitcoin/bitcoin/compare/master...jnewbery:fix_get_balance are what I was suggesting. Some thoughts looking at code:\r\n\r\n- It seems like it would be good to raise an error if `IsDeprecatedRPCEnabled(\"accounts\")` and the account argument is not null or \"*\". Otherwise the argument would be silently ignored.\r\n- Documentation seems to say default minconf is 1, while implementation uses 0 or 1.\r\n- Maybe could dedup caching code in `GetAvailableCredit` a little with something like \r\n```c++\r\nCAmount* cache = filter == ISMINE_SPENDABLE  ? nAvailableCreditCached : \r\n                 filter == ISMINE_WATCH_ONLY ? nAvailableWatchCreditCached :\r\n                 nullptr;\r\n```\r\n",
      "created_at" : "2018-06-27T19:17:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-400798504",
      "id" : 400798504,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDc5ODUwNA==",
      "updated_at" : "2018-06-27T19:17:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400798504",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @ryanofsky . @jonasschnelli - if you're amenable, I'm happy to open a new PR for this. Also feel free to take my commits and address Russ's comments if you'd prefer.",
      "created_at" : "2018-06-27T19:30:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/13461#issuecomment-400801908",
      "id" : 400801908,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/13461",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQwMDgwMTkwOA==",
      "updated_at" : "2018-06-27T19:30:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/400801908",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
