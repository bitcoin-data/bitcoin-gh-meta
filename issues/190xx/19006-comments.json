[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #15363 (wip: http: Exit the event loop as soon as there are no active events by promag)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-05-18T15:05:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#issuecomment-630244656",
      "id" : 630244656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19006",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDI0NDY1Ng==",
      "updated_at" : "2020-05-19T20:28:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630244656",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Marco, any chance you could start making formatting cleanups in separate commits? Trying to skim this PR and quickly figure out what the bug is, and what the fix is is pointlessly difficult. It's like playing Where's Waldo.",
      "created_at" : "2020-05-19T12:43:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#issuecomment-630792085",
      "id" : 630792085,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19006",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDc5MjA4NQ==",
      "updated_at" : "2020-05-19T12:43:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630792085",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19006#discussion_r427272792"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427272792"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"http: Avoid crash when g_thread_http was never started\" (faf838bf1cae719c46211ea603848f367ee427cf)\r\n\r\nI found Waldo!",
      "commit_id" : "faf45d1f1f997c316fc4c611a23c4456533eefe9",
      "created_at" : "2020-05-19T12:45:26Z",
      "diff_hunk" : "@@ -467,7 +467,7 @@ void StopHTTPServer()\n     boundSockets.clear();\n     if (eventBase) {\n         LogPrint(BCLog::HTTP, \"Waiting for HTTP event thread to exit\\n\");\n-        threadHTTP.join();\n+        if (g_thread_http.joinable()) g_thread_http.join();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#discussion_r427272792",
      "id" : 427272792,
      "line" : 470,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI3Mjc5Mg==",
      "original_commit_id" : "faf838bf1cae719c46211ea603848f367ee427cf",
      "original_line" : 470,
      "original_position" : 23,
      "original_start_line" : null,
      "path" : "src/httpserver.cpp",
      "position" : 23,
      "pull_request_review_id" : 414406688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19006",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-19T14:45:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427272792",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19006#discussion_r427275769"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427275769"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"http: Avoid crash when g_thread_http was never started\" (faf838bf1cae719c46211ea603848f367ee427cf)\r\n\r\nNot sure, but it might be more portable to make cookie_file a non-file path e.g. os.mkdir(cookie_file), because I'm not sure different file systems like fat will have good enough support for chmod.\r\n\r\nPossible travis errors like https://travis-ci.org/github/bitcoin/bitcoin/jobs/688369052#L5050 might be happening for this reason",
      "commit_id" : "faf45d1f1f997c316fc4c611a23c4456533eefe9",
      "created_at" : "2020-05-19T12:50:10Z",
      "diff_hunk" : "@@ -76,32 +78,37 @@ def test_auth(self, node, user, password):\n         assert_equal(200, call_with_auth(node, user, password).status)\n \n         self.log.info('Wrong...')\n-        assert_equal(401, call_with_auth(node, user, password+'wrong').status)\n+        assert_equal(401, call_with_auth(node, user, password + 'wrong').status)\n \n         self.log.info('Wrong...')\n-        assert_equal(401, call_with_auth(node, user+'wrong', password).status)\n+        assert_equal(401, call_with_auth(node, user + 'wrong', password).status)\n \n         self.log.info('Wrong...')\n-        assert_equal(401, call_with_auth(node, user+'wrong', password+'wrong').status)\n+        assert_equal(401, call_with_auth(node, user + 'wrong', password + 'wrong').status)\n \n     def run_test(self):\n-\n-        ##################################################\n-        # Check correctness of the rpcauth config option #\n-        ##################################################\n+        self.log.info('Check correctness of the rpcauth config option')\n         url = urllib.parse.urlparse(self.nodes[0].url)\n \n         self.test_auth(self.nodes[0], url.username, url.password)\n         self.test_auth(self.nodes[0], 'rt', self.rtpassword)\n         self.test_auth(self.nodes[0], 'rt2', self.rt2password)\n         self.test_auth(self.nodes[0], self.user, self.password)\n \n-        ###############################################################\n-        # Check correctness of the rpcuser/rpcpassword config options #\n-        ###############################################################\n+        self.log.info('Check correctness of the rpcuser/rpcpassword config options')\n         url = urllib.parse.urlparse(self.nodes[1].url)\n \n         self.test_auth(self.nodes[1], self.rpcuser, self.rpcpassword)\n \n+        self.log.info('Check that failure to write cookie file will abort the node gracefully')\n+        self.stop_node(0)\n+        cookie_file = os.path.join(get_datadir_path(self.options.tmpdir, 0), self.chain, '.cookie.tmp')\n+        with open(cookie_file, 'w', encoding='utf8') as f:\n+            f.write('readonly')\n+        os.chmod(cookie_file, S_IREAD | S_IRGRP | S_IROTH)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#discussion_r427275769",
      "id" : 427275769,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI3NTc2OQ==",
      "original_commit_id" : "faf838bf1cae719c46211ea603848f367ee427cf",
      "original_line" : 108,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "test/functional/rpc_users.py",
      "position" : null,
      "pull_request_review_id" : 414406688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19006",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-19T14:45:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427275769",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Marco, any chance you could start making formatting cleanups in separate commits? \r\n\r\nAre you referring to the first commit? My reasoning is that highlighting the call stack would make review *easier*, as it can be done with a single git command (instead of having to manually grep for the call stack). This is the way I would prefer when reviewing. Though, I will never review my own commits and if this makes review harder for others, I am happy to drop this habit.",
      "created_at" : "2020-05-19T12:59:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#issuecomment-630800124",
      "id" : 630800124,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19006",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDgwMDEyNA==",
      "updated_at" : "2020-05-19T12:59:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630800124",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > Marco, any chance you could start making formatting cleanups in separate commits?\r\n> \r\n> Are you referring to the first commit? My reasoning is that highlighting the call stack would make review _easier_, as it can be done with a single git command (instead of having to manually grep for the call stack). This is the way I would prefer when reviewing. Though, I will never review my own commits and if this makes review harder for others, I am happy to drop this habit.\r\n\r\nThe issue is that most of the time when I am looking at a diff I am not reviewing it, I'm trying to understand what it does. I review it after I understand what it does, not before. Making different changes in the same commit makes it take longer to figure out what the commit does.\r\n\r\nBut I actually don't understand what you're referring to with single git commands and calls stacks. I definitely think it's good to have a bugfix and tests for the bug in a single commit instead of different commits, because understanding the test can help you understand the bugfix and vice versa. I'm just requesting moving reformatting changes to separate commits from real code changes, because these aren't helpful to view together. Real changes break the flow of reviewing reformatting changes, and reformatting changes make it harder to find and notice real changes",
      "created_at" : "2020-05-19T13:25:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#issuecomment-630815993",
      "id" : 630815993,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19006",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDgxNTk5Mw==",
      "updated_at" : "2020-05-19T13:25:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630815993",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Are you referring to the first commit?\r\n\r\nI'm referring to no-op reformatting changes both commits: braces, whitespace, comments, variable renames, python log tweaks in both commits that get in the way of understanding the bugfix and test. The cleanups are great, I'm just suggesting to put them in a cleanup commit.",
      "created_at" : "2020-05-19T13:30:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#issuecomment-630819524",
      "id" : 630819524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19006",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDgxOTUyNA==",
      "updated_at" : "2020-05-19T13:30:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630819524",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Marco, any chance you could start making formatting cleanups in separate commits\r\n\r\nI think going forward, you can say stuff like \"Concept ACK, but I refuse to review this as long as formatting cleanups are in the same commit as bug fixes\". (This leaves me with no option other than addressing the feedback and I will adjust my behaviour in the future to avoid a review round-trip time)",
      "created_at" : "2020-05-19T14:46:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#issuecomment-630869180",
      "id" : 630869180,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19006",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDg2OTE4MA==",
      "updated_at" : "2020-05-19T14:48:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630869180",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag `StopTorControl` should be unaffected by the bug, no? Or do you have steps to reproduce?",
      "created_at" : "2020-05-19T17:04:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#issuecomment-630953890",
      "id" : 630953890,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19006",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDk1Mzg5MA==",
      "updated_at" : "2020-05-19T17:04:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630953890",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19006#discussion_r427460662"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19006"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427460662"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks for finding out why this failed in travis, but not locally",
      "commit_id" : "faf45d1f1f997c316fc4c611a23c4456533eefe9",
      "created_at" : "2020-05-19T17:05:33Z",
      "diff_hunk" : "@@ -76,32 +78,37 @@ def test_auth(self, node, user, password):\n         assert_equal(200, call_with_auth(node, user, password).status)\n \n         self.log.info('Wrong...')\n-        assert_equal(401, call_with_auth(node, user, password+'wrong').status)\n+        assert_equal(401, call_with_auth(node, user, password + 'wrong').status)\n \n         self.log.info('Wrong...')\n-        assert_equal(401, call_with_auth(node, user+'wrong', password).status)\n+        assert_equal(401, call_with_auth(node, user + 'wrong', password).status)\n \n         self.log.info('Wrong...')\n-        assert_equal(401, call_with_auth(node, user+'wrong', password+'wrong').status)\n+        assert_equal(401, call_with_auth(node, user + 'wrong', password + 'wrong').status)\n \n     def run_test(self):\n-\n-        ##################################################\n-        # Check correctness of the rpcauth config option #\n-        ##################################################\n+        self.log.info('Check correctness of the rpcauth config option')\n         url = urllib.parse.urlparse(self.nodes[0].url)\n \n         self.test_auth(self.nodes[0], url.username, url.password)\n         self.test_auth(self.nodes[0], 'rt', self.rtpassword)\n         self.test_auth(self.nodes[0], 'rt2', self.rt2password)\n         self.test_auth(self.nodes[0], self.user, self.password)\n \n-        ###############################################################\n-        # Check correctness of the rpcuser/rpcpassword config options #\n-        ###############################################################\n+        self.log.info('Check correctness of the rpcuser/rpcpassword config options')\n         url = urllib.parse.urlparse(self.nodes[1].url)\n \n         self.test_auth(self.nodes[1], self.rpcuser, self.rpcpassword)\n \n+        self.log.info('Check that failure to write cookie file will abort the node gracefully')\n+        self.stop_node(0)\n+        cookie_file = os.path.join(get_datadir_path(self.options.tmpdir, 0), self.chain, '.cookie.tmp')\n+        with open(cookie_file, 'w', encoding='utf8') as f:\n+            f.write('readonly')\n+        os.chmod(cookie_file, S_IREAD | S_IRGRP | S_IROTH)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#discussion_r427460662",
      "id" : 427460662,
      "in_reply_to_id" : 427275769,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQ2MDY2Mg==",
      "original_commit_id" : "faf838bf1cae719c46211ea603848f367ee427cf",
      "original_line" : 108,
      "original_position" : 67,
      "original_start_line" : null,
      "path" : "test/functional/rpc_users.py",
      "position" : null,
      "pull_request_review_id" : 414650992,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19006",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-19T17:05:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427460662",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think going forward, you can say stuff like \"Concept ACK, but I refuse to review this as long as formatting cleanups are in the same commit as bug fixes\"\r\n\r\nSorry, I should have prefixed that with concept ACK. I wasn't refusing to review it though, and   followed up with a regular code review ACK a few minutes after.\r\n\r\n> This leaves me with no option other than addressing the feedback and I will adjust my behaviour in the future to avoid a review round-trip time\r\n\r\nI was just trying to suggest something to make this easier to review. Sometimes I forget to write it but you can always ignore my other feedback when I ACK something (I wouldn't ACK something I didn't think was an improvement.)\r\n\r\n",
      "created_at" : "2020-05-19T18:59:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#issuecomment-631018747",
      "id" : 631018747,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19006",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMTAxODc0Nw==",
      "updated_at" : "2020-05-19T18:59:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631018747",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2020-05-20T07:09:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#issuecomment-631281671",
      "id" : 631281671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19006",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMTI4MTY3MQ==",
      "updated_at" : "2020-05-20T07:09:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631281671",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re https://github.com/bitcoin/bitcoin/pull/19006#issuecomment-630953890\r\n\r\n>  Or do you have steps to reproduce?\r\n\r\nNo, I don't think it's possible to hit the same problem there.",
      "created_at" : "2020-05-20T08:24:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19006#issuecomment-631321192",
      "id" : 631321192,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19006",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMTMyMTE5Mg==",
      "updated_at" : "2020-05-20T08:24:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/631321192",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   }
]
