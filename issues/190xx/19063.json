{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "This solves the issue [#19507](https://github.com/bitcoin/bitcoin/issues/19057).\r\n\r\n**Note**: `testmempoolaccept` only returns `'fee'` when `'allowed'` is `true`. The reason being, `fee` calculation can return garbage or worse can fail if malformed transactions are fed into the RPC call. One disadvantage is, this will not return `fee` for a correct transaction but not accepted into mempool for other reasons (ex: tx already exists in a block).\r\n\r\nOpen for suggestions for other ways of handling the above issue. But my guess is it should be that much of a problem.\r\n\r\n**On Approach**: This approach calculates the transaction fee explicitly in the rpc callback. Which requires mempool lock and some cache memory allocation. So the processing for the same is getting doubled. The other way was to return the calculated fee from deep within the validation process which required touching consensus critical codes. So I stuck with the first one. \r\n\r\n**Update**: After the initial review approach is changed to extract the fee from validation calculation.     ",
   "closed_at" : "2020-05-27T19:11:20Z",
   "closed_by" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/36541669?v=4",
      "events_url" : "https://api.github.com/users/rajarshimaitra/events{/privacy}",
      "followers_url" : "https://api.github.com/users/rajarshimaitra/followers",
      "following_url" : "https://api.github.com/users/rajarshimaitra/following{/other_user}",
      "gists_url" : "https://api.github.com/users/rajarshimaitra/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/rajarshimaitra",
      "id" : 36541669,
      "login" : "rajarshimaitra",
      "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
      "organizations_url" : "https://api.github.com/users/rajarshimaitra/orgs",
      "received_events_url" : "https://api.github.com/users/rajarshimaitra/received_events",
      "repos_url" : "https://api.github.com/users/rajarshimaitra/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/rajarshimaitra/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/rajarshimaitra/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/rajarshimaitra"
   },
   "comments" : 1,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19063/comments",
   "created_at" : "2020-05-24T15:04:13Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19063/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/19063",
   "id" : 623882321,
   "labels" : [
      {
         "color" : "0052cc",
         "default" : false,
         "description" : null,
         "id" : 98279177,
         "name" : "RPC/REST/ZMQ",
         "node_id" : "MDU6TGFiZWw5ODI3OTE3Nw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19063/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0NDIyNDI1ODM2",
   "number" : 19063,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/19063.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19063",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/19063.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19063"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "rpc: testmempoolaccept returns transaction fee",
   "updated_at" : "2020-05-27T19:11:21Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19063",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/36541669?v=4",
      "events_url" : "https://api.github.com/users/rajarshimaitra/events{/privacy}",
      "followers_url" : "https://api.github.com/users/rajarshimaitra/followers",
      "following_url" : "https://api.github.com/users/rajarshimaitra/following{/other_user}",
      "gists_url" : "https://api.github.com/users/rajarshimaitra/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/rajarshimaitra",
      "id" : 36541669,
      "login" : "rajarshimaitra",
      "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
      "organizations_url" : "https://api.github.com/users/rajarshimaitra/orgs",
      "received_events_url" : "https://api.github.com/users/rajarshimaitra/received_events",
      "repos_url" : "https://api.github.com/users/rajarshimaitra/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/rajarshimaitra/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/rajarshimaitra/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/rajarshimaitra"
   }
}
