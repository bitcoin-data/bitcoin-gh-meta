[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think the current behavior should be kept: If any or all of the batched request fails, the batch result should still be HTTP 200, whichever the reason. This was the behavior before.\r\n\r\nOn top of this, it seems that if you do batched requests and one of the request is denied, then the caller will not receive ANY of the other results.",
      "created_at" : "2020-05-28T15:16:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-635414437",
      "id" : 635414437,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNTQxNDQzNw==",
      "updated_at" : "2020-05-28T15:17:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/635414437",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Yeah, keeping a bit strange behavior is backwards compatible. Changing authentication to return errors individually would help with batched requests - this shouldn't be a backwards-compatibility hazard, as no code probably uses unreleased API yet.\r\n\r\nIn case that this is the accepted solution, the comment about internal error code should be removed and the value should become public.",
      "created_at" : "2020-05-28T17:49:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-635499700",
      "id" : 635499700,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNTQ5OTcwMA==",
      "updated_at" : "2020-05-28T17:49:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/635499700",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1178779?v=4",
         "events_url" : "https://api.github.com/users/Kixunil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kixunil/followers",
         "following_url" : "https://api.github.com/users/Kixunil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kixunil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kixunil",
         "id" : 1178779,
         "login" : "Kixunil",
         "node_id" : "MDQ6VXNlcjExNzg3Nzk=",
         "organizations_url" : "https://api.github.com/users/Kixunil/orgs",
         "received_events_url" : "https://api.github.com/users/Kixunil/received_events",
         "repos_url" : "https://api.github.com/users/Kixunil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kixunil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kixunil"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ping @JeremyRubin ",
      "created_at" : "2020-05-28T23:57:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-635678219",
      "id" : 635678219,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNTY3ODIxOQ==",
      "updated_at" : "2020-05-28T23:57:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/635678219",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't have an opinion here sorry for breaking compat. I think that we should change batching to scan if any are not whitelisted and reject the whole batch.",
      "created_at" : "2020-05-29T03:37:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-635738877",
      "id" : 635738877,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNTczODg3Nw==",
      "updated_at" : "2020-05-29T03:37:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/635738877",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> we should change batching to scan if any are not whitelisted and reject the whole batch\r\n\r\nYou mean change that behavior to something else? Because that's the current behavior.",
      "created_at" : "2020-05-29T13:09:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-635963367",
      "id" : 635963367,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNTk2MzM2Nw==",
      "updated_at" : "2020-05-29T13:09:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/635963367",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1178779?v=4",
         "events_url" : "https://api.github.com/users/Kixunil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kixunil/followers",
         "following_url" : "https://api.github.com/users/Kixunil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kixunil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kixunil",
         "id" : 1178779,
         "login" : "Kixunil",
         "node_id" : "MDQ6VXNlcjExNzg3Nzk=",
         "organizations_url" : "https://api.github.com/users/Kixunil/orgs",
         "received_events_url" : "https://api.github.com/users/Kixunil/received_events",
         "repos_url" : "https://api.github.com/users/Kixunil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kixunil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kixunil"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "It sounds like in the current behavior some RPCs are running in the batch and some are failing and that hides the output. I think that we should pre-scan before running any",
      "created_at" : "2020-05-30T08:16:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-636297535",
      "id" : 636297535,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjI5NzUzNQ==",
      "updated_at" : "2020-05-30T08:16:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636297535",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "So pre-scan missing methods too?",
      "created_at" : "2020-05-30T18:41:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-636369020",
      "id" : 636369020,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjM2OTAyMA==",
      "updated_at" : "2020-05-30T18:41:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636369020",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1178779?v=4",
         "events_url" : "https://api.github.com/users/Kixunil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kixunil/followers",
         "following_url" : "https://api.github.com/users/Kixunil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kixunil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kixunil",
         "id" : 1178779,
         "login" : "Kixunil",
         "node_id" : "MDQ6VXNlcjExNzg3Nzk=",
         "organizations_url" : "https://api.github.com/users/Kixunil/orgs",
         "received_events_url" : "https://api.github.com/users/Kixunil/received_events",
         "repos_url" : "https://api.github.com/users/Kixunil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kixunil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kixunil"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah I think so. If there are missing methods or non-whitelisted methods it sounds like failing the whole batch is a bit of a better API.\r\n\r\nThe behavior of the whitelists is such that it should be roughly identical to what happens if the RPC doesn't exist at all. ",
      "created_at" : "2020-05-30T18:47:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-636369607",
      "id" : 636369607,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjM2OTYwNw==",
      "updated_at" : "2020-05-30T18:47:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636369607",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Why exactly do you consider it a better API? FYI, it'd break NBitcoin.\r\n\r\n> The behavior of the whitelists is such that it should be roughly identical to what happens if the RPC doesn't exist at all.\r\n\r\nI agree with this.",
      "created_at" : "2020-05-31T09:12:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-636443882",
      "id" : 636443882,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjQ0Mzg4Mg==",
      "updated_at" : "2020-05-31T09:12:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636443882",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1178779?v=4",
         "events_url" : "https://api.github.com/users/Kixunil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kixunil/followers",
         "following_url" : "https://api.github.com/users/Kixunil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kixunil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kixunil",
         "id" : 1178779,
         "login" : "Kixunil",
         "node_id" : "MDQ6VXNlcjExNzg3Nzk=",
         "organizations_url" : "https://api.github.com/users/Kixunil/orgs",
         "received_events_url" : "https://api.github.com/users/Kixunil/received_events",
         "repos_url" : "https://api.github.com/users/Kixunil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kixunil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kixunil"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "How would it break NBitcoin? Does NBitcoin send missing methods in a batch?",
      "created_at" : "2020-05-31T18:57:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-636513090",
      "id" : 636513090,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjUxMzA5MA==",
      "updated_at" : "2020-05-31T18:57:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636513090",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Yes, it sends various methods in batch, some of which are missing and then detects the features based on the responses. Making it return 404 would make it think none of the methods is available. It could be changed to not batch, but that'd lead to a (small?) loss of performance.",
      "created_at" : "2020-06-01T14:11:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-636883880",
      "id" : 636883880,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjg4Mzg4MA==",
      "updated_at" : "2020-06-01T14:11:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636883880",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1178779?v=4",
         "events_url" : "https://api.github.com/users/Kixunil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kixunil/followers",
         "following_url" : "https://api.github.com/users/Kixunil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kixunil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kixunil",
         "id" : 1178779,
         "login" : "Kixunil",
         "node_id" : "MDQ6VXNlcjExNzg3Nzk=",
         "organizations_url" : "https://api.github.com/users/Kixunil/orgs",
         "received_events_url" : "https://api.github.com/users/Kixunil/received_events",
         "repos_url" : "https://api.github.com/users/Kixunil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kixunil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kixunil"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, the right thing to do is to to add a feature detection RPC rather than guess by firing RPCs off and seeing what fails (RPCs may not be 'safe' or wise to call).\r\n\r\nMind reviewing https://github.com/bitcoin/bitcoin/pull/19117? ",
      "created_at" : "2020-06-01T16:44:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-636978777",
      "id" : 636978777,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjk3ODc3Nw==",
      "updated_at" : "2020-06-01T16:44:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636978777",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I agree that official feature detection would be better. I wonder how NBitcoin will cope with the complexity:\r\n\r\n* Versions before 0.20 can't disable calls (except if using [`btc-rpc-proxy`](https://github.com/Kixunil/btc-rpc-proxy))\r\n* 0.20 can disable calls, but can't list them\r\n* 0.20 + epsilon may be able to list them but block all of them\r\n\r\nIt seems to me that if @NicolasDorier wants to keep his sanity, he'll probably have to remove batching during detection. But maybe it's not too bad? Try to get the list first and if it returns RPC method not found, then unbatched (slower) discovery continues. If it returns success, then the information is available and no further calls are needed. The policy could become \"if you need fast discovery, use bitcoind >0.20\". What do you think Nicolas?",
      "created_at" : "2020-06-05T07:58:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-639322238",
      "id" : 639322238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzOTMyMjIzOA==",
      "updated_at" : "2020-06-05T07:58:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/639322238",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1178779?v=4",
         "events_url" : "https://api.github.com/users/Kixunil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kixunil/followers",
         "following_url" : "https://api.github.com/users/Kixunil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kixunil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kixunil",
         "id" : 1178779,
         "login" : "Kixunil",
         "node_id" : "MDQ6VXNlcjExNzg3Nzk=",
         "organizations_url" : "https://api.github.com/users/Kixunil/orgs",
         "received_events_url" : "https://api.github.com/users/Kixunil/received_events",
         "repos_url" : "https://api.github.com/users/Kixunil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kixunil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kixunil"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The only way to work around this problem is to try batching first, then fallback to sending requests one by one if 403 is sent.\r\n\r\nThis however is dangerous if the RPC requests are not idempotent, as some requests could be executed twice. (once in the failing batch, and one in the retry) for scanning, this is fine.",
      "created_at" : "2020-08-09T04:22:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-671004406",
      "id" : 671004406,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTAwNDQwNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-09T04:22:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671004406",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "btw, the only way to fix this problem cleanly is to have a dedicated RPC code for forbidden exception instead of relying on HTTP status code. And keep using HTTP 200.\r\n\r\nThat way people can see which RPC request failed in the lot.",
      "created_at" : "2020-08-09T04:57:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-671006495",
      "id" : 671006495,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTAwNjQ5NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-09T04:57:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671006495",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/3020646?v=4",
         "events_url" : "https://api.github.com/users/NicolasDorier/events{/privacy}",
         "followers_url" : "https://api.github.com/users/NicolasDorier/followers",
         "following_url" : "https://api.github.com/users/NicolasDorier/following{/other_user}",
         "gists_url" : "https://api.github.com/users/NicolasDorier/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/NicolasDorier",
         "id" : 3020646,
         "login" : "NicolasDorier",
         "node_id" : "MDQ6VXNlcjMwMjA2NDY=",
         "organizations_url" : "https://api.github.com/users/NicolasDorier/orgs",
         "received_events_url" : "https://api.github.com/users/NicolasDorier/received_events",
         "repos_url" : "https://api.github.com/users/NicolasDorier/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/NicolasDorier/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/NicolasDorier/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/NicolasDorier"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> This however is dangerous if the RPC requests are not idempotent, as some requests could be executed twice.\r\n\r\nNot really because the requests are scanned before they are executed so either all of them fail or all of them are executed. Both in Bitcoin Core and my proxy. Therefore error 403 is fine. It'd only be a problem if someone wrote their own RPC proxy with different behavior (which is their bug).",
      "created_at" : "2020-08-09T05:35:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-671009247",
      "id" : 671009247,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTAwOTI0Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-09T05:35:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671009247",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1178779?v=4",
         "events_url" : "https://api.github.com/users/Kixunil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kixunil/followers",
         "following_url" : "https://api.github.com/users/Kixunil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kixunil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kixunil",
         "id" : 1178779,
         "login" : "Kixunil",
         "node_id" : "MDQ6VXNlcjExNzg3Nzk=",
         "organizations_url" : "https://api.github.com/users/Kixunil/orgs",
         "received_events_url" : "https://api.github.com/users/Kixunil/received_events",
         "repos_url" : "https://api.github.com/users/Kixunil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kixunil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kixunil"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "https://github.com/bitcoin/bitcoin/pull/12763/files#diff-744201ccb403526a4b5bf52d6e5367deR216-R219\r\n\r\nOh, I thought it was a worse issue than it is! Yes, the code rejects the entire batch if any are not permitted. This is by design; if you have a random failure in the middle of your batch that would be potentially bad. It's better to reject the whole batch if the user is trying *any* unpermitted action.\r\n\r\nHow many RPCs do you actually need to detect? Maybe what I'd suggest is structuring your test-packet as:\r\n\r\nTest Packet 1: All Mandatory RPCs\r\nTest Packet 2: All Optional RPCs\r\nIf 2 fails: Test RPCs one-by-one\r\n\r\n",
      "created_at" : "2020-08-09T05:59:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-671010931",
      "id" : 671010931,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTAxMDkzMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-09T05:59:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671010931",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> If 2 fails: Test RPCs one-by-one\r\n\r\nThat's exactly what he did recently. :)\r\n\r\nYou have a good point about failing the whole batch. I guess that's better than (likely negligible) performance issues of scanning. Scanning RPCs should probably be done with a special method anyway.\r\n\r\nSo what do you think about publishing `RPC_METHOD_NOT_FOUND`?",
      "created_at" : "2020-08-09T06:33:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-671013724",
      "id" : 671013724,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTAxMzcyNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-09T06:33:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671013724",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1178779?v=4",
         "events_url" : "https://api.github.com/users/Kixunil/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Kixunil/followers",
         "following_url" : "https://api.github.com/users/Kixunil/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Kixunil/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Kixunil",
         "id" : 1178779,
         "login" : "Kixunil",
         "node_id" : "MDQ6VXNlcjExNzg3Nzk=",
         "organizations_url" : "https://api.github.com/users/Kixunil/orgs",
         "received_events_url" : "https://api.github.com/users/Kixunil/received_events",
         "repos_url" : "https://api.github.com/users/Kixunil/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Kixunil/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Kixunil/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Kixunil"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "That should be fine to do. It might be nice to differentiate RPC_METHOD_NOT_FOUND and RPC_METHOD_NOT_ALLOWED. Right now the code does not make a distinction, but you could make RPC_METHOD_NOT_ALLOWED be the error as the precheck, and RPC_METHOD_NOT_FOUND as the one once you try to run it and it's not there (but may also be nice to make that a pre-checked thing IMO)",
      "created_at" : "2020-08-09T17:12:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-671077386",
      "id" : 671077386,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MTA3NzM4Ng==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671077386/reactions"
      },
      "updated_at" : "2020-08-09T17:12:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/671077386",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/886523?v=4",
         "events_url" : "https://api.github.com/users/JeremyRubin/events{/privacy}",
         "followers_url" : "https://api.github.com/users/JeremyRubin/followers",
         "following_url" : "https://api.github.com/users/JeremyRubin/following{/other_user}",
         "gists_url" : "https://api.github.com/users/JeremyRubin/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/JeremyRubin",
         "id" : 886523,
         "login" : "JeremyRubin",
         "node_id" : "MDQ6VXNlcjg4NjUyMw==",
         "organizations_url" : "https://api.github.com/users/JeremyRubin/orgs",
         "received_events_url" : "https://api.github.com/users/JeremyRubin/received_events",
         "repos_url" : "https://api.github.com/users/JeremyRubin/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/JeremyRubin/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/JeremyRubin/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/JeremyRubin"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The inconsistencies between single / batch RPCs are addressed in https://github.com/bitcoin/bitcoin/pull/27101 which adds a stricter jsonrpc 2.0 behavior when requested by the client (by adding `\"jsonrpc\": \"2.0\"` to the request object). In particular, we try to always return `HTTP 200 OK` unless there actually is a server error.\r\n\r\nThat PR does not affect the whitelist / authorization processing which looks like, in this discussion, is decidedly  acceptable. \r\n\r\n@Kixunil and @JeremyRubin are you able to review and feed back on #27101 ? We might be able to close this issue as duplicate of https://github.com/bitcoin/bitcoin/issues/2960",
      "created_at" : "2023-03-27T14:34:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19087#issuecomment-1485227709",
      "id" : 1485227709,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19087",
      "node_id" : "IC_kwDOABII585Yhsa9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1485227709/reactions"
      },
      "updated_at" : "2023-03-27T14:34:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1485227709",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2084648?v=4",
         "events_url" : "https://api.github.com/users/pinheadmz/events{/privacy}",
         "followers_url" : "https://api.github.com/users/pinheadmz/followers",
         "following_url" : "https://api.github.com/users/pinheadmz/following{/other_user}",
         "gists_url" : "https://api.github.com/users/pinheadmz/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/pinheadmz",
         "id" : 2084648,
         "login" : "pinheadmz",
         "node_id" : "MDQ6VXNlcjIwODQ2NDg=",
         "organizations_url" : "https://api.github.com/users/pinheadmz/orgs",
         "received_events_url" : "https://api.github.com/users/pinheadmz/received_events",
         "repos_url" : "https://api.github.com/users/pinheadmz/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/pinheadmz/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/pinheadmz/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/pinheadmz"
      }
   }
]
