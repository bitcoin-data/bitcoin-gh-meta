[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nIt would be good to motivate the change. Maybe something like this?\r\n\r\nThe scriptnum test (https://github.com/bitcoin/bitcoin/pull/14816) is a roundtrip test of the test framwork. Thus, it would be better suited as a unit test. This is now possible with the introduction of the unit test module for the functional tests. See https://github.com/bitcoin/bitcoin/pull/18576",
      "created_at" : "2020-05-27T17:18:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-634814645",
      "id" : 634814645,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19082",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNDgxNDY0NQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634814645/reactions"
      },
      "updated_at" : "2020-05-27T17:18:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634814645",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431312915"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431312915"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think for a unit test it could make sense to simply hard-code the value of `coinbase_tx.vin[0].scriptSig` instead of computing it every single time by mining 200 blocks.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-27T17:21:06Z",
      "diff_hunk" : "@@ -731,3 +731,37 @@ def test_bn2vch(self):\n         self.assertEqual(bn2vch(0xFFFFFFFF), bytes([0xFF, 0xFF, 0xFF, 0xFF, 0x00]))\n         self.assertEqual(bn2vch(123456789), bytes([0x15, 0xCD, 0x5B, 0x07]))\n         self.assertEqual(bn2vch(-54321), bytes([0x31, 0xD4, 0x80]))\n+\n+    def test_mining(self):\n+        self.mine_chain()\n+        node = self.nodes[0]\n+\n+        self.log.info('getmininginfo')\n+        mining_info = node.getmininginfo()\n+        self.assert_equal(mining_info['blocks'], 200)\n+        self.assert_equal(mining_info['chain'], self.chain)\n+        assert 'currentblocktx' not in mining_info\n+        assert 'currentblockweight' not in mining_info\n+        self.assert_equal(mining_info['difficulty'], Decimal('4.656542373906925E-10'))\n+        self.assert_equal(mining_info['networkhashps'], Decimal('0.003333333333333334'))\n+        self.assert_equal(mining_info['pooledtx'], 0)\n+\n+        # Mine a block to leave initial block download\n+        node.generatetoaddress(1, node.get_deterministic_priv_key().address)\n+        tmpl = node.getblocktemplate({'rules': ['segwit']})\n+        self.log.info(\"getblocktemplate: Test capability advertised\")\n+        assert 'proposal' in tmpl['capabilities']\n+        assert 'coinbasetxn' not in tmpl\n+\n+        next_height = int(tmpl[\"height\"])\n+        coinbase_tx = create_coinbase(height=next_height)\n+        # sequence numbers must not be max for nLockTime to have effect\n+        coinbase_tx.vin[0].nSequence = 2 ** 32 - 2\n+        coinbase_tx.rehash()\n+\n+        # round-trip the encoded bip34 block height commitment\n+        self.assert_equal(CScriptNum.decode(coinbase_tx.vin[0].scriptSig), next_height)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431312915",
      "id" : 431312915,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMxMjkxNQ==",
      "original_commit_id" : "4b38a1cd1bc88e23e1e74cacfdb441e315fad3f5",
      "original_line" : 763,
      "original_position" : 33,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : null,
      "pull_request_review_id" : 419446839,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431312915/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431312915",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431331283"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431331283"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this one was actually testing the miner, so should be kept in this file.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-27T17:50:32Z",
      "diff_hunk" : "@@ -83,20 +81,8 @@ def assert_submitblock(block, result_str_1, result_str_2=None):\n         self.log.info(\"getblocktemplate: Test capability advertised\")\n         assert 'proposal' in tmpl['capabilities']\n         assert 'coinbasetxn' not in tmpl\n-\n-        next_height = int(tmpl[\"height\"])\n-        coinbase_tx = create_coinbase(height=next_height)\n-        # sequence numbers must not be max for nLockTime to have effect\n-        coinbase_tx.vin[0].nSequence = 2 ** 32 - 2\n-        coinbase_tx.rehash()\n-\n-        # round-trip the encoded bip34 block height commitment\n-        assert_equal(CScriptNum.decode(coinbase_tx.vin[0].scriptSig), next_height)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431331283",
      "id" : 431331283,
      "line" : 94,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMzMTI4Mw==",
      "original_commit_id" : "0107629e29641da7b21d14906743c19716f933e4",
      "original_line" : 94,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "test/functional/mining_basic.py",
      "position" : 13,
      "pull_request_review_id" : 419471139,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431331283/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431331283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431357527"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431357527"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you should only really be touching these 4 lines in `mining_basic.py`. The first assertion should stay like Marco said, and you'll need to keep the import statement in order for it to work.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-27T18:32:09Z",
      "diff_hunk" : "@@ -83,20 +81,9 @@ def assert_submitblock(block, result_str_1, result_str_2=None):\n         self.log.info(\"getblocktemplate: Test capability advertised\")\n         assert 'proposal' in tmpl['capabilities']\n         assert 'coinbasetxn' not in tmpl\n-\n-        next_height = int(tmpl[\"height\"])\n-        coinbase_tx = create_coinbase(height=next_height)\n-        # sequence numbers must not be max for nLockTime to have effect\n+        coinbase_tx = create_coinbase(height=int(tmpl[\"height\"]) + 1)\n         coinbase_tx.vin[0].nSequence = 2 ** 32 - 2\n         coinbase_tx.rehash()\n-\n-        # round-trip the encoded bip34 block height commitment\n-        assert_equal(CScriptNum.decode(coinbase_tx.vin[0].scriptSig), next_height)\n-        # round-trip negative and multi-byte CScriptNums to catch python regression\n-        assert_equal(CScriptNum.decode(CScriptNum.encode(CScriptNum(1500))), 1500)\n-        assert_equal(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1500))), -1500)\n-        assert_equal(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1))), -1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431357527",
      "id" : 431357527,
      "line" : 98,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM1NzUyNw==",
      "original_commit_id" : "fba67c6672242cb39d06b6aa5ffdc83cde6fd4b0",
      "original_line" : 98,
      "original_position" : 26,
      "original_start_line" : 95,
      "path" : "test/functional/mining_basic.py",
      "position" : 17,
      "pull_request_review_id" : 419499651,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431357527/reactions"
      },
      "side" : "LEFT",
      "start_line" : 95,
      "start_side" : "LEFT",
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431357527",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431367857"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431367857"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: maybe name this `test_cscriptnum_encoding` or something else more specific? Since there are other encode/decode functions in this file, i.e. for `CScriptOp`.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-27T18:50:58Z",
      "diff_hunk" : "@@ -731,3 +731,11 @@ def test_bn2vch(self):\n         self.assertEqual(bn2vch(0xFFFFFFFF), bytes([0xFF, 0xFF, 0xFF, 0xFF, 0x00]))\n         self.assertEqual(bn2vch(123456789), bytes([0x15, 0xCD, 0x5B, 0x07]))\n         self.assertEqual(bn2vch(-54321), bytes([0x31, 0xD4, 0x80]))\n+\n+    def test_decode(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431367857",
      "id" : 431367857,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM2Nzg1Nw==",
      "original_commit_id" : "fba67c6672242cb39d06b6aa5ffdc83cde6fd4b0",
      "original_line" : 735,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : null,
      "pull_request_review_id" : 419499651,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431367857/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431367857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431369690"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431369690"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Does this comment apply here?",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-27T18:54:10Z",
      "diff_hunk" : "@@ -731,3 +731,11 @@ def test_bn2vch(self):\n         self.assertEqual(bn2vch(0xFFFFFFFF), bytes([0xFF, 0xFF, 0xFF, 0xFF, 0x00]))\n         self.assertEqual(bn2vch(123456789), bytes([0x15, 0xCD, 0x5B, 0x07]))\n         self.assertEqual(bn2vch(-54321), bytes([0x31, 0xD4, 0x80]))\n+\n+    def test_decode(self):\n+        # round-trip the encoded bip34 block height commitment",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431369690",
      "id" : 431369690,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM2OTY5MA==",
      "original_commit_id" : "fba67c6672242cb39d06b6aa5ffdc83cde6fd4b0",
      "original_line" : 736,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : null,
      "pull_request_review_id" : 419499651,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431369690/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431369690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431371299"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431371299"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe out of scope for this PR, but would it be helpful to add more tests (e.g. big numbers up to 4 bytes)?",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-27T18:57:00Z",
      "diff_hunk" : "@@ -731,3 +731,11 @@ def test_bn2vch(self):\n         self.assertEqual(bn2vch(0xFFFFFFFF), bytes([0xFF, 0xFF, 0xFF, 0xFF, 0x00]))\n         self.assertEqual(bn2vch(123456789), bytes([0x15, 0xCD, 0x5B, 0x07]))\n         self.assertEqual(bn2vch(-54321), bytes([0x31, 0xD4, 0x80]))\n+\n+    def test_decode(self):\n+        # round-trip the encoded bip34 block height commitment\n+        self.assertEqual(CScriptNum.decode(b'\\x02\\xcb\\x00'), 203)\n+        # round-trip negative and multi-byte CScriptNums to catch python regression\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(1500))), 1500)\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1500))), -1500)\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1))), -1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431371299",
      "id" : 431371299,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTM3MTI5OQ==",
      "original_commit_id" : "fba67c6672242cb39d06b6aa5ffdc83cde6fd4b0",
      "original_line" : 738,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : null,
      "pull_request_review_id" : 419499651,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431371299/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431371299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK: more testing is better!\r\n\r\nWelcome as a contributor @gillichu :)",
      "created_at" : "2020-05-27T19:06:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-634878006",
      "id" : 634878006,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19082",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNDg3ODAwNg==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 5,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 5,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634878006/reactions"
      },
      "updated_at" : "2020-05-27T19:06:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634878006",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "created_at" : "2020-05-27T19:47:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-634902275",
      "id" : 634902275,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19082",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNDkwMjI3NQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634902275/reactions"
      },
      "updated_at" : "2020-05-30T22:17:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634902275",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431769307"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431769307"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Any reason to remove this comment and the empty lines?",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-28T11:34:35Z",
      "diff_hunk" : "@@ -83,20 +82,12 @@ def assert_submitblock(block, result_str_1, result_str_2=None):\n         self.log.info(\"getblocktemplate: Test capability advertised\")\n         assert 'proposal' in tmpl['capabilities']\n         assert 'coinbasetxn' not in tmpl\n-\n         next_height = int(tmpl[\"height\"])\n         coinbase_tx = create_coinbase(height=next_height)\n-        # sequence numbers must not be max for nLockTime to have effect",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431769307",
      "id" : 431769307,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc2OTMwNw==",
      "original_commit_id" : "9d5dd8752a1bc89f7fcfc1a9b6e0d042b9c20616",
      "original_line" : 89,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/functional/mining_basic.py",
      "position" : null,
      "pull_request_review_id" : 420019996,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431769307/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431769307",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for you contribution. Looks good to me.\r\n\r\nA small nit: please change the git commit message to a short title (up to say, 70 characters), then an empty line, then the rest of the description. This because tools (such as `git pretty=oneline`) will otherwise put it all on one line instead of displaying just the title:\r\n```\r\n9d5dd8752â¦ (pull/19082/head) [test] Migrates the CScriptNum decode tests into a unit test, moving some changes made in #14816. This was made possible by the integration of test_framework unit testing in #18576.\r\n```",
      "created_at" : "2020-05-28T14:59:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-635404401",
      "id" : 635404401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19082",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNTQwNDQwMQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/635404401/reactions"
      },
      "updated_at" : "2020-05-28T14:59:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/635404401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431909280"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431909280"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yesâmore tests would be welcome here IMO, \r\nMaybe the list of test numbers in [scriptnum_tests.cpp](https://github.com/bitcoin/bitcoin/blob/master/src/test/scriptnum_tests.cpp#L17) also comes in useful here.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-28T15:05:07Z",
      "diff_hunk" : "@@ -731,3 +731,11 @@ def test_bn2vch(self):\n         self.assertEqual(bn2vch(0xFFFFFFFF), bytes([0xFF, 0xFF, 0xFF, 0xFF, 0x00]))\n         self.assertEqual(bn2vch(123456789), bytes([0x15, 0xCD, 0x5B, 0x07]))\n         self.assertEqual(bn2vch(-54321), bytes([0x31, 0xD4, 0x80]))\n+\n+    def test_decode(self):\n+        # round-trip the encoded bip34 block height commitment\n+        self.assertEqual(CScriptNum.decode(b'\\x02\\xcb\\x00'), 203)\n+        # round-trip negative and multi-byte CScriptNums to catch python regression\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(1500))), 1500)\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1500))), -1500)\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1))), -1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r431909280",
      "id" : 431909280,
      "in_reply_to_id" : 431371299,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkwOTI4MA==",
      "original_commit_id" : "fba67c6672242cb39d06b6aa5ffdc83cde6fd4b0",
      "original_line" : 738,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : null,
      "pull_request_review_id" : 420207117,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431909280/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/431909280",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432877670"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432877670"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Question: I'm not too familiar with what \"catch python regression\" means ð  so I'm kind of confused about the difference between`test_cscriptnum_encoding` and `test_cscriptnum_encoding_large`. Could they be combined in the `values` array?",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-30T18:43:10Z",
      "diff_hunk" : "@@ -731,3 +731,12 @@ def test_bn2vch(self):\n         self.assertEqual(bn2vch(0xFFFFFFFF), bytes([0xFF, 0xFF, 0xFF, 0xFF, 0x00]))\n         self.assertEqual(bn2vch(123456789), bytes([0x15, 0xCD, 0x5B, 0x07]))\n         self.assertEqual(bn2vch(-54321), bytes([0x31, 0xD4, 0x80]))\n+    def test_cscriptnum_encoding(self):\n+        # round-trip negative and multi-byte CScriptNums to catch python regression\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(1500))), 1500)\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1500))), -1500)\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1))), -1)\n+    def test_cscriptnum_encoding_large(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432877670",
      "id" : 432877670,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg3NzY3MA==",
      "original_commit_id" : "401487d24e2f1753ced039b96a48d53b15aea648",
      "original_line" : 739,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : null,
      "pull_request_review_id" : 421434702,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432877670/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432877670",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432893900"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432893900"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"python regression\" is an odd way to say \"regression in the scriptnum encoding (which is written in python and not c++)\"",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-30T22:59:31Z",
      "diff_hunk" : "@@ -731,3 +731,12 @@ def test_bn2vch(self):\n         self.assertEqual(bn2vch(0xFFFFFFFF), bytes([0xFF, 0xFF, 0xFF, 0xFF, 0x00]))\n         self.assertEqual(bn2vch(123456789), bytes([0x15, 0xCD, 0x5B, 0x07]))\n         self.assertEqual(bn2vch(-54321), bytes([0x31, 0xD4, 0x80]))\n+    def test_cscriptnum_encoding(self):\n+        # round-trip negative and multi-byte CScriptNums to catch python regression\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(1500))), 1500)\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1500))), -1500)\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1))), -1)\n+    def test_cscriptnum_encoding_large(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432893900",
      "id" : 432893900,
      "in_reply_to_id" : 432877670,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5MzkwMA==",
      "original_commit_id" : "401487d24e2f1753ced039b96a48d53b15aea648",
      "original_line" : 739,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : null,
      "pull_request_review_id" : 421449196,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432893900/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432893900",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432893937"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432893937"
         }
      },
      "author_association" : "MEMBER",
      "body" : "So you are probably right and they can be combined in one list.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-30T23:00:04Z",
      "diff_hunk" : "@@ -731,3 +731,12 @@ def test_bn2vch(self):\n         self.assertEqual(bn2vch(0xFFFFFFFF), bytes([0xFF, 0xFF, 0xFF, 0xFF, 0x00]))\n         self.assertEqual(bn2vch(123456789), bytes([0x15, 0xCD, 0x5B, 0x07]))\n         self.assertEqual(bn2vch(-54321), bytes([0x31, 0xD4, 0x80]))\n+    def test_cscriptnum_encoding(self):\n+        # round-trip negative and multi-byte CScriptNums to catch python regression\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(1500))), 1500)\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1500))), -1500)\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1))), -1)\n+    def test_cscriptnum_encoding_large(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432893937",
      "id" : 432893937,
      "in_reply_to_id" : 432877670,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg5MzkzNw==",
      "original_commit_id" : "401487d24e2f1753ced039b96a48d53b15aea648",
      "original_line" : 739,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : null,
      "pull_request_review_id" : 421449225,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432893937/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432893937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432964270"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432964270"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you can remove \" to catch python regression\" from the comment",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-31T16:49:27Z",
      "diff_hunk" : "@@ -731,3 +731,12 @@ def test_bn2vch(self):\n         self.assertEqual(bn2vch(0xFFFFFFFF), bytes([0xFF, 0xFF, 0xFF, 0xFF, 0x00]))\n         self.assertEqual(bn2vch(123456789), bytes([0x15, 0xCD, 0x5B, 0x07]))\n         self.assertEqual(bn2vch(-54321), bytes([0x31, 0xD4, 0x80]))\n+    def test_cscriptnum_encoding(self):\n+        # round-trip negative and multi-byte CScriptNums to catch python regression\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(1500))), 1500)\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1500))), -1500)\n+        self.assertEqual(CScriptNum.decode(CScriptNum.encode(CScriptNum(-1))), -1)\n+    def test_cscriptnum_encoding_large(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432964270",
      "id" : 432964270,
      "in_reply_to_id" : 432877670,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk2NDI3MA==",
      "original_commit_id" : "401487d24e2f1753ced039b96a48d53b15aea648",
      "original_line" : 739,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : null,
      "pull_request_review_id" : 421510530,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432964270/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432964270",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432964710"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432964710"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This seems to be a test of the `create_coinbase()` function in blocktools.py. It might be worth moving it to a unit test there.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-31T16:54:56Z",
      "diff_hunk" : "@@ -92,11 +92,6 @@ def assert_submitblock(block, result_str_1, result_str_2=None):\n \n         # round-trip the encoded bip34 block height commitment\n         assert_equal(CScriptNum.decode(coinbase_tx.vin[0].scriptSig), next_height)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432964710",
      "id" : 432964710,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk2NDcxMA==",
      "original_commit_id" : "ef4cce175bf369afe8e62e27295083bc0703e653",
      "original_line" : 94,
      "original_position" : 3,
      "original_start_line" : 93,
      "path" : "test/functional/mining_basic.py",
      "position" : null,
      "pull_request_review_id" : 421510890,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432964710/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432964710",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432964785"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432964785"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please add a blank line between function definitions.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-31T16:55:38Z",
      "diff_hunk" : "@@ -731,3 +731,8 @@ def test_bn2vch(self):\n         self.assertEqual(bn2vch(0xFFFFFFFF), bytes([0xFF, 0xFF, 0xFF, 0xFF, 0x00]))\n         self.assertEqual(bn2vch(123456789), bytes([0x15, 0xCD, 0x5B, 0x07]))\n         self.assertEqual(bn2vch(-54321), bytes([0x31, 0xD4, 0x80]))\n+    def test_cscriptnum_encoding(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432964785",
      "id" : 432964785,
      "line" : 735,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk2NDc4NQ==",
      "original_commit_id" : "ef4cce175bf369afe8e62e27295083bc0703e653",
      "original_line" : 735,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/script.py",
      "position" : 5,
      "pull_request_review_id" : 421510890,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432964785/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432964785",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "A couple more suggestions for the commit log and PR description:\r\n\r\n- use the imperative mood (s/Moved the CScript/Move the CScript/ and s/Migrates the CScript/Migrate the CScript/).\r\n- wrap the message body width at 72 or 80 characters.\r\n\r\nSee https://chris.beams.io/posts/git-commit/ for more tips on writing great commit logs.",
      "created_at" : "2020-05-31T17:00:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-636498365",
      "id" : 636498365,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19082",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjQ5ODM2NQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636498365/reactions"
      },
      "updated_at" : "2020-05-31T17:00:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636498365",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432968791"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432968791"
         }
      },
      "author_association" : "NONE",
      "body" : "Added this newline failing the Python linter, will update with next batch of changes.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-31T17:48:24Z",
      "diff_hunk" : "@@ -217,3 +219,11 @@ def send_to_witness(use_p2wsh, node, utxo, pubkey, encode_p2sh, amount, sign=Tru\n             tx_to_witness = ToHex(tx)\n \n     return node.sendrawtransaction(tx_to_witness)\n+\n+class TestFrameworkScript(unittest.TestCase):\n+    def test_createcoinbase(self):\n+        next_height = 20\n+        coinbase_tx = create_coinbase(height=next_height)\n+        # round-trip the encoded bip34 block height commitment\n+        assert_equal(CScriptNum.decode(coinbase_tx.vin[0].scriptSig), next_height)\n+        ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432968791",
      "id" : 432968791,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk2ODc5MQ==",
      "original_commit_id" : "58c4a30b0d5088aa59a3521e3f1beb5fc2d9d737",
      "original_line" : 229,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/blocktools.py",
      "position" : null,
      "pull_request_review_id" : 421514431,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432968791/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432968791",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13020431?v=4",
         "events_url" : "https://api.github.com/users/gillichu/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gillichu/followers",
         "following_url" : "https://api.github.com/users/gillichu/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gillichu/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gillichu",
         "id" : 13020431,
         "login" : "gillichu",
         "node_id" : "MDQ6VXNlcjEzMDIwNDMx",
         "organizations_url" : "https://api.github.com/users/gillichu/orgs",
         "received_events_url" : "https://api.github.com/users/gillichu/received_events",
         "repos_url" : "https://api.github.com/users/gillichu/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gillichu/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gillichu/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gillichu"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432970799"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432970799"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Btw, if you install `flake8`, you can run the python linter with `test/lint/lint-python.sh`. It has saved me a lot of force pushes ð ",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-31T18:14:03Z",
      "diff_hunk" : "@@ -217,3 +219,11 @@ def send_to_witness(use_p2wsh, node, utxo, pubkey, encode_p2sh, amount, sign=Tru\n             tx_to_witness = ToHex(tx)\n \n     return node.sendrawtransaction(tx_to_witness)\n+\n+class TestFrameworkScript(unittest.TestCase):\n+    def test_createcoinbase(self):\n+        next_height = 20\n+        coinbase_tx = create_coinbase(height=next_height)\n+        # round-trip the encoded bip34 block height commitment\n+        assert_equal(CScriptNum.decode(coinbase_tx.vin[0].scriptSig), next_height)\n+        ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432970799",
      "id" : 432970799,
      "in_reply_to_id" : 432968791,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk3MDc5OQ==",
      "original_commit_id" : "58c4a30b0d5088aa59a3521e3f1beb5fc2d9d737",
      "original_line" : 229,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/blocktools.py",
      "position" : null,
      "pull_request_review_id" : 421516203,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432970799/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432970799",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432971275"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432971275"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think you might have copied this from `script.py`? A better name might be `TestFrameworkBlocktools`",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-31T18:20:30Z",
      "diff_hunk" : "@@ -217,3 +219,11 @@ def send_to_witness(use_p2wsh, node, utxo, pubkey, encode_p2sh, amount, sign=Tru\n             tx_to_witness = ToHex(tx)\n \n     return node.sendrawtransaction(tx_to_witness)\n+\n+class TestFrameworkScript(unittest.TestCase):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432971275",
      "id" : 432971275,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk3MTI3NQ==",
      "original_commit_id" : "58c4a30b0d5088aa59a3521e3f1beb5fc2d9d737",
      "original_line" : 223,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/blocktools.py",
      "position" : null,
      "pull_request_review_id" : 421516611,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432971275/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432971275",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432971382"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432971382"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: I would keep the underscore in between, i.e. `test_create_coinbase`, and maybe just call it `height` since it's not in a sequence of blocks.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-31T18:21:59Z",
      "diff_hunk" : "@@ -217,3 +219,11 @@ def send_to_witness(use_p2wsh, node, utxo, pubkey, encode_p2sh, amount, sign=Tru\n             tx_to_witness = ToHex(tx)\n \n     return node.sendrawtransaction(tx_to_witness)\n+\n+class TestFrameworkScript(unittest.TestCase):\n+    def test_createcoinbase(self):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432971382",
      "id" : 432971382,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk3MTM4Mg==",
      "original_commit_id" : "58c4a30b0d5088aa59a3521e3f1beb5fc2d9d737",
      "original_line" : 224,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/blocktools.py",
      "position" : null,
      "pull_request_review_id" : 421516611,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432971382/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432971382",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432971473"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432971473"
         }
      },
      "author_association" : "MEMBER",
      "body" : "delete this comment?",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-05-31T18:23:01Z",
      "diff_hunk" : "@@ -91,12 +91,6 @@ def assert_submitblock(block, result_str_1, result_str_2=None):\n         coinbase_tx.rehash()\n \n         # round-trip the encoded bip34 block height commitment",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r432971473",
      "id" : 432971473,
      "line" : 91,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk3MTQ3Mw==",
      "original_commit_id" : "58c4a30b0d5088aa59a3521e3f1beb5fc2d9d737",
      "original_line" : 91,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "test/functional/mining_basic.py",
      "position" : 12,
      "pull_request_review_id" : 421516611,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432971473/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/432971473",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r433013248"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433013248"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: sort please :)",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-06-01T02:00:32Z",
      "diff_hunk" : "@@ -68,6 +68,7 @@\n \n TEST_FRAMEWORK_MODULES = [\n     \"script\",\n+    \"blocktools\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r433013248",
      "id" : 433013248,
      "line" : 71,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzAxMzI0OA==",
      "original_commit_id" : "58c4a30b0d5088aa59a3521e3f1beb5fc2d9d737",
      "original_line" : 71,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "test/functional/test_runner.py",
      "position" : 4,
      "pull_request_review_id" : 421558225,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433013248/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-03T14:18:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/433013248",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "rebased the branch, addressed review comments and updated tests. thanks for the review @laanwj  @gzhao408  @jnewbery comments have been addressed!",
      "created_at" : "2020-06-03T20:31:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-638445406",
      "id" : 638445406,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19082",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzODQ0NTQwNg==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638445406/reactions"
      },
      "updated_at" : "2020-06-03T20:31:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638445406",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13020431?v=4",
         "events_url" : "https://api.github.com/users/gillichu/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gillichu/followers",
         "following_url" : "https://api.github.com/users/gillichu/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gillichu/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gillichu",
         "id" : 13020431,
         "login" : "gillichu",
         "node_id" : "MDQ6VXNlcjEzMDIwNDMx",
         "organizations_url" : "https://api.github.com/users/gillichu/orgs",
         "received_events_url" : "https://api.github.com/users/gillichu/received_events",
         "repos_url" : "https://api.github.com/users/gillichu/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gillichu/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gillichu/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gillichu"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @gillichu. I think the PR title, commit summary and commit details could be made a bit clearer:\r\n\r\n- switch to indicative mood (eg \"test: Moved the CScriptNum asserts into the unit test in script.py\" -> \"Add CScriptNum and create_coinbase unit tests\", \"Migrates the CScriptNum decode tests\" -> \"Migrate the CScriptNum decode tests\", etc)\r\n- no need to include the complete history (\"... changes made in #14816\", \"... integration of test_framework unit testing in #18576.\").",
      "created_at" : "2020-06-04T03:03:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-638573839",
      "id" : 638573839,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19082",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzODU3MzgzOQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638573839/reactions"
      },
      "updated_at" : "2020-06-04T03:03:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638573839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 7daffc6a90a797ce7c365a893a31a31b0206985c\r\nLooks good to me now!\r\nPlease keep the additional suggestions in mind for a next PR, but I don't think we should keep iterating on the commit message too much.",
      "created_at" : "2020-06-04T15:26:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#issuecomment-638923914",
      "id" : 638923914,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19082",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzODkyMzkxNA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 2,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638923914/reactions"
      },
      "updated_at" : "2020-06-04T15:26:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638923914",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r435380500"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435380500"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't understand. How is this testing the miner? It's asserting on the return value of `create_coinbase()`, which is purely a python helper function.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-06-04T16:12:54Z",
      "diff_hunk" : "@@ -83,20 +81,8 @@ def assert_submitblock(block, result_str_1, result_str_2=None):\n         self.log.info(\"getblocktemplate: Test capability advertised\")\n         assert 'proposal' in tmpl['capabilities']\n         assert 'coinbasetxn' not in tmpl\n-\n-        next_height = int(tmpl[\"height\"])\n-        coinbase_tx = create_coinbase(height=next_height)\n-        # sequence numbers must not be max for nLockTime to have effect\n-        coinbase_tx.vin[0].nSequence = 2 ** 32 - 2\n-        coinbase_tx.rehash()\n-\n-        # round-trip the encoded bip34 block height commitment\n-        assert_equal(CScriptNum.decode(coinbase_tx.vin[0].scriptSig), next_height)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r435380500",
      "id" : 435380500,
      "in_reply_to_id" : 431331283,
      "line" : 94,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM4MDUwMA==",
      "original_commit_id" : "0107629e29641da7b21d14906743c19716f933e4",
      "original_line" : 94,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "test/functional/mining_basic.py",
      "position" : 13,
      "pull_request_review_id" : 424612315,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435380500/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-04T16:13:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435380500",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r435380720"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435380720"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This hasn't been deleted.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-06-04T16:13:15Z",
      "diff_hunk" : "@@ -91,12 +91,6 @@ def assert_submitblock(block, result_str_1, result_str_2=None):\n         coinbase_tx.rehash()\n \n         # round-trip the encoded bip34 block height commitment",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r435380720",
      "id" : 435380720,
      "in_reply_to_id" : 432971473,
      "line" : 91,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM4MDcyMA==",
      "original_commit_id" : "58c4a30b0d5088aa59a3521e3f1beb5fc2d9d737",
      "original_line" : 91,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "test/functional/mining_basic.py",
      "position" : 12,
      "pull_request_review_id" : 424612315,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435380720/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-04T16:13:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435380720",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r435387447"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435387447"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Correct. I missed that this is not the coinbase from the previous `generatetoaddress`. It seems the test was moved, so this should be correct now in master.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-06-04T16:23:54Z",
      "diff_hunk" : "@@ -83,20 +81,8 @@ def assert_submitblock(block, result_str_1, result_str_2=None):\n         self.log.info(\"getblocktemplate: Test capability advertised\")\n         assert 'proposal' in tmpl['capabilities']\n         assert 'coinbasetxn' not in tmpl\n-\n-        next_height = int(tmpl[\"height\"])\n-        coinbase_tx = create_coinbase(height=next_height)\n-        # sequence numbers must not be max for nLockTime to have effect\n-        coinbase_tx.vin[0].nSequence = 2 ** 32 - 2\n-        coinbase_tx.rehash()\n-\n-        # round-trip the encoded bip34 block height commitment\n-        assert_equal(CScriptNum.decode(coinbase_tx.vin[0].scriptSig), next_height)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r435387447",
      "id" : 435387447,
      "in_reply_to_id" : 431331283,
      "line" : 94,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM4NzQ0Nw==",
      "original_commit_id" : "0107629e29641da7b21d14906743c19716f933e4",
      "original_line" : 94,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "test/functional/mining_basic.py",
      "position" : 13,
      "pull_request_review_id" : 424621443,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435387447/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-04T16:23:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435387447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r435388608"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435388608"
         }
      },
      "author_association" : "NONE",
      "body" : "Sorry about that :( I'll watch my changes more carefully next time, and look for a chance to take this out in the future.",
      "commit_id" : "7daffc6a90a797ce7c365a893a31a31b0206985c",
      "created_at" : "2020-06-04T16:25:46Z",
      "diff_hunk" : "@@ -91,12 +91,6 @@ def assert_submitblock(block, result_str_1, result_str_2=None):\n         coinbase_tx.rehash()\n \n         # round-trip the encoded bip34 block height commitment",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19082#discussion_r435388608",
      "id" : 435388608,
      "in_reply_to_id" : 432971473,
      "line" : 91,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTM4ODYwOA==",
      "original_commit_id" : "58c4a30b0d5088aa59a3521e3f1beb5fc2d9d737",
      "original_line" : 91,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "test/functional/mining_basic.py",
      "position" : 12,
      "pull_request_review_id" : 424622956,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19082",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435388608/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2020-06-04T16:25:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/435388608",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13020431?v=4",
         "events_url" : "https://api.github.com/users/gillichu/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gillichu/followers",
         "following_url" : "https://api.github.com/users/gillichu/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gillichu/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gillichu",
         "id" : 13020431,
         "login" : "gillichu",
         "node_id" : "MDQ6VXNlcjEzMDIwNDMx",
         "organizations_url" : "https://api.github.com/users/gillichu/orgs",
         "received_events_url" : "https://api.github.com/users/gillichu/received_events",
         "repos_url" : "https://api.github.com/users/gillichu/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gillichu/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gillichu/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gillichu"
      }
   }
]
