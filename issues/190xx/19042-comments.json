[
   {
      "author_association" : "NONE",
      "body" : "`onlynet=onion` guarantees that outgoing connections are made through Tor; incoming clearnet connections are still allowed. I think there's no reason to exclude non-broadcast activity from the Tor segment since being connected to more networks can only increase partitioning resistance.\r\n\r\nThat said, I think that `onlynet=onion` can create false expectations in terms of privacy because a node operating on both networks (due to incoming connections) will still broadcast through the clearnet.\r\n\r\nIt would be good to have something like: `broadcast-network=ipv4,ipv6,onion` and make it inherit the `onlynet` parameter, or else default to Tor if Tor is running locally.\r\n\r\nWould there be any interest in this?",
      "created_at" : "2020-06-04T03:53:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19042#issuecomment-638586706",
      "id" : 638586706,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19042",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzODU4NjcwNg==",
      "updated_at" : "2020-06-04T03:53:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/638586706",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/6831960?v=4",
         "events_url" : "https://api.github.com/users/vedran6/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vedran6/followers",
         "following_url" : "https://api.github.com/users/vedran6/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vedran6/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vedran6",
         "id" : 6831960,
         "login" : "vedran6",
         "node_id" : "MDQ6VXNlcjY4MzE5NjA=",
         "organizations_url" : "https://api.github.com/users/vedran6/orgs",
         "received_events_url" : "https://api.github.com/users/vedran6/received_events",
         "repos_url" : "https://api.github.com/users/vedran6/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vedran6/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vedran6/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vedran6"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Some bitcoin software such as wasabi and joinmarket already implement this by establishing a new Tor circuit, broadcasting the transaction, and then disconnecting.\r\n\r\nNo, JoinMarket does not do that. Transaction broadcast happens through Bitcoin Core. But not always by the initiator of the coinjoin (taker), by default it will be one of the participiants in coinjoin randomly.",
      "created_at" : "2022-02-11T12:08:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19042#issuecomment-1036149290",
      "id" : 1036149290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19042",
      "node_id" : "IC_kwDOABII5849wmIq",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036149290/reactions"
      },
      "updated_at" : "2022-02-11T12:09:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036149290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Related (duplicate) - #14692.",
      "created_at" : "2022-02-11T12:11:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19042#issuecomment-1036151429",
      "id" : 1036151429,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19042",
      "node_id" : "IC_kwDOABII5849wmqF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036151429/reactions"
      },
      "updated_at" : "2022-02-11T12:11:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036151429",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> For the resistance to first-broadcast analysis to be effective, the node should treat the transaction as if it wasn't theirs to begin with. I'm not familiar with the network code, so I'm not sure if anything would have to change relay policy-wise.\r\n\r\nI think the general idea is that you should consider your mempool to be an open book to all your inbound and outbound peers. So adding a wallet transaction to the mempool, which is readable by all your clearnet peers, and then sending the transaction on tor only will make it more than trivial for all clearnet peers to mark all your wallet transactions. See https://github.com/bitcoin/bitcoin/pull/15668#issuecomment-476738512 .\r\n\r\nSo I think one solution would be to never put the transaction in the mempool, but have logic in the wallet to create a one-shot connection to spit out the tx and immediately disconnect. Obviously your peer will learn your network fingerprint (version message), as well as your wallet tx (tx message). Though, with a connection over tor, and a normalized version message this should be conceptually OK.\r\n\r\nThe reason why I haven't drafted an implementation yet is because the wallet can't keep track of non-mempool change. See #11887. And fixing that appears non-trivial at first glance.",
      "created_at" : "2022-02-11T18:58:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19042#issuecomment-1036520722",
      "id" : 1036520722,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19042",
      "node_id" : "IC_kwDOABII5849yA0S",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036520722/reactions"
      },
      "updated_at" : "2022-02-11T18:58:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036520722",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > Some bitcoin software such as wasabi and joinmarket already implement this by establishing a new Tor circuit, broadcasting the transaction, and then disconnecting.\r\n> \r\n> No, JoinMarket does not do that. Transaction broadcast happens through Bitcoin Core. But not always by the initiator of the coinjoin (taker), by default it will be one of the participiants in coinjoin randomly.\r\n\r\ninteresting, when I wrote this I distinctly remember someone telling me that's how it worked and showed me the code that does it... perhaps I misunderstood the details. thanks for the clarification.",
      "created_at" : "2022-02-11T19:07:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19042#issuecomment-1036527971",
      "id" : 1036527971,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19042",
      "node_id" : "IC_kwDOABII5849yClj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036527971/reactions"
      },
      "updated_at" : "2022-02-11T19:07:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036527971",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I distinctly remember someone telling me that's how it worked and showed me the code that does it...\r\n\r\nWasabi does that, there you are correct, but not JoinMarket.",
      "created_at" : "2022-02-11T20:46:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19042#issuecomment-1036608718",
      "id" : 1036608718,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19042",
      "node_id" : "IC_kwDOABII5849yWTO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036608718/reactions"
      },
      "updated_at" : "2022-02-11T20:46:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036608718",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes Wasabi randomly selects one peer to broadcast transaction.\r\n\r\nRelated issue or feature request: https://github.com/bitcoin/bitcoin/issues/21876",
      "created_at" : "2022-02-11T23:05:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19042#issuecomment-1036728843",
      "id" : 1036728843,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19042",
      "node_id" : "IC_kwDOABII5849yzoL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036728843/reactions"
      },
      "updated_at" : "2022-02-11T23:05:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036728843",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "With default config in JoinMarket tx broadcast also is done by random peer, we just don't do multiple Tor circuit thing. Communication anyway happens not directly between peers, but via IRC server.",
      "created_at" : "2022-02-12T17:27:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19042#issuecomment-1037331420",
      "id" : 1037331420,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19042",
      "node_id" : "IC_kwDOABII58491Gvc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1037331420/reactions"
      },
      "updated_at" : "2022-02-12T17:27:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1037331420",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Communication anyway happens not directly between peers, but via IRC server.\r\n\r\nIs this being replaced with lightning?",
      "created_at" : "2022-02-12T17:35:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19042#issuecomment-1037336868",
      "id" : 1037336868,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19042",
      "node_id" : "IC_kwDOABII58491IEk",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1037336868/reactions"
      },
      "updated_at" : "2022-02-12T17:35:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1037336868",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Is this being replaced with lightning?\r\n\r\n[Work in progress](https://github.com/JoinMarket-Org/joinmarket-clientserver/pull/1000). But not replaced, both can exist in parallel.",
      "created_at" : "2022-02-12T17:41:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/19042#issuecomment-1037341045",
      "id" : 1037341045,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19042",
      "node_id" : "IC_kwDOABII58491JF1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1037341045/reactions"
      },
      "updated_at" : "2022-02-12T17:41:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1037341045",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   }
]
