{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Fixes https://github.com/bitcoin/bitcoin/issues/22612.\r\nWhen running e.g. `./src/bitcoind -datadir=/tmp/bitcoin -regtest -conf=/tmp/bitcoin/regtest/bitcoin.conf` and the specified config cannot be opened (doesn't exist, permission denied, ...), the initialization silently uses the default config.\r\n\r\nAs voidburn already noted:\r\n> I can't think of a situation in which a config file is specified explicitly (in the startup options, as per service unit linked above), but inaccessible, where the fail condition should be to keep booting using defaults instead.\r\n\r\nWith this patch applied, the initialization will fail immediately, if the specified config file cannot be opened. If no config file is explicitly specified, the behavior is unchanged. This not only affects `bitcoind`, but also `bitcoin-cli` and `bitcoin-qt`.\r\n\r\nIn the example below the datadir is accessible, but the config file is not due to insufficient permissions:\r\n```\r\n$ ./src/bitcoind -datadir=/tmp/bitcoin -regtest --debug=1 -conf=/tmp/bitcoin/regtest/bitcoin.conf\r\nError: Error reading configuration file: specified config file \"/tmp/bitcoin/regtest/bitcoin.conf\" could not be opened.\r\n```\r\n\r\n",
   "closed_at" : "2021-08-23T10:59:25Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 4,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22622/comments",
   "created_at" : "2021-08-04T11:07:42Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22622/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/22622",
   "id" : 960265375,
   "labels" : [
      {
         "color" : "5319e7",
         "default" : false,
         "description" : "",
         "id" : 241832923,
         "name" : "Utils/log/libs",
         "node_id" : "MDU6TGFiZWwyNDE4MzI5MjM=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22622/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDExOlB1bGxSZXF1ZXN0NzAzMzAzNTAx",
   "number" : 22622,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/22622.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22622",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/22622.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22622"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "util: Check if specified config file cannot be opened",
   "updated_at" : "2021-08-23T10:59:25Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22622",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/46975855?v=4",
      "events_url" : "https://api.github.com/users/n-thumann/events{/privacy}",
      "followers_url" : "https://api.github.com/users/n-thumann/followers",
      "following_url" : "https://api.github.com/users/n-thumann/following{/other_user}",
      "gists_url" : "https://api.github.com/users/n-thumann/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/n-thumann",
      "id" : 46975855,
      "login" : "n-thumann",
      "node_id" : "MDQ6VXNlcjQ2OTc1ODU1",
      "organizations_url" : "https://api.github.com/users/n-thumann/orgs",
      "received_events_url" : "https://api.github.com/users/n-thumann/received_events",
      "repos_url" : "https://api.github.com/users/n-thumann/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/n-thumann/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/n-thumann/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/n-thumann"
   }
}
