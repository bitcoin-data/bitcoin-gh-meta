{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "Please read this, thinking that there may be such a possibility.\r\nI fork each version of Bitcoin to make Fujicoin. I am currently testing Fujicoin made from v22.0rc2.\r\nhttps://github.com/fujicoin/fujicoin\r\n\r\nI often create large transactions with more than 350 inputs, but in v22.0, I fail to transfer money due to lack of fee about once every few times and get into a \"not in memory pool\" state.\r\nThis phenomenon sometimes occurred in previous versions. It rarely occurred in v0.21.x, but it seems that the frequency increased in v22.0.\r\n\r\nSpecific explanation\r\n--------------------\r\n\r\nThe following image is the dialog at the time of remittance.\r\n![fujicoin5](https://user-images.githubusercontent.com/7656623/128798045-08037fc5-d4ea-4dd2-9a5d-813cbd33c14a.png)\r\n\r\nThe following images show the remittance result and its details.\r\n![fujicoin6](https://user-images.githubusercontent.com/7656623/128798270-287f9586-4a31-449d-9e69-853a6a5c3b4b.png)\r\n\r\n![fujicoin7](https://user-images.githubusercontent.com/7656623/128798285-dc45a05e-0d71-488a-8e03-a46d30de7bdc.png)\r\n\r\nI made a program with python and calculated fee from raw Tx. In my calculation the fee was 2.57729334.\r\nTherefore, it is correct to be out of memoly pool due to insufficient remittance fee.\r\nIn this case, the pre-remittance fee calculation is incorrect.\r\n\r\nAs you can see from the figure, this phenomenon can be reproduced many times if the wallet state is the same.\r\nUnfortunately, I don't have any more parsing ability, so I can't identify what kind of transaction causes a calculation error.\r\n\r\nFortunately, I've never experienced this with regular size transactions. Transactions that could not be remitted can be canceled, so there is no actual harm. \r\n\r\nI think it's pretty difficult to identify this problem, but I think it's very good if it improves.\r\n",
   "closed_at" : "2021-08-12T20:26:02Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/7656623?v=4",
      "events_url" : "https://api.github.com/users/fujicoin/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fujicoin/followers",
      "following_url" : "https://api.github.com/users/fujicoin/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fujicoin/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fujicoin",
      "id" : 7656623,
      "login" : "fujicoin",
      "node_id" : "MDQ6VXNlcjc2NTY2MjM=",
      "organizations_url" : "https://api.github.com/users/fujicoin/orgs",
      "received_events_url" : "https://api.github.com/users/fujicoin/received_events",
      "repos_url" : "https://api.github.com/users/fujicoin/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fujicoin/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fujicoin/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fujicoin"
   },
   "comments" : 20,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22670/comments",
   "created_at" : "2021-08-10T02:37:41Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22670/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/22670",
   "id" : 964539614,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "description" : null,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22670/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU5NjQ1Mzk2MTQ=",
   "number" : 22670,
   "performed_via_github_app" : null,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "[22.0rc2] There are cases where the fee calculation is incorrect",
   "updated_at" : "2021-08-12T20:26:02Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22670",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/7656623?v=4",
      "events_url" : "https://api.github.com/users/fujicoin/events{/privacy}",
      "followers_url" : "https://api.github.com/users/fujicoin/followers",
      "following_url" : "https://api.github.com/users/fujicoin/following{/other_user}",
      "gists_url" : "https://api.github.com/users/fujicoin/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/fujicoin",
      "id" : 7656623,
      "login" : "fujicoin",
      "node_id" : "MDQ6VXNlcjc2NTY2MjM=",
      "organizations_url" : "https://api.github.com/users/fujicoin/orgs",
      "received_events_url" : "https://api.github.com/users/fujicoin/received_events",
      "repos_url" : "https://api.github.com/users/fujicoin/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/fujicoin/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/fujicoin/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/fujicoin"
   }
}
