[
   {
      "author_association" : "MEMBER",
      "body" : "This is just an order of operations issue. Typically the manpages are generated on a commit that is not tagged as the RC. But for the 22.0rc2 manpage update, it was done on the 22.0rc2 tagged commit rather than prior to it. If I run `contrib/devtools/gen-manpages.sh` on the current head of 22.x (which is not tagged), then the manpages have the expected version.\r\n\r\nPerhaps we should update the script to deal with this case, but I wouldn't say that this is an issue that needs to be solved for 22.0.",
      "created_at" : "2021-08-11T17:29:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22681#issuecomment-897014310",
      "id" : 897014310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22681",
      "node_id" : "IC_kwDOABII5841d1om",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-11T17:33:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/897014310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The thing is, it didn't use to be necessary to update the manual pages between rcs if there were no changes that affect options. at all. Nor was it needed to do it one final time before `-final`.\r\n\r\nI think adding the rc number into the manual pages is of questionable value at the least. It just creates extra work. And requiring a very specific order of operations tends to make things fragile.",
      "created_at" : "2021-08-16T11:39:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22681#issuecomment-899441824",
      "id" : 899441824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22681",
      "node_id" : "IC_kwDOABII5841nGSg",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T11:41:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899441824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> And requiring a very specific order of operations tends to make things fragile.\r\n\r\nOh, so apparently #22685 made this worse, even the right order of operations doesn't solve it anymore.",
      "created_at" : "2021-08-16T11:44:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22681#issuecomment-899444220",
      "id" : 899444220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22681",
      "node_id" : "IC_kwDOABII5841nG38",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T11:44:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899444220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "There is a more serious problem with the generated manual pages. It looks like all `-`'s in the text have been purged; e.g.\r\n```patch\r\n-nblocks and maxtries arguments. Example: bitcoin-cli \\fBgenerate\\fR 4\r\n+nblocks and maxtries arguments. Example: bitcoincli \\fBgenerate\\fR 4\r\n```\r\nThe cause of this is the `sed -i` with `-${BTCVER[1]}` which ends up as empty. So all `-`'s are replaced with nothing.\r\n\r\nNeed to add a check whether `${BTCVER[1]}` is empty, and if so, skip the `sed -i`.",
      "created_at" : "2021-08-16T12:06:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22681#issuecomment-899456984",
      "id" : 899456984,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22681",
      "node_id" : "IC_kwDOABII5841nJ_Y",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T12:24:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899456984",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Also `footer.h2m` ends up empty, somehow, besides the `[COPYRIGHT]`. I think it's a leftover from then `--version` contained a copyright message?\r\n\r\n(I don't think this one is critical; the copyright message still ends up in DESCRIPTION as it's printed by `--help`,  just not in the COPYRIGHT section)",
      "created_at" : "2021-08-16T12:09:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22681#issuecomment-899459505",
      "id" : 899459505,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22681",
      "node_id" : "IC_kwDOABII5841nKmx",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T12:13:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899459505",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hmmm... No idea about the copyright footer, but for the versioning: what if we get rid of all our munging in the script and just change the process a bit? We'll just generate man pages after we bump the version. A little extra work between last `-rc` and `-final`, but we can get rid of code that looks a bit fragile to me.\r\n\r\nNot sure if this diff is the right diff to release-process.md, but something like:\r\n```diff\r\ndiff --git a/doc/release-process.md b/doc/release-process.md\r\nindex 1b6472e812..05fa2af378 100644\r\n--- a/doc/release-process.md\r\n+++ b/doc/release-process.md\r\n@@ -6,13 +6,14 @@ Release Process\r\n ### Before every release candidate\r\n \r\n * Update translations see [translation_process.md](https://github.com/bitcoin/bitcoin/blob/master/doc/translation_process.md#synchronising-translations).\r\n-* Update manpages, see [gen-manpages.sh](https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/README.md#gen-manpagessh).\r\n * Update release candidate version in `configure.ac` (`CLIENT_VERSION_RC`).\r\n+* Update manpages, see [gen-manpages.sh](https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/README.md#gen-manpagessh).\r\n \r\n ### Before every major and minor release\r\n \r\n * Update [bips.md](bips.md) to account for changes since the last release (don't forget to bump the version number on the first line).\r\n * Update version in `configure.ac` (don't forget to set `CLIENT_VERSION_RC` to `0`).\r\n+* Update manpages, see [gen-manpages.sh](https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/README.md#gen-manpagessh).\r\n * Write release notes (see \"Write the release notes\" below).\r\n \r\n ### Before every major release\r\n```",
      "created_at" : "2021-08-16T16:20:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22681#issuecomment-899641345",
      "id" : 899641345,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22681",
      "node_id" : "IC_kwDOABII5841n3AB",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T16:23:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899641345",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Don't forget to also do a build in between. Just updating `configure.ac` is not enough. Also commit after updating `configure.ac` (but before the build!), otherwise you'll get `-dirty` in the version in the manpages (or maybe this is no longer the case now? i don't know).\r\n(this is why the whole \"run it for every RC\" feels fragile to me apart from the risk of forgetting to run it)\r\nIdeally we'd have *some* flexibility on when to run the steps and in what order, also to allow distributing the work.",
      "created_at" : "2021-08-19T11:53:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22681#issuecomment-901851565",
      "id" : 901851565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22681",
      "node_id" : "IC_kwDOABII5841wSmt",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-19T11:57:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/901851565",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> There is a more serious problem with the generated manual pages. It looks like all -'s in the text have been purged; e.g.\r\n\r\nNo idea how we want to fix this eventually, but I hacked around this in c1c79f4c816fa1224ad593f2af90752160fabb09 on the 22.x branch.  86de56776aaef9fc043c22200a88f3a9513234fb brings back correct hypen-ization.\r\n",
      "created_at" : "2021-08-26T12:58:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22681#issuecomment-906385050",
      "id" : 906385050,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22681",
      "node_id" : "IC_kwDOABII5842Blaa",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-26T12:58:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/906385050",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Removing the milestone as this was fixed (wellâ¦) on the 22.x branch and is not a blocker. Needs a proper fix for the next major release. Probably consisting of deleting most of the script as suggested by @dongcarl .",
      "created_at" : "2021-09-08T14:20:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22681#issuecomment-915282903",
      "id" : 915282903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22681",
      "node_id" : "IC_kwDOABII5842jhvX",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-08T14:20:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/915282903",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
