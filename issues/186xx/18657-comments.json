[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think this is a good change. I would prefer to just add a test making sure the API works as designed instead of making the API leave behind uninitialized output variables and be awkward to use and then document the awkwardness. Here is the test I would add:\r\n\r\n```diff\r\n--- a/src/test/interfaces_tests.cpp\r\n+++ b/src/test/interfaces_tests.cpp\r\n@@ -116,6 +116,12 @@ BOOST_AUTO_TEST_CASE(findCommonAncestor)\r\n     BOOST_CHECK_EQUAL(orig_height, orig_tip->nHeight);\r\n     BOOST_CHECK_EQUAL(fork_height, orig_tip->nHeight - 10);\r\n     BOOST_CHECK_EQUAL(fork_hash, active[fork_height]->GetBlockHash());\r\n+\r\n+    uint256 active_hash, orig_hash;\r\n+    BOOST_CHECK(!chain->findCommonAncestor(active.Tip()->GetBlockHash(), {}, {}, FoundBlock().hash(active_hash), {}));\r\n+    BOOST_CHECK(!chain->findCommonAncestor({}, orig_tip->GetBlockHash(), {}, {}, FoundBlock().hash(orig_hash)));\r\n+    BOOST_CHECK_EQUAL(active_hash, active.Tip()->GetBlockHash());\r\n+    BOOST_CHECK_EQUAL(orig_hash, orig_tip->GetBlockHash());\r\n }\r\n \r\n BOOST_AUTO_TEST_CASE(hasBlocks)\r\n```\r\n\r\nThe PR description here is also not justifying the change, only linking to a long discussion thread. The only apparent reason for this change is is that it makes the code \"AutoSAR\" and \"MISRA\" complaint. I haven't heard of these things and didn't know my PRs were supposed to comply with them. If they are, I'd like to see automated compliance tests or notes in the developer guide with testing instructions.\r\n\r\nCode review ACK f8bfda16ebefda40efd66eeb0225c353a88d8e53, in case other reviewers think this  PR is an improvement and want to merge it. Despite the fact that this PR may leave FoundBlock output variables uninitialized, I don't think it causes any bugs",
      "created_at" : "2020-04-15T20:43:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18657#issuecomment-614270045",
      "id" : 614270045,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18657",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDI3MDA0NQ==",
      "updated_at" : "2020-04-15T20:46:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614270045",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky The justification is to minimise surprising code: apparently both @MarcoFalke and I were somewhat surprised by the current formulation. Perhaps the intentional use of `&` instead of `&&` was clear to other reviewers.\r\n\r\nNo one is claiming that we are following AutoSAR, or that you should have thought about AutoSAR when submitting your PR :)",
      "created_at" : "2020-04-15T21:02:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18657#issuecomment-614278450",
      "id" : 614278450,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18657",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDI3ODQ1MA==",
      "updated_at" : "2020-04-15T21:03:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614278450",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @ryanofsky The justification is to minimise surprising code: apparently both @MarcoFalke and I were somewhat surprised by the current formulation\r\n\r\nThanks for finding this and pointing it out. It's a good catch that uncovered a gap in test coverage and point of potential confusion. I didn't like this particular solution to the problem, but I posted another one in https://github.com/bitcoin/bitcoin/pull/18660",
      "created_at" : "2020-04-15T21:14:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18657#issuecomment-614283677",
      "id" : 614283677,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18657",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDI4MzY3Nw==",
      "updated_at" : "2020-04-15T21:14:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614283677",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
