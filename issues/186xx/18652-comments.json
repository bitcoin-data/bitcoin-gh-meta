[
   {
      "author_association" : "MEMBER",
      "body" : "I've just tested the macOS 0.20.0rc1 bitcoind, and threadnames are working:\r\n```bash\r\n2020-04-15T12:53:46.857310Z [init] Bitcoin Core version v0.20.0rc1 (release build)\r\n2020-04-15T12:53:46.857350Z [init] Assuming ancestors of block 0000000000000000000f2adce67e49b0b6bdeb9de8b7c3d7e93b21e7fc1e819d have valid signatures.\r\n2020-04-15T12:53:46.857356Z [init] Setting nMinimumChainWork=00000000000000000000000000000000000000000e1ab5ec9348e9f4b8eb8154\r\n...\r\n2020-04-15T12:53:47.312306Z [shutoff] zmq: Shutdown notifier pubrawtx at tcp://127.0.0.1:28332\r\n2020-04-15T12:53:47.312327Z [shutoff] zmq: Close socket at address tcp://127.0.0.1:28332\r\n2020-04-15T12:53:47.313334Z [shutoff] Shutdown: done\r\n```\r\n\r\nCan you provide any more information.",
      "created_at" : "2020-04-15T12:55:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18652#issuecomment-614022080",
      "id" : 614022080,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18652",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDAyMjA4MA==",
      "updated_at" : "2020-04-15T13:20:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614022080",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I observed this bug on Linux systems (have not test other platforms yet).\r\n\r\nThe first system:\r\n```\r\n$ uname -sm\r\nLinux x86_64\r\n```\r\n\r\nThe second one:\r\n```\r\n$ uname -sm\r\nLinux armv7l\r\n```\r\n\r\nTested binaries are from https://bitcoincore.org/bin/bitcoin-core-0.20.0/test.rc1/",
      "created_at" : "2020-04-15T13:32:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18652#issuecomment-614043068",
      "id" : 614043068,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18652",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDA0MzA2OA==",
      "updated_at" : "2020-04-15T13:32:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614043068",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The same issue with official downloads `0.19.0.1` and `0.19.1` ((",
      "created_at" : "2020-04-15T14:47:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18652#issuecomment-614084352",
      "id" : 614084352,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18652",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDA4NDM1Mg==",
      "updated_at" : "2020-04-15T14:47:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614084352",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "~The bug is caused by [`-fvisibility=hidden`](https://gcc.gnu.org/onlinedocs/gcc-7.5.0/gcc/Code-Gen-Options.html) compiler option after `configure --enable-reduce-exports`.~\r\n\r\n~Not sure which solution would be correct...~",
      "created_at" : "2020-04-15T21:57:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18652#issuecomment-614300477",
      "id" : 614300477,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18652",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDMwMDQ3Nw==",
      "updated_at" : "2020-04-16T00:49:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614300477",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The observed behavior was introduced in #16059.\r\n\r\nAccording to that pr, there are some ways to make `-logthreadnames` work on gitian builds:\r\n- force `--enable-threadlocal`\r\nor\r\n- drop `--enable-glibc-back-compat`\r\n\r\nWhat could you suggest, @dongcarl ?\r\n",
      "created_at" : "2020-04-16T00:54:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18652#issuecomment-614352288",
      "id" : 614352288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18652",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDM1MjI4OA==",
      "updated_at" : "2020-04-16T00:54:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614352288",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "So to clarify, nothing is actually broken, we [explicitly don't use thread_local](https://github.com/bitcoin/bitcoin/blob/master/configure.ac#L864) when `--enable-glibc-back-compat` is passed, which is the case for [gitian builds](https://github.com/bitcoin/bitcoin/blob/master/contrib/gitian-descriptors/gitian-linux.yml#L44). Hence why they are work for macOS, but not for linux.\r\n\r\nedit: although obviously we should do something about having a runtime option available that will never actually do anything.",
      "created_at" : "2020-04-16T01:04:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18652#issuecomment-614354905",
      "id" : 614354905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18652",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDM1NDkwNQ==",
      "updated_at" : "2020-04-16T01:11:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614354905",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Hence why they are work for macOS, but not for linux.\r\n\r\nBecause [macOS gitian build](https://github.com/bitcoin/bitcoin/blob/544709763e1f45148d1926831e07ff03487673ee/contrib/gitian-descriptors/gitian-osx.yml#L41) does not use `--enable-glibc-back-compat`.",
      "created_at" : "2020-04-16T11:55:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18652#issuecomment-614606268",
      "id" : 614606268,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18652",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDYwNjI2OA==",
      "updated_at" : "2020-04-16T11:55:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614606268",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Because macOS gitian build does not use --enable-glibc-back-compat.\r\n\r\nThanks. That wasn't a question, just a typo. s/are//",
      "created_at" : "2020-04-16T12:01:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18652#issuecomment-614609193",
      "id" : 614609193,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18652",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDYwOTE5Mw==",
      "updated_at" : "2020-04-16T12:01:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614609193",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@fanquake \r\n> although obviously we should do something about having a runtime option available that will never actually do anything.\r\n\r\nSee: #18665.",
      "created_at" : "2020-04-16T12:34:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18652#issuecomment-614624431",
      "id" : 614624431,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18652",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDYyNDQzMQ==",
      "updated_at" : "2020-04-16T12:34:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614624431",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> So to clarify, nothing is actually broken, we explicitly don't use thread_local when --enable-glibc-back-compat is passed,\r\n\r\nI don't know when thread-local support was added. Is this still necessary after the minimum glibc bump to 2.17?",
      "created_at" : "2020-04-16T13:17:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18652#issuecomment-614646655",
      "id" : 614646655,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18652",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDY0NjY1NQ==",
      "updated_at" : "2020-04-16T13:17:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614646655",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think this issue is fixed by #18665.",
      "created_at" : "2020-05-05T07:02:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18652#issuecomment-623888280",
      "id" : 623888280,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18652",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzg4ODI4MA==",
      "updated_at" : "2020-05-05T07:02:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623888280",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
