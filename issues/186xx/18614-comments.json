[
   {
      "author_association" : "NONE",
      "body" : "Could I tackle this issue?\r\n\r\n",
      "created_at" : "2020-04-13T00:08:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18614#issuecomment-612696354",
      "id" : 612696354,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMjY5NjM1NA==",
      "updated_at" : "2020-04-13T00:08:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/612696354",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/55723667?v=4",
         "events_url" : "https://api.github.com/users/Nishikoh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Nishikoh/followers",
         "following_url" : "https://api.github.com/users/Nishikoh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Nishikoh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Nishikoh",
         "id" : 55723667,
         "login" : "Nishikoh",
         "node_id" : "MDQ6VXNlcjU1NzIzNjY3",
         "organizations_url" : "https://api.github.com/users/Nishikoh/orgs",
         "received_events_url" : "https://api.github.com/users/Nishikoh/received_events",
         "repos_url" : "https://api.github.com/users/Nishikoh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Nishikoh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Nishikoh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Nishikoh"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Nishikoh \r\n> Could I tackle this issue?\r\n\r\nGreat!\r\n> You do not need to request permission to start working on this.\r\n",
      "created_at" : "2020-04-13T00:12:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18614#issuecomment-612696895",
      "id" : 612696895,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxMjY5Njg5NQ==",
      "updated_at" : "2020-04-13T00:12:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/612696895",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Hi @Nishikoh , thanks for offering to tackle this!\r\n\r\nJust checking, are you still interested in working on it?  If so, then I'll leave it to you :) but if not, I have some progress that I can upload.",
      "created_at" : "2020-04-17T19:04:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18614#issuecomment-615413381",
      "id" : 615413381,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTQxMzM4MQ==",
      "updated_at" : "2020-04-17T19:04:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615413381",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/63171930?v=4",
         "events_url" : "https://api.github.com/users/robot-visions/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-visions/followers",
         "following_url" : "https://api.github.com/users/robot-visions/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-visions/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-visions",
         "id" : 63171930,
         "login" : "robot-visions",
         "node_id" : "MDQ6VXNlcjYzMTcxOTMw",
         "organizations_url" : "https://api.github.com/users/robot-visions/orgs",
         "received_events_url" : "https://api.github.com/users/robot-visions/received_events",
         "repos_url" : "https://api.github.com/users/robot-visions/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-visions/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-visions"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Hi @robot-visions\r\nSorry, this work is late. Would you upload it?  \r\nThanks.",
      "created_at" : "2020-04-17T19:29:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18614#issuecomment-615425812",
      "id" : 615425812,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTQyNTgxMg==",
      "updated_at" : "2020-04-17T19:29:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615425812",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/55723667?v=4",
         "events_url" : "https://api.github.com/users/Nishikoh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Nishikoh/followers",
         "following_url" : "https://api.github.com/users/Nishikoh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Nishikoh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Nishikoh",
         "id" : 55723667,
         "login" : "Nishikoh",
         "node_id" : "MDQ6VXNlcjU1NzIzNjY3",
         "organizations_url" : "https://api.github.com/users/Nishikoh/orgs",
         "received_events_url" : "https://api.github.com/users/Nishikoh/received_events",
         "repos_url" : "https://api.github.com/users/Nishikoh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Nishikoh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Nishikoh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Nishikoh"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks @Nishikoh !  I uploaded some progress but it doesn't fully resolve the issue, so please feel free to continue working on this if you're still interested.\r\n\r\nMy first PR addresses the `wait_for_getdata` part.  However, there are still additional changes needed to fully resolve this issue:\r\n\r\n- [ ] Update `wait_for_getheaders` to check the locator hash(es)\r\n- [ ] Remove calls to `pop(\"getdata\")` and `pop(\"getheaders\")` that are no longer needed\r\n\r\nI need to think more about the best way to identify the correct locator hash when calling `wait_for_getheaders`.  My initial attempt was to use the `getbestblockhash` RPC, but it seemed to cause too much of a slowdown.  I'd also welcome any discussion / suggestions about how best to approach this.",
      "created_at" : "2020-04-17T20:19:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18614#issuecomment-615445888",
      "id" : 615445888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTQ0NTg4OA==",
      "updated_at" : "2020-04-17T20:19:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615445888",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/63171930?v=4",
         "events_url" : "https://api.github.com/users/robot-visions/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-visions/followers",
         "following_url" : "https://api.github.com/users/robot-visions/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-visions/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-visions",
         "id" : 63171930,
         "login" : "robot-visions",
         "node_id" : "MDQ6VXNlcjYzMTcxOTMw",
         "organizations_url" : "https://api.github.com/users/robot-visions/orgs",
         "received_events_url" : "https://api.github.com/users/robot-visions/received_events",
         "repos_url" : "https://api.github.com/users/robot-visions/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-visions/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-visions"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I'm working on this issue, but I don't have a good idea and confidence.\r\nCould you advise me on how to solve this issue?",
      "created_at" : "2020-04-28T12:06:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18614#issuecomment-620564129",
      "id" : 620564129,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDU2NDEyOQ==",
      "updated_at" : "2020-04-28T12:06:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620564129",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/55723667?v=4",
         "events_url" : "https://api.github.com/users/Nishikoh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Nishikoh/followers",
         "following_url" : "https://api.github.com/users/Nishikoh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Nishikoh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Nishikoh",
         "id" : 55723667,
         "login" : "Nishikoh",
         "node_id" : "MDQ6VXNlcjU1NzIzNjY3",
         "organizations_url" : "https://api.github.com/users/Nishikoh/orgs",
         "received_events_url" : "https://api.github.com/users/Nishikoh/received_events",
         "repos_url" : "https://api.github.com/users/Nishikoh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Nishikoh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Nishikoh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Nishikoh"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "https://github.com/bitcoin/bitcoin/blob/9fb95ae8e3e4f10888a98fc99d704d97e2eb371f/test/functional/test_framework/mininode.py#L431\r\n\r\nI'm working to modify `test_function` on `wait_for_getheaders`.\r\nI'm thinking that I will modify it like the next code.\r\n\r\n```.py\r\n    def wait_for_getheaders(self, blockhash, timeout=60):\r\n        \"\"\"Waits for a getheaders message.\r\n\r\n        Receiving any getheaders message will satisfy the predicate. the last_message[\"getheaders\"]\r\n        value must be explicitly cleared before calling this method, or this will return\r\n        immediately with success. TODO: change this method to take a hash value and only\r\n        return true if the correct block header has been requested.\"\"\"\r\n\r\n        def test_function():\r\n            assert self.is_connected\r\n            last_headers = self.last_message.get(\"getheaders\")\r\n            if not last_headers:\r\n                return False\r\n            return last_headers.hashstop == blockhash\r\n\r\n        wait_until(test_function, timeout=timeout, lock=mininode_lock)\r\n```\r\nIs this idea correct?",
      "created_at" : "2020-04-28T12:06:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18614#issuecomment-620564300",
      "id" : 620564300,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDU2NDMwMA==",
      "updated_at" : "2020-04-28T12:06:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620564300",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/55723667?v=4",
         "events_url" : "https://api.github.com/users/Nishikoh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Nishikoh/followers",
         "following_url" : "https://api.github.com/users/Nishikoh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Nishikoh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Nishikoh",
         "id" : 55723667,
         "login" : "Nishikoh",
         "node_id" : "MDQ6VXNlcjU1NzIzNjY3",
         "organizations_url" : "https://api.github.com/users/Nishikoh/orgs",
         "received_events_url" : "https://api.github.com/users/Nishikoh/received_events",
         "repos_url" : "https://api.github.com/users/Nishikoh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Nishikoh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Nishikoh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Nishikoh"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for working on this @Nishikoh !  I think it's a good start.  To continue I would recommend:\r\n\r\n- Look at [the protocol documentation for getheaders](https://en.bitcoin.it/wiki/Protocol_documentation#getheaders) to see what the various fields (including `hashstop`) are for\r\n- Search for places where `wait_for_getheaders` is called and see what additional data you might pass in",
      "created_at" : "2020-04-28T16:02:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18614#issuecomment-620698946",
      "id" : 620698946,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDY5ODk0Ng==",
      "updated_at" : "2020-04-28T16:02:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620698946",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/63171930?v=4",
         "events_url" : "https://api.github.com/users/robot-visions/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-visions/followers",
         "following_url" : "https://api.github.com/users/robot-visions/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-visions/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-visions",
         "id" : 63171930,
         "login" : "robot-visions",
         "node_id" : "MDQ6VXNlcjYzMTcxOTMw",
         "organizations_url" : "https://api.github.com/users/robot-visions/orgs",
         "received_events_url" : "https://api.github.com/users/robot-visions/received_events",
         "repos_url" : "https://api.github.com/users/robot-visions/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-visions/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-visions"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thank you for your advice @robot-visions !\r\nI will take your advice as a reference.",
      "created_at" : "2020-04-29T09:41:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18614#issuecomment-621096268",
      "id" : 621096268,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTA5NjI2OA==",
      "updated_at" : "2020-04-29T09:41:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621096268",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/55723667?v=4",
         "events_url" : "https://api.github.com/users/Nishikoh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Nishikoh/followers",
         "following_url" : "https://api.github.com/users/Nishikoh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Nishikoh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Nishikoh",
         "id" : 55723667,
         "login" : "Nishikoh",
         "node_id" : "MDQ6VXNlcjU1NzIzNjY3",
         "organizations_url" : "https://api.github.com/users/Nishikoh/orgs",
         "received_events_url" : "https://api.github.com/users/Nishikoh/received_events",
         "repos_url" : "https://api.github.com/users/Nishikoh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Nishikoh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Nishikoh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Nishikoh"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I posted PR. What should I do anything else?",
      "created_at" : "2020-05-29T22:21:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18614#issuecomment-636218521",
      "id" : 636218521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18614",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzNjIxODUyMQ==",
      "updated_at" : "2020-05-29T22:21:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/636218521",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/55723667?v=4",
         "events_url" : "https://api.github.com/users/Nishikoh/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Nishikoh/followers",
         "following_url" : "https://api.github.com/users/Nishikoh/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Nishikoh/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Nishikoh",
         "id" : 55723667,
         "login" : "Nishikoh",
         "node_id" : "MDQ6VXNlcjU1NzIzNjY3",
         "organizations_url" : "https://api.github.com/users/Nishikoh/orgs",
         "received_events_url" : "https://api.github.com/users/Nishikoh/received_events",
         "repos_url" : "https://api.github.com/users/Nishikoh/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Nishikoh/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Nishikoh/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Nishikoh"
      }
   }
]
