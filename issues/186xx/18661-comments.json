[
   {
      "author_association" : "MEMBER",
      "body" : "How much are the savings? For git the file size is going to effectively double, since it has to keep track of both versions.\r\n\r\nIf the savings are worthwhile, I'd suggest to adjust our script to use zopfli: https://github.com/bitcoin/bitcoin/blob/master/contrib/devtools/optimize-pngs.py",
      "created_at" : "2020-04-15T22:23:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18661#issuecomment-614309877",
      "id" : 614309877,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDMwOTg3Nw==",
      "updated_at" : "2020-04-15T22:23:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614309877",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Good point. For some files, they become 25+% smaller.",
      "created_at" : "2020-04-15T22:25:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18661#issuecomment-614310498",
      "id" : 614310498,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDMxMDQ5OA==",
      "updated_at" : "2020-04-15T22:25:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614310498",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/991637?v=4",
         "events_url" : "https://api.github.com/users/mikispag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikispag/followers",
         "following_url" : "https://api.github.com/users/mikispag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikispag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikispag",
         "id" : 991637,
         "login" : "mikispag",
         "node_id" : "MDQ6VXNlcjk5MTYzNw==",
         "organizations_url" : "https://api.github.com/users/mikispag/orgs",
         "received_events_url" : "https://api.github.com/users/mikispag/received_events",
         "repos_url" : "https://api.github.com/users/mikispag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikispag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikispag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikispag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Does this PR produce deterministic files? See discussion in https://github.com/bitcoin/bitcoin/pull/5489.",
      "created_at" : "2020-04-16T06:45:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18661#issuecomment-614447536",
      "id" : 614447536,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDQ0NzUzNg==",
      "updated_at" : "2020-04-16T06:45:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614447536",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I tried re-running several times and with the same version of `zopflipng` - yes. Not sure this is exactly what you are asking, though.",
      "created_at" : "2020-04-16T07:18:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18661#issuecomment-614461731",
      "id" : 614461731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDQ2MTczMQ==",
      "updated_at" : "2020-04-16T07:18:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614461731",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/991637?v=4",
         "events_url" : "https://api.github.com/users/mikispag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mikispag/followers",
         "following_url" : "https://api.github.com/users/mikispag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mikispag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mikispag",
         "id" : 991637,
         "login" : "mikispag",
         "node_id" : "MDQ6VXNlcjk5MTYzNw==",
         "organizations_url" : "https://api.github.com/users/mikispag/orgs",
         "received_events_url" : "https://api.github.com/users/mikispag/received_events",
         "repos_url" : "https://api.github.com/users/mikispag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mikispag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mikispag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mikispag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "No strong opinion, but I think savings aren't worth it.",
      "created_at" : "2020-04-16T09:34:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18661#issuecomment-614532731",
      "id" : 614532731,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDUzMjczMQ==",
      "updated_at" : "2020-04-16T09:34:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614532731",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tend toward NACK. Sorry to say, but reducing the size of our images to the absolute minimum is not an important concern of this project. There isn't much media in bitcoin core at all.\r\n\r\nIf you want to do serious work in reducing the size of the distributed binaries, you might want to look at testing #18605.\r\n",
      "created_at" : "2020-04-16T09:41:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18661#issuecomment-614536776",
      "id" : 614536776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDUzNjc3Ng==",
      "updated_at" : "2020-04-16T09:41:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614536776",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I agree with laanwj. ",
      "created_at" : "2020-04-16T13:51:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18661#issuecomment-614666370",
      "id" : 614666370,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNDY2NjM3MA==",
      "updated_at" : "2020-04-16T13:51:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/614666370",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/58662979?v=4",
         "events_url" : "https://api.github.com/users/kiminuo/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kiminuo/followers",
         "following_url" : "https://api.github.com/users/kiminuo/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kiminuo/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kiminuo",
         "id" : 58662979,
         "login" : "kiminuo",
         "node_id" : "MDQ6VXNlcjU4NjYyOTc5",
         "organizations_url" : "https://api.github.com/users/kiminuo/orgs",
         "received_events_url" : "https://api.github.com/users/kiminuo/received_events",
         "repos_url" : "https://api.github.com/users/kiminuo/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kiminuo/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kiminuo/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kiminuo"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks. This kind of thing has come up many times before, #16636, #11069, #17122, #14615, and it'd seem that if we were to merge a compression, 6 months later someone will likely  be able to optimize the images slightly more (and we'd just end up with even more copies of the same files in git).\r\n\r\nIf you are keen to start contributing, I'd suggest taking a look at the [good first issues list](https://github.com/bitcoin/bitcoin/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22).",
      "created_at" : "2020-04-17T03:15:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18661#issuecomment-615014562",
      "id" : 615014562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTAxNDU2Mg==",
      "updated_at" : "2020-04-17T03:15:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615014562",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I was patching our script for fun to see if zopfli can improve on top of pngcrush, and it seems so. Not enough to change anything in our repo, but enough to entertain me for 12 minutes running a script.\r\n\r\n```\r\nTotal reduction: 43655 bytes\r\n```\r\n\r\nAlso, the checksum was stable after two runs.\r\n\r\nDiff I used: (Could potentially be enhanced by keeping pngcrush as a preprocessing step)\r\n\r\n```diff\r\ndiff --git a/contrib/devtools/optimize-pngs.py b/contrib/devtools/optimize-pngs.py\r\nindex e9481dbbcf..e665541a8c 100755\r\n--- a/contrib/devtools/optimize-pngs.py\r\n+++ b/contrib/devtools/optimize-pngs.py\r\n@@ -24,7 +24,7 @@ def content_hash(filename):\r\n     data = i.tobytes()\r\n     return hashlib.sha256(data).hexdigest()\r\n \r\n-pngcrush = 'pngcrush'\r\n+pngcrush = 'zopflipng'\r\n git = 'git'\r\n folders = [\"src/qt/res/movies\", \"src/qt/res/icons\", \"share/pixmaps\"]\r\n basePath = subprocess.check_output([git, 'rev-parse', '--show-toplevel'], universal_newlines=True, encoding='utf8').rstrip('\\n')\r\n@@ -43,17 +43,12 @@ for folder in folders:\r\n             fileMetaMap['contentHashPre'] = content_hash(file_path)\r\n \r\n             try:\r\n-                subprocess.call([pngcrush, \"-brute\", \"-ow\", \"-rem\", \"gAMA\", \"-rem\", \"cHRM\", \"-rem\", \"iCCP\", \"-rem\", \"sRGB\", \"-rem\", \"alla\", \"-rem\", \"text\", file_path],\r\n+                subprocess.call([pngcrush, '-m', '-y', file_path, file_path],\r\n                                 stdout=subprocess.DEVNULL, stderr=subprocess.DEVNULL)\r\n             except:\r\n                 print(\"pngcrush is not installed, aborting...\")\r\n                 sys.exit(0)\r\n \r\n-            #verify\r\n-            if \"Not a PNG file\" in subprocess.check_output([pngcrush, \"-n\", \"-v\", file_path], stderr=subprocess.STDOUT, universal_newlines=True, encoding='utf8'):\r\n-                print(\"PNG file \"+file+\" is corrupted after crushing, check out pngcursh version\")\r\n-                sys.exit(1)\r\n-\r\n             fileMetaMap['sha256New'] = file_hash(file_path)\r\n             fileMetaMap['contentHashPost'] = content_hash(file_path)\r\n \r\n",
      "created_at" : "2020-04-17T11:39:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18661#issuecomment-615198010",
      "id" : 615198010,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTE5ODAxMA==",
      "updated_at" : "2020-04-17T11:39:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615198010",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "So Concept ACK the next time we change the icons in the GUI, but Concept NACK for now.",
      "created_at" : "2020-04-17T11:39:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18661#issuecomment-615198216",
      "id" : 615198216,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18661",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNTE5ODIxNg==",
      "updated_at" : "2020-04-17T11:39:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/615198216",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
