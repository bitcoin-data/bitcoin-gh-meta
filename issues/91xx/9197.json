{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "I noticed [pull request 128 to python-bitcoinlib](https://github.com/petertodd/python-bitcoinlib/pull/128) where an RPC client retry wrapper is proposed. The retry wrapper would retry in the event of an `IOError` exception. However, this does not seem particularly safe for RPC calls like `sendmany` because it could be possible to experience a socket or connection timeout even though bitcoind satisfied the original RPC request. In some cases, auto retrying could result in duplicate spending.\r\n\r\nRPC requests should have at least a nonce in every request. It should maybe be a nonce and sequence pair, per @gmaxwell's suggestion in below chat logs. It would be good to have RPC request replay protection in bitcoind.\r\n\r\nConcurrent writes should require locks. Applications should have some sense of guarantees around isolation of competing concurrent and also replayed RPC calls. It's not enough to \"check state\" over RPC with `listtransactions` because you can check state as much as you like, the state still might change between the time you check state and the time you resend the original RPC command, especially in distributed systems.\r\n\r\nhttps://botbot.me/freenode/bitcoin-core-dev/2016-11-21/?msg=76819688&page=2",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9197/comments",
   "created_at" : "2016-11-21T21:43:54Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9197/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/9197",
   "id" : 190843889,
   "labels" : [
      {
         "color" : "0052cc",
         "default" : false,
         "description" : null,
         "id" : 98279177,
         "name" : "RPC/REST/ZMQ",
         "node_id" : "MDU6TGFiZWw5ODI3OTE3Nw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9197/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUxOTA4NDM4ODk=",
   "number" : 9197,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 4,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 2,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 6,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9197/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9197/timeline",
   "title" : "RPC idempotency and RPC request replay protection",
   "updated_at" : "2021-07-04T13:13:09Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9197",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/101238?v=4",
      "events_url" : "https://api.github.com/users/kanzure/events{/privacy}",
      "followers_url" : "https://api.github.com/users/kanzure/followers",
      "following_url" : "https://api.github.com/users/kanzure/following{/other_user}",
      "gists_url" : "https://api.github.com/users/kanzure/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/kanzure",
      "id" : 101238,
      "login" : "kanzure",
      "node_id" : "MDQ6VXNlcjEwMTIzOA==",
      "organizations_url" : "https://api.github.com/users/kanzure/orgs",
      "received_events_url" : "https://api.github.com/users/kanzure/received_events",
      "repos_url" : "https://api.github.com/users/kanzure/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/kanzure/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/kanzure/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/kanzure"
   }
}
