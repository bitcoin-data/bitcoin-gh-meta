[
   {
      "author_association" : "MEMBER",
      "body" : "Could you please dump the output of ```ldd bitcoin-qt``` as well as ```readelf -d bitcoin-qt``` ?\r\n\r\nLooks like the Fontconfig abi might've changed :\\",
      "created_at" : "2018-09-27T19:09:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14339#issuecomment-425208963",
      "id" : 425208963,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14339",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTIwODk2Mw==",
      "updated_at" : "2018-09-27T19:09:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425208963",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "```\r\nuser@ubuntu:~/Desktop$ ldd ./bitcoin-qt \r\n\tlinux-vdso.so.1 =>  (0x00007ffef759f000)\r\n\tlibpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f8e3a444000)\r\n\tlibdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f8e3a240000)\r\n\tlibm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f8e39f3a000)\r\n\tlibfontconfig.so.1 => /usr/lib/x86_64-linux-gnu/libfontconfig.so.1 (0x00007f8e39cfd000)\r\n\tlibfreetype.so.6 => /usr/lib/x86_64-linux-gnu/libfreetype.so.6 (0x00007f8e39a5a000)\r\n\tlibX11-xcb.so.1 => /usr/lib/x86_64-linux-gnu/libX11-xcb.so.1 (0x00007f8e39858000)\r\n\tlibX11.so.6 => /usr/lib/x86_64-linux-gnu/libX11.so.6 (0x00007f8e39522000)\r\n\tlibxcb.so.1 => /usr/lib/x86_64-linux-gnu/libxcb.so.1 (0x00007f8e39303000)\r\n\tlibrt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f8e390fb000)\r\n\tlibgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f8e38ee4000)\r\n\tlibc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f8e38b1b000)\r\n\t/lib64/ld-linux-x86-64.so.2 (0x000055f422e5b000)\r\n\tlibexpat.so.1 => /lib/x86_64-linux-gnu/libexpat.so.1 (0x00007f8e388f1000)\r\n\tlibz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f8e386d7000)\r\n\tlibpng12.so.0 => /lib/x86_64-linux-gnu/libpng12.so.0 (0x00007f8e384b1000)\r\n\tlibXau.so.6 => /usr/lib/x86_64-linux-gnu/libXau.so.6 (0x00007f8e382ad000)\r\n\tlibXdmcp.so.6 => /usr/lib/x86_64-linux-gnu/libXdmcp.so.6 (0x00007f8e380a6000)\r\n```\r\n\r\n```\r\nuser@ubuntu:~/Desktop$ readelf -d ./bitcoin-qt \r\n\r\nDynamic section at offset 0x21e7308 contains 38 entries:\r\n  Tag        Type                         Name/Value\r\n 0x0000000000000001 (NEEDED)             Shared library: [libpthread.so.0]\r\n 0x0000000000000001 (NEEDED)             Shared library: [libdl.so.2]\r\n 0x0000000000000001 (NEEDED)             Shared library: [libm.so.6]\r\n 0x0000000000000001 (NEEDED)             Shared library: [libfontconfig.so.1]\r\n 0x0000000000000001 (NEEDED)             Shared library: [libfreetype.so.6]\r\n 0x0000000000000001 (NEEDED)             Shared library: [libX11-xcb.so.1]\r\n 0x0000000000000001 (NEEDED)             Shared library: [libX11.so.6]\r\n 0x0000000000000001 (NEEDED)             Shared library: [libxcb.so.1]\r\n 0x0000000000000001 (NEEDED)             Shared library: [librt.so.1]\r\n 0x0000000000000001 (NEEDED)             Shared library: [libgcc_s.so.1]\r\n 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]\r\n 0x0000000000000001 (NEEDED)             Shared library: [ld-linux-x86-64.so.2]\r\n 0x000000000000000c (INIT)               0x144118\r\n 0x000000000000000d (FINI)               0x15d8260\r\n 0x0000000000000019 (INIT_ARRAY)         0x2363358\r\n 0x000000000000001b (INIT_ARRAYSZ)       1464 (bytes)\r\n 0x000000000000001a (FINI_ARRAY)         0x2363910\r\n 0x000000000000001c (FINI_ARRAYSZ)       16 (bytes)\r\n 0x000000006ffffef5 (GNU_HASH)           0x2d0\r\n 0x0000000000000005 (STRTAB)             0x3e80\r\n 0x0000000000000006 (SYMTAB)             0x310\r\n 0x000000000000000a (STRSZ)              8630 (bytes)\r\n 0x000000000000000b (SYMENT)             24 (bytes)\r\n 0x0000000000000015 (DEBUG)              0x0\r\n 0x0000000000000003 (PLTGOT)             0x23e75a8\r\n 0x0000000000000002 (PLTRELSZ)           14544 (bytes)\r\n 0x0000000000000014 (PLTREL)             RELA\r\n 0x0000000000000017 (JMPREL)             0x140848\r\n 0x0000000000000007 (RELA)               0x6700\r\n 0x0000000000000008 (RELASZ)             1286472 (bytes)\r\n 0x0000000000000009 (RELAENT)            24 (bytes)\r\n 0x000000000000001e (FLAGS)              BIND_NOW\r\n 0x000000006ffffffb (FLAGS_1)            Flags: NOW 8000000\r\n 0x000000006ffffffe (VERNEED)            0x6530\r\n 0x000000006fffffff (VERNEEDNUM)         7\r\n 0x000000006ffffff0 (VERSYM)             0x6036\r\n 0x000000006ffffff9 (RELACOUNT)          53576\r\n 0x0000000000000000 (NULL)               0x0\r\n```",
      "created_at" : "2018-09-27T19:57:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14339#issuecomment-425222825",
      "id" : 425222825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14339",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTIyMjgyNQ==",
      "updated_at" : "2018-09-27T19:57:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425222825",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This is an issue with qt's usage of freetype.\r\n\r\nA few years ago, libfreetype introduced FT_Get_Font_Format as an alias for FT_Get_X11_Font_Format, but FT_Get_X11_Font_Format was kept for back-compat.\r\n\r\nOur last qt bump introduced a call to FT_Get_Font_Format. I think that if it used the old name, it would be back-compat to older runtime freetype libs.\r\n\r\n@jonasschnelli Can you give this quick (untested) hack a try?\r\n```patch\r\ndiff --git a/depends/packages/qt.mk b/depends/packages/qt.mk\r\nindex 5286f89..d15f147 100644\r\n--- a/depends/packages/qt.mk\r\n+++ b/depends/packages/qt.mk\r\n@@ -120,6 +120,7 @@ define $(package)_extract_cmds\r\n endef\r\n\r\n define $(package)_preprocess_cmds\r\n+  sed -i.old \"s|FT_Get_Font_Format|FT_Get_X11_Font_Format|\" qtbase/src/platformsupport/fontdatabases/freetype/qfontengine_ft.cpp && \\\r\n   sed -i.old \"s|updateqm.commands = \\$$$$\\$$$$LRELEASE|updateqm.commands = $($(package)_extract_dir)/qttools/bin/lrelease|\" qttranslations/translations/translations.pro && \\\r\n   sed -i.old \"/updateqm.depends =/d\" qttranslations/translations/translations.pro && \\\r\n   sed -i.old \"s/src_plugins.depends = src_sql src_network/src_plugins.depends = src_network/\" qtbase/src/src.pro && \\\r\n```",
      "created_at" : "2018-09-27T21:21:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14339#issuecomment-425247152",
      "id" : 425247152,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14339",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTI0NzE1Mg==",
      "updated_at" : "2018-09-27T21:21:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425247152",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@theuni I spun up a new 14.04.5 Ubuntu VM and cloned af4b8a3.\r\n\r\nDoing a depends build, and running `bitcoin-qt` results in the same error as @jonasschnelli (`make check` fails):\r\n\r\n![14 04 5-master-depends-build](https://user-images.githubusercontent.com/863730/46209040-39925180-c35f-11e8-9dc2-92def0d2ff8d.png)\r\n\r\n\r\nAfter applying your patch and re-building, `make check` passes and `bitcoin-qt` runs:\r\n\r\n<img width=\"907\" alt=\"14 04 5-master-depends-font-patch\" src=\"https://user-images.githubusercontent.com/863730/46209050-3dbe6f00-c35f-11e8-9ede-f9a824974c4c.png\">\r\n\r\nThat's all I tested.",
      "created_at" : "2018-09-28T12:45:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14339#issuecomment-425424063",
      "id" : 425424063,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14339",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTQyNDA2Mw==",
      "updated_at" : "2018-09-28T12:45:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425424063",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@fanquake Thanks for testing! I'll prepare a PR.",
      "created_at" : "2018-09-28T12:51:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/14339#issuecomment-425425558",
      "id" : 425425558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14339",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNTQyNTU1OA==",
      "updated_at" : "2018-09-28T12:51:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/425425558",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/417043?v=4",
         "events_url" : "https://api.github.com/users/theuni/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theuni/followers",
         "following_url" : "https://api.github.com/users/theuni/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theuni/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theuni",
         "id" : 417043,
         "login" : "theuni",
         "node_id" : "MDQ6VXNlcjQxNzA0Mw==",
         "organizations_url" : "https://api.github.com/users/theuni/orgs",
         "received_events_url" : "https://api.github.com/users/theuni/received_events",
         "repos_url" : "https://api.github.com/users/theuni/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theuni/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theuni/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theuni"
      }
   }
]
