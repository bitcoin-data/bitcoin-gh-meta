[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Had few questions earlier: https://www.reddit.com/r/Bitcoin/comments/n1fg1y/maximum_number_of_outbound_full_relay_connections/. I think most of them are answered now.",
      "created_at" : "2021-04-30T09:50:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21815#issuecomment-829980003",
      "id" : 829980003,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyOTk4MDAwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-30T09:50:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/829980003",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "-0. I don't see the use case. Mind explaining?",
      "created_at" : "2021-04-30T10:21:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21815#issuecomment-829997187",
      "id" : 829997187,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyOTk5NzE4Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-30T10:21:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/829997187",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #21710 (doc: update helps for addnode rpc and -addnode/-maxconnections config options by jonatack)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-04-30T10:29:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21815#issuecomment-830001181",
      "id" : 830001181,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMDAwMTE4MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-30T10:29:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/830001181",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> -0. I don't see the use case. Mind explaining?\r\n\r\nNot sure if I understand your question correctly. If you are asking about usecase for `maxoutfullrelay=0`, below are two examples:\r\n\r\nExample 1: User wants to have 2 Block Relay outbound connections and 1 Full Relay outbound connection with his other node\r\n\r\n![image](https://user-images.githubusercontent.com/13405205/116729652-09bef500-aa05-11eb-9920-e161a1dc7289.png)\r\n\r\nExample 2: User wants to have only Block Relay outbound connections (2) for a while\r\n\r\nIf you are asking about overall usecases for this option `maxoutfullrelay`, they are already mentioned above and not possible using `maxconnections`. ",
      "created_at" : "2021-04-30T17:28:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21815#issuecomment-830246614",
      "id" : 830246614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMDI0NjYxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-30T17:30:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/830246614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I also don't understand _why_ a user would want to reduce the number of outbound connections- having multiple connections to the network is fundamental to safety against eclipse attacks. If a user configured the node to only have outbound block-relay-only connections, they wouldn't be participating in addr relay, so wouldn't have a diverse addrman to identify candidates to connect to. If the user was interested in, for example, reducing bandwidth usage, they could startup in `-blocksonly`, and give the trusted peer forcerelay permission (see https://github.com/bitcoin/bitcoin/blob/master/doc/reduce-traffic.md for more details). ",
      "created_at" : "2021-04-30T20:31:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21815#issuecomment-830364313",
      "id" : 830364313,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMDM2NDMxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-30T20:31:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/830364313",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1500952?v=4",
         "events_url" : "https://api.github.com/users/amitiuttarwar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/amitiuttarwar/followers",
         "following_url" : "https://api.github.com/users/amitiuttarwar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/amitiuttarwar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/amitiuttarwar",
         "id" : 1500952,
         "login" : "amitiuttarwar",
         "node_id" : "MDQ6VXNlcjE1MDA5NTI=",
         "organizations_url" : "https://api.github.com/users/amitiuttarwar/orgs",
         "received_events_url" : "https://api.github.com/users/amitiuttarwar/received_events",
         "repos_url" : "https://api.github.com/users/amitiuttarwar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/amitiuttarwar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/amitiuttarwar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/amitiuttarwar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I also don't understand why a user would want to reduce the number of outbound connections- having multiple connections to the network is fundamental to safety against eclipse attacks.\r\n\r\n1. Default is 8 and number of outbound full relay connections can only be reduced by power users who normally experiment with different options in `bitcoin.conf`\r\n2. Already mentioned few examples above. One more example: Consider someone running a business has two nodes. Node A for personal usage and Node B for business. Node A runs with default settings but user doesn't want Node B to connect with random 8 nodes around the world. So user wants to configure Node B to only have 2 Outbound Full Relay connections (One with Node A) and 2 Block Relay only connections. How would you configure this right now? I don't think its possible. So user will save `maxoutfullrelay=1` and use `addnode` to connect with Node A.\r\n3. Having multiple connections is good IMO but everyone has different needs and the way they want to use the network. I would like to have `MAX_OUTBOUND_FULL_RELAY_CONNECTIONS = 32` and it can be done with something like this: https://bitcoin.stackexchange.com/a/105879/ however according to @laanwj (in PR https://github.com/bitcoin/bitcoin/pull/6014):\r\n\r\n_Making it easily possible to increase the default outgoing connections above 8 would put undue load on the network. See the discussion in #4687 as well as many previous discussions._\r\n\r\n_But this can not be merged unless you cap the maximum to 8._\r\n\r\nSo I capped the maximum to 8 in this PR.\r\n\r\n4. I am not a fan of hardcoded values for certain things. Mentioned similar approach in other PR to use Default, MIN and MAX: https://github.com/bitcoin/bitcoin/pull/21061#issuecomment-808026799 I don't even know what should be the response if someone asks why is this 30 and not 25? Or why is this 8 and not 10 or 6? There should be RANGE in which user can decide the value if required.\r\n5. IMO it makes things difficult for anyone spying if users have different values for lot of things in Bitcoin Core instead of creating patterns with hardcoded values that do not change for years.\r\n\r\n> If a user configured the node to only have outbound block-relay-only connections, they wouldn't be participating in addr relay, so wouldn't have a diverse addrman to identify candidates to connect to.\r\n\r\n`maxoutfullrelay=0` and no nodes added with `addnode` is just one of combinations and not necessary everyone will use it. Users who don't care to experiment with `bitcoin.conf` options will use default value 8 so nothing changes for many users.\r\n\r\n> If the user was interested in, for example, reducing bandwidth usage, they could startup in -blocksonly, and give the trusted peer forcerelay permission (see https://github.com/bitcoin/bitcoin/blob/master/doc/reduce-traffic.md for more details).\r\n\r\nThanks for sharing this. However `-blocksonly=1` is not same as some of the examples I mentioned above for different values of `maxoutfullrelay`\r\n\r\n",
      "created_at" : "2021-04-30T21:52:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21815#issuecomment-830420401",
      "id" : 830420401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMDQyMDQwMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-30T21:52:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/830420401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "2) In that case they can just run with `-connect=<ip adres of A>`. If you have a trusted node that's already well connected, there is no need to make more connections yourself.\r\n\r\n3) What different needs do people have? You can say care more about bandwidth or computing resources, but if that's the case, they can just reduce the number of connections. I think that's a more useful trade-off than setting the number of block-only connections.\r\n\r\n4) I understand hardcoded constants aren't appealing to everyone's aesthetics, but that's not a good basis for doing design. Real-world protocol implementations are full of hardcoded constants (have you ever looked at https://github.com/bitcoin/bitcoin/blob/master/src/net_processing.cpp#L42L153 ?). Just because there is a range of potentially reasonable numbers doesn't mean it needs to be configurable - it just means several options existed and the person who coded it up picked one & convinced others that it's a decent choice. Things need to be configurable when you can give concrete advice about when someone should change it. I don't see that here.\r\n\r\n5) Quite the contrary. Almost nobody changes defaults. Making things configurable just makes users who change them stand out.",
      "created_at" : "2021-05-01T03:22:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21815#issuecomment-830508296",
      "id" : 830508296,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMDUwODI5Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-01T03:22:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/830508296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa Thanks for your response. Closing this PR for now. Will reopen if I have better arguments and some data to support adding such option.",
      "created_at" : "2021-05-01T12:51:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21815#issuecomment-830627781",
      "id" : 830627781,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21815",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgzMDYyNzc4MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-01T12:51:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/830627781",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   }
]
