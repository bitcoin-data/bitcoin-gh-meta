{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "### Current behaviour\r\n\r\n`NetGroupManager::GetGroup()` was designed with IP networks in mind, where for example `10.20.30.40` and `10.20.30.45` are \"close\" and likely to belong to the same entity, while `100.20.30.40` is \"distant\" from them. This does not apply however for Tor, I2P and CJDNS where the address is \"random\" bytes. Actually, Tor, I2P and CJDNS addresses that have common prefix are _harder_ to obtain than ones that don't have a common prefix (the opposite compared to IP).\r\n\r\nCurrently `NetGroupManager::GetGroup()` is doing prefixing on Tor, I2P and CJDNS addresses and assumes same properties apply as for IP addresses. This magically \"works\" to some extent but has drawbacks. Some serious changes are needed to remove that assumption from the code.\r\n\r\nSee\r\nhttps://github.com/bitcoin/bitcoin/pull/22563\r\nhttps://github.com/bitcoin/bitcoin/pull/27264#issuecomment-1481322628\r\n\r\n### Expected behaviour\r\n\r\n* Don't do prefixing on Tor, I2P and CJDNS and don't assume proximity based on that.\r\n* Treat all addresses from Tor as one group (because it is very easy to obtain huge amount of them). Same for I2P and CJDNS.\r\n* Make sure addrman can still store enough addresses from those networks.\r\n* Make sure a single source from Tor, I2P and CJDNS cannot flood addrman with junk due to the previous point.\r\n",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 4,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27369/comments",
   "created_at" : "2023-03-30T11:39:20Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27369/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/27369",
   "id" : 1647446127,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27369/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII585iMghv",
   "number" : 27369,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27369/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27369/timeline",
   "title" : "Fix net grouping of non-IP networks",
   "updated_at" : "2023-03-30T15:02:32Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27369",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
      "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
      "followers_url" : "https://api.github.com/users/vasild/followers",
      "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
      "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/vasild",
      "id" : 266751,
      "login" : "vasild",
      "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
      "organizations_url" : "https://api.github.com/users/vasild/orgs",
      "received_events_url" : "https://api.github.com/users/vasild/received_events",
      "repos_url" : "https://api.github.com/users/vasild/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/vasild"
   }
}
