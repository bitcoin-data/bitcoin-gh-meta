{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "<!--- Remove sections that do not apply -->\r\n\r\nThis issue tracker is only for technical issues related to bitcoin-core.\r\n\r\nGeneral bitcoin questions and/or support requests and are best directed to the [Bitcoin StackExchange](https://bitcoin.stackexchange.com).\r\n\r\nFor reporting security issues, please read instructions at [https://bitcoincore.org/en/contact/](https://bitcoincore.org/en/contact/).\r\n\r\n### Describe the issue\r\nMy original wallet is from 2012. I have not done any updates for some time.\r\nMy problem appears on two different computers. Sync is working but at the end there comes an error\r\nflashing-db (see screenshot). I tried -rescan and -upgradewallet. \r\nI resynced from scratch on my original computer. needed more than one week...\r\nAt the end it showed a balance of zero. after rescan and upgrade wallet I got my balance but it always crashes at the end answering the error (see screenshot).\r\nThe wallet.dat is updated so there is no write problem.\r\n\r\n### Can you reliably reproduce the issue?\r\n#### If so, please list the steps to reproduce below:\r\n1. Tried several versions - always the same\r\n2. Tried two computers - same error\r\n3.\r\n\r\n### Expected behaviour\r\nTell us what should happen\r\nNo error at end of sync\r\n\r\n### Actual behaviour\r\nTell us what happens instead\r\nflashing-db error and exit of program at end of sync\r\n\r\n### Screenshots.\r\nIf the issue is related to the GUI, screenshots can be added to this issue via drag & drop.\r\n\r\n### What version of bitcoin-core are you using?\r\nList the version number/commit ID, and if it is an official binary, self compiled or a distribution package such as PPA.\r\nDistributed binary v0.15.0.1\r\n\r\n### Machine specs:\r\n-> see CPU-Z file\r\n[JIDONG.txt](https://github.com/bitcoin/bitcoin/files/1425366/JIDONG.txt)\r\n\r\n- OS: Windows 10 64bit\r\n- CPU: Intel Core 2 Duo -> other computer hexacore AMD\r\n- RAM: Tried computer with 8GB other computer  32GB\r\n- Disk size: 1TB\r\n- Disk Type (HD/SDD): HD, other computer SDD\r\n\r\n### Any extra information that might be useful in the debugging process.\r\nThis is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred.\r\n\r\nIf you need the whole Logfile please tell me a secure way for transfer.\r\nThe essential Part at the end looks like this:\r\n\r\n2017-10-27 14:07:34 CDBEnv::EnvShutdown: Error -30974 shutting down database environment: DB_RUNRECOVERY: Fatal error, run database recovery\r\n2017-10-27 14:07:34 Shutdown: done\r\n![err-flashing-db](https://user-images.githubusercontent.com/7703590/32146282-1d6aa62e-bcd5-11e7-9437-ecfb43c8891e.jpg)\r\n\r\n\r\n",
   "closed_at" : "2017-11-02T19:53:43Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 4,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11575/comments",
   "created_at" : "2017-10-29T17:59:49Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11575/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/11575",
   "id" : 269420325,
   "labels" : [
      {
         "color" : "006688",
         "default" : false,
         "id" : 477890092,
         "name" : "Questions and Help",
         "node_id" : "MDU6TGFiZWw0Nzc4OTAwOTI=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Questions%20and%20Help"
      },
      {
         "color" : "08a781",
         "default" : false,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11575/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWUyNjk0MjAzMjU=",
   "number" : 11575,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "CDBEnv::EnvShutdown: Error -30974 shutting down database environment: DB_RUNRECOVERY: Fatal error, run database recovery",
   "updated_at" : "2017-11-02T19:53:43Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11575",
   "user" : {
      "avatar_url" : "https://avatars1.githubusercontent.com/u/7703590?v=4",
      "events_url" : "https://api.github.com/users/qubit1729/events{/privacy}",
      "followers_url" : "https://api.github.com/users/qubit1729/followers",
      "following_url" : "https://api.github.com/users/qubit1729/following{/other_user}",
      "gists_url" : "https://api.github.com/users/qubit1729/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/qubit1729",
      "id" : 7703590,
      "login" : "qubit1729",
      "node_id" : "MDQ6VXNlcjc3MDM1OTA=",
      "organizations_url" : "https://api.github.com/users/qubit1729/orgs",
      "received_events_url" : "https://api.github.com/users/qubit1729/received_events",
      "repos_url" : "https://api.github.com/users/qubit1729/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/qubit1729/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/qubit1729/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/qubit1729"
   }
}
