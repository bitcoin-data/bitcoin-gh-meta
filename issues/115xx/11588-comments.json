[
   {
      "author_association" : "MEMBER",
      "body" : "I can't reproduce your issue.\r\n`bitcoin-cli help` does show\b `encryptwallet \"passphrase\"` if you haven't disabled wallet support (through compile option or via `-disablewallet`).\r\n\r\nCalling `encryptwallet` does requires you to define which wallet you want to encrypt though `bitcoin-cli`'s `-rpcwallet=<filename>`.\r\n\r\nNot sure if the PPA you are using has the same internals and APIs as bitcoin core 0.15.0.1.",
      "created_at" : "2017-11-01T00:34:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11588#issuecomment-340945941",
      "id" : 340945941,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11588",
      "updated_at" : "2017-11-01T00:34:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/340945941",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Did you test in a multi wallet setup, with the first (default) wallet encrypted, and the second one not?",
      "created_at" : "2017-11-01T00:37:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11588#issuecomment-340946310",
      "id" : 340946310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11588",
      "updated_at" : "2017-11-01T00:37:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/340946310",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1370997?v=4",
         "events_url" : "https://api.github.com/users/juestr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/juestr/followers",
         "following_url" : "https://api.github.com/users/juestr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/juestr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/juestr",
         "id" : 1370997,
         "login" : "juestr",
         "organizations_url" : "https://api.github.com/users/juestr/orgs",
         "received_events_url" : "https://api.github.com/users/juestr/received_events",
         "repos_url" : "https://api.github.com/users/juestr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/juestr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/juestr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/juestr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes. I tested it in multiwallet:\r\n\r\nStart multiwallet, fresh wallets:\r\n`./src/qt/bitcoin-qt --regtest --wallet=wallet1 --wallet=wallet2 --server` \r\n\r\nEncrypt wallet1:\r\n`./src/bitcoin-cli -rpcwallet=wallet1 --regtest encryptwallet test`\r\n(Core stops at this point)\r\n\r\nStart again:\r\n`./src/qt/bitcoin-qt --regtest --wallet=wallet1 --wallet=wallet2 --server` \r\n\r\nTest if wallet is encrypted:\r\n```shell\r\n/src/bitcoin-cli -rpcwallet=wallet1 --regtest keypoolrefill\r\nerror code: -13\r\nerror message:\r\nError: Please enter the wallet passphrase with walletpassphrase first.\r\n```\r\n\r\nEncrypt wallet2:\r\n`./src/bitcoin-cli -rpcwallet=wallet2 --regtest encryptwallet test`\r\n(Core stops at this point)\r\n\r\nStart again:\r\n`./src/qt/bitcoin-qt --regtest --wallet=wallet1 --wallet=wallet2 --server` \r\n\r\nTest if wallet is encrypted:\r\n```shell\r\n/src/bitcoin-cli -rpcwallet=wallet2 --regtest keypoolrefill\r\nerror code: -13\r\nerror message:\r\nError: Please enter the wallet passphrase with walletpassphrase first.\r\n```\r\n",
      "created_at" : "2017-11-01T00:45:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11588#issuecomment-340947299",
      "id" : 340947299,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11588",
      "updated_at" : "2017-11-01T00:45:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/340947299",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Oh yes wallet encryption works fine. \r\n\r\nThe problem (far minor) is that the output of `bitcoin-cli help` is sensitive to whether the first wallet is encrypted. It will not show the encryptwallet command, except if you use `bitcoin-cli -rpcwallet=wallet2.dat help`.\r\n\r\nI don't think this magic is beneficial any more, at least it caused me quite a bit of head scratching.\r\n\r\nNote also that all wallet commands require an explicit -rpcwallet when multi wallets are used, but `help` quietly assumes the default one. \r\n",
      "created_at" : "2017-11-01T00:53:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11588#issuecomment-340948326",
      "id" : 340948326,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11588",
      "updated_at" : "2017-11-01T00:53:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/340948326",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1370997?v=4",
         "events_url" : "https://api.github.com/users/juestr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/juestr/followers",
         "following_url" : "https://api.github.com/users/juestr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/juestr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/juestr",
         "id" : 1370997,
         "login" : "juestr",
         "organizations_url" : "https://api.github.com/users/juestr/orgs",
         "received_events_url" : "https://api.github.com/users/juestr/received_events",
         "repos_url" : "https://api.github.com/users/juestr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/juestr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/juestr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/juestr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Oh. I see now.\r\nThanks for the report... a fix is proposed in #11590.",
      "created_at" : "2017-11-01T06:34:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11588#issuecomment-341002678",
      "id" : 341002678,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11588",
      "updated_at" : "2017-11-01T06:34:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/341002678",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Thanks ",
      "created_at" : "2017-11-01T10:28:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/11588#issuecomment-341066794",
      "id" : 341066794,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11588",
      "updated_at" : "2017-11-01T10:28:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/341066794",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1370997?v=4",
         "events_url" : "https://api.github.com/users/juestr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/juestr/followers",
         "following_url" : "https://api.github.com/users/juestr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/juestr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/juestr",
         "id" : 1370997,
         "login" : "juestr",
         "organizations_url" : "https://api.github.com/users/juestr/orgs",
         "received_events_url" : "https://api.github.com/users/juestr/received_events",
         "repos_url" : "https://api.github.com/users/juestr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/juestr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/juestr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/juestr"
      }
   }
]
