[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18785#discussion_r416090195"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18785"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/416090195"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n    int32_t blockheight = 0; // Initialization only needed as workaround for -O2 compiler optimization and valgrind interaction, see https://github.com/bitcoin/bitcoin/pull/18785\r\n```\r\n\r\nThis will prevent valgrind from detecting real issues, so maybe add a comment with motivation?",
      "commit_id" : "fcb72616253ed22e364bc312992d77efc1c4a3c1",
      "created_at" : "2020-04-27T19:30:35Z",
      "diff_hunk" : "@@ -607,7 +607,7 @@ static bool rest_blockhash_by_height(HTTPRequest* req,\n     std::string height_str;\n     const RetFormat rf = ParseDataFormat(height_str, str_uri_part);\n \n-    int32_t blockheight;\n+    int32_t blockheight = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18785#discussion_r416090195",
      "id" : 416090195,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA5MDE5NQ==",
      "original_commit_id" : "86433fd89d4c52064b8c3b59cba0fcd18fef15ca",
      "original_line" : 610,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rest.cpp",
      "position" : null,
      "pull_request_review_id" : 401261934,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18785",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-27T20:03:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/416090195",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18785#discussion_r416109713"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18785"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/416109713"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/18785/files#r416090195\r\n\r\n> This will prevent valgrind from detecting real issues, so maybe add a comment with motivation?\r\n\r\nThanks, added comment. I'm not sure if it is too likely to be helpful to someone reading the code, but I guess it's better to have an explanation for something you wouldn't expect to be necessary.\r\n\r\nI also changed init value from 0 to -1 just to make it clear that if height is not parsed it will always trigger the error, regardless of the bool return value, and there's no strange case where this is supposed to return information about block 0",
      "commit_id" : "fcb72616253ed22e364bc312992d77efc1c4a3c1",
      "created_at" : "2020-04-27T20:02:33Z",
      "diff_hunk" : "@@ -607,7 +607,7 @@ static bool rest_blockhash_by_height(HTTPRequest* req,\n     std::string height_str;\n     const RetFormat rf = ParseDataFormat(height_str, str_uri_part);\n \n-    int32_t blockheight;\n+    int32_t blockheight = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18785#discussion_r416109713",
      "id" : 416109713,
      "in_reply_to_id" : 416090195,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjEwOTcxMw==",
      "original_commit_id" : "86433fd89d4c52064b8c3b59cba0fcd18fef15ca",
      "original_line" : 610,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rest.cpp",
      "position" : null,
      "pull_request_review_id" : 401283606,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18785",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-04-27T20:04:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/416109713",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK fcb72616253ed22e364bc312992d77efc1c4a3c1",
      "created_at" : "2020-04-27T20:14:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18785#issuecomment-620209191",
      "id" : 620209191,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18785",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDIwOTE5MQ==",
      "updated_at" : "2020-04-27T20:14:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620209191",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18740 (Remove g_rpc_node global by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-04-27T23:05:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18785#issuecomment-620280968",
      "id" : 620280968,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18785",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDI4MDk2OA==",
      "updated_at" : "2020-04-27T23:05:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620280968",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK fcb72616253ed22e364bc312992d77efc1c4a3c1\r\n\r\nNote that MemorySanitizer is not fooled by this type of optimization.\r\n\r\nMemorySanitizer can be trivially be enabled in Travis by merging #18288. Review welcome :)\r\n\r\nValgrind has well documented optimization issues. From the Valgrind documentation:\r\n\r\n> If you are planning to use Memcheck: On rare occasions, compiler optimisations (at -O2 and above, and sometimes -O1) have been observed to generate code which fools Memcheck into wrongly reporting uninitialised value errors, or missing uninitialised value errors. We have looked in detail into fixing this, and unfortunately the result is that doing so would give a further significant slowdown in what is already a slow tool. So the best solution is to turn off optimisation altogether. Since this often makes things unmanageably slow, a reasonable compromise is to use -O. This gets you the majority of the benefits of higher optimisation levels whilst keeping relatively small the chances of false positives or false negatives from Memcheck. Also, you should compile your code with -Wall because it can identify some or all of the problems that Valgrind can miss at the higher optimisation levels. (Using -Wall is also a good idea in general.)",
      "created_at" : "2020-04-28T06:29:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18785#issuecomment-620407834",
      "id" : 620407834,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18785",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMDQwNzgzNA==",
      "updated_at" : "2020-04-28T06:29:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/620407834",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   }
]
