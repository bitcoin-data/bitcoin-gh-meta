[
   {
      "author_association" : "MEMBER",
      "body" : "> Instead [...] void*, which isn't type safe, it uses a small new util::Ref \r\n\r\nWhy not `NodeContext*`? That might seem like a layer violation reading the source code, but practically it does the same and the diff would be smaller.",
      "created_at" : "2020-04-22T16:26:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-617885783",
      "id" : 617885783,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNzg4NTc4Mw==",
      "updated_at" : "2020-04-22T16:26:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617885783",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> > Instead [...] void*, which isn't type safe, it uses a small new util::Ref\r\n> \r\n> Why not `NodeContext*`? That might seem like a layer violation reading the source code, but practically it does the same and the diff would be smaller.\r\n\r\nThis would allow only allow dropping the first commit. The later commits would look basically the same but with `s/util::Ref/NodeContext/`.\r\n\r\nThe practical reason I don't want to do this is I want to the be able to use the RPC server outside the node process. E.g. start a multiprocess wallet process and have it listen for wallet RPC requests. Maybe add more offline wallet support and be able to have wallet-tool respond to RPCs like `listtransactions`. In these cases, wallet code can't link against `src/node/context.cpp` and `NodeContext` is useless for passing wallet state (aside from just looking strange).\r\n\r\nAlso, RPC code in rpc/server and httprpc is mostly pretty generic and not bitcoin specific and personally I think it would be a shame to see bitcoin types leak into it.",
      "created_at" : "2020-04-22T16:49:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-617899166",
      "id" : 617899166,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNzg5OTE2Ng==",
      "updated_at" : "2020-04-22T16:49:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617899166",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "From https://github.com/bitcoin/bitcoin/pull/18647#issuecomment-614059391\r\n\r\n> Wallet RPC methods shouldn't have access to NodeContext. At some point we should have WalletContext struct that will hold things like vpwallets and let us get rid of wallet globals, and it would make sense for wallet RPC methods to have access to this. That is why suggestion from #17548 was to just add a new member to JSONRPCRequest that could hold a generic context, not something tied to the wallet or node. Other advantage of using JSONRPCRequest is that you dont' have to change RPC method signatures.\r\n\r\nHow would you implement this? Make context a `map<string, any>`? And do `context[\"node\"].Has<NodeContext>()`?",
      "created_at" : "2020-04-22T17:05:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-617907818",
      "id" : 617907818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNzkwNzgxOA==",
      "updated_at" : "2020-04-22T17:06:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617907818",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nVery happy to see `g_rpc_node` go!\r\n\r\nThanks for the great architectural work you are doing.",
      "created_at" : "2020-04-22T17:30:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-617921683",
      "id" : 617921683,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNzkyMTY4Mw==",
      "updated_at" : "2020-04-22T17:30:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617921683",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> How would you implement this? Make context a `map<string, any>`? And do `context[\"node\"].Has<NodeContext>()`?\r\n\r\nNo need for multiple contexts in the same request. `interfaces::WalletClientImpl` can just pass an different context to wallet RPC methods. Passing an `interfaces::Chain` reference would be sufficient enough for `loadwallet` / `createwallet`. But I actually want to introduce a `WalletContext` struct in `src/wallet/context.h` analagous to the `NodeContext` struct in `src/node/context.h` which would hold things like the `Chain` interface pointer and `vpwallets` vector.",
      "created_at" : "2020-04-22T17:48:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-617931527",
      "id" : 617931527,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNzkzMTUyNw==",
      "updated_at" : "2020-04-22T17:54:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617931527",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Actually @promag, it is a little clumsier than I thought. I should change this PR to pass context to rpc method register calls instead of the StartHTTPRPC call to make this more future-proof (should still be an improvement as is)",
      "created_at" : "2020-04-22T17:58:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-617936446",
      "id" : 617936446,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNzkzNjQ0Ng==",
      "updated_at" : "2020-04-22T17:58:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617936446",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19028 (test: Set -logthreadnames in unit tests by MarcoFalke)\n* #19011 (Reduce cs_main lock accumulation during GUI startup by jonasschnelli)\n* #18991 (Cache responses to GETADDR to prevent topology leaks by naumenkogs)\n* #18698 (Make g_chainman internal to validation by MarcoFalke)\n* #18531 (rpc: Assert that RPCArg names are equal to CRPCCommand ones by MarcoFalke)\n* #17356 (RPC: Internal named params by luke-jr)\n* #13389 (Utils and libraries: Fix #13371 - move umask operation earlier in AppInit() by n2yen)\n* #12674 (RPC: Support addnode onetry without making the connection priviliged by luke-jr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-04-22T19:37:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-617992041",
      "id" : 617992041,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNzk5MjA0MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-05-20T21:44:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617992041",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r413428813"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413428813"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Have you considered `EnsureNodeContext(const JSONRPCRequest& req)` instead? Same for `EnsureMemPool`. Could avoid forward declaration above.",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-04-23T00:45:41Z",
      "diff_hunk" : "@@ -47,11 +50,7 @@ UniValue blockheaderToJSON(const CBlockIndex* tip, const CBlockIndex* blockindex\n /** Used by getblockstats to get feerates at different percentiles by weight  */\n void CalculatePercentilesByWeight(CAmount result[NUM_GETBLOCKSTATS_PERCENTILES], std::vector<std::pair<CAmount, int64_t>>& scores, int64_t total_weight);\n \n-//! Pointer to node state that needs to be declared as a global to be accessible\n-//! RPC methods. Due to limitations of the RPC framework, there's currently no\n-//! direct way to pass in state to RPC methods without globals.\n-extern NodeContext* g_rpc_node;\n-\n-CTxMemPool& EnsureMemPool();\n+NodeContext& EnsureNodeContext(const util::Ref& context);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r413428813",
      "id" : 413428813,
      "line" : 53,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzQyODgxMw==",
      "original_commit_id" : "fe333744b72c11030e5a06e904ba44cea167117b",
      "original_line" : 53,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.h",
      "position" : 20,
      "pull_request_review_id" : 398685773,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-20T21:59:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/413428813",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-04-23T02:45:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-618144500",
      "id" : 618144500,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxODE0NDUwMA==",
      "updated_at" : "2020-04-23T02:45:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/618144500",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r414772851"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414772851"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Heh, nice find. Maybe split this up as a separate pull request, since it seems unrelated to the changes here?",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-04-24T18:18:37Z",
      "diff_hunk" : "@@ -610,7 +610,7 @@ static bool rest_blockhash_by_height(const util::Ref& context, HTTPRequest* req,\n     std::string height_str;\n     const RetFormat rf = ParseDataFormat(height_str, str_uri_part);\n \n-    int32_t blockheight;\n+    int32_t blockheight = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r414772851",
      "id" : 414772851,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc3Mjg1MQ==",
      "original_commit_id" : "41d5d651594c6c939add7a58b7e30c97dccdf24a",
      "original_line" : 613,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rest.cpp",
      "position" : null,
      "pull_request_review_id" : 400171951,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-20T21:59:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/414772851",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r416076255"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/416076255"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/18740#discussion_r414772851\r\n\r\n> Maybe split this up as a separate pull request, since it seems unrelated to the changes here?\r\n\r\nYes it should be basically be unrelated. I created https://github.com/bitcoin/bitcoin/pull/18785, but am also keeping the commit here for now, since it does seem to be needed to avoid travis failing with the other changes here https://travis-ci.org/github/bitcoin/bitcoin/jobs/678453061#L7157",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-04-27T19:08:04Z",
      "diff_hunk" : "@@ -610,7 +610,7 @@ static bool rest_blockhash_by_height(const util::Ref& context, HTTPRequest* req,\n     std::string height_str;\n     const RetFormat rf = ParseDataFormat(height_str, str_uri_part);\n \n-    int32_t blockheight;\n+    int32_t blockheight = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r416076255",
      "id" : 416076255,
      "in_reply_to_id" : 414772851,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA3NjI1NQ==",
      "original_commit_id" : "41d5d651594c6c939add7a58b7e30c97dccdf24a",
      "original_line" : 613,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rest.cpp",
      "position" : null,
      "pull_request_review_id" : 401245633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-20T21:59:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/416076255",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r416088275"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/416088275"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/18740#discussion_r413428813\r\n\r\n> Have you considered `EnsureNodeContext(const JSONRPCRequest& req)` instead? Same for `EnsureMemPool`. Could avoid forward declaration above.\r\n\r\nProbably considered it, but I don't like this style (along lines of c++ koan https://www.youtube.com/watch?v=Zx_Tjp9WIII&t=15m07s)",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-04-27T19:27:35Z",
      "diff_hunk" : "@@ -47,11 +50,7 @@ UniValue blockheaderToJSON(const CBlockIndex* tip, const CBlockIndex* blockindex\n /** Used by getblockstats to get feerates at different percentiles by weight  */\n void CalculatePercentilesByWeight(CAmount result[NUM_GETBLOCKSTATS_PERCENTILES], std::vector<std::pair<CAmount, int64_t>>& scores, int64_t total_weight);\n \n-//! Pointer to node state that needs to be declared as a global to be accessible\n-//! RPC methods. Due to limitations of the RPC framework, there's currently no\n-//! direct way to pass in state to RPC methods without globals.\n-extern NodeContext* g_rpc_node;\n-\n-CTxMemPool& EnsureMemPool();\n+NodeContext& EnsureNodeContext(const util::Ref& context);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r416088275",
      "id" : 416088275,
      "in_reply_to_id" : 413428813,
      "line" : 53,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA4ODI3NQ==",
      "original_commit_id" : "fe333744b72c11030e5a06e904ba44cea167117b",
      "original_line" : 53,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.h",
      "position" : 20,
      "pull_request_review_id" : 401245633,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-20T21:59:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/416088275",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-04-29T12:59:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-621187778",
      "id" : 621187778,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTE4Nzc3OA==",
      "updated_at" : "2020-04-29T12:59:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621187778",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 41d5d651594c6c939add7a58b7e30c97dccdf24a -> 02aa19a8b1a2e7e6b2293ae8512f7c606ca58345 ([`pr/frpc.5`](https://github.com/ryanofsky/bitcoin/commits/pr/frpc.5) -> [`pr/frpc.6`](https://github.com/ryanofsky/bitcoin/commits/pr/frpc.6), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/frpc.5-rebase..pr/frpc.6)) due to conflict with #18785",
      "created_at" : "2020-04-29T17:20:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-621349725",
      "id" : 621349725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTM0OTcyNQ==",
      "updated_at" : "2020-04-29T17:20:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621349725",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 02aa19a8b1a2e7e6b2293ae8512f7c606ca58345\r\n\r\nBuilt, run and done some manual RPC testing on macOS Catalina 10.15.4",
      "created_at" : "2020-05-01T12:03:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-622361155",
      "id" : 622361155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjM2MTE1NQ==",
      "updated_at" : "2020-05-01T12:03:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622361155",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-05-04T15:49:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-623545083",
      "id" : 623545083,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzU0NTA4Mw==",
      "updated_at" : "2020-05-04T15:49:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623545083",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 02aa19a8b1a2e7e6b2293ae8512f7c606ca58345 -> 1be6bad7c044981faea55c76730a07eb95c2fd9f ([`pr/frpc.6`](https://github.com/ryanofsky/bitcoin/commits/pr/frpc.6) -> [`pr/frpc.7`](https://github.com/ryanofsky/bitcoin/commits/pr/frpc.7), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/frpc.6-rebase..pr/frpc.7)) due to conflict with #18699",
      "created_at" : "2020-05-04T18:29:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-623630419",
      "id" : 623630419,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzYzMDQxOQ==",
      "updated_at" : "2020-05-04T18:29:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623630419",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Travis error appears to be unrelated \"`mkdir: cannot create directory â/home/travis/build/bitcoin/bitcoin/ci/scratchâ: No space left on device\r\n`\" in s390x native BE build https://travis-ci.org/github/bitcoin/bitcoin/jobs/683061500#L336. It's reported in #18868",
      "created_at" : "2020-05-05T04:55:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-623855960",
      "id" : 623855960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMzg1NTk2MA==",
      "updated_at" : "2020-05-05T05:03:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/623855960",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 1be6bad7c044981faea55c76730a07eb95c2fd9f -> c13af197ce473769303c3bf1bcb38658c5f8de41 ([`pr/frpc.7`](https://github.com/ryanofsky/bitcoin/commits/pr/frpc.7) -> [`pr/frpc.8`](https://github.com/ryanofsky/bitcoin/commits/pr/frpc.8), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/frpc.7-rebase..pr/frpc.8)) due to conflict with #16224",
      "created_at" : "2020-05-13T22:10:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-628272144",
      "id" : 628272144,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyODI3MjE0NA==",
      "updated_at" : "2020-05-13T22:10:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/628272144",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I should change this PR to pass context to rpc method register calls\r\n\r\nI found the `std::any` versus explicit `NodeContext` tradeoff confusing, but I think this makes sense of it. With a node/wallet/mempool/whatever context passed to the rpc register calls, this means\r\n\r\n * the RPC infra (server, json request) doesn't need to know about bitcoin structures at all\r\n * the RPC command can just grab its needed context directly, and there doesn't need to be a struct with pointers to all the different parts that might or might not be available, which will maybe make it easier to split the different contexts into separate programs one day\r\n * the RPC server can give an error immediately for RPC commands where the context isn't available (I guess it'd be \"command not found\" since it wouldn't have been registered in the first place)\r\n\r\nSo, Approach ACK. Planning on updating this pr with the register changes, or doing that later?",
      "created_at" : "2020-05-19T08:24:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-630667062",
      "id" : 630667062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDY2NzA2Mg==",
      "updated_at" : "2020-05-19T08:24:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630667062",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> So, Approach ACK. Planning on updating this pr with the register changes, or doing that later?\r\n\r\nWas planning on doing it in a followup PR removing g_rpc_chain\r\n",
      "created_at" : "2020-05-19T11:49:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-630767632",
      "id" : 630767632,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMDc2NzYzMg==",
      "updated_at" : "2020-05-19T11:49:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/630767632",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r427241499"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427241499"
         }
      },
      "author_association" : "MEMBER",
      "body" : ":eyes: ",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-05-19T11:51:58Z",
      "diff_hunk" : "@@ -549,7 +558,7 @@ static UniValue getmempoolancestors(const JSONRPCRequest& request)\n \n     uint256 hash = ParseHashV(request.params[0], \"parameter 1\");\n \n-    const CTxMemPool& mempool = EnsureMemPool();\n+    CTxMemPool& mempool = EnsureMemPool(request.context);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r427241499",
      "id" : 427241499,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI0MTQ5OQ==",
      "original_commit_id" : "c13af197ce473769303c3bf1bcb38658c5f8de41",
      "original_line" : 561,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 414367050,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-20T21:59:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427241499",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r427373123"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427373123"
         }
      },
      "author_association" : "MEMBER",
      "body" : "in the commit that adds ref: Could check that each is an alias for the other? Right now ref could actually be a copy and the test wouldn't fail.\r\n\r\n```diff\r\ndiff --git a/src/test/ref_tests.cpp b/src/test/ref_tests.cpp\r\nindex ef96a0042a..0ec0799fbc 100644\r\n--- a/src/test/ref_tests.cpp\r\n+++ b/src/test/ref_tests.cpp\r\n@@ -19,6 +19,10 @@ BOOST_AUTO_TEST_CASE(ref_test)\r\n     BOOST_CHECK_EQUAL(ref.Get<int>(), 5);\r\n     ++ref.Get<int>();\r\n     BOOST_CHECK_EQUAL(ref.Get<int>(), 6);\r\n+    BOOST_CHECK_EQUAL(value, 6);\r\n+    ++value;\r\n+    BOOST_CHECK_EQUAL(value, 7);\r\n+    BOOST_CHECK_EQUAL(ref.Get<int>(), 7);\r\n     BOOST_CHECK(!ref.Has<bool>());\r\n     BOOST_CHECK_THROW(ref.Get<bool>(), NonFatalCheckError);\r\n     ref.Clear();\r\n",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-05-19T15:01:02Z",
      "diff_hunk" : "@@ -0,0 +1,29 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/ref.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(ref_tests)\n+\n+BOOST_AUTO_TEST_CASE(ref_test)\n+{\n+    util::Ref ref;\n+    BOOST_CHECK(!ref.Has<int>());\n+    BOOST_CHECK_THROW(ref.Get<int>(), NonFatalCheckError);\n+    int value = 5;\n+    ref.Set(value);\n+    BOOST_CHECK(ref.Has<int>());\n+    BOOST_CHECK_EQUAL(ref.Get<int>(), 5);\n+    ++ref.Get<int>();\n+    BOOST_CHECK_EQUAL(ref.Get<int>(), 6);\n+    BOOST_CHECK(!ref.Has<bool>());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r427373123",
      "id" : 427373123,
      "line" : 26,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM3MzEyMw==",
      "original_commit_id" : "d8c253f26e1dee43e855f376be3f8c204b23ca50",
      "original_line" : 26,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/ref_tests.cpp",
      "position" : 26,
      "pull_request_review_id" : 414367050,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-20T21:59:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/427373123",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428323475"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428323475"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"refactor: Pass NodeContext to RPC and REST methods through util::Ref\" (28941409ac80fe6f8216b4f8fa940b31c270133b)\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/18740#discussion_r427241499\r\n\r\n> :eyes:\r\n\r\nGood catch! Added const",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-05-20T21:40:44Z",
      "diff_hunk" : "@@ -549,7 +558,7 @@ static UniValue getmempoolancestors(const JSONRPCRequest& request)\n \n     uint256 hash = ParseHashV(request.params[0], \"parameter 1\");\n \n-    const CTxMemPool& mempool = EnsureMemPool();\n+    CTxMemPool& mempool = EnsureMemPool(request.context);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428323475",
      "id" : 428323475,
      "in_reply_to_id" : 427241499,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODMyMzQ3NQ==",
      "original_commit_id" : "c13af197ce473769303c3bf1bcb38658c5f8de41",
      "original_line" : 561,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 415734696,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-20T22:00:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428323475",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428325456"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428325456"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"Add util::Ref class as temporary alternative for c++17 std::any\" (d8c253f26e1dee43e855f376be3f8c204b23ca50)\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/18740#discussion_r427373123\r\n\r\n> in the commit that adds ref: Could check that each is an alias for the other? Right now ref could actually be a copy and the test wouldn't fail.\r\n\r\nNice, added suggested checks",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-05-20T21:44:58Z",
      "diff_hunk" : "@@ -0,0 +1,29 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/ref.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(ref_tests)\n+\n+BOOST_AUTO_TEST_CASE(ref_test)\n+{\n+    util::Ref ref;\n+    BOOST_CHECK(!ref.Has<int>());\n+    BOOST_CHECK_THROW(ref.Get<int>(), NonFatalCheckError);\n+    int value = 5;\n+    ref.Set(value);\n+    BOOST_CHECK(ref.Has<int>());\n+    BOOST_CHECK_EQUAL(ref.Get<int>(), 5);\n+    ++ref.Get<int>();\n+    BOOST_CHECK_EQUAL(ref.Get<int>(), 6);\n+    BOOST_CHECK(!ref.Has<bool>());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428325456",
      "id" : 428325456,
      "in_reply_to_id" : 427373123,
      "line" : 26,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODMyNTQ1Ng==",
      "original_commit_id" : "d8c253f26e1dee43e855f376be3f8c204b23ca50",
      "original_line" : 26,
      "original_position" : 22,
      "original_start_line" : null,
      "path" : "src/test/ref_tests.cpp",
      "position" : 26,
      "pull_request_review_id" : 415734696,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-20T22:00:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428325456",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428378021"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428378021"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This doesn't seem like a subset of std::any's functionality -- as far as I can tell std::any makes a copy of an object, and [can't be used](https://stackoverflow.com/questions/56613109/is-it-possible-to-store-a-reference-in-a-stdany) for the behaviour `Ref` offers (providing a reference to an arbitrary object). Just a comment nit: implementing copy semantics seems like a waste of time, and moving to std::any later seems sensible -- it just won't be a drop-in change, as far as I can see.",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-05-21T00:16:04Z",
      "diff_hunk" : "@@ -0,0 +1,38 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_REF_H\n+#define BITCOIN_UTIL_REF_H\n+\n+#include <util/check.h>\n+\n+#include <typeindex>\n+\n+namespace util {\n+\n+/**\n+ * Type-safe dynamic reference.\n+ *\n+ * This implements a small subset of the functionality in C++17's std::any",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428378021",
      "id" : 428378021,
      "line" : 17,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM3ODAyMQ==",
      "original_commit_id" : "691c817b340d10e806dc3b1834d2a8fcc5e681fd",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/util/ref.h",
      "position" : 17,
      "pull_request_review_id" : 415798906,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-21T02:39:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428378021",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428381159"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428381159"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Should just add `context` as a param to `RegisterHTTPHandler()`, and change the definitions of `HTTPRequestHandler` and `HTTPPathHandler` to accept/track the context, rather than have lots of lambdas? Something like https://github.com/ajtowns/bitcoin/commits/202005-pr18740-tweaks",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-05-21T00:27:41Z",
      "diff_hunk" : "@@ -288,15 +288,16 @@ static bool InitRPCAuthentication()\n     return true;\n }\n \n-bool StartHTTPRPC()\n+bool StartHTTPRPC(const util::Ref& context)\n {\n     LogPrint(BCLog::RPC, \"Starting HTTP RPC server\\n\");\n     if (!InitRPCAuthentication())\n         return false;\n \n-    RegisterHTTPHandler(\"/\", true, HTTPReq_JSONRPC);\n+    auto handle_rpc = [&context](HTTPRequest* req, const std::string&) { return HTTPReq_JSONRPC(context, req); };",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428381159",
      "id" : 428381159,
      "line" : 297,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODM4MTE1OQ==",
      "original_commit_id" : "6fca33b2edc09ed62dab2323c780b31585de1750",
      "original_line" : 297,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/httprpc.cpp",
      "position" : 30,
      "pull_request_review_id" : 415798906,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-21T02:39:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428381159",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428400168"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428400168"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`EnsureNodeContext` ?",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-05-21T01:43:17Z",
      "diff_hunk" : "@@ -398,9 +399,10 @@ static UniValue mockscheduler(const JSONRPCRequest& request)\n     }\n \n     // protect against null pointer dereference\n-    CHECK_NONFATAL(g_rpc_node);\n-    CHECK_NONFATAL(g_rpc_node->scheduler);\n-    g_rpc_node->scheduler->MockForward(std::chrono::seconds(delta_seconds));\n+    CHECK_NONFATAL(request.context.Has<NodeContext>());\n+    NodeContext& node = request.context.Get<NodeContext>();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428400168",
      "id" : 428400168,
      "line" : 403,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQwMDE2OA==",
      "original_commit_id" : "6fca33b2edc09ed62dab2323c780b31585de1750",
      "original_line" : 403,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : 27,
      "pull_request_review_id" : 415798906,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-21T02:39:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428400168",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428412255"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428412255"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`Ref& _context` and `context(_context)`? We usually use different names for arguments and members, don't we? ",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-05-21T02:32:58Z",
      "diff_hunk" : "@@ -34,8 +38,9 @@ class JSONRPCRequest\n     std::string URI;\n     std::string authUser;\n     std::string peerAddr;\n+    const util::Ref& context;\n \n-    JSONRPCRequest() : id(NullUniValue), params(NullUniValue), fHelp(false) {}\n+    JSONRPCRequest(const util::Ref& context) : id(NullUniValue), params(NullUniValue), fHelp(false), context(context) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428412255",
      "id" : 428412255,
      "line" : 43,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQxMjI1NQ==",
      "original_commit_id" : "6fca33b2edc09ed62dab2323c780b31585de1750",
      "original_line" : 43,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/rpc/request.h",
      "position" : 18,
      "pull_request_review_id" : 415798906,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-21T02:39:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428412255",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428424812"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428424812"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review. std::any can hold pointers and reference wrappers, so there is no problem here. I'm going to mark the style comments resolved because I disagree with them and don't want to create extended off-topic conversations. But if there's anything that should be reconsidered, definitely do follow up. Review suggestions tend to be most useful when they are specific and say something about the motivation behind the suggestion. That way, if there's disagreement about the suggestion, something else can be done to address whatever the motivation for it was.",
      "commit_id" : "b3f7f375efb9a9ca9a7a4f2caf41fe3df2262520",
      "created_at" : "2020-05-21T03:25:47Z",
      "diff_hunk" : "@@ -0,0 +1,38 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_REF_H\n+#define BITCOIN_UTIL_REF_H\n+\n+#include <util/check.h>\n+\n+#include <typeindex>\n+\n+namespace util {\n+\n+/**\n+ * Type-safe dynamic reference.\n+ *\n+ * This implements a small subset of the functionality in C++17's std::any",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#discussion_r428424812",
      "id" : 428424812,
      "in_reply_to_id" : 428378021,
      "line" : 17,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQyNDgxMg==",
      "original_commit_id" : "691c817b340d10e806dc3b1834d2a8fcc5e681fd",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/util/ref.h",
      "position" : 17,
      "pull_request_review_id" : 415854454,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18740",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-05-21T03:25:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/428424812",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK b3f7f375ef, only change is adding back const and more tests ð¾\r\n\r\n<details><summary>Show signature and timestamp</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nre-ACK b3f7f375ef, only change is adding back const and more tests ð¾\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUjEBAv/RaWaCyOsjaMttBcKiwYoYmFFtu0dDqcwQ8icmd/JotFyemomPv1LSpOs\r\n+rmy/8gpfyM875zlzSJ/jg0ELlQm7LS7RQecVSSYCx27J8U6olXBJILuPx4T8yJs\r\nDY3DABlfI1lQv7rffyZu0mxRYv8b4sGh+80ZTL4t3WOuvsdnS+PsqiK+BJiG571k\r\n9Oeg4BQxLaYKR5Q80n74ATb4tv2eogpYJ8JmKRIOZ3DWOtFsSot2WCEmaxOJc0If\r\nRJqEGeJ/sL8+hM3lEZm4HYI/eV0/WpezgnpX8pn7kvcpnS4NcElPSzXiFYpYjKYe\r\nT4dSFvRg5rZaqJ61PCHBjFk5mMV0sHtRQ4mbGiAiCPvhpoVGbbEq+3YY2q5+ZXs0\r\nE2PvUzHz6wqiK7ZmtpmM3CiuA8cu3MgujgGJF5ou5ZW1HIGjne3brc2lKnl7SfNO\r\nm5TghZ/FY8JiBnk/Wwzp7WSf3Zf9Q7SD6sqTy9/PKQEquWSNQNxsc/hziYfSpjYF\r\nZ1obJ5Pr\r\n=nEIH\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n[Timestamp of file with hash `4de1c5a739df99abe18f469939c72f67f85aab41eb67e464e5ba55c4a6d9c8a4  -`](https://opentimestamps.org/info/?004f70656e54696d657374616d7073000050726f6f6600bf89e2e884e8929401084de1c5a739df99abe18f469939c72f67f85aab41eb67e464e5ba55c4a6d9c8a4f010696d8c32460d8701316b0db60bb69c3b08fff01002f2162b03a7279ca112622ec96994c008f1045ec65d74f0080dcca0560482ff350083dfe30d2ef90c8e2e2d68747470733a2f2f616c6963652e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267fff010398b7c9f2fca286955278169e74129c908f0209141d77ac03eba1fca57ff25a347ef81de65f5bb5ac0c92ba355bc54f0abf7cc08f1045ec65d75f00872e0a437306e63b50083dfe30d2ef90c8e2c2b68747470733a2f2f626f622e6274632e63616c656e6461722e6f70656e74696d657374616d70732e6f7267fff0103d1e70b1e1a7b8c9470a1dd6acbe1aed08f0209211751cf40a4a8941e3aa0b028a0e439c1369919384fd523e4354ec04b5cc2808f1045ec65d75f0085fd9693165be35170083dfe30d2ef90c8e292868747470733a2f2f66696e6e65792e63616c656e6461722e657465726e69747977616c6c2e636f6df01098693f06ba7d21d4eeab2e7d3b8888f008f1045ec65d74f00871e6435f42fcb3db0083dfe30d2ef90c8e232268747470733a2f2f6274632e63616c656e6461722e636174616c6c6178792e636f6d)\r\n\r\n</details>\r\n",
      "created_at" : "2020-05-21T10:52:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-632020201",
      "id" : 632020201,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYzMjAyMDIwMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-05-21T10:52:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/632020201",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky \r\n> This uses a hybrid of the approaches suggested in #17548. Instead of using `std::any`, which isn't available in c++11, or `void*`, which isn't type safe, it uses a small new `util::Ref` helper class, which acts like a simplified `std::any` that only holds references, not values.\r\n\r\nThe `std::any` requires that a type of a contained object [must](https://en.cppreference.com/w/cpp/utility/any/any) be CopyConstructible.\r\nBut `std::is_copy_constructible<NodeContext>::value == false`.\r\n\r\nSo, even with C++17, there are no simple ways to drop `util::Ref` in favor of `std::any`, unfortunately.\r\n\r\nOr did I miss something?",
      "created_at" : "2021-03-28T00:34:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-808823397",
      "id" : 808823397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwODgyMzM5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-28T00:34:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/808823397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> So, even with C++17, there are no simple ways to drop util::Ref in favor of std::any, unfortunately.\r\n\r\nIt's being dropped for `std::any` in #21366.",
      "created_at" : "2021-03-28T00:36:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18740#issuecomment-808823584",
      "id" : 808823584,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18740",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwODgyMzU4NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-28T00:36:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/808823584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
