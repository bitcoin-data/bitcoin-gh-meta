[
   {
      "author_association" : "NONE",
      "body" : "Sorry if it's a noob question \r\nI understand block size is 4MB now but how did you get 10.66MB as size of the total usage?\r\nIs it (4*2.66) ? ",
      "created_at" : "2020-04-19T18:28:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18703#issuecomment-616201989",
      "id" : 616201989,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18703",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNjIwMTk4OQ==",
      "updated_at" : "2020-04-19T18:28:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/616201989",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/20089340?v=4",
         "events_url" : "https://api.github.com/users/yozaam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yozaam/followers",
         "following_url" : "https://api.github.com/users/yozaam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yozaam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yozaam",
         "id" : 20089340,
         "login" : "yozaam",
         "node_id" : "MDQ6VXNlcjIwMDg5MzQw",
         "organizations_url" : "https://api.github.com/users/yozaam/orgs",
         "received_events_url" : "https://api.github.com/users/yozaam/received_events",
         "repos_url" : "https://api.github.com/users/yozaam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yozaam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yozaam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yozaam"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes I multiplied by 4; might be a bad estimate.",
      "created_at" : "2020-04-20T06:44:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18703#issuecomment-616344844",
      "id" : 616344844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18703",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNjM0NDg0NA==",
      "updated_at" : "2020-04-20T06:44:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/616344844",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/23437045?v=4",
         "events_url" : "https://api.github.com/users/DesWurstes/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DesWurstes/followers",
         "following_url" : "https://api.github.com/users/DesWurstes/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DesWurstes/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DesWurstes",
         "id" : 23437045,
         "login" : "DesWurstes",
         "node_id" : "MDQ6VXNlcjIzNDM3MDQ1",
         "organizations_url" : "https://api.github.com/users/DesWurstes/orgs",
         "received_events_url" : "https://api.github.com/users/DesWurstes/received_events",
         "repos_url" : "https://api.github.com/users/DesWurstes/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DesWurstes/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DesWurstes/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DesWurstes"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I haven't looked into whether the witness data is also handled in-memory (presumably it is). But for anyone who picks this up it is better to refer to \"block weight\" rather than \"block size\" in the docs. The \"block size\" is still 1MB. https://medium.com/@jimmysong/understanding-segwit-block-size-fd901b87c9d4",
      "created_at" : "2020-04-20T12:46:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18703#issuecomment-616529336",
      "id" : 616529336,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18703",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNjUyOTMzNg==",
      "updated_at" : "2020-04-20T12:46:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/616529336",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/16323900?v=4",
         "events_url" : "https://api.github.com/users/michaelfolkson/events{/privacy}",
         "followers_url" : "https://api.github.com/users/michaelfolkson/followers",
         "following_url" : "https://api.github.com/users/michaelfolkson/following{/other_user}",
         "gists_url" : "https://api.github.com/users/michaelfolkson/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/michaelfolkson",
         "id" : 16323900,
         "login" : "michaelfolkson",
         "node_id" : "MDQ6VXNlcjE2MzIzOTAw",
         "organizations_url" : "https://api.github.com/users/michaelfolkson/orgs",
         "received_events_url" : "https://api.github.com/users/michaelfolkson/received_events",
         "repos_url" : "https://api.github.com/users/michaelfolkson/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/michaelfolkson/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/michaelfolkson/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/michaelfolkson"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> https://medium.com/@jimmysong/understanding-segwit-block-size-fd901b87c9d4\r\n\r\nLoved your article 50ð , It was very informative! ",
      "created_at" : "2020-04-20T12:52:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18703#issuecomment-616532557",
      "id" : 616532557,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18703",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNjUzMjU1Nw==",
      "updated_at" : "2020-04-20T12:52:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/616532557",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/20089340?v=4",
         "events_url" : "https://api.github.com/users/yozaam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/yozaam/followers",
         "following_url" : "https://api.github.com/users/yozaam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/yozaam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/yozaam",
         "id" : 20089340,
         "login" : "yozaam",
         "node_id" : "MDQ6VXNlcjIwMDg5MzQw",
         "organizations_url" : "https://api.github.com/users/yozaam/orgs",
         "received_events_url" : "https://api.github.com/users/yozaam/received_events",
         "repos_url" : "https://api.github.com/users/yozaam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/yozaam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/yozaam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/yozaam"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I'm happy to make this change if it's still required? Looking to make a first contribution. It may even be a good idea to note the difference between legacy node \"weight\" expectation vs segwit nodes?",
      "created_at" : "2020-04-21T14:24:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18703#issuecomment-617213085",
      "id" : 617213085,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18703",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNzIxMzA4NQ==",
      "updated_at" : "2020-04-21T14:24:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617213085",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5681674?v=4",
         "events_url" : "https://api.github.com/users/BHouwens/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BHouwens/followers",
         "following_url" : "https://api.github.com/users/BHouwens/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BHouwens/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BHouwens",
         "id" : 5681674,
         "login" : "BHouwens",
         "node_id" : "MDQ6VXNlcjU2ODE2NzQ=",
         "organizations_url" : "https://api.github.com/users/BHouwens/orgs",
         "received_events_url" : "https://api.github.com/users/BHouwens/received_events",
         "repos_url" : "https://api.github.com/users/BHouwens/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BHouwens/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BHouwens/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BHouwens"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think there are a few more things to consider here. First of all, I can't really make sense of the 2.66MB number. From my understanding, it should be 3 MB if we are talking about Hex. 1 MB is the full block that gets loaded into memory before the processing. Then, it might get processed into hex which is the less efficient encoding format where 1 byte binary takes 2 bytes in hex. I think this is right because `HexStr` is also reserving twice the space here: https://github.com/bitcoin/bitcoin/blob/b6a5dc90bfd4640cf9f914e59bf8e21cd265b51e/src/util/strencodings.h#L128\r\n\r\nBut then there is also the JSON option and that should add way more overhead than a hex encoding. I just did a quick check if I am missing something with a recent block to make sure I am not missing something and this looks right:\r\n\r\n```\r\n$ ls -hla | grep 5694ce\r\n-rw-r--r--@   1 XXX  XXX   1.2M Apr 22 01:57 00000000000000000011fbefe97f501a0160a2c86201ef5ef79e1cd2ce5694ce.bin\r\n-rw-r--r--@   1 XXX  XXX   2.4M Apr 22 01:56 00000000000000000011fbefe97f501a0160a2c86201ef5ef79e1cd2ce5694ce.hex.txt\r\n-rw-r--r--@   1 XXX  XXX   8.0M Apr 22 01:53 00000000000000000011fbefe97f501a0160a2c86201ef5ef79e1cd2ce5694ce.json\r\n```\r\n\r\n@michaelfolkson mentioned block weight, but I think this would not be the right term to talk about here because the weight is a theoretical term used to calculate fees and when a block is considered full but it only has an indirect influence on the space used in memory. I would say the term weight was actually introduced to create a disconnect between the space that the block uses in memory and measuring when a block is full. (Edit: I should probably call it a direct influence but the point is you can't tell the block size in memory from the block weight)\r\n\r\nBut this disconnect also makes it much harder to give a good estimate of what size to expect. 4 MB is the theoretical max size of a Segwit block, but even with increasing Segwit adoption, I would say a 2 MB block would be huge. We are currently at 1.2 -1.3 MB usually: https://bitcoinvisuals.com/chain-block-size.\r\n\r\nSo what number to take? If I had to make a guess it would be ~10 MB worst case for the foreseeable future (big Segwit block with JSON). But really I would rather suggest removing that number, I am not sure how much relevance it has. If I am right and the number was off all this time, then I guess nobody noticed it because of that ;) But I am also not a regular rest interface user and looked at that code for the first time today, so don't take my word for it.\r\n\r\nAnyway, if anyone wants to open a PR for this I would suggest looking for more inconsistencies in the docs and the rest code and put them together. Looking at `rest.cpp` this error string seems to be missing the `json` option for example: https://github.com/bitcoin/bitcoin/blob/b6a5dc90bfd4640cf9f914e59bf8e21cd265b51e/src/rest.cpp#L209",
      "created_at" : "2020-04-22T00:09:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18703#issuecomment-617474043",
      "id" : 617474043,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18703",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNzQ3NDA0Mw==",
      "updated_at" : "2020-04-22T00:17:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617474043",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> But really I would rather suggest removing that number, I am not sure how much relevance it has.\r\n\r\nAgree with @fjahr that the number should be removed. No documentation is better than wrong documentation.",
      "created_at" : "2020-04-22T11:21:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18703#issuecomment-617716759",
      "id" : 617716759,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18703",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxNzcxNjc1OQ==",
      "updated_at" : "2020-04-22T11:21:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/617716759",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closed by #18810",
      "created_at" : "2020-04-30T09:46:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/18703#issuecomment-621729237",
      "id" : 621729237,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18703",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMTcyOTIzNw==",
      "updated_at" : "2020-04-30T09:46:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/621729237",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
