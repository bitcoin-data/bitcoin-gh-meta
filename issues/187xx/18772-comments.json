[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The documentation for `getblock` refers to the tx format of `getrawtransaction`.  Any thoughts on what would be a reasonable approach here?\r\n\r\n- Also update `getrawtransaction` (and the documentation) to include a fee if possible (this might be slow since the cost of loading undo data is no longer amortized over many transactions in a block)\r\n- Update the `getblock` documentation to mention that unlike `getrawtransaction`, it might also include fees\r\n- Leave the documentation alone and let the unfortunate user figure out the semantics themselves :)",
      "created_at" : "2020-04-26T08:54:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-619512534",
      "id" : 619512534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxOTUxMjUzNA==",
      "updated_at" : "2020-04-26T08:54:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619512534",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/63171930?v=4",
         "events_url" : "https://api.github.com/users/robot-visions/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-visions/followers",
         "following_url" : "https://api.github.com/users/robot-visions/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-visions/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-visions",
         "id" : 63171930,
         "login" : "robot-visions",
         "node_id" : "MDQ6VXNlcjYzMTcxOTMw",
         "organizations_url" : "https://api.github.com/users/robot-visions/orgs",
         "received_events_url" : "https://api.github.com/users/robot-visions/received_events",
         "repos_url" : "https://api.github.com/users/robot-visions/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-visions/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-visions"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Please add the right co-author to your commit, if your work is based on someone else's work",
      "created_at" : "2020-04-26T11:51:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-619536994",
      "id" : 619536994,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxOTUzNjk5NA==",
      "updated_at" : "2020-04-26T11:51:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619536994",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated, thanks!  I didn't know about `Co-authored-by` feature before.",
      "created_at" : "2020-04-26T17:50:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-619594112",
      "id" : 619594112,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYxOTU5NDExMg==",
      "updated_at" : "2020-04-26T17:50:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619594112",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/63171930?v=4",
         "events_url" : "https://api.github.com/users/robot-visions/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-visions/followers",
         "following_url" : "https://api.github.com/users/robot-visions/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-visions/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-visions",
         "id" : 63171930,
         "login" : "robot-visions",
         "node_id" : "MDQ6VXNlcjYzMTcxOTMw",
         "organizations_url" : "https://api.github.com/users/robot-visions/orgs",
         "received_events_url" : "https://api.github.com/users/robot-visions/received_events",
         "repos_url" : "https://api.github.com/users/robot-visions/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-visions/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-visions"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20406 (util: Avoid invalid integer negation in FormatMoney and ValueFromAmount by practicalswift)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-04-30T18:13:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-622017678",
      "id" : 622017678,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjAxNzY3OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-21T09:47:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622017678",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 732554a8a64ad5c9d49505272d225626566898de\r\n\r\nBuilt, run and tested on macOS Catalina 10.15.4\r\n\r\n",
      "created_at" : "2020-05-01T10:44:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-622339679",
      "id" : 622339679,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyMjMzOTY3OQ==",
      "updated_at" : "2020-05-01T10:44:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/622339679",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/56779?v=4",
         "events_url" : "https://api.github.com/users/brakmic/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brakmic/followers",
         "following_url" : "https://api.github.com/users/brakmic/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brakmic/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brakmic",
         "id" : 56779,
         "login" : "brakmic",
         "node_id" : "MDQ6VXNlcjU2Nzc5",
         "organizations_url" : "https://api.github.com/users/brakmic/orgs",
         "received_events_url" : "https://api.github.com/users/brakmic/received_events",
         "repos_url" : "https://api.github.com/users/brakmic/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brakmic/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brakmic/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brakmic"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661107"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661107"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why did you revert these back to the old variable name style? (I had changed them to `amt_total_in`/`amt_total_out` in my rebase...)",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-05-10T15:34:10Z",
      "diff_hunk" : "@@ -186,6 +187,10 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n     entry.pushKV(\"locktime\", (int64_t)tx.nLockTime);\n \n     UniValue vin(UniValue::VARR);\n+\n+    CAmount nTotalIn = 0;\n+    CAmount nTotalOut = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661107",
      "id" : 422661107,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTEwNw==",
      "original_commit_id" : "732554a8a64ad5c9d49505272d225626566898de",
      "original_line" : 192,
      "original_position" : 23,
      "original_start_line" : 191,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 408756097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661107",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661199"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661199"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This seems unnecessary.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-05-10T15:35:16Z",
      "diff_hunk" : "@@ -205,6 +210,13 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n                 }\n                 in.pushKV(\"txinwitness\", txinwitness);\n             }\n+            if (txundo) {\n+                CAmount nPrevOut = txundo->vprevout[i].out.nValue;\n+                // Sanity check to avoid overflow\n+                if (MoneyRange(nPrevOut)) {\n+                    nTotalIn += nPrevOut;\n+                }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661199",
      "id" : 422661199,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTE5OQ==",
      "original_commit_id" : "732554a8a64ad5c9d49505272d225626566898de",
      "original_line" : 218,
      "original_position" : 37,
      "original_start_line" : 215,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 408756097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661199",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661336"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661336"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This won't work right... `nTotalOut` would just be missing part of its amount, and the result calculated later will still be wrong.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-05-10T15:36:15Z",
      "diff_hunk" : "@@ -224,9 +236,21 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n         ScriptPubKeyToUniv(txout.scriptPubKey, o, true);\n         out.pushKV(\"scriptPubKey\", o);\n         vout.push_back(out);\n+\n+        // Sanity check to avoid overflow\n+        if (MoneyRange(txout.nValue)) {\n+            nTotalOut += txout.nValue;\n+        }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661336",
      "id" : 422661336,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTMzNg==",
      "original_commit_id" : "732554a8a64ad5c9d49505272d225626566898de",
      "original_line" : 247,
      "original_position" : 50,
      "original_start_line" : 240,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 408756097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661336",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661411"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661411"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`CHECK_NONFATAL` in RPC code",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-05-10T15:37:00Z",
      "diff_hunk" : "@@ -224,9 +236,21 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n         ScriptPubKeyToUniv(txout.scriptPubKey, o, true);\n         out.pushKV(\"scriptPubKey\", o);\n         vout.push_back(out);\n+\n+        // Sanity check to avoid overflow\n+        if (MoneyRange(txout.nValue)) {\n+            nTotalOut += txout.nValue;\n+        }\n     }\n     entry.pushKV(\"vout\", vout);\n \n+    // For coinbase transactions we have txundo == nullptr\n+    if (txundo) {\n+        CAmount nFee = nTotalIn - nTotalOut;\n+        assert(MoneyRange(nFee));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661411",
      "id" : 422661411,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTQxMQ==",
      "original_commit_id" : "732554a8a64ad5c9d49505272d225626566898de",
      "original_line" : 250,
      "original_position" : 57,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 408756097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661411",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661449"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661449"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`fees`",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-05-10T15:37:29Z",
      "diff_hunk" : "@@ -224,9 +236,21 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n         ScriptPubKeyToUniv(txout.scriptPubKey, o, true);\n         out.pushKV(\"scriptPubKey\", o);\n         vout.push_back(out);\n+\n+        // Sanity check to avoid overflow\n+        if (MoneyRange(txout.nValue)) {\n+            nTotalOut += txout.nValue;\n+        }\n     }\n     entry.pushKV(\"vout\", vout);\n \n+    // For coinbase transactions we have txundo == nullptr\n+    if (txundo) {\n+        CAmount nFee = nTotalIn - nTotalOut;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661449",
      "id" : 422661449,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTQ0OQ==",
      "original_commit_id" : "732554a8a64ad5c9d49505272d225626566898de",
      "original_line" : 249,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 408756097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661449",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661827"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661827"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`have_undo`",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-05-10T15:40:34Z",
      "diff_hunk" : "@@ -143,16 +143,20 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        bool hasUndo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661827",
      "id" : 422661827,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTgyNw==",
      "original_commit_id" : "732554a8a64ad5c9d49505272d225626566898de",
      "original_line" : 148,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 408756097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661827",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661862"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661862"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`.at(i)`",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-05-10T15:40:50Z",
      "diff_hunk" : "@@ -143,16 +143,20 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        bool hasUndo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n+        for (size_t i = 0; i < block.vtx.size(); ++i) {\n+            const auto& tx = block.vtx[i];",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422661862",
      "id" : 422661862,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2MTg2Mg==",
      "original_commit_id" : "732554a8a64ad5c9d49505272d225626566898de",
      "original_line" : 150,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 408756097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422661862",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Proposed update: https://github.com/bitcoin/bitcoin/compare/master...luke-jr:getblock_fees-0.20",
      "created_at" : "2020-05-10T17:03:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-626358397",
      "id" : 626358397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNjM1ODM5Nw==",
      "updated_at" : "2020-05-10T17:03:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626358397",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422684708"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422684708"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yeah, I agree it seems unnecessary.  I added this in order to fix a failing fuzz test.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-05-10T18:55:08Z",
      "diff_hunk" : "@@ -205,6 +210,13 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n                 }\n                 in.pushKV(\"txinwitness\", txinwitness);\n             }\n+            if (txundo) {\n+                CAmount nPrevOut = txundo->vprevout[i].out.nValue;\n+                // Sanity check to avoid overflow\n+                if (MoneyRange(nPrevOut)) {\n+                    nTotalIn += nPrevOut;\n+                }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422684708",
      "id" : 422684708,
      "in_reply_to_id" : 422661199,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY4NDcwOA==",
      "original_commit_id" : "732554a8a64ad5c9d49505272d225626566898de",
      "original_line" : 218,
      "original_position" : 37,
      "original_start_line" : 215,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 408771964,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422684708",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/63171930?v=4",
         "events_url" : "https://api.github.com/users/robot-visions/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-visions/followers",
         "following_url" : "https://api.github.com/users/robot-visions/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-visions/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-visions",
         "id" : 63171930,
         "login" : "robot-visions",
         "node_id" : "MDQ6VXNlcjYzMTcxOTMw",
         "organizations_url" : "https://api.github.com/users/robot-visions/orgs",
         "received_events_url" : "https://api.github.com/users/robot-visions/received_events",
         "repos_url" : "https://api.github.com/users/robot-visions/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-visions/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-visions"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422684773"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422684773"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "No particular reason; I'd be happy with either way.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-05-10T18:55:42Z",
      "diff_hunk" : "@@ -186,6 +187,10 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n     entry.pushKV(\"locktime\", (int64_t)tx.nLockTime);\n \n     UniValue vin(UniValue::VARR);\n+\n+    CAmount nTotalIn = 0;\n+    CAmount nTotalOut = 0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r422684773",
      "id" : 422684773,
      "in_reply_to_id" : 422661107,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY4NDc3Mw==",
      "original_commit_id" : "732554a8a64ad5c9d49505272d225626566898de",
      "original_line" : 192,
      "original_position" : 23,
      "original_start_line" : 191,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 408772005,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/422684773",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/63171930?v=4",
         "events_url" : "https://api.github.com/users/robot-visions/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-visions/followers",
         "following_url" : "https://api.github.com/users/robot-visions/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-visions/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-visions",
         "id" : 63171930,
         "login" : "robot-visions",
         "node_id" : "MDQ6VXNlcjYzMTcxOTMw",
         "organizations_url" : "https://api.github.com/users/robot-visions/orgs",
         "received_events_url" : "https://api.github.com/users/robot-visions/received_events",
         "repos_url" : "https://api.github.com/users/robot-visions/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-visions/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-visions"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for the review and the update @luke-jr !  I'm happy to go with your proposed update (we can close this PR).\r\n\r\nQuick notes:\r\n- I didn't include the verbosity 3 changes because I wanted to move things over incrementally\r\n- In your updates it might still be necessary to introduce some way to prevent the fuzz tests from failing (it was causing an integer overflow when adding a large value to `amt_total_out`); I added a halfhearted check (which you correctly pointed out doesn't always work) but maybe it makes more sense to just update the fuzz test",
      "created_at" : "2020-05-10T19:01:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-626373459",
      "id" : 626373459,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyNjM3MzQ1OQ==",
      "updated_at" : "2020-05-10T19:01:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/626373459",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/63171930?v=4",
         "events_url" : "https://api.github.com/users/robot-visions/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-visions/followers",
         "following_url" : "https://api.github.com/users/robot-visions/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-visions/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-visions",
         "id" : 63171930,
         "login" : "robot-visions",
         "node_id" : "MDQ6VXNlcjYzMTcxOTMw",
         "organizations_url" : "https://api.github.com/users/robot-visions/orgs",
         "received_events_url" : "https://api.github.com/users/robot-visions/received_events",
         "repos_url" : "https://api.github.com/users/robot-visions/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-visions/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-visions/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-visions"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "We don't need to close this PR, you're doing fine.\r\n\r\nIf you want to adopt my branch as-is, you can just checkout yours, `git reset --hard 0b46eb7ac63`, and re-push it here.",
      "created_at" : "2020-05-14T02:35:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-628349825",
      "id" : 628349825,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDYyODM0OTgyNQ==",
      "updated_at" : "2020-05-14T02:35:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/628349825",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-06-08T14:28:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-640659559",
      "id" : 640659559,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0MDY1OTU1OQ==",
      "updated_at" : "2020-06-08T14:28:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/640659559",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r437789086"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437789086"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`txid` is unused.\r\n\r\n(Feel free to update from my branch again)",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-06-10T00:08:31Z",
      "diff_hunk" : "@@ -0,0 +1,40 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+'''Test getblock rpc fee calculation.\n+'''\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import get_datadir_path\n+\n+\n+class GetblockFeeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        node.generatetoaddress(101, address)\n+        txid = node.sendtoaddress(address, 1)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r437789086",
      "id" : 437789086,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzc4OTA4Ng==",
      "original_commit_id" : "0b46eb7ac63c7fc4105fb28f3886970565946fd1",
      "original_line" : 25,
      "original_position" : 25,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblock_fee.py",
      "position" : null,
      "pull_request_review_id" : 427626897,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/437789086",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r439866641"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439866641"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The fuzzer can trigger undefined behaviour here with an overflow, which causes CI to fail even though it's harmless. Not sure what the solution should be - seems like overkill to actually prevent.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-06-14T20:55:01Z",
      "diff_hunk" : "@@ -224,9 +234,18 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n         ScriptPubKeyToUniv(txout.scriptPubKey, o, true);\n         out.pushKV(\"scriptPubKey\", o);\n         vout.push_back(out);\n+\n+        amt_total_out += txout.nValue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r439866641",
      "id" : 439866641,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTg2NjY0MQ==",
      "original_commit_id" : "0b46eb7ac63c7fc4105fb28f3886970565946fd1",
      "original_line" : 244,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 430250302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/439866641",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r440235335"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440235335"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@luke-jr Functions are assumed to be robust as long as they are fed with inputs fulfilling their documented preconditions, so I think the only robust alternative to preventing it is to make the implicit precondition explicit by documenting it. However, in this case it seems easy to just use `MoneyRange(â¦)` and be done with it, no? :)",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-06-15T14:54:00Z",
      "diff_hunk" : "@@ -224,9 +234,18 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n         ScriptPubKeyToUniv(txout.scriptPubKey, o, true);\n         out.pushKV(\"scriptPubKey\", o);\n         vout.push_back(out);\n+\n+        amt_total_out += txout.nValue;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r440235335",
      "id" : 440235335,
      "in_reply_to_id" : 439866641,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIzNTMzNQ==",
      "original_commit_id" : "0b46eb7ac63c7fc4105fb28f3886970565946fd1",
      "original_line" : 244,
      "original_position" : 46,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 430722850,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/440235335",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494988059"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494988059"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Just `txundo` is fine for the var name. Our style isn't to prefix variable names with the type.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-25T13:29:44Z",
      "diff_hunk" : "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n+        for (size_t i = 0; i < block.vtx.size(); ++i) {\n+            const auto& tx = block.vtx.at(i);\n+            // coinbase transaction (i == 0) doesn't have undo data\n+            const CTxUndo* ptr_txundo = (have_undo && i) ? &blockUndo.vtxundo.at(i - 1) : nullptr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494988059",
      "id" : 494988059,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk4ODA1OQ==",
      "original_commit_id" : "1298f0fca79803f3bc91c052f901a4df63ae343a",
      "original_line" : 171,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 496419603,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494988059",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494996867"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494996867"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think auto should only be used when it's immediately obvious from looking at the code what the type is, and when not using auto would be annoyingly verbose. Here, you'd need to look at the definition of a `CBlock` to determine that `tx` is a `CTransactionRef` object, and you're not saving my characters by not typing `CTransactionRef`, so I'd recommend avoiding auto.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-25T13:43:33Z",
      "diff_hunk" : "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);\n+        for (size_t i = 0; i < block.vtx.size(); ++i) {\n+            const auto& tx = block.vtx.at(i);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494996867",
      "id" : 494996867,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk5Njg2Nw==",
      "original_commit_id" : "1298f0fca79803f3bc91c052f901a4df63ae343a",
      "original_line" : 169,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 496419603,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494996867",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494997052"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494997052"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Join with line above",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-25T13:43:51Z",
      "diff_hunk" : "@@ -0,0 +1,44 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+'''Test getblock rpc fee calculation.\n+'''",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494997052",
      "id" : 494997052,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk5NzA1Mg==",
      "original_commit_id" : "1298f0fca79803f3bc91c052f901a4df63ae343a",
      "original_line" : 6,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblock_fee.py",
      "position" : null,
      "pull_request_review_id" : 496419603,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494997052",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494997865"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494997865"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Use double quotes to avoid having to escape the quote inside the log:\r\n\r\n```suggestion\r\n        self.log.info(\"Ensure that getblock with verbosity 1 doesn't include fee\")\r\n```\r\n\r\nSame in the log below.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-25T13:45:03Z",
      "diff_hunk" : "@@ -0,0 +1,44 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+'''Test getblock rpc fee calculation.\n+'''\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import get_datadir_path\n+\n+\n+class GetblockFeeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        node.generatetoaddress(101, address)\n+        node.sendtoaddress(address, 1)\n+        blockhash = node.generatetoaddress(1, address)[0]\n+\n+        self.log.info('Ensure that getblock with verbosity 2 includes fee')\n+        block = node.getblock(blockhash, 2)\n+        assert 'fee' in block['tx'][1]\n+\n+        self.log.info('Ensure that getblock with verbosity 1 doesn\\'t include fee')",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r494997865",
      "id" : 494997865,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk5Nzg2NQ==",
      "original_commit_id" : "1298f0fca79803f3bc91c052f901a4df63ae343a",
      "original_line" : 32,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblock_fee.py",
      "position" : null,
      "pull_request_review_id" : 496419603,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494997865",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r495007723"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495007723"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It seems strange to me to have code in the produce that exists only to work around shortcomings in the fuzz tests. Which fuzz test fails if you don't do this? (the only fuzz tester that calls `TxToUniv()` doesn't provide a `txundo` param).",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-25T14:00:05Z",
      "diff_hunk" : "@@ -209,6 +215,11 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n                 txinwitness.push_back(HexStr(item));\n             }\n             in.pushKV(\"txinwitness\", txinwitness);\n+            if (txundo) {\n+                const CTxOut& txout = txundo->vprevout[i].out;\n+                // Suppress fuzz test failures by ignoring nonsense values",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r495007723",
      "id" : 495007723,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTAwNzcyMw==",
      "original_commit_id" : "1298f0fca79803f3bc91c052f901a4df63ae343a",
      "original_line" : 220,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 496419603,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495007723",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r496144902"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496144902"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree with @jnewbery . It is impossible to hit this condition in production, so an assert or just nothing at all might be more appropriate.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-28T18:17:52Z",
      "diff_hunk" : "@@ -209,6 +215,11 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n                 txinwitness.push_back(HexStr(item));\n             }\n             in.pushKV(\"txinwitness\", txinwitness);\n+            if (txundo) {\n+                const CTxOut& txout = txundo->vprevout[i].out;\n+                // Suppress fuzz test failures by ignoring nonsense values",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r496144902",
      "id" : 496144902,
      "in_reply_to_id" : 495007723,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE0NDkwMg==",
      "original_commit_id" : "1298f0fca79803f3bc91c052f901a4df63ae343a",
      "original_line" : 220,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 497783350,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496144902",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r496167710"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496167710"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I suggest stating the pre-condition in the form of an assertion or documentation. Then it is the fuzzer's responsibility the fulfil all explicitly stated pre-conditions.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-28T18:59:51Z",
      "diff_hunk" : "@@ -209,6 +215,11 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n                 txinwitness.push_back(HexStr(item));\n             }\n             in.pushKV(\"txinwitness\", txinwitness);\n+            if (txundo) {\n+                const CTxOut& txout = txundo->vprevout[i].out;\n+                // Suppress fuzz test failures by ignoring nonsense values",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r496167710",
      "id" : 496167710,
      "in_reply_to_id" : 495007723,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE2NzcxMA==",
      "original_commit_id" : "1298f0fca79803f3bc91c052f901a4df63ae343a",
      "original_line" : 220,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 497812708,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496167710",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497024259"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497024259"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "maybe call this `prev_txout` or so",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-29T20:28:33Z",
      "diff_hunk" : "@@ -209,6 +215,11 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n                 txinwitness.push_back(HexStr(item));\n             }\n             in.pushKV(\"txinwitness\", txinwitness);\n+            if (txundo) {\n+                const CTxOut& txout = txundo->vprevout[i].out;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497024259",
      "id" : 497024259,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAyNDI1OQ==",
      "original_commit_id" : "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
      "original_line" : 219,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 498859736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497024259",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497024539"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497024539"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit\r\n```suggestion\r\n        const CAmount fee = amt_total_in - amt_total_out;\r\n```",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-29T20:29:04Z",
      "diff_hunk" : "@@ -228,9 +239,19 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n         ScriptPubKeyToUniv(txout.scriptPubKey, o, true);\n         out.pushKV(\"scriptPubKey\", o);\n         vout.push_back(out);\n+\n+        // Suppress fuzz test failures by ignoring nonsense values\n+        if (MoneyRange(txout.nValue)) amt_total_out += txout.nValue;\n     }\n     entry.pushKV(\"vout\", vout);\n \n+    // For coinbase transactions we have txundo == nullptr\n+    if (txundo) {\n+        CAmount fee = amt_total_in - amt_total_out;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497024539",
      "id" : 497024539,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAyNDUzOQ==",
      "original_commit_id" : "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
      "original_line" : 250,
      "original_position" : 54,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 498859736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497024539",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497028881"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497028881"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think you should use `GetUndoChecked` here and the RPC should fail if the details are requested but the undo data can not be found. Otherwise, the users can not trust that they get the fees in the response and they will have no way to know why they weren't included, it will just seem random to them.\r\n\r\nBTW, I am unsure in which cases we are missing the undo data. Is that only in the case of data corruption or are there reasons that make this common? Or is pruning unreliable there in some sense? I couldn't find anything on the topic.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-29T20:35:31Z",
      "diff_hunk" : "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497028881",
      "id" : 497028881,
      "line" : 167,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAyODg4MQ==",
      "original_commit_id" : "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
      "original_line" : 167,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 10,
      "pull_request_review_id" : 498859736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497028881",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497046067"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497046067"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "You don't need to do this to have coins to spend. This is done for you automatically by default (see docs on `setup_clean_chain`) and this uses fewer resources by loading the chain from cache.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-29T20:52:15Z",
      "diff_hunk" : "@@ -0,0 +1,44 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+'''Test getblock rpc fee calculation.\n+'''\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import get_datadir_path\n+\n+\n+class GetblockFeeTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        node.generatetoaddress(101, address)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497046067",
      "id" : 497046067,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzA0NjA2Nw==",
      "original_commit_id" : "1298f0fca79803f3bc91c052f901a4df63ae343a",
      "original_line" : 24,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblock_fee.py",
      "position" : null,
      "pull_request_review_id" : 498859736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497046067",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497063838"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497063838"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think `rpc_blockchain.py` is the natural place for these tests. A new file is not necessary for such a specific and small test IMO.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-29T21:14:53Z",
      "diff_hunk" : "@@ -0,0 +1,44 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+'''Test getblock rpc fee calculation.\n+'''\n+\n+import os\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import get_datadir_path\n+\n+\n+class GetblockFeeTest(BitcoinTestFramework):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497063838",
      "id" : 497063838,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzA2MzgzOA==",
      "original_commit_id" : "1298f0fca79803f3bc91c052f901a4df63ae343a",
      "original_line" : 14,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblock_fee.py",
      "position" : null,
      "pull_request_review_id" : 498859736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497063838",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Approach ACK.\r\n\r\nReviewed changes, ran tests.  Need to manually test further. ð» \r\n\r\nI agree with the previous review comments.\r\n\r\nFeel free to add a commit at the beginning cleaning up the code around your changes!\r\nFor example:\r\n* Fixing the strange lack of braces around the body of the `if` [here in core_write.cpp](https://github.com/robot-visions/bitcoin/blob/1298f0fca79803f3bc91c052f901a4df63ae343a/src/core_write.cpp#L202)\r\n* Changing to [brace initialization](https://stackoverflow.com/questions/18222926/why-is-list-initialization-using-curly-braces-better-than-the-alternatives) for lines like [this one](https://github.com/robot-visions/bitcoin/blob/1298f0fca79803f3bc91c052f901a4df63ae343a/src/core_write.cpp#L194)",
      "created_at" : "2020-09-30T16:47:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-701511380",
      "id" : 701511380,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMTUxMTM4MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-30T16:47:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701511380",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5553787?v=4",
         "events_url" : "https://api.github.com/users/troygiorshev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/troygiorshev/followers",
         "following_url" : "https://api.github.com/users/troygiorshev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/troygiorshev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/troygiorshev",
         "id" : 5553787,
         "login" : "troygiorshev",
         "node_id" : "MDQ6VXNlcjU1NTM3ODc=",
         "organizations_url" : "https://api.github.com/users/troygiorshev/orgs",
         "received_events_url" : "https://api.github.com/users/troygiorshev/received_events",
         "repos_url" : "https://api.github.com/users/troygiorshev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/troygiorshev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/troygiorshev"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497674965"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497674965"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I think we also usually do double quotes? `\"\"\"`",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-09-30T17:15:53Z",
      "diff_hunk" : "@@ -0,0 +1,44 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2020 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+'''Test getblock rpc fee calculation.\n+'''",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r497674965",
      "id" : 497674965,
      "in_reply_to_id" : 494997052,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzY3NDk2NQ==",
      "original_commit_id" : "1298f0fca79803f3bc91c052f901a4df63ae343a",
      "original_line" : 6,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/rpc_getblock_fee.py",
      "position" : null,
      "pull_request_review_id" : 499649219,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497674965",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I get following error:\r\n```\r\n$ bitcoin-cli getblock \"$(bitcoin-cli getblockhash 650684)\" 2\r\nerror code: -1\r\nerror message:\r\ncore_write.cpp:251 (TxToUniv)\r\nInternal bug detected: 'MoneyRange(fee)'\r\nYou may report this issue here: https://github.com/bitcoin/bitcoin/issues\r\n```\r\nA block with only a Coinbase transaction works, for example 650026.",
      "created_at" : "2020-10-01T10:34:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-702045431",
      "id" : 702045431,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjA0NTQzMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T10:34:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702045431",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1223908?v=4",
         "events_url" : "https://api.github.com/users/Emzy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Emzy/followers",
         "following_url" : "https://api.github.com/users/Emzy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Emzy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Emzy",
         "id" : 1223908,
         "login" : "Emzy",
         "node_id" : "MDQ6VXNlcjEyMjM5MDg=",
         "organizations_url" : "https://api.github.com/users/Emzy/orgs",
         "received_events_url" : "https://api.github.com/users/Emzy/received_events",
         "repos_url" : "https://api.github.com/users/Emzy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Emzy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Emzy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Emzy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r498525344"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498525344"
         }
      },
      "author_association" : "NONE",
      "body" : "Great idea!\r\n\r\nYes, according to https://github.com/bitcoin/bitcoin/blob/1b313cacc99a1b372238f9036abed5491f9d28f7/src/validation.h#L370 it looks like block and undo data are always deleted together.\r\n\r\nI definitely might be missing something, but from a quick search I couldn't find any other reason we'd delete `rev` but not `blk` files.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-10-01T21:36:22Z",
      "diff_hunk" : "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r498525344",
      "id" : 498525344,
      "in_reply_to_id" : 497028881,
      "line" : 167,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUyNTM0NA==",
      "original_commit_id" : "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
      "original_line" : 167,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 10,
      "pull_request_review_id" : 500735483,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498525344",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4276679?v=4",
         "events_url" : "https://api.github.com/users/robot-dreams/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-dreams/followers",
         "following_url" : "https://api.github.com/users/robot-dreams/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-dreams/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-dreams",
         "id" : 4276679,
         "login" : "robot-dreams",
         "node_id" : "MDQ6VXNlcjQyNzY2Nzk=",
         "organizations_url" : "https://api.github.com/users/robot-dreams/orgs",
         "received_events_url" : "https://api.github.com/users/robot-dreams/received_events",
         "repos_url" : "https://api.github.com/users/robot-dreams/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-dreams/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-dreams/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-dreams"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r498526377"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498526377"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think it's not unreasonable to delete undo data while keeping block data (that means you could still serve it to other syncing nodes, and rescan, but can't reorg out of it). That just was never implemented.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-10-01T21:38:48Z",
      "diff_hunk" : "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r498526377",
      "id" : 498526377,
      "in_reply_to_id" : 497028881,
      "line" : 167,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUyNjM3Nw==",
      "original_commit_id" : "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
      "original_line" : 167,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 10,
      "pull_request_review_id" : 500736751,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498526377",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r498614355"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498614355"
         }
      },
      "author_association" : "NONE",
      "body" : "OK, you both make some great points. I can think of three approaches at the moment:\r\n\r\n- Use `GetUndoChecked` which means if someone deletes undo data in the future, they'll cause this RPC to fail\r\n- Silently leave out the fee if block data is present but undo data is missing\r\n- Add some verbose documentation that says \"we'll include the fee if we have the data needed to efficiently calculate it\"\r\n\r\nDo any of these approaches seem reasonable to both of you?",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-10-02T04:29:29Z",
      "diff_hunk" : "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r498614355",
      "id" : 498614355,
      "in_reply_to_id" : 497028881,
      "line" : 167,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODYxNDM1NQ==",
      "original_commit_id" : "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
      "original_line" : 167,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 10,
      "pull_request_review_id" : 500854917,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498614355",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/4276679?v=4",
         "events_url" : "https://api.github.com/users/robot-dreams/events{/privacy}",
         "followers_url" : "https://api.github.com/users/robot-dreams/followers",
         "following_url" : "https://api.github.com/users/robot-dreams/following{/other_user}",
         "gists_url" : "https://api.github.com/users/robot-dreams/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/robot-dreams",
         "id" : 4276679,
         "login" : "robot-dreams",
         "node_id" : "MDQ6VXNlcjQyNzY2Nzk=",
         "organizations_url" : "https://api.github.com/users/robot-dreams/orgs",
         "received_events_url" : "https://api.github.com/users/robot-dreams/received_events",
         "repos_url" : "https://api.github.com/users/robot-dreams/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/robot-dreams/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/robot-dreams/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/robot-dreams"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I get following error:\r\n> \r\n> ```\r\n> $ bitcoin-cli getblock \"$(bitcoin-cli getblockhash 650684)\" 2\r\n> error code: -1\r\n> error message:\r\n> core_write.cpp:251 (TxToUniv)\r\n> Internal bug detected: 'MoneyRange(fee)'\r\n> You may report this issue here: https://github.com/bitcoin/bitcoin/issues\r\n> ```\r\n> \r\n> A block with only a Coinbase transaction works, for example 650026.\r\n\r\n8a7229e2e5c306e86a6a589c1ab0e4c58ea49545 fixed it.",
      "created_at" : "2020-10-02T12:54:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-702717475",
      "id" : 702717475,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjcxNzQ3NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T12:54:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702717475",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1223908?v=4",
         "events_url" : "https://api.github.com/users/Emzy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Emzy/followers",
         "following_url" : "https://api.github.com/users/Emzy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Emzy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Emzy",
         "id" : 1223908,
         "login" : "Emzy",
         "node_id" : "MDQ6VXNlcjEyMjM5MDg=",
         "organizations_url" : "https://api.github.com/users/Emzy/orgs",
         "received_events_url" : "https://api.github.com/users/Emzy/received_events",
         "repos_url" : "https://api.github.com/users/Emzy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Emzy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Emzy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Emzy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499066443"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499066443"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "As @sipa says it's not implemented and I think there is no one working on something like that (Side-note: I will look into that now :) ). So I would say the first option would still be my first choice if we could have a test that would reliably fail when the change comes. But that seems unrealistic, at least if it is implemented the way I envision it now and generally it would be poking around in the dark. So, I guess I would be happy if you add some docs but you don't have to since with the current state of the code the fee should be there reliably.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-10-02T21:55:36Z",
      "diff_hunk" : "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499066443",
      "id" : 499066443,
      "in_reply_to_id" : 497028881,
      "line" : 167,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTA2NjQ0Mw==",
      "original_commit_id" : "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
      "original_line" : 167,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 10,
      "pull_request_review_id" : 501468308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499066443",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499261276"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499261276"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: could be const",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-10-04T15:58:02Z",
      "diff_hunk" : "@@ -189,13 +191,20 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n     entry.pushKV(\"weight\", GetTransactionWeight(tx));\n     entry.pushKV(\"locktime\", (int64_t)tx.nLockTime);\n \n-    UniValue vin(UniValue::VARR);\n+    UniValue vin{UniValue::VARR};\n+\n+    // If available, use Undo data to calculate the fee. Note that txundo == nullptr\n+    // for coinbase transactions and for transactions in pruned blocks.\n+    bool calculate_fee = txundo != nullptr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499261276",
      "id" : 499261276,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI2MTI3Ng==",
      "original_commit_id" : "8e38a27c69e8ac8abf5d0c2ad29b8be41a140117",
      "original_line" : 198,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 501636226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499261276",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499263865"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499263865"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Hm, I think since with the currently available version of pruning the block wouldn't be found anyway this would be slightly better and also more precise:\r\n```suggestion\r\n                            {RPCResult::Type::NUM, \"fee\", \"The transaction fee in \" + CURRENCY_UNIT + \", omitted if efficient calculation isn't possible (due to block undo data being unavailable)\"},\r\n```",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-10-04T16:26:47Z",
      "diff_hunk" : "@@ -926,6 +931,7 @@ static RPCHelpMan getblock()\n                         {RPCResult::Type::OBJ, \"\", \"\",\n                         {\n                             {RPCResult::Type::ELISION, \"\", \"The transactions in the format of the getrawtransaction RPC. Different from verbosity = 1 \\\"tx\\\" result\"},\n+                            {RPCResult::Type::NUM, \"fee\", \"The transaction fee in \" + CURRENCY_UNIT + \", omitted if efficient calculation isn't possible (due to pruning)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499263865",
      "id" : 499263865,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI2Mzg2NQ==",
      "original_commit_id" : "8e38a27c69e8ac8abf5d0c2ad29b8be41a140117",
      "original_line" : 934,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 501636226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499263865",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499264006"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499264006"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it's slightly better to be a bit more precise here. There may be other reason (in the future) why there is no undo data.\r\n```suggestion\r\n    // for coinbase transactions and for transactions where undo data is unavailable.\r\n```",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-10-04T16:28:24Z",
      "diff_hunk" : "@@ -189,13 +191,20 @@ void TxToUniv(const CTransaction& tx, const uint256& hashBlock, UniValue& entry,\n     entry.pushKV(\"weight\", GetTransactionWeight(tx));\n     entry.pushKV(\"locktime\", (int64_t)tx.nLockTime);\n \n-    UniValue vin(UniValue::VARR);\n+    UniValue vin{UniValue::VARR};\n+\n+    // If available, use Undo data to calculate the fee. Note that txundo == nullptr\n+    // for coinbase transactions and for transactions in pruned blocks.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499264006",
      "id" : 499264006,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTI2NDAwNg==",
      "original_commit_id" : "8e38a27c69e8ac8abf5d0c2ad29b8be41a140117",
      "original_line" : 197,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/core_write.cpp",
      "position" : null,
      "pull_request_review_id" : 501636226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499264006",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499429396"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499429396"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think either leaving it like it is now, or returning an error when the undo file is not available but the block file is (since that's currently an unexpected condition) are both fine.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-10-05T08:33:59Z",
      "diff_hunk" : "@@ -162,16 +162,21 @@ UniValue blockToJSON(const CBlock& block, const CBlockIndex* tip, const CBlockIn\n     result.pushKV(\"versionHex\", strprintf(\"%08x\", block.nVersion));\n     result.pushKV(\"merkleroot\", block.hashMerkleRoot.GetHex());\n     UniValue txs(UniValue::VARR);\n-    for(const auto& tx : block.vtx)\n-    {\n-        if(txDetails)\n-        {\n+    if (txDetails) {\n+        CBlockUndo blockUndo;\n+        const bool have_undo = !IsBlockPruned(blockindex) && UndoReadFromDisk(blockUndo, blockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499429396",
      "id" : 499429396,
      "in_reply_to_id" : 497028881,
      "line" : 167,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQyOTM5Ng==",
      "original_commit_id" : "a05fe7f59e211fcd4c128c775d15f0a493b196c4",
      "original_line" : 167,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 10,
      "pull_request_review_id" : 501831553,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499429396",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499431094"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499431094"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this would be fine as just \"omitted if block undo data is not available\". I don't think users would care about or understand what you mean by 'efficient calculation'.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-10-05T08:37:05Z",
      "diff_hunk" : "@@ -926,6 +931,7 @@ static RPCHelpMan getblock()\n                         {RPCResult::Type::OBJ, \"\", \"\",\n                         {\n                             {RPCResult::Type::ELISION, \"\", \"The transactions in the format of the getrawtransaction RPC. Different from verbosity = 1 \\\"tx\\\" result\"},\n+                            {RPCResult::Type::NUM, \"fee\", \"The transaction fee in \" + CURRENCY_UNIT + \", omitted if efficient calculation isn't possible (due to unavailable block undo data)\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499431094",
      "id" : 499431094,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQzMTA5NA==",
      "original_commit_id" : "aae692c3e29f4d3cb654cb40f18d658b624fa870",
      "original_line" : 934,
      "original_position" : 32,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 501833820,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499431094",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499432395"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499432395"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Did you look at using miniwallet.py to manually create the transactions? That would avoid a dependency on a compiled wallet to test this functionality.",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-10-05T08:39:27Z",
      "diff_hunk" : "@@ -352,6 +355,42 @@ def assert_waitforheight(height, timeout=2):\n         assert_waitforheight(current_height)\n         assert_waitforheight(current_height + 1)\n \n+    def _test_getblock(self):\n+        if not self.is_wallet_compiled():",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499432395",
      "id" : 499432395,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQzMjM5NQ==",
      "original_commit_id" : "aae692c3e29f4d3cb654cb40f18d658b624fa870",
      "original_line" : 359,
      "original_position" : 29,
      "original_start_line" : null,
      "path" : "test/functional/rpc_blockchain.py",
      "position" : null,
      "pull_request_review_id" : 501833820,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499432395",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499432813"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499432813"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Unless you're setting amounts/fee explicitly, this feels brittle (i.e. this test would break if an unrelated change was made in how the wallet code sets fees).",
      "commit_id" : "dd4ec0704c66c23d207bb7394823469a1b59b060",
      "created_at" : "2020-10-05T08:40:13Z",
      "diff_hunk" : "@@ -352,6 +355,42 @@ def assert_waitforheight(height, timeout=2):\n         assert_waitforheight(current_height)\n         assert_waitforheight(current_height + 1)\n \n+    def _test_getblock(self):\n+        if not self.is_wallet_compiled():\n+            self.log.info(\"Skipping getblock tests because wallet is disabled\")\n+            return\n+\n+        node = self.nodes[0]\n+        address = node.getnewaddress()\n+        node.sendtoaddress(address, 1)\n+        blockhash = node.generatetoaddress(1, address)[0]\n+\n+        self.log.info(\"Test that getblock with verbosity 1 doesn't include fee\")\n+        block = node.getblock(blockhash, 1)\n+        assert 'fee' not in block['tx'][1]\n+\n+        self.log.info('Test that getblock with verbosity 2 includes expected fee')\n+        block = node.getblock(blockhash, 2)\n+        assert 'fee' in block['tx'][1]\n+        assert_equal(block['tx'][1]['fee'], Decimal('0.00004380'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#discussion_r499432813",
      "id" : 499432813,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTQzMjgxMw==",
      "original_commit_id" : "aae692c3e29f4d3cb654cb40f18d658b624fa870",
      "original_line" : 375,
      "original_position" : 45,
      "original_start_line" : null,
      "path" : "test/functional/rpc_blockchain.py",
      "position" : null,
      "pull_request_review_id" : 501833820,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/18772",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-08T16:37:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/499432813",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK dd4ec0704c66c23d207bb7394823469a1b59b060\r\n\r\nSince the first commit is very different from the version in 16083, you should feel free to set yourself as the commit author and add felix as a co-author (or just add yourself as co-author).\r\n\r\nAlso feel free to set the review comments above as 'resolved' if you think they're addressed. I went through and resolved my own review comments, but didn't resolve comments from other reviewers. Setting all comments to resolved signals to other reviewers that you've addressed all the outstanding issues.",
      "created_at" : "2020-10-09T09:49:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-706084886",
      "id" : 706084886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwNjA4NDg4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-09T09:49:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706084886",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "tACK 66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e",
      "created_at" : "2020-11-08T17:37:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-723641914",
      "id" : 723641914,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMzY0MTkxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-08T17:37:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/723641914",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tACK 66d012ad7f9381bacfc9b8388fa2ebf82cb86c9e\r\n\r\nChanges since last review were a small refactoring of the functional test using MiniWallet and some improvements on comments/docs. ",
      "created_at" : "2020-12-23T17:16:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/18772#issuecomment-750394828",
      "id" : 750394828,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/18772",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MDM5NDgyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-23T17:16:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/750394828",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   }
]
