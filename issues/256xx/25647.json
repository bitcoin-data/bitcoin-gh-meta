{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "Benefits:\r\n1. more accurate waste calculation for knapsack. Waste calculation is now consistent with tx building code. Before we always assumed change for knapsack even when the solution is changeless4. \r\n2. simpler tx building code. Only create change output when it's needed\r\n3. makes it easier to correctly account for fees for CPFP inputs (should be done in a follow up) \r\n\r\nIn the first three commits we fix the code to accurately track selection target in `SelectionResult::m_target`\r\nThen we introduce new variable `min_change` that represents the minimum viable change amount\r\nThen we introduce `SelectionResult::GetChange()` which incapsulates dropping change for fee logic and uses correct values of `SelectionResult::m_target`\r\nThen we use `SelectionResult::GetChange()` in both tx building and waste calculation code\r\n\r\nThis PR is a refactoring and shouldn't change the behaviour.\r\nThere is only one known small change (arguably a bug fix). Before we dropped change output if it's smaller than `cost_of_change` after paying change fees. This is incorrect as `cost_of_change` already includes `change_fee`. ",
   "closed_at" : "2022-08-22T16:43:27Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
      "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
      "followers_url" : "https://api.github.com/users/achow101/followers",
      "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/achow101",
      "id" : 3782274,
      "login" : "achow101",
      "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
      "organizations_url" : "https://api.github.com/users/achow101/orgs",
      "received_events_url" : "https://api.github.com/users/achow101/received_events",
      "repos_url" : "https://api.github.com/users/achow101/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/achow101"
   },
   "comments" : 7,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25647/comments",
   "created_at" : "2022-07-20T07:54:57Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25647/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/25647",
   "id" : 1310606684,
   "labels" : [
      {
         "color" : "08a781",
         "default" : false,
         "description" : null,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25647/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII5847tYCg",
   "number" : 25647,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/25647.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25647",
      "merged_at" : "2022-08-22T16:43:27Z",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/25647.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/25647"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25647/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25647/timeline",
   "title" : "wallet: return change from SelectionResult",
   "updated_at" : "2022-08-22T16:43:27Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25647",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
      "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
      "followers_url" : "https://api.github.com/users/S3RK/followers",
      "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
      "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/S3RK",
      "id" : 1466284,
      "login" : "S3RK",
      "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
      "organizations_url" : "https://api.github.com/users/S3RK/orgs",
      "received_events_url" : "https://api.github.com/users/S3RK/received_events",
      "repos_url" : "https://api.github.com/users/S3RK/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/S3RK"
   }
}
