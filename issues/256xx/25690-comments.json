[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Just for reference, #24835 (which recently got closed) attempted the same, although for another reason. There is some more relevant discussion there.\r\n> \r\n> I think that this this from my [comment](https://github.com/bitcoin/bitcoin/pull/24835#issuecomment-1107939994) still applies\r\n> \r\n> > If removing the IsReachable call from AddLocal(), I think that IsPeerAddrLocalGood() should be adjusted too\r\n\r\nThanks! I missed this but the discussion there seems to be in line with what I found. Since there was no clear support for this approach I will close this here and maybe think about suggesting another solution.",
      "created_at" : "2022-07-24T21:51:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25690#issuecomment-1193400479",
      "id" : 1193400479,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25690",
      "node_id" : "IC_kwDOABII585HIdif",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1193400479/reactions"
      },
      "updated_at" : "2022-07-24T21:51:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1193400479",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it's not ideal that the `-onlynet` help says that `Inbound and manual connections are not affected`, when they are in reality (by not advertising own addresses to these networks, making it unlikely for others to connect to us unless they knew our address before). \r\nSo, I'm not against this change, but I hadn't come to a final opinion either, because I think it might also be weird for a user to activate `-onlynet` and keep on advertising their clearnet address to the network, without a clear option to disable this or disable incoming connections from these networks. Maybe ideally, we'd have a way of specifying `-onlynet` separately for outbounds/inbounds/both, depending on what the user wants? \r\nIt might be good to discuss the broader direction in an issue, considering how frequently it comes up.",
      "created_at" : "2022-07-24T22:22:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25690#issuecomment-1193405395",
      "id" : 1193405395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25690",
      "node_id" : "IC_kwDOABII585HIevT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1193405395/reactions"
      },
      "updated_at" : "2022-07-24T22:22:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1193405395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I think it's not ideal that the `-onlynet` help says that `Inbound and manual connections are not affected`, when they are in reality (by not advertising own addresses to these networks, making it unlikely for others to connect to us unless they knew our address before). So, I'm not against this change, but I hadn't come to a final opinion either, because I think it might also be weird for a user to activate `-onlynet` and keep on advertising their clearnet address to the network, without a clear option to disable this or disable incoming connections from these networks. Maybe ideally, we'd have a way of specifying `-onlynet` separately for outbounds/inbounds/both, depending on what the user wants? It might be good to discuss the broader direction in an issue, considering how frequently it comes up.\r\n\r\nYeah, I had been thinking about fixing this with a new config option as well, although I went into a different direction than you had in mind. I would be happy if you could give your thoughts on my draft in #25718.",
      "created_at" : "2022-07-26T22:59:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25690#issuecomment-1196064311",
      "id" : 1196064311,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25690",
      "node_id" : "IC_kwDOABII585HSn43",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1196064311/reactions"
      },
      "updated_at" : "2022-07-26T22:59:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1196064311",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> it might also be weird for a user to activate -onlynet and keep on advertising their clearnet address to the network, without a clear option to disable this or disable incoming connections from these networks.\r\n\r\nThere is a way to restrict incoming connections by network type - use `-bind`. If none are desired, then use `-listen=0`. For example if the user has connectivity to both IPv4 and IPv6 but wants to use only IPv4 for outgoing and incoming connections, they need to use `-onlynet=ipv4` together with `-bind=1.2.3.4:8333`.\r\n\r\nOr `-onlynet=onion -bind=127.0.0.1:8334=onion` to disable incoming connections via clearnet (assuming `127.0.0.1` is not reachable from the internet).",
      "created_at" : "2022-07-28T11:26:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/25690#issuecomment-1198015288",
      "id" : 1198015288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/25690",
      "node_id" : "IC_kwDOABII585HaEM4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1198015288/reactions"
      },
      "updated_at" : "2022-07-28T11:26:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1198015288",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   }
]
