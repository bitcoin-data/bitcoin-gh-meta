[
   {
      "author_association" : "MEMBER",
      "body" : "Can you try replacing in UniValue::write\n\n```\n    case VREAL:\n        {\n            std::stringstream ss;\n            ss << std::showpoint << std::fixed << std::setprecision(8) << get_real();\n            s += ss.str();\n        }\n        break;\n    case VNUM:\n        s += val;\n        break;\n```\n\nwith\n\n```\n    case VREAL:\n    case VNUM:\n        s += val;\n        break;\n```\n\nThere is no need to parse and re-format the value via a double when outputting...\n\n`get_real` is only used in one place apart from that, prioritisetransaction, so if this is a problem with ParseDouble this should avoid your issue.\n",
      "created_at" : "2015-07-17T19:37:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6443#issuecomment-122388926",
      "id" : 122388926,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6443",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDEyMjM4ODkyNg==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122388926/reactions"
      },
      "updated_at" : "2015-07-17T19:37:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122388926",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Can you try replacing in UniValue::write ...\n\nIt looks like the numbers are parsed and re-formatted to normalize the values to `%d.%8d`:\n\n``` java\n{\n  \"version\": 119900,\n  \"protocolversion\": 70002,\n  \"walletversion\": 60000,\n  \"balance\": 11.56061, // <-- would be 11.56061000\n  \"blocks\": 1046,\n  \"timeoffset\": 0,\n  \"connections\": 0,\n  \"proxy\": \"\",\n  \"difficulty\": 4.656542373906925e-10, // <-- would be 0.00000000\n  \"testnet\": false,\n  \"keypoololdest\": 1436225389,\n  \"keypoolsize\": 101,\n  \"paytxfee\": 0.0001, // <-- would be 0.00010000\n  \"relayfee\": 0.00001, // <-- would be 0.00001000\n  \"errors\": \"This is a pre-release test build - use at your own risk - do not use for mining or merchant applications\"\n}\n```\n\n> get_real is only used in one place apart from that, prioritisetransaction, so if this is a problem with ParseDouble this should avoid your issue.\n\nJust to quickly clarify with an example: I didn't mess with my locale settings, but I live in Europe, and as per system default, `,` is used as decimal point:\n\n``` c++\ndouble n;\nbool success = ParseDouble(\"1.2345\", &n);\n\n// => n == 1.0\n// => success == false\n```\n\nThe unit tests pass, because it seems that only the QT client is affected. The [QT documenation](http://doc.qt.io/qt-5/qcoreapplication.html#locale-settings) actually addresses this pitfall and suggests to reset `LC_NUMERIC`, once the application is initialized. This works, though I think it would probably best to avoid the use of locale-dependent functions altogether, or reset the numeric locale directly in `ParseDouble()`, if `strtod` should be kept.\n",
      "created_at" : "2015-07-18T00:25:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6443#issuecomment-122460176",
      "id" : 122460176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6443",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDEyMjQ2MDE3Ng==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122460176/reactions"
      },
      "updated_at" : "2015-07-18T00:25:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122460176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5836089?v=4",
         "events_url" : "https://api.github.com/users/dexX7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dexX7/followers",
         "following_url" : "https://api.github.com/users/dexX7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dexX7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dexX7",
         "id" : 5836089,
         "login" : "dexX7",
         "node_id" : "MDQ6VXNlcjU4MzYwODk=",
         "organizations_url" : "https://api.github.com/users/dexX7/orgs",
         "received_events_url" : "https://api.github.com/users/dexX7/received_events",
         "repos_url" : "https://api.github.com/users/dexX7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dexX7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dexX7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dexX7"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It looks like the numbers are parsed and re-formatted to normalize the values to %d.%8d:\n\nIf that kind of formatting is desired for non-monetary values, this can also be done in `setFloat` directly (avoiding a round-trip with potential loss of precision). My point was not that the above is a good fix, but it works around the issue to isolate the problem.\nDoes it stop the issue from happening in qt if you do that?\n\nAgree that a locale-independent alternative to `strtod` should be used in `ParseDouble`, but as said, this was not meant as a proper fix. My surprise was just that a problem in `ParseDouble` escalates to almost all JSON generated.\n",
      "created_at" : "2015-07-18T04:55:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6443#issuecomment-122483744",
      "id" : 122483744,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6443",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDEyMjQ4Mzc0NA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122483744/reactions"
      },
      "updated_at" : "2015-07-18T05:11:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122483744",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Working on a fix...\n",
      "created_at" : "2015-07-18T06:30:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6443#issuecomment-122496718",
      "id" : 122496718,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6443",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDEyMjQ5NjcxOA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122496718/reactions"
      },
      "updated_at" : "2015-07-18T06:30:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122496718",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "See #6456\n",
      "created_at" : "2015-07-18T07:26:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/6443#issuecomment-122508409",
      "id" : 122508409,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/6443",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDEyMjUwODQwOQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122508409/reactions"
      },
      "updated_at" : "2015-07-18T07:26:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/122508409",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
