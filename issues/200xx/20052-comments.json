[
   {
      "author_association" : "MEMBER",
      "body" : "Testing v0.20.1 and current master (60ec57b3d73e5cef71ebf3c4cdf54a4474bf492b) on Windows 10 build 19041.508.\r\n\r\nCan confirm, that `shutdown /s` interacts with `bitcoin-qt` in a different way than \"Shut down\" or \"Sign out\" commands from the Start menu.",
      "created_at" : "2020-10-02T10:20:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-702649861",
      "id" : 702649861,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjY0OTg2MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T10:20:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702649861",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipsorcery \r\n\r\nCould `shutdown /s` not send `WM_QUERYENDSESSION` message?",
      "created_at" : "2020-10-02T10:32:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-702655550",
      "id" : 702655550,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjY1NTU1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T10:32:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702655550",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Using PowerShell `Stop-Computer` cmdlet fixes the issue.\r\n\r\n@MarcoFalke \r\nIs issue could be considered as solved?",
      "created_at" : "2020-10-02T10:41:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-702659790",
      "id" : 702659790,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjY1OTc5MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T10:41:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702659790",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, but please share your findings also on the stackexchange issue",
      "created_at" : "2020-10-02T10:54:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-702665506",
      "id" : 702665506,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjY2NTUwNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T10:54:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702665506",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Ok, but please share your findings also on the stackexchange issue\r\n\r\nIt's already [done](https://bitcoin.stackexchange.com/a/99293) by another user :)",
      "created_at" : "2020-10-02T11:04:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-702669610",
      "id" : 702669610,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjY2OTYxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T11:04:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702669610",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't think it's solved, only that there's a workaround. What's wrong with `shutdown /s`?",
      "created_at" : "2020-10-02T14:57:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-702782986",
      "id" : 702782986,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjc4Mjk4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T14:57:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702782986",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I presumed that Windows 10 broke it, so it would be an upsteam bug. But I haven't verified that.\r\n\r\n",
      "created_at" : "2020-10-02T15:10:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-702790291",
      "id" : 702790291,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjc5MDI5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T15:10:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702790291",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I don't think it's solved, only that there's a workaround. What's wrong with `shutdown /s`?\r\n\r\n`shutdown /s` warns a user:\r\n\r\n![Screenshot from 2020-10-02 21-51-28](https://user-images.githubusercontent.com/32963518/94959342-ae259b00-04f9-11eb-8512-33c3c52474ea.png)\r\n\r\nbut it does not notify desktop apps with `WM_QUERYENDSESSION` message. This is not mentioned in `shutdown` command [docs](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/shutdown).",
      "created_at" : "2020-10-02T18:57:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-702903472",
      "id" : 702903472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjkwMzQ3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T18:57:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702903472",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> but it does not notify desktop apps with WM_QUERYENDSESSION message. This is not mentioned in shutdown command docs\r\n\r\nLooks like a Windows issue and not something wrong with bitcoin core.",
      "created_at" : "2020-10-03T02:04:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-703029301",
      "id" : 703029301,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMzAyOTMwMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-03T02:04:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703029301",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I tried to reproduce the issue on my system: \r\n\r\nOS: Windows 10 Pro Build: 18362.1016\r\nNo updates installed after 30 August 2020\r\n\r\nBitcoin Core: v 0.20.0\r\n\r\nBitcoin core debug.log had this in the end for each session `2020-10-03T19:51:27Z Shutdown: done` except when I had run the `shutdown /s` command\r\n\r\nCouldn't find anything interesting in `eventvwr` logs. \r\n\r\nTwo interesting things that I observed:\r\n\r\n1. bitcoin-qt.exe launched automatically when I restarted the system after `Stop-Computer` PowerShell cmdlet\r\n2. I had chrome browser running when I ran the `shutdown /s` command in cmd. Couldn't find any crash logs for it after restarting. So I am assuming its only bitcoin-qt.exe that crashed with the shutdown command and no other application. Although they are completely different applications and Bitcoin Core performs few tasks before exiting which I am not aware of.\r\n\r\n![image](https://user-images.githubusercontent.com/13405205/95001143-cd4d2700-05e4-11eb-8d20-02e1cfe5a2a9.png)\r\n\r\nAlso posted question on [answers.microsoft.com](https://answers.microsoft.com) however didn't get any helpful response yet:\r\n\r\nhttps://answers.microsoft.com/en-us/windows/forum/all/difference-between-shutdown-s-and-stop-computer/7239fa8e-db5b-4502-9dbd-c0c214a30a94\r\n\r\n",
      "created_at" : "2020-10-03T20:36:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-703161720",
      "id" : 703161720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMzE2MTcyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-03T20:36:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703161720",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I have only Windows 7 box around, but it seems that when using `shutdown -s` `WM_QUERYENDSESSION` is sent but system ignores returned value, and shutdowns immediately.\r\n\r\n`Microsoft Windows 7 Ultimate`\r\n`6.1.7601 Service Pack 1 Build 7601`\r\n\r\nQuick gist that I use to test:\r\n[https://gist.github.com/acinis/23290c49c9c4bdc3a6b525aa447e79df](https://gist.github.com/acinis/23290c49c9c4bdc3a6b525aa447e79df)",
      "created_at" : "2020-10-04T01:30:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-703186042",
      "id" : 703186042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMzE4NjA0Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-04T01:32:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703186042",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/72325650?v=4",
         "events_url" : "https://api.github.com/users/acinis/events{/privacy}",
         "followers_url" : "https://api.github.com/users/acinis/followers",
         "following_url" : "https://api.github.com/users/acinis/following{/other_user}",
         "gists_url" : "https://api.github.com/users/acinis/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/acinis",
         "id" : 72325650,
         "login" : "acinis",
         "node_id" : "MDQ6VXNlcjcyMzI1NjUw",
         "organizations_url" : "https://api.github.com/users/acinis/orgs",
         "received_events_url" : "https://api.github.com/users/acinis/received_events",
         "repos_url" : "https://api.github.com/users/acinis/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/acinis/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/acinis/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/acinis"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I tried the command `shutdown /s /t 0` and it works better as explained by Harry in the accepted answer to my [question](https://answers.microsoft.com/en-us/windows/forum/all/difference-between-shutdown-s-and-stop-computer/7239fa8e-db5b-4502-9dbd-c0c214a30a94).\r\n\r\n![image](https://user-images.githubusercontent.com/13405205/95032208-56448b00-06d7-11eb-9f2a-0a531b7eeee0.png)\r\n\r\n\r\nThe user had also asked a similar question on superuser which has few helpful answers and information that may help us in improving bitcoin core for Windows: https://superuser.com/questions/1590466/does-shutdown-s-really-not-send-the-close-signal-to-running-applications-i/1590739\r\n\r\nInteresting things:\r\n\r\n1. Client shutdown after receiving a WM_QUERYENDSESSION code in bitcoin core: https://github.com/bitcoin/bitcoin/blob/99813a9745fe10a58bedd7a4cb721faf14f907a4/src/qt/winshutdownmonitor.cpp#L24\r\n\r\n2. Best Practices for Handling Shutdown (It mentions Vista but maybe applicable for Win 10 as well): https://docs.microsoft.com/en-gb/previous-versions/windows/desktop/ms700677(v=vs.85)#best-practices-for-handling-shutdown-in-windows-vista\r\n\r\n3. More information related to shutdown in Windows: https://docs.microsoft.com/en-gb/windows/win32/shutdown/shutdown-changes-for-windows-vista\r\n\r\n4. Harry's comments on the code that manages shutdown in bitcoin core:  \r\n> I believe that if the code waited until the client shutdown was complete before responding to the WM_ENDSESSION message, then the client shutdown would be allowed to complete, provided it took no more than five seconds to do so.\r\n\r\n5. Link about ways for an application to shut down computer shared by acinis : https://docs.microsoft.com/en-us/windows/win32/shutdown/shutting-down\r\n\r\n6. > Generally shutdown /s does not send any \"close\" messages. It call one of few Win32 API functions for shutting down Windows system. These functions in turn notify aplications about shutdown/restart event via WM_QUERYENDSESSION and WM_ENDSESSION messages. Programs can then agree or try to prevent pending shutdown by responsing properly to WM_QUERYENDSESSION, eg. for stopping cleanly, etc.\r\n\r\nhttps://superuser.com/a/1590588/\r\n\r\n",
      "created_at" : "2020-10-05T01:36:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-703352647",
      "id" : 703352647,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMzM1MjY0Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-05T01:36:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703352647",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "TIL :)\r\n```\r\nC:\\Users\\hebasto>shutdown /?\r\n...\r\n    /t xxx     Set the time-out period before shutdown to xxx seconds.\r\n               The valid range is 0-315360000 (10 years), with a default of 30.\r\n               If the timeout period is greater than 0, the /f parameter is\r\n               implied.\r\n...\r\n```\r\nNote that \"If the timeout period is greater than 0, the /f parameter is implied.\" is not mentioned in https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/shutdown\r\n\r\nSo, `shutdown /s` is equivalent to `shutdown /s /t 30 /f`, i.e., it  _forces_ shutdown.\r\n\r\nTo make things done gracefully `shutdown /s /t 0` should be used.\r\n\r\nI've tested both `shutdown /s /t 0` (to shutdown) and `shutdown /l /t 0` (to log off): `bitcoin-qt` shutdowns nicely.",
      "created_at" : "2020-10-05T16:34:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-703746323",
      "id" : 703746323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMzc0NjMyMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-05T16:34:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703746323",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, closing as upstream bug. I don't think there is anything we can do here.",
      "created_at" : "2020-10-05T18:08:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/20052#issuecomment-703798132",
      "id" : 703798132,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20052",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMzc5ODEzMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-05T18:08:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703798132",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
