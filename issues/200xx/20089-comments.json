[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19381 (Fix UBSan warnings triggered when loading corrupt mempool.dat files by rajarshimaitra)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-10-05T21:07:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#issuecomment-703889492",
      "id" : 703889492,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20089",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMzg4OTQ5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-08T22:08:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/703889492",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r500812519"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500812519"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, `MoneyRange(abs(fee_delta))`?",
      "commit_id" : "8953ff96581d51a1e05c467f39c68f06e40a4c89",
      "created_at" : "2020-10-07T07:59:39Z",
      "diff_hunk" : "@@ -5037,6 +5038,14 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n \n static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n \n+// Check if an amount is a valid fee delta.\n+//\n+// Like MoneyRange(...), but allows for negative money amounts.\n+static bool FeeDeltaRange(const CAmount fee_delta)\n+{\n+    return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r500812519",
      "id" : 500812519,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDgxMjUxOQ==",
      "original_commit_id" : "6d3ffd566a4f5d300c77f15608b1dff80db84aac",
      "original_line" : 5046,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 503617701,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-11-11T21:25:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500812519",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r500846086"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500846086"
         }
      },
      "author_association" : "MEMBER",
      "body" : "No that would be very dangerous! :)\r\n\r\nI'm intentionally avoiding `abs` here.\r\n\r\n`FeeDeltaRange(fee_delta)` is not equivalent to `MoneyRange(abs(fee_delta))` :)\r\n\r\nLive demo:\r\n\r\nAt first sight they might _appear_ to be equivalent:\r\n\r\n```\r\n$ cling\r\n[cling]$ #include <cstdint>\r\n[cling]$ using CAmount = int64_t;\r\n[cling]$ static const CAmount COIN = 100000000;\r\n[cling]$ static const CAmount MAX_MONEY = 21000000 * COIN;\r\n[cling]$ bool FeeDeltaRange(const CAmount fee_delta) { return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY; }\r\n[cling]$ bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\r\n[cling]$ FeeDeltaRange(-12345)\r\n(bool) true\r\n[cling]$ MoneyRange(abs(-12345))\r\n(bool) true\r\n```\r\n\r\nBut let's test with the amount -9223372036854775808 (`std::numeric_limits<int64_t>::min()`):\r\n\r\n```\r\n[cling]$ #include <limits>\r\n[cling]$ CAmount counterexample = std::numeric_limits<int64_t>::min();\r\n[cling]$ counterexample\r\n(long) -9223372036854775808\r\n[cling]$ FeeDeltaRange(counterexample)\r\n(bool) false\r\n[cling]$ MoneyRange(abs(counterexample))\r\n(bool) true\r\n```\r\n\r\nNote that the behaviour of `abs` is undefined if the result cannot be represented by the return type.\r\n\r\nThe same goes for `std::abs` which is *not* equivalent to `abs` :)\r\n\r\nAnother `std::abs`/`abs` gotcha:\r\n\r\n```\r\n[cling]$ abs(std::numeric_limits<int64_t>::min())\r\n(int) 0\r\n[cling]$ std::abs(std::numeric_limits<int64_t>::min())\r\n(long) -9223372036854775808\r\n```\r\n\r\nNote also that the result of `std::abs` is not guaranteed to be positive as shown in the latter case :)",
      "commit_id" : "8953ff96581d51a1e05c467f39c68f06e40a4c89",
      "created_at" : "2020-10-07T08:52:28Z",
      "diff_hunk" : "@@ -5037,6 +5038,14 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n \n static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n \n+// Check if an amount is a valid fee delta.\n+//\n+// Like MoneyRange(...), but allows for negative money amounts.\n+static bool FeeDeltaRange(const CAmount fee_delta)\n+{\n+    return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r500846086",
      "id" : 500846086,
      "in_reply_to_id" : 500812519,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg0NjA4Ng==",
      "original_commit_id" : "6d3ffd566a4f5d300c77f15608b1dff80db84aac",
      "original_line" : 5046,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 503660839,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-11-11T21:25:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/500846086",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r501681148"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/501681148"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This helper could be moved to the amount module?",
      "commit_id" : "8953ff96581d51a1e05c467f39c68f06e40a4c89",
      "created_at" : "2020-10-08T12:29:46Z",
      "diff_hunk" : "@@ -5037,6 +5038,14 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n \n static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n \n+// Check if an amount is a valid fee delta.\n+//\n+// Like MoneyRange(...), but allows for negative money amounts.\n+static bool FeeDeltaRange(const CAmount fee_delta)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r501681148",
      "id" : 501681148,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTY4MTE0OA==",
      "original_commit_id" : "6d3ffd566a4f5d300c77f15608b1dff80db84aac",
      "original_line" : 5044,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 504729579,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-11-11T21:25:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/501681148",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r501974214"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/501974214"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good idea! Done! :)",
      "commit_id" : "8953ff96581d51a1e05c467f39c68f06e40a4c89",
      "created_at" : "2020-10-08T19:51:31Z",
      "diff_hunk" : "@@ -5037,6 +5038,14 @@ int VersionBitsTipStateSinceHeight(const Consensus::Params& params, Consensus::D\n \n static const uint64_t MEMPOOL_DUMP_VERSION = 1;\n \n+// Check if an amount is a valid fee delta.\n+//\n+// Like MoneyRange(...), but allows for negative money amounts.\n+static bool FeeDeltaRange(const CAmount fee_delta)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r501974214",
      "id" : 501974214,
      "in_reply_to_id" : 501681148,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk3NDIxNA==",
      "original_commit_id" : "6d3ffd566a4f5d300c77f15608b1dff80db84aac",
      "original_line" : 5044,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 505115916,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-11-11T21:25:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/501974214",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "review ACK 5693d5ad4a1ea862b82b25a3194569bfb66bc67d",
      "created_at" : "2020-10-09T07:07:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#issuecomment-706011655",
      "id" : 706011655,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20089",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwNjAxMTY1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-09T07:07:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706011655",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@theStack Now printing a log message. Please re-review :)",
      "created_at" : "2020-10-12T06:35:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#issuecomment-706902182",
      "id" : 706902182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20089",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwNjkwMjE4Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-12T06:35:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/706902182",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r503437961"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/503437961"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This condition is always true, isn't it? 0 is a valid fee delta, hence the else-branch wouldn't be taken in the case that i.second is zero.",
      "commit_id" : "8953ff96581d51a1e05c467f39c68f06e40a4c89",
      "created_at" : "2020-10-12T17:31:59Z",
      "diff_hunk" : "@@ -5106,6 +5110,10 @@ bool LoadMempool(CTxMemPool& pool)\n         for (const auto& i : mapDeltas) {\n             if (FeeDeltaRange(i.second)) {\n                 pool.PrioritiseTransaction(i.first, i.second);\n+            } else {\n+                if (i.second != 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r503437961",
      "id" : 503437961,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzQzNzk2MQ==",
      "original_commit_id" : "89ab5c24586dfb2bcde34ed4b9d706a4cdde3bc8",
      "original_line" : 5114,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 506801028,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-11-11T21:25:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/503437961",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r503519957"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/503519957"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You're absolutely right: the conditional is redundant. Thanks for noticing! Redundancy removed :)\r\n\r\nPlease re-review! :)",
      "commit_id" : "8953ff96581d51a1e05c467f39c68f06e40a4c89",
      "created_at" : "2020-10-12T20:36:29Z",
      "diff_hunk" : "@@ -5106,6 +5110,10 @@ bool LoadMempool(CTxMemPool& pool)\n         for (const auto& i : mapDeltas) {\n             if (FeeDeltaRange(i.second)) {\n                 pool.PrioritiseTransaction(i.first, i.second);\n+            } else {\n+                if (i.second != 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r503519957",
      "id" : 503519957,
      "in_reply_to_id" : 503437961,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzUxOTk1Nw==",
      "original_commit_id" : "89ab5c24586dfb2bcde34ed4b9d706a4cdde3bc8",
      "original_line" : 5114,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/validation.cpp",
      "position" : null,
      "pull_request_review_id" : 506902115,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-11-11T21:25:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/503519957",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "review ACK 875a2c3149f6f94b198c7c24230375d27410f422",
      "created_at" : "2020-10-13T13:19:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#issuecomment-707732785",
      "id" : 707732785,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20089",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwNzczMjc4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-13T13:19:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/707732785",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could someone restart Cirrus please? :)",
      "created_at" : "2020-10-19T20:15:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#issuecomment-712416470",
      "id" : 712416470,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20089",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMjQxNjQ3MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-19T20:15:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/712416470",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r511499384"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511499384"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fee deltas outside `MAX_MONEY` are valid and have at least a conceptual use case (consider that fee rate is divided by transaction size: a larger transaction would need `>MAX_MONEY` feerate to go before a `MAX_MONEY` smaller tx).",
      "commit_id" : "8953ff96581d51a1e05c467f39c68f06e40a4c89",
      "created_at" : "2020-10-24T18:16:57Z",
      "diff_hunk" : "@@ -25,4 +25,12 @@ static const CAmount COIN = 100000000;\n static const CAmount MAX_MONEY = 21000000 * COIN;\n inline bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n \n+/** Check if an amount is a valid fee delta.\n+ *\n+ * Like MoneyRange(...), but allows for negative money amounts.\n+ */\n+inline bool FeeDeltaRange(const CAmount fee_delta) {\n+    return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r511499384",
      "id" : 511499384,
      "line" : 33,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTQ5OTM4NA==",
      "original_commit_id" : "875a2c3149f6f94b198c7c24230375d27410f422",
      "original_line" : 33,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/amount.h",
      "position" : 9,
      "pull_request_review_id" : 516296876,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-11-11T21:25:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511499384",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r511519957"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511519957"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@luke-jr What is the valid fee delta range in your opinion?",
      "commit_id" : "8953ff96581d51a1e05c467f39c68f06e40a4c89",
      "created_at" : "2020-10-24T22:13:42Z",
      "diff_hunk" : "@@ -25,4 +25,12 @@ static const CAmount COIN = 100000000;\n static const CAmount MAX_MONEY = 21000000 * COIN;\n inline bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n \n+/** Check if an amount is a valid fee delta.\n+ *\n+ * Like MoneyRange(...), but allows for negative money amounts.\n+ */\n+inline bool FeeDeltaRange(const CAmount fee_delta) {\n+    return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r511519957",
      "id" : 511519957,
      "in_reply_to_id" : 511499384,
      "line" : 33,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTUxOTk1Nw==",
      "original_commit_id" : "875a2c3149f6f94b198c7c24230375d27410f422",
      "original_line" : 33,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/amount.h",
      "position" : 9,
      "pull_request_review_id" : 516310552,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-11-11T21:25:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/511519957",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r519212383"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519212383"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure this is actionable unless we can establish what the valid range should be.",
      "commit_id" : "8953ff96581d51a1e05c467f39c68f06e40a4c89",
      "created_at" : "2020-11-07T19:54:57Z",
      "diff_hunk" : "@@ -25,4 +25,12 @@ static const CAmount COIN = 100000000;\n static const CAmount MAX_MONEY = 21000000 * COIN;\n inline bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n \n+/** Check if an amount is a valid fee delta.\n+ *\n+ * Like MoneyRange(...), but allows for negative money amounts.\n+ */\n+inline bool FeeDeltaRange(const CAmount fee_delta) {\n+    return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r519212383",
      "id" : 519212383,
      "in_reply_to_id" : 511499384,
      "line" : 33,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTIxMjM4Mw==",
      "original_commit_id" : "875a2c3149f6f94b198c7c24230375d27410f422",
      "original_line" : 33,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/amount.h",
      "position" : 9,
      "pull_request_review_id" : 525677598,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-11-11T21:25:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519212383",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r557249710"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557249710"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is not a feerate, but an absolute amount in satoshis",
      "commit_id" : "8953ff96581d51a1e05c467f39c68f06e40a4c89",
      "created_at" : "2021-01-14T09:21:20Z",
      "diff_hunk" : "@@ -25,4 +25,12 @@ static const CAmount COIN = 100000000;\n static const CAmount MAX_MONEY = 21000000 * COIN;\n inline bool MoneyRange(const CAmount& nValue) { return (nValue >= 0 && nValue <= MAX_MONEY); }\n \n+/** Check if an amount is a valid fee delta.\n+ *\n+ * Like MoneyRange(...), but allows for negative money amounts.\n+ */\n+inline bool FeeDeltaRange(const CAmount fee_delta) {\n+    return fee_delta >= -MAX_MONEY && fee_delta <= MAX_MONEY;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20089#discussion_r557249710",
      "id" : 557249710,
      "in_reply_to_id" : 511499384,
      "line" : 33,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NzI0OTcxMA==",
      "original_commit_id" : "875a2c3149f6f94b198c7c24230375d27410f422",
      "original_line" : 33,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/amount.h",
      "position" : 9,
      "pull_request_review_id" : 568047632,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20089",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-14T09:21:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/557249710",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
