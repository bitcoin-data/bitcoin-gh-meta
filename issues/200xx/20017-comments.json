[
   {
      "author_association" : "MEMBER",
      "body" : "Here's more goals of this change:\r\n- get param by name, like `ctx.param<bool>(\"involves_watchonly\")` and have it with the correct format and make it non-breaking change,\r\n- try to use the default value specified in RPCArg (Done â)\r\n- support chunked response - don't rely on the return `UniValue`\r\n- this simplifies code review as request.param is no longer used in the new variant\r\n- detect unused arguments\r\n\r\n@MarcoFalke @kallewoof ",
      "created_at" : "2020-09-25T18:59:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-699099728",
      "id" : 699099728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5OTA5OTcyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-19T10:41:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/699099728",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nI think this looks nicer btw: https://github.com/kallewoof/bitcoin/commit/fe349cf4410892b62e98c4f119ac005254b4292e\r\n",
      "created_at" : "2020-09-30T06:35:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-701188620",
      "id" : 701188620,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMTE4ODYyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-30T06:35:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701188620",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r497335296"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497335296"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I believe the errors appearing are due to one or both of these going out of scope before the function call happens.",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2020-09-30T08:32:00Z",
      "diff_hunk" : "@@ -329,18 +329,46 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+class RPCHelpMan;\n+class RPCContext\n+{\n+public:\n+    const RPCHelpMan& m_helpman;\n+    const JSONRPCRequest& m_request;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r497335296",
      "id" : 497335296,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzMzNTI5Ng==",
      "original_commit_id" : "c6ecc3587e67b7a9368cca2e8c34e5ee637cae87",
      "original_line" : 337,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 499200936,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T10:34:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497335296",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@kallewoof thanks for taking a look! I'll wait for more concept acks before going forward. Regarding your suggestion to use `operator()`, I tend to see it used for functors. In this case, to get param values, it's not that expressiv.",
      "created_at" : "2020-09-30T08:35:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-701247788",
      "id" : 701247788,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMTI0Nzc4OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-07T08:01:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701247788",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yeah, it may be confusing too. I *do* think we can afford to use one function that takes a null default, though. Overhead negligible. Gotcha on the concept ACKs.\r\n\r\nEdit: alternatively, `operator[]` for the no default case, and `ParamOrDefault()` for the default case..\r\n\r\nEdit again: I dug some more, and it doesn't seem like the `RPCHelpMan` or `JSONRPCRequest` are being deallocated, but some memory violation is happening, for sure. Anyway, will get back when we know if this is the way.",
      "created_at" : "2020-09-30T08:47:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-701254290",
      "id" : 701254290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMTI1NDI5MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-30T09:44:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701254290",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25093](https://github.com/bitcoin/bitcoin/pull/25093) (rpc: Check for omitted, but required parameters by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-09-30T19:36:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-701600699",
      "id" : 701600699,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMTYwMDY5OQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701600699/reactions"
      },
      "updated_at" : "2022-05-12T00:10:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701600699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r497866882"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497866882"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed.",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2020-10-01T00:08:33Z",
      "diff_hunk" : "@@ -329,18 +329,46 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+class RPCHelpMan;\n+class RPCContext\n+{\n+public:\n+    const RPCHelpMan& m_helpman;\n+    const JSONRPCRequest& m_request;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r497866882",
      "id" : 497866882,
      "in_reply_to_id" : 497335296,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzg2Njg4Mg==",
      "original_commit_id" : "c6ecc3587e67b7a9368cca2e8c34e5ee637cae87",
      "original_line" : 337,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 499925923,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T10:34:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497866882",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated with IMO a better API. @ryanofsky care to take a look too?",
      "created_at" : "2020-10-01T01:02:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-701726275",
      "id" : 701726275,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMTcyNjI3NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T01:02:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701726275",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r497899986"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497899986"
         }
      },
      "author_association" : "MEMBER",
      "body" : "6e1fecd39fdadbfd1ea3a2eb3e2c74db43cecb65\r\n\r\nThis allows to throw with correct parameter name in `ParseHashV`.",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2020-10-01T01:04:24Z",
      "diff_hunk" : "@@ -329,19 +329,53 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+template <typename T>\n+struct RPCDefaultParam\n+{\n+    const RPCArg& arg;\n+    const UniValue& value;\n+    T defaults;\n+    operator T() const;\n+};\n+\n+template <> RPCDefaultParam<int>::operator int() const { return value.isNull() ? defaults : value.get_int(); }\n+\n+template <typename T>\n+struct RPCParam\n+{\n+    const RPCArg& arg;\n+    const UniValue& value;\n+    RPCDefaultParam<T> defaults(const T& defaults) const { return {arg, value, defaults}; }\n+    operator T() const;\n+    bool isNull() const { return value.isNull(); }\n+    bool isNum() const { return value.isNum(); }\n+    template <typename F>\n+    void forEach(F fn) const {\n+        if (value.isNull()) return;\n+        for (const UniValue& elem : value.get_array().getValues()) {\n+            fn(elem);\n+        }\n+    }\n+};\n+\n+template <> RPCParam<bool>::operator bool() const { return value.get_bool(); }\n+template <> RPCParam<int>::operator int() const { return value.get_int(); }\n+template <> RPCParam<std::string>::operator std::string() const { return value.get_str(); }\n+template <> RPCParam<uint256>::operator uint256() const { return ParseHashV(value, arg.GetName()); }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r497899986",
      "id" : 497899986,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Nzg5OTk4Ng==",
      "original_commit_id" : "6e1fecd39fdadbfd1ea3a2eb3e2c74db43cecb65",
      "original_line" : 364,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : null,
      "pull_request_review_id" : 499949109,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T10:34:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497899986",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag Nice. I can't figure out what was wrong with the old code. Care to explain?",
      "created_at" : "2020-10-01T07:17:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-701940238",
      "id" : 701940238,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMTk0MDIzOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T07:17:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701940238",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @promag Nice. I can't figure out what was wrong with the old code. Care to explain?\r\n\r\nBefore `fun` was captured by reference, and it kabooms when called.\r\n```cpp\r\n    RPCHelpMan(std::string name, std::string description, std::vector<RPCArg> args, RPCResults results, RPCExamples examples, RPCLegacyMethodImpl fun)\r\n        : RPCHelpMan(std::move(name), std::move(description), std::move(args), std::move(results), std::move(examples), [&](const RPCContext& ctx) -> UniValue {\r\n            return fun(ctx.m_helpman, ctx.m_request);\r\n        })\r\n    {}\r\n```",
      "created_at" : "2020-10-01T07:49:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-701957039",
      "id" : 701957039,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMTk1NzAzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T07:49:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701957039",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r498083117"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498083117"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is a behavior change, as `height` is not optional; it would throw before, and will silently use height 0 now.",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2020-10-01T08:47:49Z",
      "diff_hunk" : "@@ -346,14 +340,10 @@ static RPCHelpMan waitforblockheight()\n                     HelpExampleCli(\"waitforblockheight\", \"100 1000\")\n             + HelpExampleRpc(\"waitforblockheight\", \"100, 1000\")\n                 },\n-        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        [](const RPCContext& ctx) -> UniValue\n {\n-    int timeout = 0;\n-\n-    int height = request.params[0].get_int();\n-\n-    if (!request.params[1].isNull())\n-        timeout = request.params[1].get_int();\n+    int height = ctx.param<int>(0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r498083117",
      "id" : 498083117,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA4MzExNw==",
      "original_commit_id" : "a25df4d924a5e61805e35031598db390530178ff",
      "original_line" : 340,
      "original_position" : 63,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 500134076,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T10:34:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498083117",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r498083600"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498083600"
         }
      },
      "author_association" : "MEMBER",
      "body" : "~Same as elsewhere; this is not an optional value, so it shouldn't silently pass. (I won't mention these anymore, but there are others.)~",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2020-10-01T08:48:40Z",
      "diff_hunk" : "@@ -613,15 +597,12 @@ static RPCHelpMan getmempoolancestors()\n                     HelpExampleCli(\"getmempoolancestors\", \"\\\"mytxid\\\"\")\n             + HelpExampleRpc(\"getmempoolancestors\", \"\\\"mytxid\\\"\")\n                 },\n-        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        [](const RPCContext& ctx) -> UniValue\n {\n-    bool fVerbose = false;\n-    if (!request.params[1].isNull())\n-        fVerbose = request.params[1].get_bool();\n+    bool fVerbose = ctx.param<bool>(1).defaults(false);\n+    uint256 hash = ctx.param<uint256>(0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r498083600",
      "id" : 498083600,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA4MzYwMA==",
      "original_commit_id" : "a25df4d924a5e61805e35031598db390530178ff",
      "original_line" : 598,
      "original_position" : 120,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 500134076,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T10:34:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498083600",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r498086691"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498086691"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> and will silently use height 0 now.\r\n\r\nHow? `param<int>(index)` results in the same code as before.",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2020-10-01T08:53:39Z",
      "diff_hunk" : "@@ -346,14 +340,10 @@ static RPCHelpMan waitforblockheight()\n                     HelpExampleCli(\"waitforblockheight\", \"100 1000\")\n             + HelpExampleRpc(\"waitforblockheight\", \"100, 1000\")\n                 },\n-        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        [](const RPCContext& ctx) -> UniValue\n {\n-    int timeout = 0;\n-\n-    int height = request.params[0].get_int();\n-\n-    if (!request.params[1].isNull())\n-        timeout = request.params[1].get_int();\n+    int height = ctx.param<int>(0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r498086691",
      "id" : 498086691,
      "in_reply_to_id" : 498083117,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA4NjY5MQ==",
      "original_commit_id" : "a25df4d924a5e61805e35031598db390530178ff",
      "original_line" : 340,
      "original_position" : 63,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 500138737,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T10:34:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498086691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r498088927"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498088927"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I thought the 0 was a default value, not the index. You're right.",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2020-10-01T08:57:11Z",
      "diff_hunk" : "@@ -346,14 +340,10 @@ static RPCHelpMan waitforblockheight()\n                     HelpExampleCli(\"waitforblockheight\", \"100 1000\")\n             + HelpExampleRpc(\"waitforblockheight\", \"100, 1000\")\n                 },\n-        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        [](const RPCContext& ctx) -> UniValue\n {\n-    int timeout = 0;\n-\n-    int height = request.params[0].get_int();\n-\n-    if (!request.params[1].isNull())\n-        timeout = request.params[1].get_int();\n+    int height = ctx.param<int>(0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r498088927",
      "id" : 498088927,
      "in_reply_to_id" : 498083117,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODA4ODkyNw==",
      "original_commit_id" : "a25df4d924a5e61805e35031598db390530178ff",
      "original_line" : 340,
      "original_position" : 63,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 500141532,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T10:34:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498088927",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Would be nice if the default was already filled in by rpc help man. ;)",
      "created_at" : "2020-10-01T11:43:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-702077986",
      "id" : 702077986,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjA3Nzk4Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T11:43:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702077986",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke yes, it was already suggested in https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-699099728 but I think that can be done next.\r\n\r\nI also wonder if this should be an exhaustive change, at the moment I'm inclined to do it.",
      "created_at" : "2020-10-01T14:58:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-702194432",
      "id" : 702194432,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjE5NDQzMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T14:59:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702194432",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The benefit of doing it in one step would be to avoid changing the same line of code twice",
      "created_at" : "2020-10-01T15:00:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-702195753",
      "id" : 702195753,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjE5NTc1Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T15:00:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702195753",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, I'll try it out.",
      "created_at" : "2020-10-01T15:02:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-702197178",
      "id" : 702197178,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjE5NzE3OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T15:02:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702197178",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "See last commit @MarcoFalke.",
      "created_at" : "2020-10-01T17:23:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-702282712",
      "id" : 702282712,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjI4MjcxMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T17:23:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702282712",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK with last commit included",
      "created_at" : "2020-12-03T09:43:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-737792964",
      "id" : 737792964,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczNzc5Mjk2NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T09:43:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/737792964",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r545526786"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/545526786"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: reverse the order of these two lines. (Same below, `getmempooldescendants`.)",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2020-12-18T02:09:48Z",
      "diff_hunk" : "@@ -613,15 +597,12 @@ static RPCHelpMan getmempoolancestors()\n                     HelpExampleCli(\"getmempoolancestors\", \"\\\"mytxid\\\"\")\n             + HelpExampleRpc(\"getmempoolancestors\", \"\\\"mytxid\\\"\")\n                 },\n-        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        [](const RPCContext& ctx) -> UniValue\n {\n-    bool fVerbose = false;\n-    if (!request.params[1].isNull())\n-        fVerbose = request.params[1].get_bool();\n+    bool fVerbose = ctx.param<bool>(1).defaults(false);\n+    uint256 hash = ctx.param<uint256>(0);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r545526786",
      "id" : 545526786,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTUyNjc4Ng==",
      "original_commit_id" : "95453d72b07c2fdb1755961eb90bbfd40287be07",
      "original_line" : 598,
      "original_position" : 120,
      "original_start_line" : 602,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 555125630,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-04-19T10:34:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/545526786",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r546878941"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546878941"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    CHECK_NONFATAL(arg.m_fallback.type() == typeid(std::string));\r\n```\r\nand the two other places within this file that call `m_fallback.which()`. However, you're not changing those other two places in this PR, so if you don't want to change them (personally I would favor doing so, as this is much easier to understand), you may want to not take this suggestion.",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2020-12-21T19:07:25Z",
      "diff_hunk" : "@@ -475,6 +481,20 @@ std::string RPCExamples::ToDescriptionString() const\n     return m_examples.empty() ? m_examples : \"\\nExamples:\\n\" + m_examples;\n }\n \n+template <> RPCDefaultParam<bool>::operator bool() const { return value.isNull() ? defaults : value.get_bool(); }\n+template <> RPCDefaultParam<int>::operator int() const { return value.isNull() ? defaults : value.get_int(); }\n+template <> RPCDefaultParam<std::string>::operator std::string() const { return value.isNull() ? defaults : value.get_str(); }\n+template <> RPCParam<UniValue>::operator UniValue() const { return value; }\n+template <> RPCParam<bool>::operator bool() const { return value.get_bool(); }\n+template <> RPCParam<int>::operator int() const { return value.get_int(); }\n+template <> RPCParam<std::string>::operator std::string() const\n+{\n+    if (!value.isNull()) return value.get_str();\n+    CHECK_NONFATAL(arg.m_fallback.which() == 1);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r546878941",
      "id" : 546878941,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njg3ODk0MQ==",
      "original_commit_id" : "95453d72b07c2fdb1755961eb90bbfd40287be07",
      "original_line" : 493,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "src/rpc/util.cpp",
      "position" : null,
      "pull_request_review_id" : 555125630,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-04-19T10:34:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/546878941",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK, particularly with pulling defaults from the rpc help.",
      "created_at" : "2021-01-13T08:39:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-759295887",
      "id" : 759295887,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1OTI5NTg4Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-13T08:39:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/759295887",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-01-21T18:27:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-764848525",
      "id" : 764848525,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NDg0ODUyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-21T18:27:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/764848525",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I guess itâs time to rebase and push this forward?",
      "created_at" : "2021-04-11T15:46:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-817328339",
      "id" : 817328339,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNzMyODMzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-11T15:46:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/817328339",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I guess itâs time to rebase and push this forward?\r\n\r\nYes, please do.",
      "created_at" : "2021-04-12T00:43:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-817407917",
      "id" : 817407917,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNzQwNzkxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-12T00:43:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/817407917",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased now that #21679 is merged.\r\n\r\nNot sure what is the best approach going forward, whether this should be an exhaustive change or not. I've included a commit to just change `getnetworkhashps` RPC to serve as example.",
      "created_at" : "2021-04-19T10:31:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-822363519",
      "id" : 822363519,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMjM2MzUxOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-19T10:31:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/822363519",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2021-04-21T10:29:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-823957011",
      "id" : 823957011,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgyMzk1NzAxMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-21T10:29:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/823957011",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "reACK f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2021-08-04T02:15:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-892305946",
      "id" : 892305946,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "IC_kwDOABII5841L4Ia",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-04T02:15:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/892305946",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8321330?v=4",
         "events_url" : "https://api.github.com/users/LarryRuane/events{/privacy}",
         "followers_url" : "https://api.github.com/users/LarryRuane/followers",
         "following_url" : "https://api.github.com/users/LarryRuane/following{/other_user}",
         "gists_url" : "https://api.github.com/users/LarryRuane/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/LarryRuane",
         "id" : 8321330,
         "login" : "LarryRuane",
         "node_id" : "MDQ6VXNlcjgzMjEzMzA=",
         "organizations_url" : "https://api.github.com/users/LarryRuane/orgs",
         "received_events_url" : "https://api.github.com/users/LarryRuane/received_events",
         "repos_url" : "https://api.github.com/users/LarryRuane/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/LarryRuane/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/LarryRuane/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/LarryRuane"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r682698609"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/682698609"
         }
      },
      "author_association" : "MEMBER",
      "body" : "62047855691e1f1e07c99db259177b2fdb82cb2c: It looks like you are using this like a struct (without `m_` prefix and scoped access `ctx.request`), so it could make sense to make it a struct. Also, with `RPCHelpMan` being renamed to `RPCMethod` (https://github.com/bitcoin/bitcoin/pull/19386#discussion_r447743298), it could make sese to name the variable appropriately:\r\n\r\n```suggestion\r\nstruct RPCContext {\r\n    const RPCHelpMan& method;\r\n    const JSONRPCRequest& request;\r\n```",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2021-08-04T14:58:28Z",
      "diff_hunk" : "@@ -358,6 +394,22 @@ class RPCHelpMan\n     const std::vector<RPCArg> m_args;\n     const RPCResults m_results;\n     const RPCExamples m_examples;\n+    friend class RPCContext;\n+};\n+\n+class RPCContext\n+{\n+public:\n+    const RPCHelpMan& helpman;\n+    const JSONRPCRequest& request;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r682698609",
      "id" : 682698609,
      "line" : 404,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MjY5ODYwOQ==",
      "original_commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "original_line" : 404,
      "original_position" : 61,
      "original_start_line" : 400,
      "path" : "src/rpc/util.h",
      "position" : 61,
      "pull_request_review_id" : 722394297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : 400,
      "start_side" : "RIGHT",
      "updated_at" : "2021-08-04T15:13:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/682698609",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r682710976"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/682710976"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't understand how any of this works. I removed this and everything compiled just fine:\r\n\r\n```diff\r\ndiff --git a/src/rpc/util.h b/src/rpc/util.h\r\nindex f7a1acd1b5..1d5b7fc318 100644\r\n--- a/src/rpc/util.h\r\n+++ b/src/rpc/util.h\r\n@@ -348,11 +348,6 @@ struct RPCParam\r\n     const RPCArg& m_arg;\r\n     const UniValue& m_value;\r\n     std::optional<T> m_defaults = {};\r\n-    RPCParam<T>& defaults(const T& defaults) {\r\n-        CHECK_NONFATAL(m_arg.m_fallback.index() != 2);\r\n-        m_defaults = defaults;\r\n-        return *this;\r\n-    }\r\n     T get() const {\r\n         if (!m_value.isNull()) return value(m_value);\r\n         if (m_defaults) return *m_defaults;\r\n```\r\n\r\nI think it would make sense to split this into at least two commits:\r\n* First one to introduce `RPCContext`\r\n* Second one to introduce `RPCParam`\r\n\r\nFinally, would be nice to use clang-format on new code.",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2021-08-04T15:12:03Z",
      "diff_hunk" : "@@ -335,12 +335,48 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+template <typename T>\n+struct RPCParam\n+{\n+    const RPCArg& m_arg;\n+    const UniValue& m_value;\n+    std::optional<T> m_defaults = {};\n+    RPCParam<T>& defaults(const T& defaults) {\n+        CHECK_NONFATAL(m_arg.m_fallback.index() != 2);\n+        m_defaults = defaults;\n+        return *this;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r682710976",
      "id" : 682710976,
      "line" : 348,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY4MjcxMDk3Ng==",
      "original_commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "original_line" : 348,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 14,
      "pull_request_review_id" : 722394297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-04T15:13:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/682710976",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r698050546"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/698050546"
         }
      },
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/20017/files#r682710976\r\n\r\n@MarcoFalke yup, not used in this branch.",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2021-08-29T18:05:36Z",
      "diff_hunk" : "@@ -335,12 +335,48 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+template <typename T>\n+struct RPCParam\n+{\n+    const RPCArg& m_arg;\n+    const UniValue& m_value;\n+    std::optional<T> m_defaults = {};\n+    RPCParam<T>& defaults(const T& defaults) {\n+        CHECK_NONFATAL(m_arg.m_fallback.index() != 2);\n+        m_defaults = defaults;\n+        return *this;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r698050546",
      "id" : 698050546,
      "in_reply_to_id" : 682710976,
      "line" : 348,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5ODA1MDU0Ng==",
      "original_commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "original_line" : 348,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 14,
      "pull_request_review_id" : 741139464,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-29T18:05:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/698050546",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r698318014"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/698318014"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Then maybe remove the dead, (not even compiled) code?",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2021-08-30T09:01:42Z",
      "diff_hunk" : "@@ -335,12 +335,48 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+template <typename T>\n+struct RPCParam\n+{\n+    const RPCArg& m_arg;\n+    const UniValue& m_value;\n+    std::optional<T> m_defaults = {};\n+    RPCParam<T>& defaults(const T& defaults) {\n+        CHECK_NONFATAL(m_arg.m_fallback.index() != 2);\n+        m_defaults = defaults;\n+        return *this;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r698318014",
      "id" : 698318014,
      "in_reply_to_id" : 682710976,
      "line" : 348,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY5ODMxODAxNA==",
      "original_commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "original_line" : 348,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 14,
      "pull_request_review_id" : 741430736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-08-30T09:01:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/698318014",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r717245320"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717245320"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@promag are you still working on this?",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2021-09-28T05:54:18Z",
      "diff_hunk" : "@@ -335,12 +335,48 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+template <typename T>\n+struct RPCParam\n+{\n+    const RPCArg& m_arg;\n+    const UniValue& m_value;\n+    std::optional<T> m_defaults = {};\n+    RPCParam<T>& defaults(const T& defaults) {\n+        CHECK_NONFATAL(m_arg.m_fallback.index() != 2);\n+        m_defaults = defaults;\n+        return *this;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r717245320",
      "id" : 717245320,
      "in_reply_to_id" : 682710976,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII584qwEuI",
      "original_commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "original_line" : 348,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 14,
      "pull_request_review_id" : 764995331,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-28T05:54:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717245320",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r717259530"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717259530"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Iâll rebase and remove dead code.",
      "commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "created_at" : "2021-09-28T06:24:50Z",
      "diff_hunk" : "@@ -335,12 +335,48 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+template <typename T>\n+struct RPCParam\n+{\n+    const RPCArg& m_arg;\n+    const UniValue& m_value;\n+    std::optional<T> m_defaults = {};\n+    RPCParam<T>& defaults(const T& defaults) {\n+        CHECK_NONFATAL(m_arg.m_fallback.index() != 2);\n+        m_defaults = defaults;\n+        return *this;\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r717259530",
      "id" : 717259530,
      "in_reply_to_id" : 682710976,
      "line" : 348,
      "node_id" : "PRRC_kwDOABII584qwIMK",
      "original_commit_id" : "f473a17740f57eaecd884b59333e6e44e1695286",
      "original_line" : 348,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 14,
      "pull_request_review_id" : 765014273,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-28T06:24:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717259530",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke updated, I think fail is unrelated.",
      "created_at" : "2021-09-30T08:01:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-930974840",
      "id" : 930974840,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "IC_kwDOABII5843fYx4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/930974840/reactions"
      },
      "updated_at" : "2021-09-30T08:01:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/930974840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2022-04-20T12:34:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-1103880805",
      "id" : 1103880805,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "IC_kwDOABII585By-Jl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103880805/reactions"
      },
      "updated_at" : "2022-04-20T12:34:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103880805",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854670063"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854670063"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Any reason not to use UpperCamelCase?",
      "commit_id" : "7a7b05079d1753102ef0676fc3052a9606b4fe71",
      "created_at" : "2022-04-21T00:27:01Z",
      "diff_hunk" : "@@ -342,12 +342,42 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+template <typename T>\n+struct RPCParam\n+{\n+    const RPCArg& arg;\n+    const UniValue& value;\n+    T get() const {\n+        if (!value.isNull()) return convert(value);\n+        // if (m_defaults) return *m_defaults;\n+        CHECK_NONFATAL(arg.m_fallback.index() == 2);\n+        return convert(std::get<RPCArg::Default>(arg.m_fallback));\n+    };\n+    operator T() const { return get(); }\n+    bool isNull() const { return value.isNull(); }\n+    bool isNum() const { return value.isNum(); }\n+    bool isStr() const { return value.isStr(); }\n+    template <typename F>\n+    void forEach(F fn) const {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854670063",
      "id" : 854670063,
      "line" : 361,
      "node_id" : "PRRC_kwDOABII584y8Trv",
      "original_commit_id" : "e96155f1445869d4b677e74d9ea0fa12792eeaf5",
      "original_line" : 361,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 20,
      "pull_request_review_id" : 947911459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854670063/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-21T01:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854670063",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854670214"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854670214"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Parameter name shadows member variable. Shouldn't this method be static anyway?",
      "commit_id" : "7a7b05079d1753102ef0676fc3052a9606b4fe71",
      "created_at" : "2022-04-21T00:27:24Z",
      "diff_hunk" : "@@ -342,12 +342,42 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+template <typename T>\n+struct RPCParam\n+{\n+    const RPCArg& arg;\n+    const UniValue& value;\n+    T get() const {\n+        if (!value.isNull()) return convert(value);\n+        // if (m_defaults) return *m_defaults;\n+        CHECK_NONFATAL(arg.m_fallback.index() == 2);\n+        return convert(std::get<RPCArg::Default>(arg.m_fallback));\n+    };\n+    operator T() const { return get(); }\n+    bool isNull() const { return value.isNull(); }\n+    bool isNum() const { return value.isNum(); }\n+    bool isStr() const { return value.isStr(); }\n+    template <typename F>\n+    void forEach(F fn) const {\n+        if (value.isNull()) return;\n+        for (const UniValue& elem : value.get_array().getValues()) {\n+            fn(elem);\n+        }\n+    }\n+private:\n+    T convert(const UniValue& value) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854670214",
      "id" : 854670214,
      "line" : 368,
      "node_id" : "PRRC_kwDOABII584y8TuG",
      "original_commit_id" : "e96155f1445869d4b677e74d9ea0fa12792eeaf5",
      "original_line" : 368,
      "original_position" : 27,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 27,
      "pull_request_review_id" : 947911459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854670214/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-21T01:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854670214",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854671377"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854671377"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`CHECK_NONFATAL(std::holds_alternative<Default>(arg.m_fallback))` ?",
      "commit_id" : "7a7b05079d1753102ef0676fc3052a9606b4fe71",
      "created_at" : "2022-04-21T00:31:04Z",
      "diff_hunk" : "@@ -342,12 +342,42 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+template <typename T>\n+struct RPCParam\n+{\n+    const RPCArg& arg;\n+    const UniValue& value;\n+    T get() const {\n+        if (!value.isNull()) return convert(value);\n+        // if (m_defaults) return *m_defaults;\n+        CHECK_NONFATAL(arg.m_fallback.index() == 2);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854671377",
      "id" : 854671377,
      "line" : 353,
      "node_id" : "PRRC_kwDOABII584y8UAR",
      "original_commit_id" : "e96155f1445869d4b677e74d9ea0fa12792eeaf5",
      "original_line" : 353,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 12,
      "pull_request_review_id" : 947911459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854671377/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-21T01:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854671377",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854676879"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854676879"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Rather than having a friend accessing this class's privates directly, why not have RPCHelpMan be able to create a parameter directly and just call that from RPCContext:\r\n\r\n```c++\r\nclass RPCHelpMan\r\n{\r\n    ...\r\n    template <typename T>\r\n    RPCParam<T> GetParam(size_t index, const JSONRPCRequest& request) const\r\n    {\r\n        return {m_args[index], request.params[index]};\r\n    }\r\n    ...\r\n};\r\n\r\nclass RPCContext\r\n{\r\n...\r\n    template <typename T=UniValue>\r\n    RPCParam<T> param(size_t index) const\r\n    {\r\n        return method.GetParam<T>(index, request);\r\n    }\r\n};\r\n```",
      "commit_id" : "7a7b05079d1753102ef0676fc3052a9606b4fe71",
      "created_at" : "2022-04-21T00:48:10Z",
      "diff_hunk" : "@@ -365,6 +395,25 @@ class RPCHelpMan\n     const std::vector<RPCArg> m_args;\n     const RPCResults m_results;\n     const RPCExamples m_examples;\n+    friend struct RPCContext;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854676879",
      "id" : 854676879,
      "line" : 398,
      "node_id" : "PRRC_kwDOABII584y8VWP",
      "original_commit_id" : "e96155f1445869d4b677e74d9ea0fa12792eeaf5",
      "original_line" : 398,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 48,
      "pull_request_review_id" : 947911459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854676879/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-21T01:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854676879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854676973"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854676973"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`CHECK_NONFATAL(index < m_args.size());` ?",
      "commit_id" : "7a7b05079d1753102ef0676fc3052a9606b4fe71",
      "created_at" : "2022-04-21T00:48:25Z",
      "diff_hunk" : "@@ -365,6 +395,25 @@ class RPCHelpMan\n     const std::vector<RPCArg> m_args;\n     const RPCResults m_results;\n     const RPCExamples m_examples;\n+    friend struct RPCContext;\n+};\n+\n+struct RPCContext\n+{\n+    const RPCHelpMan& method;\n+    const JSONRPCRequest& request;\n+\n+    template <typename T=UniValue>\n+    RPCParam<T> param(size_t index) const\n+    {\n+        return {method.m_args[index], request.params[index]};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854676973",
      "id" : 854676973,
      "line" : 409,
      "node_id" : "PRRC_kwDOABII584y8VXt",
      "original_commit_id" : "e96155f1445869d4b677e74d9ea0fa12792eeaf5",
      "original_line" : 409,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 59,
      "pull_request_review_id" : 947911459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854676973/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-21T01:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854676973",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854678210"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854678210"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why would you call `ctx.param(i, fn)` instead of `fn(ctx.param(i))` -- `ctx.param(i)` defaults to being UniValue and automatically converts to UniValue, no?",
      "commit_id" : "7a7b05079d1753102ef0676fc3052a9606b4fe71",
      "created_at" : "2022-04-21T00:50:38Z",
      "diff_hunk" : "@@ -365,6 +395,25 @@ class RPCHelpMan\n     const std::vector<RPCArg> m_args;\n     const RPCResults m_results;\n     const RPCExamples m_examples;\n+    friend struct RPCContext;\n+};\n+\n+struct RPCContext\n+{\n+    const RPCHelpMan& method;\n+    const JSONRPCRequest& request;\n+\n+    template <typename T=UniValue>\n+    RPCParam<T> param(size_t index) const\n+    {\n+        return {method.m_args[index], request.params[index]};\n+    }\n+\n+    template <typename F>\n+    auto param(size_t index, F fn) const -> decltype(fn(UniValue{}))\n+    {\n+        return fn(request.params[index]);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854678210",
      "id" : 854678210,
      "line" : 416,
      "node_id" : "PRRC_kwDOABII584y8VrC",
      "original_commit_id" : "e96155f1445869d4b677e74d9ea0fa12792eeaf5",
      "original_line" : 416,
      "original_position" : 66,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 66,
      "pull_request_review_id" : 947911459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854678210/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-21T01:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854678210",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854687423"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854687423"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```c++\r\nif constexpr (std::is_same_v<T, UniValue>()) return convert(value);\r\n```\r\n\r\nwould allow you to get a `VNULL` value out cleanly if you're treating the param as `UniValue`\r\n",
      "commit_id" : "7a7b05079d1753102ef0676fc3052a9606b4fe71",
      "created_at" : "2022-04-21T00:57:34Z",
      "diff_hunk" : "@@ -342,12 +342,42 @@ struct RPCExamples {\n     std::string ToDescriptionString() const;\n };\n \n+template <typename T>\n+struct RPCParam\n+{\n+    const RPCArg& arg;\n+    const UniValue& value;\n+    T get() const {\n+        if (!value.isNull()) return convert(value);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854687423",
      "id" : 854687423,
      "line" : 351,
      "node_id" : "PRRC_kwDOABII584y8X6_",
      "original_commit_id" : "e96155f1445869d4b677e74d9ea0fa12792eeaf5",
      "original_line" : 351,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 10,
      "pull_request_review_id" : 947911459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854687423/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-21T01:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854687423",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854691096"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854691096"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "When constructing an `RPCParam<T>` wouldn't it be worth checking that `T` aligns with `method.m_args[index].m_type` along similar lines to `RPCResult::MatchesType` ?",
      "commit_id" : "7a7b05079d1753102ef0676fc3052a9606b4fe71",
      "created_at" : "2022-04-21T01:08:59Z",
      "diff_hunk" : "@@ -365,6 +395,25 @@ class RPCHelpMan\n     const std::vector<RPCArg> m_args;\n     const RPCResults m_results;\n     const RPCExamples m_examples;\n+    friend struct RPCContext;\n+};\n+\n+struct RPCContext\n+{\n+    const RPCHelpMan& method;\n+    const JSONRPCRequest& request;\n+\n+    template <typename T=UniValue>\n+    RPCParam<T> param(size_t index) const\n+    {\n+        return {method.m_args[index], request.params[index]};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#discussion_r854691096",
      "id" : 854691096,
      "in_reply_to_id" : 854676973,
      "line" : 409,
      "node_id" : "PRRC_kwDOABII584y8Y0Y",
      "original_commit_id" : "e96155f1445869d4b677e74d9ea0fa12792eeaf5",
      "original_line" : 409,
      "original_position" : 59,
      "original_start_line" : null,
      "path" : "src/rpc/util.h",
      "position" : 59,
      "pull_request_review_id" : 947911459,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20017",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854691096/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-21T01:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/854691096",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-05-19T06:10:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-1131256768",
      "id" : 1131256768,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "IC_kwDOABII585DbZvA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1131256768/reactions"
      },
      "updated_at" : "2022-05-19T06:10:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1131256768",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Are you still working on this?",
      "created_at" : "2022-10-12T18:18:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20017#issuecomment-1276562033",
      "id" : 1276562033,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20017",
      "node_id" : "IC_kwDOABII585MFspx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276562033/reactions"
      },
      "updated_at" : "2022-10-12T18:18:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276562033",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
