[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19288 (tests: Add fuzzing harness for TorController by practicalswift)\n* #19064 (refactor: Cleanup thread ctor calls by hebasto)\n* #19043 (torcontrol: add -tortarget config by MDrollette)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-09-22T12:23:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-696686472",
      "id" : 696686472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NjY4NjQ3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-30T19:44:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/696686472",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r492716989"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492716989"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit. Why casting 0 to 0 , 0 is 0 in every byte-order? I like this to be a constant and not a hookable function. ",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-22T13:06:07Z",
      "diff_hunk" : "@@ -2300,11 +2300,14 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r492716989",
      "id" : 492716989,
      "line" : 2335,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjcxNjk4OQ==",
      "original_commit_id" : "6e05a443bbe7090a331281290f18bedea13bab0a",
      "original_line" : 2335,
      "original_position" : 6,
      "original_start_line" : 2303,
      "path" : "src/net.cpp",
      "position" : 49,
      "pull_request_review_id" : 493437265,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : 2334,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492716989",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nBeing able to differentiate between incoming Tor connections from normal localhost connections would be very useful\r\n\r\n",
      "created_at" : "2020-09-22T13:17:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-696715003",
      "id" : 696715003,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NjcxNTAwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-22T13:17:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/696715003",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r492740957"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492740957"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Is it guaranteed that `INADDR_ANY` will always be 0, on any operating system?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-22T13:39:02Z",
      "diff_hunk" : "@@ -2300,11 +2300,14 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r492740957",
      "id" : 492740957,
      "in_reply_to_id" : 492716989,
      "line" : 2335,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjc0MDk1Nw==",
      "original_commit_id" : "6e05a443bbe7090a331281290f18bedea13bab0a",
      "original_line" : 2335,
      "original_position" : 6,
      "original_start_line" : 2303,
      "path" : "src/net.cpp",
      "position" : 49,
      "pull_request_review_id" : 493469158,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : 2334,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492740957",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r492810592"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492810592"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "[rfc1122](https://tools.ietf.org/html/rfc1122#section-3.2.1.3) section-3.2.1.3 ",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-22T15:05:13Z",
      "diff_hunk" : "@@ -2300,11 +2300,14 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r492810592",
      "id" : 492810592,
      "in_reply_to_id" : 492716989,
      "line" : 2335,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjgxMDU5Mg==",
      "original_commit_id" : "6e05a443bbe7090a331281290f18bedea13bab0a",
      "original_line" : 2335,
      "original_position" : 6,
      "original_start_line" : 2303,
      "path" : "src/net.cpp",
      "position" : 49,
      "pull_request_review_id" : 493561952,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : 2334,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492810592",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK! Thank you for working on this.",
      "created_at" : "2020-09-22T15:05:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-696781883",
      "id" : 696781883,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5Njc4MTg4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-22T15:05:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/696781883",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r492989711"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492989711"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Why casting 0 to 0 , 0 is 0 in every byte-order?\r\n\r\nFirstly, https://www.man7.org/linux/man-pages/man7/ip.7.html:\r\n> `in_addr` should be assigned one of the `INADDR_*` values using `htonl`...\r\n\r\nSecondly, it is inconsistent to have `s_addr = INADDR_ANY` in a line, and `s_addr = htonl(INADDR_LOOPBACK)` in another one.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-22T19:43:48Z",
      "diff_hunk" : "@@ -2300,11 +2300,14 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r492989711",
      "id" : 492989711,
      "in_reply_to_id" : 492716989,
      "line" : 2335,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mjk4OTcxMQ==",
      "original_commit_id" : "6e05a443bbe7090a331281290f18bedea13bab0a",
      "original_line" : 2335,
      "original_position" : 6,
      "original_start_line" : 2303,
      "path" : "src/net.cpp",
      "position" : 49,
      "pull_request_review_id" : 493790559,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : 2334,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/492989711",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r493306244"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/493306244"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yup i guess its just a generation thing, its a nit, but i always liked to some degree how the bitcoin client did network things different than expected, \r\nU will never know who wrote the example codes and how drunk or biased by a gun on there head they where at those times when the foundations  u all take for granted where coded. \r\nINADDR_LOOPBACK is a different case and hey what can u do if the constant is not in net order, i remember the rant of Hobbit when he bashed on Berkeley sockets implementation ( also on many other reasons) . Htonl() was one of the first predictable ways the :Gesseler had to go\". And if u bind to \"this host\" or maybe not makes a difference.\r\n\r\nI will not way in this more, made my point and u are in charge its now ur world, but please never trade readability for function. ",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-23T08:27:13Z",
      "diff_hunk" : "@@ -2300,11 +2300,14 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r493306244",
      "id" : 493306244,
      "in_reply_to_id" : 492716989,
      "line" : 2335,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzMwNjI0NA==",
      "original_commit_id" : "6e05a443bbe7090a331281290f18bedea13bab0a",
      "original_line" : 2335,
      "original_position" : 6,
      "original_start_line" : 2303,
      "path" : "src/net.cpp",
      "position" : 49,
      "pull_request_review_id" : 494420205,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : 2334,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/493306244",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r493313890"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/493313890"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@saibato Are you ok?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-23T08:35:10Z",
      "diff_hunk" : "@@ -2300,11 +2300,14 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r493313890",
      "id" : 493313890,
      "in_reply_to_id" : 492716989,
      "line" : 2335,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzMxMzg5MA==",
      "original_commit_id" : "6e05a443bbe7090a331281290f18bedea13bab0a",
      "original_line" : 2335,
      "original_position" : 6,
      "original_start_line" : 2303,
      "path" : "src/net.cpp",
      "position" : 49,
      "pull_request_review_id" : 494426833,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : 2334,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/493313890",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r493398119"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/493398119"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`htonl()` is the proper one even though the number is a palindrome. We had some discussion about that [here](https://github.com/bitcoin/bitcoin/pull/19628#discussion_r464156291) and [here](https://github.com/bitcoin/bitcoin/pull/19628#discussion_r473486793).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-23T10:00:46Z",
      "diff_hunk" : "@@ -2300,11 +2300,14 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r493398119",
      "id" : 493398119,
      "in_reply_to_id" : 492716989,
      "line" : 2335,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzM5ODExOQ==",
      "original_commit_id" : "6e05a443bbe7090a331281290f18bedea13bab0a",
      "original_line" : 2335,
      "original_position" : 6,
      "original_start_line" : 2303,
      "path" : "src/net.cpp",
      "position" : 49,
      "pull_request_review_id" : 494496641,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : 2334,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/493398119",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r493404738"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/493404738"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Signet not mentioned?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-23T10:07:59Z",
      "diff_hunk" : "@@ -451,6 +451,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-maxtimeadjustment\", strprintf(\"Maximum allowed median peer time offset adjustment. Local perspective of time may be influenced by peers forward or backward by this amount. (default: %u seconds)\", DEFAULT_MAX_TIME_ADJUSTMENT), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-maxuploadtarget=<n>\", strprintf(\"Tries to keep outbound traffic under the given target (in MiB per 24h). Limit does not apply to peers with 'download' permission. 0 = no limit (default: %d)\", DEFAULT_MAX_UPLOAD_TARGET), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-onion=<ip:port>\", \"Use separate SOCKS5 proxy to reach peers via Tor onion services, set -noonion to disable (default: -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-onionservicetargetport=<port>\", strprintf(\"Listen for connections from Tor onion service on <port> (default: %u, testnet: %u, regtest: %u)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_INT | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r493404738",
      "id" : 493404738,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQwNDczOA==",
      "original_commit_id" : "6e05a443bbe7090a331281290f18bedea13bab0a",
      "original_line" : 454,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 494502187,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/493404738",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r493432398"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/493432398"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this change -- to mention signet in help output for all relevant config options -- should be the part of another PR, no?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-23T10:38:09Z",
      "diff_hunk" : "@@ -451,6 +451,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-maxtimeadjustment\", strprintf(\"Maximum allowed median peer time offset adjustment. Local perspective of time may be influenced by peers forward or backward by this amount. (default: %u seconds)\", DEFAULT_MAX_TIME_ADJUSTMENT), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-maxuploadtarget=<n>\", strprintf(\"Tries to keep outbound traffic under the given target (in MiB per 24h). Limit does not apply to peers with 'download' permission. 0 = no limit (default: %d)\", DEFAULT_MAX_UPLOAD_TARGET), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-onion=<ip:port>\", \"Use separate SOCKS5 proxy to reach peers via Tor onion services, set -noonion to disable (default: -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-onionservicetargetport=<port>\", strprintf(\"Listen for connections from Tor onion service on <port> (default: %u, testnet: %u, regtest: %u)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_INT | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r493432398",
      "id" : 493432398,
      "in_reply_to_id" : 493404738,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzQzMjM5OA==",
      "original_commit_id" : "6e05a443bbe7090a331281290f18bedea13bab0a",
      "original_line" : 454,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 494524359,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/493432398",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild\r\n>  - This will always open `127.0.0.1:8334`, even if the new option `-onionservicetargetport=` is not specified and the system does not use Tor in any way. I think this deserves a release notes mention.\r\n\r\nTarget port opening could be dependent on `-listenonion` option value. What do you think?\r\n\r\n>  - Binding to `127.0.0.1` would make it impossible (or hard) to run the Tor daemon on another host. What about changing to `-onionservicetarget=bind_address:port` without a default value - i.e. don't do the new bind unless `-onionservicetarget=` is specified? This would also allow to bind to an external address or to `0.0.0.0` (any).\r\n\r\nThis issue is addressed in #19043, IIUC.\r\n\r\n>  - Notice that if another peer manages to reach and connect to the new bind without tor, then we would mistakenly think it is an incoming tor connection.\r\n\r\nHmmm... Need to think about this.\r\n\r\n>  - I am just curious - what will happen if `-onionservicetargetport=8333` is specified?\r\n\r\nIt will still work but without strong distinction between Tor and clearnet, no?",
      "created_at" : "2020-09-23T10:48:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-697285952",
      "id" : 697285952,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NzI4NTk1Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-23T10:48:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/697285952",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r493538320"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/493538320"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa \r\n> @Saibato Are you ok?\r\n\r\nThx :)\r\n<details><summary>click here :package: :tada:  . to find out more</summary>\r\n<br>\r\nI case u forgot,  just assign INADDR_ANY without htonl is up till now in source code right after some first commits. from November 2009 onward.\r\nEven you later never changed that behavior and so far all run good with this.\r\n\r\nI get nervous when things in bitcoin are changed by a drive by commit just because ...\r\n\r\nWhy even touch it?  Suppose Satoshi knew what we did in cold war and those where those magic lines that made bitcon a stable server.\r\nI doubt that u lads are like we, but u all have the potential to grow and learn.\r\n\r\ni like it when i can trigger u to mature, but ok is that all?  \r\n\r\n\r\n```\r\n    // The sockaddr_in structure specifies the address family,\r\n    // IP address, and port for the socket that is being bound\r\n    struct sockaddr_in sockaddr;\r\n    memset(&sockaddr, 0, sizeof(sockaddr));\r\n    sockaddr.sin_family = AF_INET;\r\n    sockaddr.sin_addr.s_addr = INADDR_ANY; // bind to all IPs on this computer\r\n    sockaddr.sin_port = DEFAULT_PORT;\r\n\r\n```\r\n```\r\ncommit 93cfb02acb13b74198b8e0ab72f039313ecf9f1f\r\nAuthor:\ts_nakamoto <s_nakamoto@1a98c847-1fd6-4fd8-948a-caf3550aa51b>  Fri Nov  6 05:50:05 2009\r\nCommitter:\ts_nakamoto <s_nakamoto@1a98c847-1fd6-4fd8-948a-caf3550aa51b>  Fri Nov  6 05:50:05 2009\r\n```\r\n</details>",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-23T12:37:46Z",
      "diff_hunk" : "@@ -2300,11 +2300,14 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r493538320",
      "id" : 493538320,
      "in_reply_to_id" : 492716989,
      "line" : 2335,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzUzODMyMA==",
      "original_commit_id" : "6e05a443bbe7090a331281290f18bedea13bab0a",
      "original_line" : 2335,
      "original_position" : 6,
      "original_start_line" : 2303,
      "path" : "src/net.cpp",
      "position" : 49,
      "pull_request_review_id" : 494612801,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : 2334,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/493538320",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2020-09-23T14:17:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-697427490",
      "id" : 697427490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NzQyNzQ5MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-23T14:17:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/697427490",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "From [IRC discussion](http://www.erisian.com.au/bitcoin-core-dev/log-2020-09-23.html#l-208):\r\n> \\<vasild> what about extending the -bind=addr:port option to something like -bind=addr:port[=tor], for example: -bind=1.2.3.4:8333 -bind=1.2.3.4:8334=tor\r\n> \\<vasild> instead of adding a new option -onionservicetarget= ?\r\n> \\<wumpus> making it an attribute makes sense\r\n> \\<wumpus> (of the bind)\r\n> \\<vasild> I don't know yet how i2p works, but if it works in a similar way (the i2p daemon connects to us, like in tor) then for i2p that would mean just recognizing =i2p in addition to recognizing =tor, instead of adding new option -i2pservicetarget=addr:port\r\n> \\<wumpus> right, it's elegant way to think about it and allows for extensibility",
      "created_at" : "2020-09-24T07:40:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-698174408",
      "id" : 698174408,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5ODE3NDQwOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-24T07:40:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/698174408",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. Could use test coverage. I'm running #20002 that is built on these changes and those in #19998.",
      "created_at" : "2020-09-24T13:57:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-698361565",
      "id" : 698361565,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5ODM2MTU2NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-24T13:57:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/698361565",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild @jonatack \r\n\r\n> what about extending the -bind=addr:port option to something like -bind=addr:port[=tor]\r\n\r\nI like that ^ idea very much. Implemented in https://github.com/hebasto/bitcoin/commits/200924-WIP\r\n\r\nAs many other PRs are built on top of this one, I'm begging you to make some preliminary review of the suggested branch to avoid unneeded rebasing.\r\n\r\nNew version features:\r\n- extended `-bind` configure option, now it completely replaces #19043 as well\r\n- no extra binding when `-nolistenonion`\r\n\r\nAlso a small Q: is it better to drop doc commit cfa17e307adaec81f6036cf4f124d78f9e128c30 in favor of #19961 ?\r\n\r\nUPDATE: already [upstreamed](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-698882284).",
      "created_at" : "2020-09-24T21:00:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-698585740",
      "id" : 698585740,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5ODU4NTc0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-25T11:47:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/698585740",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild \r\n>  - Notice that if another peer manages to reach and connect to the new bind without tor, then we would mistakenly think it is an incoming tor connection.\r\n\r\nThis behavior could be mitigated in #19998 by additional checking of `peer.addr` and `peer.GetAddrLocal()`.",
      "created_at" : "2020-09-24T21:27:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-698597381",
      "id" : 698597381,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5ODU5NzM4MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-24T21:27:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/698597381",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I like that approach, too. Will look at your branch. Edit: done.",
      "created_at" : "2020-09-24T21:51:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-698607934",
      "id" : 698607934,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5ODYwNzkzNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-25T10:50:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/698607934",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated 6e05a443bbe7090a331281290f18bedea13bab0a -> cfa17e307adaec81f6036cf4f124d78f9e128c30 ([pr19991.01](https://github.com/hebasto/bitcoin/commits/pr19991.01) -> [pr19991.02](https://github.com/hebasto/bitcoin/commits/pr19991.02), [diff](https://github.com/hebasto/bitcoin/compare/pr19991.01..pr19991.02)):\r\n\r\n- extended `-bind` configure option (credits to @vasild), now this PR completely replaces #19043\r\n- no extra binding when `-nolistenonion`\r\n- added corresponding changes into `tor.md`",
      "created_at" : "2020-09-25T11:41:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-698882284",
      "id" : 698882284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5ODg4MjI4NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-25T11:41:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/698882284",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494935024"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494935024"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "```suggestion\r\n    argsman.AddArg(\"-bind=<addr>[:<port>][=onion]\", strprintf(\"Bind to given address and always listen on it. Use [host]:port notation for IPv6. Append =onion to tag any incoming connections to that address and port as incoming tor connections (default: mainnet: 127.0.0.1:%u=onion, testnet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\r\n```",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T11:50:52Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-addnode=<ip>\", \"Add a node to connect to and attempt to keep the connection open (see the `addnode` RPC command help for more info). This option can be specified multiple times to add multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-asmap=<file>\", strprintf(\"Specify asn mapping used for bucketing of the peers (default: %s). Relative paths will be prefixed by the net-specific datadir location.\", DEFAULT_ASMAP_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-bantime=<n>\", strprintf(\"Default duration (in seconds) of manually configured bans (default: %u)\", DEFAULT_MISBEHAVING_BANTIME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-bind=<addr>\", \"Bind to given address and always listen on it. Use [host]:port notation for IPv6\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-bind=<addr>\", strprintf(\"Bind to given address and always listen on it. Use [host]:port notation for IPv6. Use =onion suffix to bind onion service target socket (default: 127.0.0.1:%u=onion, testnet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494935024",
      "id" : 494935024,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDkzNTAyNA==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 496349472,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494935024",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494948385"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494948385"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This would accept multiple =onion arguments and discard all but the last one. I.e. if `-bind=1.1.1.1:8334=onion -bind=2.2.2.2:8334=onion` is given then it will behave as if only `-bind=2.2.2.2:8334=onion` is given. Should we support more than one onion bind address? Maybe it would make sense on a machine with many interfaces.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T12:19:06Z",
      "diff_hunk" : "@@ -1920,13 +1917,34 @@ bool AppInitMain(const util::Ref& context, NodeContext& node, interfaces::BlockA\n     connOptions.nMaxOutboundLimit = nMaxOutboundLimit;\n     connOptions.m_peer_connect_timeout = peer_connect_timeout;\n \n-    for (const std::string& strBind : args.GetArgs(\"-bind\")) {\n-        CService addrBind;\n-        if (!Lookup(strBind, addrBind, GetListenPort(), false)) {\n-            return InitError(ResolveErrMsg(\"bind\", strBind));\n+    connOptions.listen_onion = args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION);\n+\n+    for (const std::string& bind_arg : args.GetArgs(\"-bind\")) {\n+        CService bind_addr;\n+        const size_t index = bind_arg.rfind('=');\n+        if (index == std::string::npos) {\n+            if (Lookup(bind_arg, bind_addr, GetListenPort(), false)) {\n+                connOptions.vBinds.push_back(bind_addr);\n+                continue;\n+            }\n+        } else {\n+            const std::string network_type = bind_arg.substr(index + 1);\n+            if (connOptions.listen_onion && network_type == \"onion\") {\n+                const std::string truncated_bind_arg = bind_arg.substr(0, index);\n+                if (Lookup(truncated_bind_arg, bind_addr, BaseParams().OnionServiceTargetPort(), false)) {\n+                    connOptions.onion_bind = bind_addr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494948385",
      "id" : 494948385,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk0ODM4NQ==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 1955,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 496349472,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494948385",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494948527"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494948527"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "If the suffix is something else than `=onion` then this code would silently ignore it. I think we should print an error and refuse to start if the user makes a typo like `=omion`.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T12:19:25Z",
      "diff_hunk" : "@@ -1920,13 +1917,34 @@ bool AppInitMain(const util::Ref& context, NodeContext& node, interfaces::BlockA\n     connOptions.nMaxOutboundLimit = nMaxOutboundLimit;\n     connOptions.m_peer_connect_timeout = peer_connect_timeout;\n \n-    for (const std::string& strBind : args.GetArgs(\"-bind\")) {\n-        CService addrBind;\n-        if (!Lookup(strBind, addrBind, GetListenPort(), false)) {\n-            return InitError(ResolveErrMsg(\"bind\", strBind));\n+    connOptions.listen_onion = args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION);\n+\n+    for (const std::string& bind_arg : args.GetArgs(\"-bind\")) {\n+        CService bind_addr;\n+        const size_t index = bind_arg.rfind('=');\n+        if (index == std::string::npos) {\n+            if (Lookup(bind_arg, bind_addr, GetListenPort(), false)) {\n+                connOptions.vBinds.push_back(bind_addr);\n+                continue;\n+            }\n+        } else {\n+            const std::string network_type = bind_arg.substr(index + 1);\n+            if (connOptions.listen_onion && network_type == \"onion\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494948527",
      "id" : 494948527,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk0ODUyNw==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 1952,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 496349472,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494948527",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494953857"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494953857"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: `m_` prefix.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T12:29:38Z",
      "diff_hunk" : "@@ -201,6 +202,8 @@ class CConnman\n         std::vector<NetWhitelistPermissions> vWhitelistedRange;\n         std::vector<NetWhitebindPermissions> vWhiteBinds;\n         std::vector<CService> vBinds;\n+        bool listen_onion{true};\n+        Optional<CService> onion_bind;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494953857",
      "id" : 494953857,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk1Mzg1Nw==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 214,
      "original_position" : 16,
      "original_start_line" : 205,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 496349472,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494953857",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494957373"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494957373"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This will cause undefined behavior if `connOptions.onion_bind` is not set, are we sure it is set here?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T12:36:20Z",
      "diff_hunk" : "@@ -2323,7 +2331,7 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n         nMaxOutboundCycleStartTime = 0;\n     }\n \n-    if (fListen && !InitBinds(connOptions.vBinds, connOptions.vWhiteBinds)) {\n+    if (fListen && !InitBinds(connOptions.vBinds, connOptions.vWhiteBinds, connOptions.onion_bind.get())) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494957373",
      "id" : 494957373,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk1NzM3Mw==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 2335,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 496349472,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494957373",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494961073"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494961073"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think the new functionality should be tied to the `-listenonion` option.\r\n\r\nIts name is confusing - it has nothing to do with \"listening\" for tor connections. What it does is to automatically create the tor hidden service using the tor-control connection.\r\n\r\nIf the hidden service is configured via `torrc`, then we don't want to create another one automatically via tor-control and thus `-listenonion=0`, but we still want to bind to a different addr:port.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T12:43:10Z",
      "diff_hunk" : "@@ -2300,11 +2303,16 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;\n         fBound |= Bind(CService(inaddr6_any, GetListenPort()), BF_NONE, NetPermissionFlags::PF_NONE);\n         fBound |= Bind(CService(inaddr_any, GetListenPort()), !fBound ? BF_REPORT_ERROR : BF_NONE, NetPermissionFlags::PF_NONE);\n     }\n+\n+    if (m_listen_onion) {\n+        fBound |= Bind(onion_bind, BF_EXPLICIT, NetPermissionFlags::PF_NONE);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494961073",
      "id" : 494961073,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk2MTA3Mw==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 2342,
      "original_position" : 25,
      "original_start_line" : 2312,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 496349472,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494961073",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494967703"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494967703"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`Bind()` could call `AddLocal()` which will add the address to `mapLocalHost`. From there we will eventually advertise it to some peer and it will get gossiped over the network.\r\n\r\nWe definitely do not want that because if somebody else manages to connect to it (outside of tor) then we will consider that as an incoming tor connection. This bind address should only be known by bitcoind and the tor daemon.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T12:55:25Z",
      "diff_hunk" : "@@ -2300,11 +2303,16 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;\n         fBound |= Bind(CService(inaddr6_any, GetListenPort()), BF_NONE, NetPermissionFlags::PF_NONE);\n         fBound |= Bind(CService(inaddr_any, GetListenPort()), !fBound ? BF_REPORT_ERROR : BF_NONE, NetPermissionFlags::PF_NONE);\n     }\n+\n+    if (m_listen_onion) {\n+        fBound |= Bind(onion_bind, BF_EXPLICIT, NetPermissionFlags::PF_NONE);\n+    }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494967703",
      "id" : 494967703,
      "line" : 2343,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk2NzcwMw==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 2343,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 57,
      "pull_request_review_id" : 496349472,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494967703",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494970139"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494970139"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I think it is wrong to call this \"socket\" as sockets are usually integers, like file descriptors, not `std::string`s. I understand why \"target\" is now undesirable. What about `tor_control_center`? ;)",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T12:59:53Z",
      "diff_hunk" : "@@ -81,12 +84,12 @@ class TorControlConnection\n \n     /**\n      * Connect to a Tor control port.\n-     * target is address of the form host:port.\n+     * control_socket is address of the form host:port.\n      * connected is the handler that is called when connection is successfully established.\n      * disconnected is a handler that is called when the connection is broken.\n      * Return true on success.\n      */\n-    bool Connect(const std::string &target, const ConnectionCB& connected, const ConnectionCB& disconnected);\n+    bool Connect(const std::string& control_socket, const ConnectionCB& connected, const ConnectionCB& disconnected);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494970139",
      "id" : 494970139,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk3MDEzOQ==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 92,
      "original_position" : 32,
      "original_start_line" : 89,
      "path" : "src/torcontrol.cpp",
      "position" : null,
      "pull_request_review_id" : 496349472,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494970139",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494976346"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494976346"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`TorControlThread()` only takes a reference to this object and uses it in another thread. I think this is dangerous because the liftetime of the object may be shorter than the lifetime of the thread. Better make `TorControlThread()`'s argument just `CService` so that the object is copied.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T13:10:49Z",
      "diff_hunk" : "@@ -752,7 +757,9 @@ void StartTorControl()\n         return;\n     }\n \n-    torControlThread = std::thread(std::bind(&TraceThread<void (*)()>, \"torcontrol\", &TorControlThread));\n+    torControlThread = std::thread(&TraceThread<std::function<void()>>, \"torcontrol\", [onion_service_target] {\n+        TorControlThread(onion_service_target);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494976346",
      "id" : 494976346,
      "line" : 761,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk3NjM0Ng==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 761,
      "original_position" : 174,
      "original_start_line" : null,
      "path" : "src/torcontrol.cpp",
      "position" : 174,
      "pull_request_review_id" : 496349472,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494976346",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild \r\n> Just to summarize the default behavior:\r\n> ### Before this PR\r\n> \r\n>  - If no `-bind` is given then we will bind on `0.0.0.0:8333` and `[::]:8333`.\r\n> \r\n>  - If `-bind=1.2.3.4:8333` is given then we will bind only on `1.2.3.4:8333`.\r\n> \r\n> \r\n> ### With this PR\r\n> \r\n>  - If no `-bind` is given then we will bind on `0.0.0.0:8333`, `[::]:8333` and `127.0.0.1:8334`.\r\n> \r\n>  - If `-bind=1.2.3.4:8333` is given then we will bind on `1.2.3.4:8333` and on `127.0.0.1:8334` (is this ok?).\r\n> \r\n>  -  If `-bind=1.2.3.4:8333 -bind=1.2.3.4:8334=onion` is given then we will bind on `1.2.3.4:8333` and `1.2.3.4:8334`.\r\n\r\nThe node will not bind on `127.0.0.1:8334` if non-default `listenonion=0` is provided.",
      "created_at" : "2020-09-25T13:42:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-698936058",
      "id" : 698936058,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5ODkzNjA1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-25T13:42:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/698936058",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "[This](https://lists.torproject.org/pipermail/tor-onions/2020-September/000414.html) could be an alternative way to check if an incoming connection is from tor - to ask the tor daemon if it made it. But it seems this is not possible now and even if made possible in the future then it will only be available if bitcoind has access to tor-control.",
      "created_at" : "2020-09-25T13:44:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-698937295",
      "id" : 698937295,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5ODkzNzI5NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-25T13:44:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/698937295",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494999263"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494999263"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe `control_center` (if we are already within Tor-related class)?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T13:47:13Z",
      "diff_hunk" : "@@ -81,12 +84,12 @@ class TorControlConnection\n \n     /**\n      * Connect to a Tor control port.\n-     * target is address of the form host:port.\n+     * control_socket is address of the form host:port.\n      * connected is the handler that is called when connection is successfully established.\n      * disconnected is a handler that is called when the connection is broken.\n      * Return true on success.\n      */\n-    bool Connect(const std::string &target, const ConnectionCB& connected, const ConnectionCB& disconnected);\n+    bool Connect(const std::string& control_socket, const ConnectionCB& connected, const ConnectionCB& disconnected);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494999263",
      "id" : 494999263,
      "in_reply_to_id" : 494970139,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk5OTI2Mw==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 92,
      "original_position" : 32,
      "original_start_line" : 89,
      "path" : "src/torcontrol.cpp",
      "position" : null,
      "pull_request_review_id" : 496434464,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/494999263",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495002342"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495002342"
         }
      },
      "author_association" : "MEMBER",
      "body" : "#19759",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T13:51:53Z",
      "diff_hunk" : "@@ -201,6 +202,8 @@ class CConnman\n         std::vector<NetWhitelistPermissions> vWhitelistedRange;\n         std::vector<NetWhitebindPermissions> vWhiteBinds;\n         std::vector<CService> vBinds;\n+        bool listen_onion{true};\n+        Optional<CService> onion_bind;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495002342",
      "id" : 495002342,
      "in_reply_to_id" : 494953857,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTAwMjM0Mg==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 214,
      "original_position" : 16,
      "original_start_line" : 205,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 496438658,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495002342",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495006505"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495006505"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```\r\n$ src/bitcoind -bind=127.0.0.1:4242=omion | grep omion\r\n2020-09-25T13:57:56Z [init] Command-line arg: bind=\"127.0.0.1:4242=omion\"\r\nError: Cannot resolve -bind address: '127.0.0.1:4242=omion'\r\n2020-09-25T13:57:58Z [init] Error: Cannot resolve -bind address: '127.0.0.1:4242=omion'\r\n```",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T13:58:19Z",
      "diff_hunk" : "@@ -1920,13 +1917,34 @@ bool AppInitMain(const util::Ref& context, NodeContext& node, interfaces::BlockA\n     connOptions.nMaxOutboundLimit = nMaxOutboundLimit;\n     connOptions.m_peer_connect_timeout = peer_connect_timeout;\n \n-    for (const std::string& strBind : args.GetArgs(\"-bind\")) {\n-        CService addrBind;\n-        if (!Lookup(strBind, addrBind, GetListenPort(), false)) {\n-            return InitError(ResolveErrMsg(\"bind\", strBind));\n+    connOptions.listen_onion = args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION);\n+\n+    for (const std::string& bind_arg : args.GetArgs(\"-bind\")) {\n+        CService bind_addr;\n+        const size_t index = bind_arg.rfind('=');\n+        if (index == std::string::npos) {\n+            if (Lookup(bind_arg, bind_addr, GetListenPort(), false)) {\n+                connOptions.vBinds.push_back(bind_addr);\n+                continue;\n+            }\n+        } else {\n+            const std::string network_type = bind_arg.substr(index + 1);\n+            if (connOptions.listen_onion && network_type == \"onion\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495006505",
      "id" : 495006505,
      "in_reply_to_id" : 494948527,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTAwNjUwNQ==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 1952,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 496444405,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495006505",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495008672"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495008672"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> This would accept multiple =onion arguments and discard all but the last one.\r\n\r\nThat is done intentionally, leaving improving for follow ups.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T14:01:29Z",
      "diff_hunk" : "@@ -1920,13 +1917,34 @@ bool AppInitMain(const util::Ref& context, NodeContext& node, interfaces::BlockA\n     connOptions.nMaxOutboundLimit = nMaxOutboundLimit;\n     connOptions.m_peer_connect_timeout = peer_connect_timeout;\n \n-    for (const std::string& strBind : args.GetArgs(\"-bind\")) {\n-        CService addrBind;\n-        if (!Lookup(strBind, addrBind, GetListenPort(), false)) {\n-            return InitError(ResolveErrMsg(\"bind\", strBind));\n+    connOptions.listen_onion = args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION);\n+\n+    for (const std::string& bind_arg : args.GetArgs(\"-bind\")) {\n+        CService bind_addr;\n+        const size_t index = bind_arg.rfind('=');\n+        if (index == std::string::npos) {\n+            if (Lookup(bind_arg, bind_addr, GetListenPort(), false)) {\n+                connOptions.vBinds.push_back(bind_addr);\n+                continue;\n+            }\n+        } else {\n+            const std::string network_type = bind_arg.substr(index + 1);\n+            if (connOptions.listen_onion && network_type == \"onion\") {\n+                const std::string truncated_bind_arg = bind_arg.substr(0, index);\n+                if (Lookup(truncated_bind_arg, bind_addr, BaseParams().OnionServiceTargetPort(), false)) {\n+                    connOptions.onion_bind = bind_addr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495008672",
      "id" : 495008672,
      "in_reply_to_id" : 494948385,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTAwODY3Mg==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 1955,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 496447306,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495008672",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495031121"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495031121"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ok. I think a user should be able to explicitly disable such an additional binding? Any ideas?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T14:34:33Z",
      "diff_hunk" : "@@ -2300,11 +2303,16 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;\n         fBound |= Bind(CService(inaddr6_any, GetListenPort()), BF_NONE, NetPermissionFlags::PF_NONE);\n         fBound |= Bind(CService(inaddr_any, GetListenPort()), !fBound ? BF_REPORT_ERROR : BF_NONE, NetPermissionFlags::PF_NONE);\n     }\n+\n+    if (m_listen_onion) {\n+        fBound |= Bind(onion_bind, BF_EXPLICIT, NetPermissionFlags::PF_NONE);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495031121",
      "id" : 495031121,
      "in_reply_to_id" : 494961073,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTAzMTEyMQ==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 2342,
      "original_position" : 25,
      "original_start_line" : 2312,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 496480439,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495031121",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495039958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495039958"
         }
      },
      "author_association" : "MEMBER",
      "body" : "wrt properties of `std::thread()` constructor and `TraceThread()` function I don't think it is dangerous. But objects of `CService` class are small, so going to implement passing by-copy.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T14:48:12Z",
      "diff_hunk" : "@@ -752,7 +757,9 @@ void StartTorControl()\n         return;\n     }\n \n-    torControlThread = std::thread(std::bind(&TraceThread<void (*)()>, \"torcontrol\", &TorControlThread));\n+    torControlThread = std::thread(&TraceThread<std::function<void()>>, \"torcontrol\", [onion_service_target] {\n+        TorControlThread(onion_service_target);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495039958",
      "id" : 495039958,
      "in_reply_to_id" : 494976346,
      "line" : 761,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTAzOTk1OA==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 761,
      "original_position" : 174,
      "original_start_line" : null,
      "path" : "src/torcontrol.cpp",
      "position" : 174,
      "pull_request_review_id" : 496492463,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495039958",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495065234"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495065234"
         }
      },
      "author_association" : "MEMBER",
      "body" : "For \"127.0.0.1\" `IsRoutable()` returns `false`, therefore it won't be passed to AddLocal(). But, in general, I agree with you.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T15:28:07Z",
      "diff_hunk" : "@@ -2300,11 +2303,16 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;\n         fBound |= Bind(CService(inaddr6_any, GetListenPort()), BF_NONE, NetPermissionFlags::PF_NONE);\n         fBound |= Bind(CService(inaddr_any, GetListenPort()), !fBound ? BF_REPORT_ERROR : BF_NONE, NetPermissionFlags::PF_NONE);\n     }\n+\n+    if (m_listen_onion) {\n+        fBound |= Bind(onion_bind, BF_EXPLICIT, NetPermissionFlags::PF_NONE);\n+    }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495065234",
      "id" : 495065234,
      "in_reply_to_id" : 494967703,
      "line" : 2343,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA2NTIzNA==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 2343,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 57,
      "pull_request_review_id" : 496526364,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495065234",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495073463"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495073463"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why not assign to the \"-listenonion\" option a new meaning \"Listen incoming onion connection, and automatically create the onion service if the Tor control available\". It looks pretty back-compatible, no?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T15:41:40Z",
      "diff_hunk" : "@@ -2300,11 +2303,16 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;\n         fBound |= Bind(CService(inaddr6_any, GetListenPort()), BF_NONE, NetPermissionFlags::PF_NONE);\n         fBound |= Bind(CService(inaddr_any, GetListenPort()), !fBound ? BF_REPORT_ERROR : BF_NONE, NetPermissionFlags::PF_NONE);\n     }\n+\n+    if (m_listen_onion) {\n+        fBound |= Bind(onion_bind, BF_EXPLICIT, NetPermissionFlags::PF_NONE);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495073463",
      "id" : 495073463,
      "in_reply_to_id" : 494961073,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA3MzQ2Mw==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 2342,
      "original_position" : 25,
      "original_start_line" : 2312,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 496537072,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495073463",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated cfa17e307adaec81f6036cf4f124d78f9e128c30 -> 0782aee0a3268e9e4de53613f229d645c2ab06b9 ([pr19991.02](https://github.com/hebasto/bitcoin/commits/pr19991.02) -> [pr19991.03](https://github.com/hebasto/bitcoin/commits/pr19991.03), [diff](https://github.com/hebasto/bitcoin/compare/pr19991.02..pr19991.03)):\r\n\r\n- addressed some @vasild's comments",
      "created_at" : "2020-09-25T15:48:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699005931",
      "id" : 699005931,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5OTAwNTkzMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-25T18:36:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/699005931",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495078026"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495078026"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699005931).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T15:48:57Z",
      "diff_hunk" : "@@ -752,7 +757,9 @@ void StartTorControl()\n         return;\n     }\n \n-    torControlThread = std::thread(std::bind(&TraceThread<void (*)()>, \"torcontrol\", &TorControlThread));\n+    torControlThread = std::thread(&TraceThread<std::function<void()>>, \"torcontrol\", [onion_service_target] {\n+        TorControlThread(onion_service_target);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495078026",
      "id" : 495078026,
      "in_reply_to_id" : 494976346,
      "line" : 761,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA3ODAyNg==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 761,
      "original_position" : 174,
      "original_start_line" : null,
      "path" : "src/torcontrol.cpp",
      "position" : 174,
      "pull_request_review_id" : 496542903,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495078026",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495078093"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495078093"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699005931).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T15:49:04Z",
      "diff_hunk" : "@@ -81,12 +84,12 @@ class TorControlConnection\n \n     /**\n      * Connect to a Tor control port.\n-     * target is address of the form host:port.\n+     * control_socket is address of the form host:port.\n      * connected is the handler that is called when connection is successfully established.\n      * disconnected is a handler that is called when the connection is broken.\n      * Return true on success.\n      */\n-    bool Connect(const std::string &target, const ConnectionCB& connected, const ConnectionCB& disconnected);\n+    bool Connect(const std::string& control_socket, const ConnectionCB& connected, const ConnectionCB& disconnected);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495078093",
      "id" : 495078093,
      "in_reply_to_id" : 494970139,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA3ODA5Mw==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 92,
      "original_position" : 32,
      "original_start_line" : 89,
      "path" : "src/torcontrol.cpp",
      "position" : null,
      "pull_request_review_id" : 496542984,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495078093",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495078248"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495078248"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699005931).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T15:49:20Z",
      "diff_hunk" : "@@ -2300,11 +2303,16 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;\n         fBound |= Bind(CService(inaddr6_any, GetListenPort()), BF_NONE, NetPermissionFlags::PF_NONE);\n         fBound |= Bind(CService(inaddr_any, GetListenPort()), !fBound ? BF_REPORT_ERROR : BF_NONE, NetPermissionFlags::PF_NONE);\n     }\n+\n+    if (m_listen_onion) {\n+        fBound |= Bind(onion_bind, BF_EXPLICIT, NetPermissionFlags::PF_NONE);\n+    }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495078248",
      "id" : 495078248,
      "in_reply_to_id" : 494967703,
      "line" : 2343,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA3ODI0OA==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 2343,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 57,
      "pull_request_review_id" : 496543179,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495078248",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495078496"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495078496"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699005931).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T15:49:48Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-addnode=<ip>\", \"Add a node to connect to and attempt to keep the connection open (see the `addnode` RPC command help for more info). This option can be specified multiple times to add multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-asmap=<file>\", strprintf(\"Specify asn mapping used for bucketing of the peers (default: %s). Relative paths will be prefixed by the net-specific datadir location.\", DEFAULT_ASMAP_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-bantime=<n>\", strprintf(\"Default duration (in seconds) of manually configured bans (default: %u)\", DEFAULT_MISBEHAVING_BANTIME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-bind=<addr>\", \"Bind to given address and always listen on it. Use [host]:port notation for IPv6\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-bind=<addr>\", strprintf(\"Bind to given address and always listen on it. Use [host]:port notation for IPv6. Use =onion suffix to bind onion service target socket (default: 127.0.0.1:%u=onion, testnet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495078496",
      "id" : 495078496,
      "in_reply_to_id" : 494935024,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTA3ODQ5Ng==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 496543532,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495078496",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated 0782aee0a3268e9e4de53613f229d645c2ab06b9 -> 20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e ([pr19991.03](https://github.com/hebasto/bitcoin/commits/pr19991.03) -> [pr19991.04](https://github.com/hebasto/bitcoin/commits/pr19991.04), [diff](https://github.com/hebasto/bitcoin/compare/pr19991.03..pr19991.04)):\r\n\r\n- addressed some @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494957373):\r\n> This will cause undefined behavior if `connOptions.onion_bind` is not set, are we sure it is set here?",
      "created_at" : "2020-09-25T20:29:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699140059",
      "id" : 699140059,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5OTE0MDA1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-25T20:29:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/699140059",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495216360"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495216360"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699140059).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-25T20:30:13Z",
      "diff_hunk" : "@@ -2323,7 +2331,7 @@ bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\n         nMaxOutboundCycleStartTime = 0;\n     }\n \n-    if (fListen && !InitBinds(connOptions.vBinds, connOptions.vWhiteBinds)) {\n+    if (fListen && !InitBinds(connOptions.vBinds, connOptions.vWhiteBinds, connOptions.onion_bind.get())) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495216360",
      "id" : 495216360,
      "in_reply_to_id" : 494957373,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTIxNjM2MA==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 2335,
      "original_position" : 35,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 496817940,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495216360",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495438047"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495438047"
         }
      },
      "author_association" : "MEMBER",
      "body" : "See #20014.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-26T09:35:31Z",
      "diff_hunk" : "@@ -451,6 +451,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-maxtimeadjustment\", strprintf(\"Maximum allowed median peer time offset adjustment. Local perspective of time may be influenced by peers forward or backward by this amount. (default: %u seconds)\", DEFAULT_MAX_TIME_ADJUSTMENT), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-maxuploadtarget=<n>\", strprintf(\"Tries to keep outbound traffic under the given target (in MiB per 24h). Limit does not apply to peers with 'download' permission. 0 = no limit (default: %d)\", DEFAULT_MAX_UPLOAD_TARGET), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-onion=<ip:port>\", \"Use separate SOCKS5 proxy to reach peers via Tor onion services, set -noonion to disable (default: -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-onionservicetargetport=<port>\", strprintf(\"Listen for connections from Tor onion service on <port> (default: %u, testnet: %u, regtest: %u)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_INT | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495438047",
      "id" : 495438047,
      "in_reply_to_id" : 493404738,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQzODA0Nw==",
      "original_commit_id" : "6e05a443bbe7090a331281290f18bedea13bab0a",
      "original_line" : 454,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 496983872,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495438047",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495716246"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495716246"
         }
      },
      "author_association" : "MEMBER",
      "body" : "3271e6d maybe document in this section the why and choice of the additional port `<n + 2>` in each chain",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T06:34:50Z",
      "diff_hunk" : "@@ -40,13 +40,13 @@ const CBaseChainParams& BaseParams()\n std::unique_ptr<CBaseChainParams> CreateBaseChainParams(const std::string& chain)\n {\n     if (chain == CBaseChainParams::MAIN) {\n-        return MakeUnique<CBaseChainParams>(\"\", 8332);\n+        return MakeUnique<CBaseChainParams>(\"\", 8332, 8334);\n     } else if (chain == CBaseChainParams::TESTNET) {\n-        return MakeUnique<CBaseChainParams>(\"testnet3\", 18332);\n+        return MakeUnique<CBaseChainParams>(\"testnet3\", 18332, 18334);\n     } else if (chain == CBaseChainParams::SIGNET) {\n-        return MakeUnique<CBaseChainParams>(\"signet\", 38332);\n+        return MakeUnique<CBaseChainParams>(\"signet\", 38332, 38334);\n     } else if (chain == CBaseChainParams::REGTEST) {\n-        return MakeUnique<CBaseChainParams>(\"regtest\", 18443);\n+        return MakeUnique<CBaseChainParams>(\"regtest\", 18443, 18445);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495716246",
      "id" : 495716246,
      "line" : 53,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTcxNjI0Ng==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 53,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/chainparamsbase.cpp",
      "position" : 21,
      "pull_request_review_id" : 497220066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495716246",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495718158"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495718158"
         }
      },
      "author_association" : "MEMBER",
      "body" : "a8b28269 nit, rm extra space\r\n```suggestion\r\nbool TorControlConnection::Connect(const std::string& tor_control_center, const ConnectionCB& _connected, const ConnectionCB& _disconnected)\r\n```",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T06:39:51Z",
      "diff_hunk" : "@@ -193,16 +196,16 @@ void TorControlConnection::eventcb(struct bufferevent *bev, short what, void *ct\n     }\n }\n \n-bool TorControlConnection::Connect(const std::string &target, const ConnectionCB& _connected, const ConnectionCB&  _disconnected)\n+bool TorControlConnection::Connect(const std::string& tor_control_center, const ConnectionCB& _connected, const ConnectionCB&  _disconnected)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495718158",
      "id" : 495718158,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTcxODE1OA==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 199,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/torcontrol.cpp",
      "position" : null,
      "pull_request_review_id" : 497220066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495718158",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495769826"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495769826"
         }
      },
      "author_association" : "MEMBER",
      "body" : "937faad This would print:\r\n```text\r\n  -bind=<addr>[:<port>][=onion]\r\n       Bind to given address and always listen on it. Use [host]:port notation\r\n       for IPv6. Append =onion to tag any incoming connections to that\r\n       address and port as incoming tor connections (default: mainnet:\r\n       127.0.0.1:8334=onion, testnet: 127.0.0.1:18334=onion, regtest:\r\n       127.0.0.1:18445=onion)\r\n```\r\n- Should we warn that only the last `=onion` argument will be kept if more than one is passed? \r\n- s/default:/defaults/ or remove the colon after mainnet, testnet, and regtest, to avoid nested colons\r\n- maybe s/tor/onion/\r\n",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T08:25:57Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-addnode=<ip>\", \"Add a node to connect to and attempt to keep the connection open (see the `addnode` RPC command help for more info). This option can be specified multiple times to add multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-asmap=<file>\", strprintf(\"Specify asn mapping used for bucketing of the peers (default: %s). Relative paths will be prefixed by the net-specific datadir location.\", DEFAULT_ASMAP_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-bantime=<n>\", strprintf(\"Default duration (in seconds) of manually configured bans (default: %u)\", DEFAULT_MISBEHAVING_BANTIME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-bind=<addr>\", \"Bind to given address and always listen on it. Use [host]:port notation for IPv6\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-bind=<addr>[:<port>][=onion]\", strprintf(\"Bind to given address and always listen on it. Use [host]:port notation for IPv6. Append =onion to tag any incoming connections to that address and port as incoming tor connections (default: mainnet: 127.0.0.1:%u=onion, testnet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495769826",
      "id" : 495769826,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTc2OTgyNg==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 497220066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495769826",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495789132"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495789132"
         }
      },
      "author_association" : "MEMBER",
      "body" : "0c9e4c55 One thing I did while testing this was add this logging change:\r\n```diff\r\ndiff --git a/src/torcontrol.cpp b/src/torcontrol.cpp\r\nindex f3583d5754..bafa44645f 100644\r\n--- a/src/torcontrol.cpp\r\n+++ b/src/torcontrol.cpp\r\n@@ -490,7 +490,7 @@ TorController::~TorController()\r\n void TorController::add_onion_cb(TorControlConnection& _conn, const TorControlReply& reply)\r\n {\r\n     if (reply.code == 250) {\r\n-        LogPrint(BCLog::TOR, \"tor: ADD_ONION successful\\n\");\r\n+        LogPrint(BCLog::TOR, \"tor: ADD_ONION successful on ports %i, %s\\n\", Params().GetDefaultPort(), m_target.ToStringIPPort());\r\n```\r\nwhich printed:\r\n\r\n```\r\n2020-09-28T08:52:08Z tor: ADD_ONION successful on ports 8333, 127.0.0.1:8334\r\n```\r\n",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T08:59:09Z",
      "diff_hunk" : "@@ -536,7 +541,7 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n             private_key = \"NEW:RSA1024\"; // Explicitly request RSA1024 - see issue #9214\n         // Request onion service, redirect port.\n         // Note that the 'virtual' port is always the default port to avoid decloaking nodes using other ports.\n-        _conn.Command(strprintf(\"ADD_ONION %s Port=%i,127.0.0.1:%i\", private_key, Params().GetDefaultPort(), GetListenPort()),\n+        _conn.Command(strprintf(\"ADD_ONION %s Port=%i,%s\", private_key, Params().GetDefaultPort(), m_target.ToStringIPPort()),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495789132",
      "id" : 495789132,
      "line" : 544,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTc4OTEzMg==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 544,
      "original_position" : 125,
      "original_start_line" : null,
      "path" : "src/torcontrol.cpp",
      "position" : 125,
      "pull_request_review_id" : 497220066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495789132",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495810711"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495810711"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Signet?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T09:35:43Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-addnode=<ip>\", \"Add a node to connect to and attempt to keep the connection open (see the `addnode` RPC command help for more info). This option can be specified multiple times to add multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-asmap=<file>\", strprintf(\"Specify asn mapping used for bucketing of the peers (default: %s). Relative paths will be prefixed by the net-specific datadir location.\", DEFAULT_ASMAP_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-bantime=<n>\", strprintf(\"Default duration (in seconds) of manually configured bans (default: %u)\", DEFAULT_MISBEHAVING_BANTIME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-bind=<addr>\", \"Bind to given address and always listen on it. Use [host]:port notation for IPv6\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-bind=<addr>[:<port>][=onion]\", strprintf(\"Bind to given address and always listen on it. Use [host]:port notation for IPv6. Append =onion to tag any incoming connections to that address and port as incoming tor connections (default: mainnet: 127.0.0.1:%u=onion, testnet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495810711",
      "id" : 495810711,
      "in_reply_to_id" : 495769826,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgxMDcxMQ==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 497343802,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495810711",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495819957"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495819957"
         }
      },
      "author_association" : "MEMBER",
      "body" : "#20014",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T09:50:57Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-addnode=<ip>\", \"Add a node to connect to and attempt to keep the connection open (see the `addnode` RPC command help for more info). This option can be specified multiple times to add multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-asmap=<file>\", strprintf(\"Specify asn mapping used for bucketing of the peers (default: %s). Relative paths will be prefixed by the net-specific datadir location.\", DEFAULT_ASMAP_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-bantime=<n>\", strprintf(\"Default duration (in seconds) of manually configured bans (default: %u)\", DEFAULT_MISBEHAVING_BANTIME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-bind=<addr>\", \"Bind to given address and always listen on it. Use [host]:port notation for IPv6\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-bind=<addr>[:<port>][=onion]\", strprintf(\"Bind to given address and always listen on it. Use [host]:port notation for IPv6. Append =onion to tag any incoming connections to that address and port as incoming tor connections (default: mainnet: 127.0.0.1:%u=onion, testnet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495819957",
      "id" : 495819957,
      "in_reply_to_id" : 495769826,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgxOTk1Nw==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 497356203,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495819957",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495823479"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495823479"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It is an arbitrary choice. Just verified that ports are not reserved by some other service.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T09:56:55Z",
      "diff_hunk" : "@@ -40,13 +40,13 @@ const CBaseChainParams& BaseParams()\n std::unique_ptr<CBaseChainParams> CreateBaseChainParams(const std::string& chain)\n {\n     if (chain == CBaseChainParams::MAIN) {\n-        return MakeUnique<CBaseChainParams>(\"\", 8332);\n+        return MakeUnique<CBaseChainParams>(\"\", 8332, 8334);\n     } else if (chain == CBaseChainParams::TESTNET) {\n-        return MakeUnique<CBaseChainParams>(\"testnet3\", 18332);\n+        return MakeUnique<CBaseChainParams>(\"testnet3\", 18332, 18334);\n     } else if (chain == CBaseChainParams::SIGNET) {\n-        return MakeUnique<CBaseChainParams>(\"signet\", 38332);\n+        return MakeUnique<CBaseChainParams>(\"signet\", 38332, 38334);\n     } else if (chain == CBaseChainParams::REGTEST) {\n-        return MakeUnique<CBaseChainParams>(\"regtest\", 18443);\n+        return MakeUnique<CBaseChainParams>(\"regtest\", 18443, 18445);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495823479",
      "id" : 495823479,
      "in_reply_to_id" : 495716246,
      "line" : 53,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyMzQ3OQ==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 53,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/chainparamsbase.cpp",
      "position" : 21,
      "pull_request_review_id" : 497360686,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495823479",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495824359"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495824359"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, #20014 doesn't update `-bind`, as there's nothing to update before this PR, so it should be updated here if I'm not confused.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T09:58:26Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-addnode=<ip>\", \"Add a node to connect to and attempt to keep the connection open (see the `addnode` RPC command help for more info). This option can be specified multiple times to add multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-asmap=<file>\", strprintf(\"Specify asn mapping used for bucketing of the peers (default: %s). Relative paths will be prefixed by the net-specific datadir location.\", DEFAULT_ASMAP_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-bantime=<n>\", strprintf(\"Default duration (in seconds) of manually configured bans (default: %u)\", DEFAULT_MISBEHAVING_BANTIME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-bind=<addr>\", \"Bind to given address and always listen on it. Use [host]:port notation for IPv6\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-bind=<addr>[:<port>][=onion]\", strprintf(\"Bind to given address and always listen on it. Use [host]:port notation for IPv6. Append =onion to tag any incoming connections to that address and port as incoming tor connections (default: mainnet: 127.0.0.1:%u=onion, testnet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495824359",
      "id" : 495824359,
      "in_reply_to_id" : 495769826,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyNDM1OQ==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 497361857,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495824359",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495826021"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495826021"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks. I think it would be helpful to document that and say why there is an extra port for future readers of the code.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T10:01:23Z",
      "diff_hunk" : "@@ -40,13 +40,13 @@ const CBaseChainParams& BaseParams()\n std::unique_ptr<CBaseChainParams> CreateBaseChainParams(const std::string& chain)\n {\n     if (chain == CBaseChainParams::MAIN) {\n-        return MakeUnique<CBaseChainParams>(\"\", 8332);\n+        return MakeUnique<CBaseChainParams>(\"\", 8332, 8334);\n     } else if (chain == CBaseChainParams::TESTNET) {\n-        return MakeUnique<CBaseChainParams>(\"testnet3\", 18332);\n+        return MakeUnique<CBaseChainParams>(\"testnet3\", 18332, 18334);\n     } else if (chain == CBaseChainParams::SIGNET) {\n-        return MakeUnique<CBaseChainParams>(\"signet\", 38332);\n+        return MakeUnique<CBaseChainParams>(\"signet\", 38332, 38334);\n     } else if (chain == CBaseChainParams::REGTEST) {\n-        return MakeUnique<CBaseChainParams>(\"regtest\", 18443);\n+        return MakeUnique<CBaseChainParams>(\"regtest\", 18443, 18445);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495826021",
      "id" : 495826021,
      "in_reply_to_id" : 495716246,
      "line" : 53,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTgyNjAyMQ==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 53,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/chainparamsbase.cpp",
      "position" : 21,
      "pull_request_review_id" : 497363995,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495826021",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495852333"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495852333"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We already have the following log message:\r\n```\r\n2020-09-28T10:51:00Z [init] Bound to 127.0.0.1:18334\r\n```",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T10:52:20Z",
      "diff_hunk" : "@@ -536,7 +541,7 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n             private_key = \"NEW:RSA1024\"; // Explicitly request RSA1024 - see issue #9214\n         // Request onion service, redirect port.\n         // Note that the 'virtual' port is always the default port to avoid decloaking nodes using other ports.\n-        _conn.Command(strprintf(\"ADD_ONION %s Port=%i,127.0.0.1:%i\", private_key, Params().GetDefaultPort(), GetListenPort()),\n+        _conn.Command(strprintf(\"ADD_ONION %s Port=%i,%s\", private_key, Params().GetDefaultPort(), m_target.ToStringIPPort()),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495852333",
      "id" : 495852333,
      "in_reply_to_id" : 495789132,
      "line" : 544,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg1MjMzMw==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 544,
      "original_position" : 125,
      "original_start_line" : null,
      "path" : "src/torcontrol.cpp",
      "position" : 125,
      "pull_request_review_id" : 497397980,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495852333",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495857174"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495857174"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699936868).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T11:02:32Z",
      "diff_hunk" : "@@ -40,13 +40,13 @@ const CBaseChainParams& BaseParams()\n std::unique_ptr<CBaseChainParams> CreateBaseChainParams(const std::string& chain)\n {\n     if (chain == CBaseChainParams::MAIN) {\n-        return MakeUnique<CBaseChainParams>(\"\", 8332);\n+        return MakeUnique<CBaseChainParams>(\"\", 8332, 8334);\n     } else if (chain == CBaseChainParams::TESTNET) {\n-        return MakeUnique<CBaseChainParams>(\"testnet3\", 18332);\n+        return MakeUnique<CBaseChainParams>(\"testnet3\", 18332, 18334);\n     } else if (chain == CBaseChainParams::SIGNET) {\n-        return MakeUnique<CBaseChainParams>(\"signet\", 38332);\n+        return MakeUnique<CBaseChainParams>(\"signet\", 38332, 38334);\n     } else if (chain == CBaseChainParams::REGTEST) {\n-        return MakeUnique<CBaseChainParams>(\"regtest\", 18443);\n+        return MakeUnique<CBaseChainParams>(\"regtest\", 18443, 18445);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495857174",
      "id" : 495857174,
      "in_reply_to_id" : 495716246,
      "line" : 53,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg1NzE3NA==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 53,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/chainparamsbase.cpp",
      "position" : 21,
      "pull_request_review_id" : 497404447,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495857174",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495857364"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495857364"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699936868).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T11:02:54Z",
      "diff_hunk" : "@@ -193,16 +196,16 @@ void TorControlConnection::eventcb(struct bufferevent *bev, short what, void *ct\n     }\n }\n \n-bool TorControlConnection::Connect(const std::string &target, const ConnectionCB& _connected, const ConnectionCB&  _disconnected)\n+bool TorControlConnection::Connect(const std::string& tor_control_center, const ConnectionCB& _connected, const ConnectionCB&  _disconnected)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495857364",
      "id" : 495857364,
      "in_reply_to_id" : 495718158,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg1NzM2NA==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 199,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/torcontrol.cpp",
      "position" : null,
      "pull_request_review_id" : 497404680,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495857364",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495857505"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495857505"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699936868).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T11:03:12Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-addnode=<ip>\", \"Add a node to connect to and attempt to keep the connection open (see the `addnode` RPC command help for more info). This option can be specified multiple times to add multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-asmap=<file>\", strprintf(\"Specify asn mapping used for bucketing of the peers (default: %s). Relative paths will be prefixed by the net-specific datadir location.\", DEFAULT_ASMAP_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-bantime=<n>\", strprintf(\"Default duration (in seconds) of manually configured bans (default: %u)\", DEFAULT_MISBEHAVING_BANTIME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-bind=<addr>\", \"Bind to given address and always listen on it. Use [host]:port notation for IPv6\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-bind=<addr>[:<port>][=onion]\", strprintf(\"Bind to given address and always listen on it. Use [host]:port notation for IPv6. Append =onion to tag any incoming connections to that address and port as incoming tor connections (default: mainnet: 127.0.0.1:%u=onion, testnet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495857505",
      "id" : 495857505,
      "in_reply_to_id" : 495769826,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg1NzUwNQ==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 497404865,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495857505",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495858701"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495858701"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699936868).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T11:05:36Z",
      "diff_hunk" : "@@ -451,6 +451,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-maxtimeadjustment\", strprintf(\"Maximum allowed median peer time offset adjustment. Local perspective of time may be influenced by peers forward or backward by this amount. (default: %u seconds)\", DEFAULT_MAX_TIME_ADJUSTMENT), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-maxuploadtarget=<n>\", strprintf(\"Tries to keep outbound traffic under the given target (in MiB per 24h). Limit does not apply to peers with 'download' permission. 0 = no limit (default: %d)\", DEFAULT_MAX_UPLOAD_TARGET), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-onion=<ip:port>\", \"Use separate SOCKS5 proxy to reach peers via Tor onion services, set -noonion to disable (default: -proxy)\", ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-onionservicetargetport=<port>\", strprintf(\"Listen for connections from Tor onion service on <port> (default: %u, testnet: %u, regtest: %u)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_INT | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495858701",
      "id" : 495858701,
      "in_reply_to_id" : 493404738,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg1ODcwMQ==",
      "original_commit_id" : "6e05a443bbe7090a331281290f18bedea13bab0a",
      "original_line" : 454,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 497406336,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495858701",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495864912"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495864912"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oh, quite right, I was grepping on `-ni bind` ;/\r\n\r\nmaster\r\n```\r\n456006:2020-09-28T10:33:52Z Bound to [::]:8333\r\n456007:2020-09-28T10:33:52Z Bound to 0.0.0.0:8333\r\n```\r\nthis branch\r\n```\r\n456232:2020-09-28T11:16:58Z Bound to [::]:8333\r\n456233:2020-09-28T11:16:58Z Bound to 0.0.0.0:8333\r\n456234:2020-09-28T11:16:58Z Bound to 127.0.0.1:8334\r\n```",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-28T11:18:39Z",
      "diff_hunk" : "@@ -536,7 +541,7 @@ void TorController::auth_cb(TorControlConnection& _conn, const TorControlReply&\n             private_key = \"NEW:RSA1024\"; // Explicitly request RSA1024 - see issue #9214\n         // Request onion service, redirect port.\n         // Note that the 'virtual' port is always the default port to avoid decloaking nodes using other ports.\n-        _conn.Command(strprintf(\"ADD_ONION %s Port=%i,127.0.0.1:%i\", private_key, Params().GetDefaultPort(), GetListenPort()),\n+        _conn.Command(strprintf(\"ADD_ONION %s Port=%i,%s\", private_key, Params().GetDefaultPort(), m_target.ToStringIPPort()),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495864912",
      "id" : 495864912,
      "in_reply_to_id" : 495789132,
      "line" : 544,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg2NDkxMg==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 544,
      "original_position" : 125,
      "original_start_line" : null,
      "path" : "src/torcontrol.cpp",
      "position" : 125,
      "pull_request_review_id" : 497414617,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495864912",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated 20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e -> d0e349140fac872ebf01c3826528a84bd6a89519 ([pr19991.04](https://github.com/hebasto/bitcoin/commits/pr19991.04) -> [pr19991.06](https://github.com/hebasto/bitcoin/commits/pr19991.06), [diff](https://github.com/hebasto/bitcoin/compare/pr19991.04..pr19991.06)):\r\n\r\n- addressed @jonatack's comments\r\n\r\n@jonatack \r\n> When reviewing the commits in order, I was wondering, \"why is this being renamed?\"\r\n\r\nCommit message updated.",
      "created_at" : "2020-09-28T11:18:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699944325",
      "id" : 699944325,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5OTk0NDMyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-28T11:18:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/699944325",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonatack \r\n> Would it be possible to add test coverage? Perhaps similar to `feature_proxy.py`.\r\n\r\n`feature_proxy.py` tests outbound connections, IIUC.",
      "created_at" : "2020-09-28T11:35:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-699951750",
      "id" : 699951750,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5OTk1MTc1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-28T11:35:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/699951750",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased d0e349140fac872ebf01c3826528a84bd6a89519 -> efa45f5fde37ebf20f318da74d53f056fd71d69f ([pr19991.06](https://github.com/hebasto/bitcoin/commits/pr19991.06) -> [pr19991.07](https://github.com/hebasto/bitcoin/commits/pr19991.07)) due to the conflict with #20014.",
      "created_at" : "2020-09-29T07:06:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-700496140",
      "id" : 700496140,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDQ5NjE0MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T07:06:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700496140",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496689477"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496689477"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks! It just occurred to me that the default for `-bind` (with this PR) is not `127.0.0.1:8334=onion` like in the description above. It is rather `-bind=0.0.0.0:8333 -bind=127.0.0.1:8334=onion`.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T12:50:18Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-addnode=<ip>\", \"Add a node to connect to and attempt to keep the connection open (see the `addnode` RPC command help for more info). This option can be specified multiple times to add multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-asmap=<file>\", strprintf(\"Specify asn mapping used for bucketing of the peers (default: %s). Relative paths will be prefixed by the net-specific datadir location.\", DEFAULT_ASMAP_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-bantime=<n>\", strprintf(\"Default duration (in seconds) of manually configured bans (default: %u)\", DEFAULT_MISBEHAVING_BANTIME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-bind=<addr>\", \"Bind to given address and always listen on it. Use [host]:port notation for IPv6\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-bind=<addr>\", strprintf(\"Bind to given address and always listen on it. Use [host]:port notation for IPv6. Use =onion suffix to bind onion service target socket (default: 127.0.0.1:%u=onion, testnet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496689477",
      "id" : 496689477,
      "in_reply_to_id" : 494935024,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjY4OTQ3Nw==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 498432211,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496689477",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496701511"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496701511"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it is not good to introduce one behavior and change it later. Like \"ignore all but last `-bind=addr:port=onion`\" and later change it to something else because users may start to depend on the first one.\r\n\r\nIf supporting more than one `-bind=addr:port=onion` is undesired then what about emitting an error in that case?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T13:08:05Z",
      "diff_hunk" : "@@ -1920,13 +1917,34 @@ bool AppInitMain(const util::Ref& context, NodeContext& node, interfaces::BlockA\n     connOptions.nMaxOutboundLimit = nMaxOutboundLimit;\n     connOptions.m_peer_connect_timeout = peer_connect_timeout;\n \n-    for (const std::string& strBind : args.GetArgs(\"-bind\")) {\n-        CService addrBind;\n-        if (!Lookup(strBind, addrBind, GetListenPort(), false)) {\n-            return InitError(ResolveErrMsg(\"bind\", strBind));\n+    connOptions.listen_onion = args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION);\n+\n+    for (const std::string& bind_arg : args.GetArgs(\"-bind\")) {\n+        CService bind_addr;\n+        const size_t index = bind_arg.rfind('=');\n+        if (index == std::string::npos) {\n+            if (Lookup(bind_arg, bind_addr, GetListenPort(), false)) {\n+                connOptions.vBinds.push_back(bind_addr);\n+                continue;\n+            }\n+        } else {\n+            const std::string network_type = bind_arg.substr(index + 1);\n+            if (connOptions.listen_onion && network_type == \"onion\") {\n+                const std::string truncated_bind_arg = bind_arg.substr(0, index);\n+                if (Lookup(truncated_bind_arg, bind_addr, BaseParams().OnionServiceTargetPort(), false)) {\n+                    connOptions.onion_bind = bind_addr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496701511",
      "id" : 496701511,
      "in_reply_to_id" : 494948385,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcwMTUxMQ==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 1955,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 498448073,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496701511",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496703810"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496703810"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Sorry, I misread the code.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T13:11:25Z",
      "diff_hunk" : "@@ -1920,13 +1917,34 @@ bool AppInitMain(const util::Ref& context, NodeContext& node, interfaces::BlockA\n     connOptions.nMaxOutboundLimit = nMaxOutboundLimit;\n     connOptions.m_peer_connect_timeout = peer_connect_timeout;\n \n-    for (const std::string& strBind : args.GetArgs(\"-bind\")) {\n-        CService addrBind;\n-        if (!Lookup(strBind, addrBind, GetListenPort(), false)) {\n-            return InitError(ResolveErrMsg(\"bind\", strBind));\n+    connOptions.listen_onion = args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION);\n+\n+    for (const std::string& bind_arg : args.GetArgs(\"-bind\")) {\n+        CService bind_addr;\n+        const size_t index = bind_arg.rfind('=');\n+        if (index == std::string::npos) {\n+            if (Lookup(bind_arg, bind_addr, GetListenPort(), false)) {\n+                connOptions.vBinds.push_back(bind_addr);\n+                continue;\n+            }\n+        } else {\n+            const std::string network_type = bind_arg.substr(index + 1);\n+            if (connOptions.listen_onion && network_type == \"onion\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496703810",
      "id" : 496703810,
      "in_reply_to_id" : 494948527,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcwMzgxMA==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 1952,
      "original_position" : 39,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 498451168,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496703810",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496716895"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496716895"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, drop this. I suggested it because members below use `m_` prefix. But members above don't!",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T13:29:27Z",
      "diff_hunk" : "@@ -201,6 +202,8 @@ class CConnman\n         std::vector<NetWhitelistPermissions> vWhitelistedRange;\n         std::vector<NetWhitebindPermissions> vWhiteBinds;\n         std::vector<CService> vBinds;\n+        bool listen_onion{true};\n+        Optional<CService> onion_bind;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496716895",
      "id" : 496716895,
      "in_reply_to_id" : 494953857,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcxNjg5NQ==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 214,
      "original_position" : 16,
      "original_start_line" : 205,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 498468751,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496716895",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496723371"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496723371"
         }
      },
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/19759#issuecomment-700702839\r\n\r\n:D",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T13:37:52Z",
      "diff_hunk" : "@@ -201,6 +202,8 @@ class CConnman\n         std::vector<NetWhitelistPermissions> vWhitelistedRange;\n         std::vector<NetWhitebindPermissions> vWhiteBinds;\n         std::vector<CService> vBinds;\n+        bool listen_onion{true};\n+        Optional<CService> onion_bind;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496723371",
      "id" : 496723371,
      "in_reply_to_id" : 494953857,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcyMzM3MQ==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 214,
      "original_position" : 16,
      "original_start_line" : 205,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 498477616,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496723371",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496726904"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496726904"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "That would couple the two things together under one option, making it impossible to configure them independently:\r\n\r\nN | auto create hidden service (`-listenonion`) | extra bind (`-bind=addr:port=onion`)\r\n---|---|---\r\n1 | no | no\r\n2 | no | yes\r\n3 | yes | no\r\n4 | yes | yes",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T13:42:22Z",
      "diff_hunk" : "@@ -2300,11 +2303,16 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;\n         fBound |= Bind(CService(inaddr6_any, GetListenPort()), BF_NONE, NetPermissionFlags::PF_NONE);\n         fBound |= Bind(CService(inaddr_any, GetListenPort()), !fBound ? BF_REPORT_ERROR : BF_NONE, NetPermissionFlags::PF_NONE);\n     }\n+\n+    if (m_listen_onion) {\n+        fBound |= Bind(onion_bind, BF_EXPLICIT, NetPermissionFlags::PF_NONE);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496726904",
      "id" : 496726904,
      "in_reply_to_id" : 494961073,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjcyNjkwNA==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 2342,
      "original_position" : 25,
      "original_start_line" : 2312,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 498482333,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496726904",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496743497"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496743497"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Yes, this is only relevant if a routable address is supplied to `-bind=addr:port=onion`.\r\n\r\nThe added `NetPermissionFlags::PF_ONION` works, but is strange because that is not a \"permission\". It is just a flag telling `Bind()` \"this is a covert bind address, don't advertise it\". Isn't `enum BindFlags` more suitable for it? `BF_DONT_ADVERTISE` or `BF_COVERT`?\r\n\r\nIn any case - the `_ONION` in the name may be too narrow, if we want to use the same mechanism for something else in the future.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T14:02:43Z",
      "diff_hunk" : "@@ -2300,11 +2303,16 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;\n         fBound |= Bind(CService(inaddr6_any, GetListenPort()), BF_NONE, NetPermissionFlags::PF_NONE);\n         fBound |= Bind(CService(inaddr_any, GetListenPort()), !fBound ? BF_REPORT_ERROR : BF_NONE, NetPermissionFlags::PF_NONE);\n     }\n+\n+    if (m_listen_onion) {\n+        fBound |= Bind(onion_bind, BF_EXPLICIT, NetPermissionFlags::PF_NONE);\n+    }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496743497",
      "id" : 496743497,
      "in_reply_to_id" : 494967703,
      "line" : 2343,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc0MzQ5Nw==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 2343,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 57,
      "pull_request_review_id" : 498504476,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496743497",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496747544"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496747544"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Should we warn that only the last =onion argument will be kept if more than one is passed?\r\n\r\nRight, or even error :bomb: or support more than one `=onion`.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T14:07:55Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-addnode=<ip>\", \"Add a node to connect to and attempt to keep the connection open (see the `addnode` RPC command help for more info). This option can be specified multiple times to add multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-asmap=<file>\", strprintf(\"Specify asn mapping used for bucketing of the peers (default: %s). Relative paths will be prefixed by the net-specific datadir location.\", DEFAULT_ASMAP_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-bantime=<n>\", strprintf(\"Default duration (in seconds) of manually configured bans (default: %u)\", DEFAULT_MISBEHAVING_BANTIME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-bind=<addr>\", \"Bind to given address and always listen on it. Use [host]:port notation for IPv6\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-bind=<addr>[:<port>][=onion]\", strprintf(\"Bind to given address and always listen on it. Use [host]:port notation for IPv6. Append =onion to tag any incoming connections to that address and port as incoming tor connections (default: mainnet: 127.0.0.1:%u=onion, testnet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496747544",
      "id" : 496747544,
      "in_reply_to_id" : 495769826,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc0NzU0NA==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 498510021,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496747544",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested ACK efa45f5fde37ebf20f318da74d53f056fd71d69f\r\nI've verified that this opens a new port (8334, bound on 127.0.0.1 only) and that `torcontrol` makes incoming connection on the hidden service that it creates go to there. This allows to distinguish incoming Tor connections. This works together with #19954.",
      "created_at" : "2020-09-29T15:58:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-700802861",
      "id" : 700802861,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDgwMjg2MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T16:00:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700802861",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated efa45f5fde37ebf20f318da74d53f056fd71d69f -> 30f2355d96bf67a30a06c1fcf6d27d242b05491b ([pr19991.07](https://github.com/hebasto/bitcoin/commits/pr19991.07) -> [pr19991.09](https://github.com/hebasto/bitcoin/commits/pr19991.09), [diff](https://github.com/hebasto/bitcoin/compare/pr19991.07..pr19991.09)).\r\n\r\n1. Addressed @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494948385):\r\n> Should we support more than one onion bind address? Maybe it would make sense on a machine with many interfaces.\r\n\r\nand @jonatack's [comment](https://github.com/bitcoin/bitcoin/pull/19991#discussion_r495769826):\r\n> Should we warn that only the last `=onion` argument will be kept if more than one is passed?\r\n\r\nIf `-listenonion=1` is provided, the node emits a warning about multiple bind addresses.\r\n\r\n2. Addressed @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/19991#discussion_r494961073):\r\n> I don't think the new functionality should be tied to the `-listenonion` option.\r\n\r\n3. Addressed @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496743497):\r\n> Isn't `enum BindFlags` more suitable for it? `BF_DONT_ADVERTISE` or `BF_COVERT`?\r\n\r\n4. Addressed @vasild's [comment](https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496689477):\r\n> Thanks! It just occurred to me that the default for `-bind` (with this PR) is not `127.0.0.1:8334=onion` like in the description above. It is rather `-bind=0.0.0.0:8333 -bind=127.0.0.1:8334=onion`.",
      "created_at" : "2020-09-29T16:34:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-700831638",
      "id" : 700831638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDgzMTYzOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T16:34:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700831638",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496881439"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496881439"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-700831638).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T16:35:03Z",
      "diff_hunk" : "@@ -1920,13 +1917,34 @@ bool AppInitMain(const util::Ref& context, NodeContext& node, interfaces::BlockA\n     connOptions.nMaxOutboundLimit = nMaxOutboundLimit;\n     connOptions.m_peer_connect_timeout = peer_connect_timeout;\n \n-    for (const std::string& strBind : args.GetArgs(\"-bind\")) {\n-        CService addrBind;\n-        if (!Lookup(strBind, addrBind, GetListenPort(), false)) {\n-            return InitError(ResolveErrMsg(\"bind\", strBind));\n+    connOptions.listen_onion = args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION);\n+\n+    for (const std::string& bind_arg : args.GetArgs(\"-bind\")) {\n+        CService bind_addr;\n+        const size_t index = bind_arg.rfind('=');\n+        if (index == std::string::npos) {\n+            if (Lookup(bind_arg, bind_addr, GetListenPort(), false)) {\n+                connOptions.vBinds.push_back(bind_addr);\n+                continue;\n+            }\n+        } else {\n+            const std::string network_type = bind_arg.substr(index + 1);\n+            if (connOptions.listen_onion && network_type == \"onion\") {\n+                const std::string truncated_bind_arg = bind_arg.substr(0, index);\n+                if (Lookup(truncated_bind_arg, bind_addr, BaseParams().OnionServiceTargetPort(), false)) {\n+                    connOptions.onion_bind = bind_addr;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496881439",
      "id" : 496881439,
      "in_reply_to_id" : 494948385,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg4MTQzOQ==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 1955,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 498677025,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496881439",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496881619"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496881619"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-700831638).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T16:35:20Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-addnode=<ip>\", \"Add a node to connect to and attempt to keep the connection open (see the `addnode` RPC command help for more info). This option can be specified multiple times to add multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-asmap=<file>\", strprintf(\"Specify asn mapping used for bucketing of the peers (default: %s). Relative paths will be prefixed by the net-specific datadir location.\", DEFAULT_ASMAP_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-bantime=<n>\", strprintf(\"Default duration (in seconds) of manually configured bans (default: %u)\", DEFAULT_MISBEHAVING_BANTIME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-bind=<addr>\", \"Bind to given address and always listen on it. Use [host]:port notation for IPv6\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-bind=<addr>[:<port>][=onion]\", strprintf(\"Bind to given address and always listen on it. Use [host]:port notation for IPv6. Append =onion to tag any incoming connections to that address and port as incoming tor connections (default: mainnet: 127.0.0.1:%u=onion, testnet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496881619",
      "id" : 496881619,
      "in_reply_to_id" : 495769826,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg4MTYxOQ==",
      "original_commit_id" : "20349ec2f669c6e06dfbddbcec63b1c3b6cdbc9e",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 498677246,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496881619",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496881834"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496881834"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-700831638).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T16:35:41Z",
      "diff_hunk" : "@@ -2300,11 +2303,16 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;\n         fBound |= Bind(CService(inaddr6_any, GetListenPort()), BF_NONE, NetPermissionFlags::PF_NONE);\n         fBound |= Bind(CService(inaddr_any, GetListenPort()), !fBound ? BF_REPORT_ERROR : BF_NONE, NetPermissionFlags::PF_NONE);\n     }\n+\n+    if (m_listen_onion) {\n+        fBound |= Bind(onion_bind, BF_EXPLICIT, NetPermissionFlags::PF_NONE);\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496881834",
      "id" : 496881834,
      "in_reply_to_id" : 494961073,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg4MTgzNA==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 2342,
      "original_position" : 25,
      "original_start_line" : 2312,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 498677538,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496881834",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496882119"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496882119"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-700831638).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T16:36:07Z",
      "diff_hunk" : "@@ -2300,11 +2303,16 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;\n         fBound |= Bind(CService(inaddr6_any, GetListenPort()), BF_NONE, NetPermissionFlags::PF_NONE);\n         fBound |= Bind(CService(inaddr_any, GetListenPort()), !fBound ? BF_REPORT_ERROR : BF_NONE, NetPermissionFlags::PF_NONE);\n     }\n+\n+    if (m_listen_onion) {\n+        fBound |= Bind(onion_bind, BF_EXPLICIT, NetPermissionFlags::PF_NONE);\n+    }\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496882119",
      "id" : 496882119,
      "in_reply_to_id" : 494967703,
      "line" : 2343,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg4MjExOQ==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 2343,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 57,
      "pull_request_review_id" : 498677909,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496882119",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496882465"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496882465"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-700831638).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-29T16:36:41Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ void SetupServerArgs(NodeContext& node)\n     argsman.AddArg(\"-addnode=<ip>\", \"Add a node to connect to and attempt to keep the connection open (see the `addnode` RPC command help for more info). This option can be specified multiple times to add multiple nodes.\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-asmap=<file>\", strprintf(\"Specify asn mapping used for bucketing of the peers (default: %s). Relative paths will be prefixed by the net-specific datadir location.\", DEFAULT_ASMAP_FILENAME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n     argsman.AddArg(\"-bantime=<n>\", strprintf(\"Default duration (in seconds) of manually configured bans (default: %u)\", DEFAULT_MISBEHAVING_BANTIME), ArgsManager::ALLOW_ANY, OptionsCategory::CONNECTION);\n-    argsman.AddArg(\"-bind=<addr>\", \"Bind to given address and always listen on it. Use [host]:port notation for IPv6\", ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);\n+    argsman.AddArg(\"-bind=<addr>\", strprintf(\"Bind to given address and always listen on it. Use [host]:port notation for IPv6. Use =onion suffix to bind onion service target socket (default: 127.0.0.1:%u=onion, testnet: 127.0.0.1:%u=onion, regtest: 127.0.0.1:%u=onion)\", defaultBaseParams->OnionServiceTargetPort(), testnetBaseParams->OnionServiceTargetPort(), regtestBaseParams->OnionServiceTargetPort()), ArgsManager::ALLOW_ANY | ArgsManager::NETWORK_ONLY, OptionsCategory::CONNECTION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r496882465",
      "id" : 496882465,
      "in_reply_to_id" : 494935024,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg4MjQ2NQ==",
      "original_commit_id" : "cfa17e307adaec81f6036cf4f124d78f9e128c30",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 498678380,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/496882465",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r497391823"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497391823"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I really hope we can avoid introducing this circular dependency.\r\n\r\nLooks like this is due to only one line: `onion_binds.push_back(DefaultOnionServiceTarget());`\r\nlet just pass this value in.\r\n",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-30T10:03:31Z",
      "diff_hunk" : "@@ -20,6 +20,7 @@\n #include <protocol.h>\n #include <random.h>\n #include <scheduler.h>\n+#include <torcontrol.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r497391823",
      "id" : 497391823,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzM5MTgyMw==",
      "original_commit_id" : "30f2355d96bf67a30a06c1fcf6d27d242b05491b",
      "original_line" : 23,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 499274180,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497391823",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated 30f2355d96bf67a30a06c1fcf6d27d242b05491b -> 3c24f75d4ce7d3ce1e30d334ea30873a15633e46 ([pr19991.09](https://github.com/hebasto/bitcoin/commits/pr19991.09) -> [pr19991.10](https://github.com/hebasto/bitcoin/commits/pr19991.10), [diff](https://github.com/hebasto/bitcoin/compare/pr19991.09..pr19991.10)):\r\n\r\n- addressed @laanwj's [comment](https://github.com/bitcoin/bitcoin/pull/19991#discussion_r497391823):\r\n> I really hope we can avoid introducing this circular dependency.",
      "created_at" : "2020-09-30T13:34:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-701394030",
      "id" : 701394030,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMTM5NDAzMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-30T13:34:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701394030",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r497513349"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497513349"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-701394030).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-09-30T13:34:25Z",
      "diff_hunk" : "@@ -20,6 +20,7 @@\n #include <protocol.h>\n #include <random.h>\n #include <scheduler.h>\n+#include <torcontrol.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r497513349",
      "id" : 497513349,
      "in_reply_to_id" : 497391823,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzUxMzM0OQ==",
      "original_commit_id" : "30f2355d96bf67a30a06c1fcf6d27d242b05491b",
      "original_line" : 23,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 499435398,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/497513349",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for addressing my comment. \r\n\r\nRe-ACK 3c24f75d4ce7d3ce1e30d334ea30873a15633e46",
      "created_at" : "2020-09-30T13:40:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-701397910",
      "id" : 701397910,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMTM5NzkxMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-30T13:40:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701397910",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "~Updated 3c24f75d4ce7d3ce1e30d334ea30873a15633e46 -> acba1851ef78d88c2442813174c2b559047b61e8 ([pr19991.10](https://github.com/hebasto/bitcoin/commits/pr19991.10) -> [pr19991.11](https://github.com/hebasto/bitcoin/commits/pr19991.11), [diff](https://github.com/hebasto/bitcoin/compare/pr19991.10..pr19991.11)):~\r\n\r\n- ~type of `Options.onion_binds` switched from `std::vector` to `std::set` that is more appropriate, and makes the following #19998 easier.~\r\n\r\nUPDATE: reverted back, sorry.",
      "created_at" : "2020-09-30T17:19:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-701528729",
      "id" : 701528729,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMTUyODcyOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-30T18:10:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/701528729",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498274458"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498274458"
         }
      },
      "author_association" : "MEMBER",
      "body" : "These flags would benefit from some documentation.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-01T14:10:25Z",
      "diff_hunk" : "@@ -84,6 +84,7 @@ enum BindFlags {\n     BF_NONE         = 0,\n     BF_EXPLICIT     = (1U << 0),\n     BF_REPORT_ERROR = (1U << 1),\n+    BF_DONT_ADVERTISE = (1U << 2),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498274458",
      "id" : 498274458,
      "line" : 91,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODI3NDQ1OA==",
      "original_commit_id" : "ffa19a6eb8f9b6c4af2937282bbe0ca9c96d95d0",
      "original_line" : 91,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 8,
      "pull_request_review_id" : 500388184,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498274458",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498306575"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498306575"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: `!(a & b)` is the same as `(a & b) == 0`, use just either one for consistency, not both.",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-01T14:52:03Z",
      "diff_hunk" : "@@ -2308,10 +2305,18 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         }\n         return false;\n     }\n+\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && (permissions & PF_NOBAN) == 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498306575",
      "id" : 498306575,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODMwNjU3NQ==",
      "original_commit_id" : "3c24f75d4ce7d3ce1e30d334ea30873a15633e46",
      "original_line" : 2309,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 500431768,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498306575",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498307586"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498307586"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit:\r\n\r\n```suggestion\r\n            InitWarning(strprintf(_(\"More than one onion bind address is provided. Using %s for the automatically created hidden service.\"), bind_addr.ToStringIPPort()));\r\n```",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-01T14:53:21Z",
      "diff_hunk" : "@@ -1940,13 +1937,39 @@ bool AppInitMain(const util::Ref& context, NodeContext& node, interfaces::BlockA\n     connOptions.nMaxOutboundLimit = nMaxOutboundLimit;\n     connOptions.m_peer_connect_timeout = peer_connect_timeout;\n \n-    for (const std::string& strBind : args.GetArgs(\"-bind\")) {\n-        CService addrBind;\n-        if (!Lookup(strBind, addrBind, GetListenPort(), false)) {\n-            return InitError(ResolveErrMsg(\"bind\", strBind));\n+    for (const std::string& bind_arg : args.GetArgs(\"-bind\")) {\n+        CService bind_addr;\n+        const size_t index = bind_arg.rfind('=');\n+        if (index == std::string::npos) {\n+            if (Lookup(bind_arg, bind_addr, GetListenPort(), false)) {\n+                connOptions.vBinds.push_back(bind_addr);\n+                continue;\n+            }\n+        } else {\n+            const std::string network_type = bind_arg.substr(index + 1);\n+            if (network_type == \"onion\") {\n+                const std::string truncated_bind_arg = bind_arg.substr(0, index);\n+                if (Lookup(truncated_bind_arg, bind_addr, BaseParams().OnionServiceTargetPort(), false)) {\n+                    connOptions.onion_binds.push_back(bind_addr);\n+                    continue;\n+                }\n+            }\n         }\n-        connOptions.vBinds.push_back(addrBind);\n+        return InitError(ResolveErrMsg(\"bind\", bind_arg));\n     }\n+\n+    if (connOptions.onion_binds.empty()) {\n+        connOptions.onion_binds.push_back(DefaultOnionServiceTarget());\n+    }\n+\n+    if (args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION)) {\n+        const auto bind_addr = connOptions.onion_binds.front();\n+        if (connOptions.onion_binds.size() > 1) {\n+            InitWarning(strprintf(_(\"More than one bind address is provided for automatic Tor onion service. Using %s\"), bind_addr.ToStringIPPort()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498307586",
      "id" : 498307586,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODMwNzU4Ng==",
      "original_commit_id" : "3c24f75d4ce7d3ce1e30d334ea30873a15633e46",
      "original_line" : 1968,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 500431768,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498307586",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498311386"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498311386"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Maybe change the `onion_binds` argument to `const` reference?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-01T14:58:15Z",
      "diff_hunk" : "@@ -2308,10 +2305,18 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         }\n         return false;\n     }\n+\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && (permissions & PF_NOBAN) == 0) {\n+        AddLocal(addr, LOCAL_BIND);\n+    }\n+\n     return true;\n }\n \n-bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<NetWhitebindPermissions>& whiteBinds)\n+bool CConnman::InitBinds(\n+    const std::vector<CService>& binds,\n+    const std::vector<NetWhitebindPermissions>& whiteBinds,\n+    std::vector<CService> onion_binds)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498311386",
      "id" : 498311386,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODMxMTM4Ng==",
      "original_commit_id" : "3c24f75d4ce7d3ce1e30d334ea30873a15633e46",
      "original_line" : 2319,
      "original_position" : 35,
      "original_start_line" : 2316,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 500431768,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498311386",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Will try to propose some test coverage and review asap.",
      "created_at" : "2020-10-01T14:59:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702195142",
      "id" : 702195142,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjE5NTE0Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T14:59:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702195142",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498314755"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498314755"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Is this change still needed after recent mods to this PR? If \"yes\", then why is it needed?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-01T15:02:46Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ def get_bin_from_version(version, bin_name, bin_default):\n         if self.bind_to_localhost_only:\n             extra_confs = [[\"bind=127.0.0.1\"]] * num_nodes\n         else:\n-            extra_confs = [[]] * num_nodes\n+            extra_confs = [[\"listenonion=0\"]] * num_nodes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498314755",
      "id" : 498314755,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODMxNDc1NQ==",
      "original_commit_id" : "3c24f75d4ce7d3ce1e30d334ea30873a15633e46",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : 439,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : null,
      "pull_request_review_id" : 500431768,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "updated_at" : "2020-10-01T16:26:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498314755",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated 3c24f75d4ce7d3ce1e30d334ea30873a15633e46 -> 96571b3d4cb4cda0fd3d5a457ae4a12f615de82b ([pr19991.10](https://github.com/hebasto/bitcoin/commits/pr19991.10) -> [pr19991.12](https://github.com/hebasto/bitcoin/commits/pr19991.12), [diff](https://github.com/hebasto/bitcoin/compare/pr19991.10..pr19991.12)):\r\n\r\n- addressed all recent @Sjors' and @vasild's comments",
      "created_at" : "2020-10-01T16:30:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702253099",
      "id" : 702253099,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjI1MzA5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T16:33:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702253099",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498374300"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498374300"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702253099).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-01T16:30:52Z",
      "diff_hunk" : "@@ -84,6 +84,7 @@ enum BindFlags {\n     BF_NONE         = 0,\n     BF_EXPLICIT     = (1U << 0),\n     BF_REPORT_ERROR = (1U << 1),\n+    BF_DONT_ADVERTISE = (1U << 2),",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498374300",
      "id" : 498374300,
      "in_reply_to_id" : 498274458,
      "line" : 91,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM3NDMwMA==",
      "original_commit_id" : "ffa19a6eb8f9b6c4af2937282bbe0ca9c96d95d0",
      "original_line" : 91,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 8,
      "pull_request_review_id" : 500523929,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:30:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498374300",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498374763"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498374763"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702253099).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-01T16:31:43Z",
      "diff_hunk" : "@@ -2308,10 +2305,18 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         }\n         return false;\n     }\n+\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && (permissions & PF_NOBAN) == 0) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498374763",
      "id" : 498374763,
      "in_reply_to_id" : 498306575,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM3NDc2Mw==",
      "original_commit_id" : "3c24f75d4ce7d3ce1e30d334ea30873a15633e46",
      "original_line" : 2309,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 500524636,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:31:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498374763",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498374890"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498374890"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702253099).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-01T16:31:54Z",
      "diff_hunk" : "@@ -1940,13 +1937,39 @@ bool AppInitMain(const util::Ref& context, NodeContext& node, interfaces::BlockA\n     connOptions.nMaxOutboundLimit = nMaxOutboundLimit;\n     connOptions.m_peer_connect_timeout = peer_connect_timeout;\n \n-    for (const std::string& strBind : args.GetArgs(\"-bind\")) {\n-        CService addrBind;\n-        if (!Lookup(strBind, addrBind, GetListenPort(), false)) {\n-            return InitError(ResolveErrMsg(\"bind\", strBind));\n+    for (const std::string& bind_arg : args.GetArgs(\"-bind\")) {\n+        CService bind_addr;\n+        const size_t index = bind_arg.rfind('=');\n+        if (index == std::string::npos) {\n+            if (Lookup(bind_arg, bind_addr, GetListenPort(), false)) {\n+                connOptions.vBinds.push_back(bind_addr);\n+                continue;\n+            }\n+        } else {\n+            const std::string network_type = bind_arg.substr(index + 1);\n+            if (network_type == \"onion\") {\n+                const std::string truncated_bind_arg = bind_arg.substr(0, index);\n+                if (Lookup(truncated_bind_arg, bind_addr, BaseParams().OnionServiceTargetPort(), false)) {\n+                    connOptions.onion_binds.push_back(bind_addr);\n+                    continue;\n+                }\n+            }\n         }\n-        connOptions.vBinds.push_back(addrBind);\n+        return InitError(ResolveErrMsg(\"bind\", bind_arg));\n     }\n+\n+    if (connOptions.onion_binds.empty()) {\n+        connOptions.onion_binds.push_back(DefaultOnionServiceTarget());\n+    }\n+\n+    if (args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION)) {\n+        const auto bind_addr = connOptions.onion_binds.front();\n+        if (connOptions.onion_binds.size() > 1) {\n+            InitWarning(strprintf(_(\"More than one bind address is provided for automatic Tor onion service. Using %s\"), bind_addr.ToStringIPPort()));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498374890",
      "id" : 498374890,
      "in_reply_to_id" : 498307586,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM3NDg5MA==",
      "original_commit_id" : "3c24f75d4ce7d3ce1e30d334ea30873a15633e46",
      "original_line" : 1968,
      "original_position" : 56,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 500524794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-01T16:31:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498374890",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498374964"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498374964"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702253099).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-01T16:32:05Z",
      "diff_hunk" : "@@ -2308,10 +2305,18 @@ bool CConnman::Bind(const CService &addr, unsigned int flags, NetPermissionFlags\n         }\n         return false;\n     }\n+\n+    if (addr.IsRoutable() && fDiscover && !(flags & BF_DONT_ADVERTISE) && (permissions & PF_NOBAN) == 0) {\n+        AddLocal(addr, LOCAL_BIND);\n+    }\n+\n     return true;\n }\n \n-bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<NetWhitebindPermissions>& whiteBinds)\n+bool CConnman::InitBinds(\n+    const std::vector<CService>& binds,\n+    const std::vector<NetWhitebindPermissions>& whiteBinds,\n+    std::vector<CService> onion_binds)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498374964",
      "id" : 498374964,
      "in_reply_to_id" : 498311386,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM3NDk2NA==",
      "original_commit_id" : "3c24f75d4ce7d3ce1e30d334ea30873a15633e46",
      "original_line" : 2319,
      "original_position" : 35,
      "original_start_line" : 2316,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 500524914,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2020-10-01T16:32:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498374964",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498375133"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498375133"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks! [Updated](https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702253099).",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-01T16:32:26Z",
      "diff_hunk" : "@@ -436,7 +436,7 @@ def get_bin_from_version(version, bin_name, bin_default):\n         if self.bind_to_localhost_only:\n             extra_confs = [[\"bind=127.0.0.1\"]] * num_nodes\n         else:\n-            extra_confs = [[]] * num_nodes\n+            extra_confs = [[\"listenonion=0\"]] * num_nodes",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498375133",
      "id" : 498375133,
      "in_reply_to_id" : 498314755,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM3NTEzMw==",
      "original_commit_id" : "3c24f75d4ce7d3ce1e30d334ea30873a15633e46",
      "original_line" : 439,
      "original_position" : 5,
      "original_start_line" : 439,
      "path" : "test/functional/test_framework/test_framework.py",
      "position" : null,
      "pull_request_review_id" : 500525202,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "updated_at" : "2020-10-01T16:32:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498375133",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-utACK 96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-01T17:55:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702300231",
      "id" : 702300231,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjMwMDIzMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T17:55:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702300231",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj Assign [0.21.0](https://github.com/bitcoin/bitcoin/milestone/45) milestone?",
      "created_at" : "2020-10-01T19:43:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702357481",
      "id" : 702357481,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjM1NzQ4MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-01T19:43:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702357481",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498721063"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498721063"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: maybe `BF_REPORT_ERROR` should be here too, like with `binds` and `whiteBinds`?",
      "commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-02T09:42:56Z",
      "diff_hunk" : "@@ -2322,11 +2331,16 @@ bool CConnman::InitBinds(const std::vector<CService>& binds, const std::vector<N\n     }\n     if (binds.empty() && whiteBinds.empty()) {\n         struct in_addr inaddr_any;\n-        inaddr_any.s_addr = INADDR_ANY;\n+        inaddr_any.s_addr = htonl(INADDR_ANY);\n         struct in6_addr inaddr6_any = IN6ADDR_ANY_INIT;\n         fBound |= Bind(CService(inaddr6_any, GetListenPort()), BF_NONE, NetPermissionFlags::PF_NONE);\n         fBound |= Bind(CService(inaddr_any, GetListenPort()), !fBound ? BF_REPORT_ERROR : BF_NONE, NetPermissionFlags::PF_NONE);\n     }\n+\n+    for (const auto& addr_bind : onion_binds) {\n+        fBound |= Bind(addr_bind, BF_EXPLICIT | BF_DONT_ADVERTISE, NetPermissionFlags::PF_NONE);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#discussion_r498721063",
      "id" : 498721063,
      "line" : 2341,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODcyMTA2Mw==",
      "original_commit_id" : "96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "original_line" : 2341,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 55,
      "pull_request_review_id" : 500997150,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19991",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-10-02T09:47:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/498721063",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild Thanks for your review and suggestion! It seems your patch introduces a new circular dependency. Could we leave improvements for follow ups wrt coming feature freeze deadline?",
      "created_at" : "2020-10-02T09:52:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702636108",
      "id" : 702636108,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjYzNjEwOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T09:52:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702636108",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I am ok with 96571b3 (ACK-ed above). Feel free to ignore the idea or postpone it.",
      "created_at" : "2020-10-02T10:36:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702657464",
      "id" : 702657464,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjY1NzQ2NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T10:36:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702657464",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Re-ACK 96571b3d4cb4cda0fd3d5a457ae4a12f615de82b",
      "created_at" : "2020-10-02T11:37:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702684104",
      "id" : 702684104,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjY4NDEwNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T11:37:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702684104",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@hebasto I am writing test coverage, are you open to bringing it into this PR or do you consider it a follow-up?",
      "created_at" : "2020-10-02T11:40:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702685460",
      "id" : 702685460,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjY4NTQ2MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T11:40:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702685460",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Oops, sorry.",
      "created_at" : "2020-10-02T11:40:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702685612",
      "id" : 702685612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjY4NTYxMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T11:40:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702685612",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonatack Though it would have been nice to include more testing here, let's leave that for a follow-up PR. this is a good self-contained change, and now we can move on to the other PRs based on it.",
      "created_at" : "2020-10-02T11:42:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702686420",
      "id" : 702686420,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjY4NjQyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T11:42:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702686420",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok. I asked because it's difficult to get follow-up test coverage reviewed and merged on its own, I already have a few PRs open like that which I'll probably close.",
      "created_at" : "2020-10-02T11:51:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-702690380",
      "id" : 702690380,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMjY5MDM4MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T11:51:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/702690380",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@hebasto Hello, I ended up here to find reasons why my node (`bitcoind` v0.21.1) is listening on port 8334 even when `listenonion=0` is set. Reading the discussion in this PR, it is not clear to me if this was intended or not.\r\n\r\n> @vasild\r\n> \r\n...\r\n> > ### With this PR\r\n> > \r\n> > * If no `-bind` is given then we will bind on `0.0.0.0:8333`, `[::]:8333` and `127.0.0.1:8334`.\r\n> > * If `-bind=1.2.3.4:8333` is given then we will bind on `1.2.3.4:8333` and on `127.0.0.1:8334` (is this ok?).\r\n> > * If `-bind=1.2.3.4:8333 -bind=1.2.3.4:8334=onion` is given then we will bind on `1.2.3.4:8333` and `1.2.3.4:8334`.\r\n> \r\n> The node will not bind on `127.0.0.1:8334` if non-default `listenonion=0` is provided.\r\n\r\nWhy is the `onion_binds.push_back` not placed inside the `if (args.GetBoolArg(\"-listenonion\", DEFAULT_LISTEN_ONION))`?\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/2b5563bb1e6819bf46f561d94213d5fb32751359/src/init.cpp#L1725-L1740",
      "created_at" : "2021-07-25T07:21:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19991#issuecomment-886159283",
      "id" : 886159283,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19991",
      "node_id" : "IC_kwDOABII58400bez",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-25T07:24:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/886159283",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3152756?v=4",
         "events_url" : "https://api.github.com/users/SimonVrouwe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/SimonVrouwe/followers",
         "following_url" : "https://api.github.com/users/SimonVrouwe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/SimonVrouwe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/SimonVrouwe",
         "id" : 3152756,
         "login" : "SimonVrouwe",
         "node_id" : "MDQ6VXNlcjMxNTI3NTY=",
         "organizations_url" : "https://api.github.com/users/SimonVrouwe/orgs",
         "received_events_url" : "https://api.github.com/users/SimonVrouwe/received_events",
         "repos_url" : "https://api.github.com/users/SimonVrouwe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/SimonVrouwe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/SimonVrouwe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/SimonVrouwe"
      }
   }
]
