[
   {
      "author_association" : "MEMBER",
      "body" : "Note that Bitcoin Core does implement the combiner role as `combinepsbt`. This PR is adding `COMBINER` to `analyzepsbt`.\r\n\r\nI'm not sure that combiner is something that should be added to `analyzepsbt`. Everything that can be parallelized and thus involves combiner can also be done serially without combiner. You can't know whether the user is doing a parallel process or a serial process.",
      "created_at" : "2020-09-07T16:06:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19907#issuecomment-688413467",
      "id" : 688413467,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19907",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4ODQxMzQ2Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-07T16:06:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688413467",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept NACK\r\n\r\nAs @achow101 points out, this is only adding `COMBINER` to `analyzepsbt` which doesn't make sense imo. It's impossible to know if the user just needs to sign again or combine. Having `COMBINE` could be confusing to users if they are in the processing of signing, whereas having `SIGNER` is clear that signing still needs to take place.\r\n\r\nMaybe just an addition to `need_sig_text` to say that the sigs can come from combining PSBTs would be a better option.",
      "created_at" : "2020-09-07T20:56:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19907#issuecomment-688508564",
      "id" : 688508564,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19907",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4ODUwODU2NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-07T20:56:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688508564",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/15256660?v=4",
         "events_url" : "https://api.github.com/users/benthecarman/events{/privacy}",
         "followers_url" : "https://api.github.com/users/benthecarman/followers",
         "following_url" : "https://api.github.com/users/benthecarman/following{/other_user}",
         "gists_url" : "https://api.github.com/users/benthecarman/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/benthecarman",
         "id" : 15256660,
         "login" : "benthecarman",
         "node_id" : "MDQ6VXNlcjE1MjU2NjYw",
         "organizations_url" : "https://api.github.com/users/benthecarman/orgs",
         "received_events_url" : "https://api.github.com/users/benthecarman/received_events",
         "repos_url" : "https://api.github.com/users/benthecarman/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/benthecarman/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/benthecarman/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/benthecarman"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "What about renaming `SIGNER` role into `SIGNER_COMBINER`, if they can't be always distinguished? Because if the combiner role is missed from the code, while mentioned in the docs, it is also confusing (I was confused when I was studying PSBT implementation where it has gone). And, then, we can adjust the message as well.\r\n\r\nAlso, it's not clear to me who to classify the situation where _some_ (but not all) signatures are present? With what you have wrote, this could happen when a user started adding signatures in sequential mode, but has not completed this process, i.e. when (s)he is signer - and also with a parallel process when (s)he is combiner. If this is true, I propose to change the current implementation to match this logic (right now it was that the signer role is detected only when none of the signatures are present, otherwise the user classified as updater, which is incorrect).",
      "created_at" : "2020-09-08T11:39:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19907#issuecomment-688811750",
      "id" : 688811750,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19907",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4ODgxMTc1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-08T11:39:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688811750",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/372034?v=4",
         "events_url" : "https://api.github.com/users/dr-orlovsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dr-orlovsky/followers",
         "following_url" : "https://api.github.com/users/dr-orlovsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dr-orlovsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dr-orlovsky",
         "id" : 372034,
         "login" : "dr-orlovsky",
         "node_id" : "MDQ6VXNlcjM3MjAzNA==",
         "organizations_url" : "https://api.github.com/users/dr-orlovsky/orgs",
         "received_events_url" : "https://api.github.com/users/dr-orlovsky/received_events",
         "repos_url" : "https://api.github.com/users/dr-orlovsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dr-orlovsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dr-orlovsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dr-orlovsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Combiners can also be involved after updating. It is possible to have a PSBT that has been partially updated. In a parallel process, such as PSBT would go to a combiner, then over to signers to be signed. In a serial process, it would go to the next updater. So making a SIGNER_COMBINER role would also be incorrect.",
      "created_at" : "2020-09-08T15:18:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19907#issuecomment-688948483",
      "id" : 688948483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19907",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4ODk0ODQ4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-08T15:18:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/688948483",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ok, but right now if some PSBT has a partial signatures, it is classified as UPDATER, which is also wrong.",
      "created_at" : "2020-09-08T17:35:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19907#issuecomment-689030607",
      "id" : 689030607,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19907",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4OTAzMDYwNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-08T17:35:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/689030607",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/372034?v=4",
         "events_url" : "https://api.github.com/users/dr-orlovsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dr-orlovsky/followers",
         "following_url" : "https://api.github.com/users/dr-orlovsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dr-orlovsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dr-orlovsky",
         "id" : 372034,
         "login" : "dr-orlovsky",
         "node_id" : "MDQ6VXNlcjM3MjAzNA==",
         "organizations_url" : "https://api.github.com/users/dr-orlovsky/orgs",
         "received_events_url" : "https://api.github.com/users/dr-orlovsky/received_events",
         "repos_url" : "https://api.github.com/users/dr-orlovsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dr-orlovsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dr-orlovsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dr-orlovsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Ok, but right now if some PSBT has a partial signatures, it is classified as UPDATER, which is also wrong.\r\n\r\nThat sounds wrong. It should say signer?",
      "created_at" : "2020-09-08T17:42:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19907#issuecomment-689033954",
      "id" : 689033954,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19907",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4OTAzMzk1NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-08T17:42:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/689033954",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Correct me if I am wrong, but I understand the logic of PSBT in the following way: if there at least one signature is present, this is SIGNER or COMBINER. If none, this is UPDATER, and this can't be COMBINER (since when PSBTs are combines, each one of them must have at least one signature).",
      "created_at" : "2020-09-08T20:04:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19907#issuecomment-689106707",
      "id" : 689106707,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19907",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4OTEwNjcwNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-08T20:04:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/689106707",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/372034?v=4",
         "events_url" : "https://api.github.com/users/dr-orlovsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dr-orlovsky/followers",
         "following_url" : "https://api.github.com/users/dr-orlovsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dr-orlovsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dr-orlovsky",
         "id" : 372034,
         "login" : "dr-orlovsky",
         "node_id" : "MDQ6VXNlcjM3MjAzNA==",
         "organizations_url" : "https://api.github.com/users/dr-orlovsky/orgs",
         "received_events_url" : "https://api.github.com/users/dr-orlovsky/received_events",
         "repos_url" : "https://api.github.com/users/dr-orlovsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dr-orlovsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dr-orlovsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dr-orlovsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Combiners can merge more than just signatures. So you could have done the updating done in parallel by multiple participants too, have then merge the results.",
      "created_at" : "2020-09-08T20:06:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19907#issuecomment-689107485",
      "id" : 689107485,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19907",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4OTEwNzQ4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-08T20:06:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/689107485",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I haev force-pushed updated version w/o Combiner role but other potentially required changes",
      "created_at" : "2020-09-08T21:19:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19907#issuecomment-689141967",
      "id" : 689141967,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19907",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4OTE0MTk2Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-08T21:19:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/689141967",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/372034?v=4",
         "events_url" : "https://api.github.com/users/dr-orlovsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dr-orlovsky/followers",
         "following_url" : "https://api.github.com/users/dr-orlovsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dr-orlovsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dr-orlovsky",
         "id" : 372034,
         "login" : "dr-orlovsky",
         "node_id" : "MDQ6VXNlcjM3MjAzNA==",
         "organizations_url" : "https://api.github.com/users/dr-orlovsky/orgs",
         "received_events_url" : "https://api.github.com/users/dr-orlovsky/received_events",
         "repos_url" : "https://api.github.com/users/dr-orlovsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dr-orlovsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dr-orlovsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dr-orlovsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you first demonstrate the bug? The original code looks correct to me.",
      "created_at" : "2020-09-08T21:21:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19907#issuecomment-689142903",
      "id" : 689142903,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19907",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4OTE0MjkwMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-08T21:21:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/689142903",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "You are right, I was confused and thought it checks presence of all signatures, not pubkeys. But now I see that if all pubkeys are present and nothing other then signatures is missed, then it evaluates to Signer, which is correct. Closing now",
      "created_at" : "2020-09-08T23:03:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19907#issuecomment-689181108",
      "id" : 689181108,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19907",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4OTE4MTEwOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-08T23:03:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/689181108",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/372034?v=4",
         "events_url" : "https://api.github.com/users/dr-orlovsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dr-orlovsky/followers",
         "following_url" : "https://api.github.com/users/dr-orlovsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dr-orlovsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dr-orlovsky",
         "id" : 372034,
         "login" : "dr-orlovsky",
         "node_id" : "MDQ6VXNlcjM3MjAzNA==",
         "organizations_url" : "https://api.github.com/users/dr-orlovsky/orgs",
         "received_events_url" : "https://api.github.com/users/dr-orlovsky/received_events",
         "repos_url" : "https://api.github.com/users/dr-orlovsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dr-orlovsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dr-orlovsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dr-orlovsky"
      }
   }
]
