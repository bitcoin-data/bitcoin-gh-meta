[
   {
      "author_association" : "MEMBER",
      "body" : "Pushed another commit to fix a premature throw of \"end of data\" on 64-bit systems, when there is still data.\r\n\r\nUnit test:\r\n\r\n\r\n```diff\r\ndiff --git a/src/test/coins_tests.cpp b/src/test/coins_tests.cpp\r\nindex 922fd8e513..d7a266cf1c 100644\r\n--- a/src/test/coins_tests.cpp\r\n+++ b/src/test/coins_tests.cpp\r\n@@ -534,6 +534,21 @@ BOOST_AUTO_TEST_CASE(ccoins_serialization)\r\n     } catch (const std::ios_base::failure&) {\r\n     }\r\n \r\n+    CDataStream foo{0, 0};\r\n+    auto size{size_t{std::numeric_limits<uint32_t>::max()} + 100};\r\n+    foo.resize(size);\r\n+    BOOST_CHECK_EQUAL(foo.size(), size);\r\n+    foo.ignore(std::numeric_limits<int32_t>::max());\r\n+    size -= std::numeric_limits<int32_t>::max();\r\n+    BOOST_CHECK_EQUAL(foo.size(), size);\r\n+    foo.ignore(std::numeric_limits<int32_t>::max());\r\n+    size -= std::numeric_limits<int32_t>::max();\r\n+    BOOST_CHECK_EQUAL(foo.size(), size);\r\n+    BOOST_CHECK_EQUAL(foo.size(), 101);\r\n+    foo.ignore(7); // Should work fine\r\n+    size -= 7;\r\n+    BOOST_CHECK_EQUAL(foo.size(), size);\r\n+\r\n     // Very large scriptPubKey (3*10^9 bytes) past the end of the stream\r\n     CDataStream tmp(SER_DISK, CLIENT_VERSION);\r\n     uint64_t x = 3000000000ULL;\r\n",
      "created_at" : "2022-02-02T17:19:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24231#issuecomment-1028169066",
      "id" : 1028169066,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24231",
      "node_id" : "IC_kwDOABII5849SJ1q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1028169066/reactions"
      },
      "updated_at" : "2022-02-02T17:19:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1028169066",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "mingw can't compile the bugfix:\r\n\r\n\r\n```\r\nIn file included from /usr/lib/gcc/x86_64-w64-mingw32/9.3-posix/include/c++/cstring:42,\r\n                 from ./serialize.h:13,\r\n                 from ./streams.h:9,\r\n                 from test/streams_tests.cpp:5:\r\nIn function âvoid* memcpy(void*, const void*, size_t)â,\r\n    inlined from âvoid CDataStream::insert(CDataStream::iterator, std::vector<std::byte>::const_iterator, std::vector<std::byte>::const_iterator)â at ./streams.h:256:19,\r\n    inlined from âvoid streams_tests::streams_serializedata_xor::test_method()â at test/streams_tests.cpp:181:14:\r\n/usr/share/mingw-w64/include/string.h:202:32: error: âvoid* __builtin_memcpy(void*, const void*, long long unsigned int)â specified size between 9223372036854775808 and 18446744073709551615 exceeds maximum object size 9223372036854775807 [-Werror=stringop-overflow=]\r\n  202 |   return __builtin___memcpy_chk(__dst, __src, __n, __mingw_bos(__dst, 0));\r\n      |          ~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nIn function âvoid* memcpy(void*, const void*, size_t)â,\r\n    inlined from âvoid CDataStream::insert(CDataStream::iterator, std::vector<std::byte>::const_iterator, std::vector<std::byte>::const_iterator)â at ./streams.h:256:19,\r\n    inlined from âvoid streams_tests::streams_serializedata_xor::test_method()â at test/streams_tests.cpp:198:14:\r\n/usr/share/mingw-w64/include/string.h:202:32: error: âvoid* __builtin_memcpy(void*, const void*, long long unsigned int)â specified size between 9223372036854775808 and 18446744073709551615 exceeds maximum object size 9223372036854775807 [-Werror=stringop-overflow=]\r\n  202 |   return __builtin___memcpy_chk(__dst, __src, __n, __mingw_bos(__dst, 0));\r\n      |          ~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\ncc1plus: all warnings being treated as errors\r\nmake[2]: *** [Makefile:16816: test/test_bitcoin-streams_tests.o] Error 1",
      "created_at" : "2022-02-03T18:39:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24231#issuecomment-1029286985",
      "id" : 1029286985,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24231",
      "node_id" : "IC_kwDOABII5849WaxJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1029286985/reactions"
      },
      "updated_at" : "2022-02-03T18:39:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1029286985",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24253](https://github.com/bitcoin/bitcoin/pull/24253) (Remove broken and unused CDataStream methods by MarcoFalke)\n* [#14485](https://github.com/bitcoin/bitcoin/pull/14485) (Try to use posix_fadvise with CBufferedFile by luke-jr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-02-04T04:31:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24231#issuecomment-1029624629",
      "id" : 1029624629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24231",
      "node_id" : "IC_kwDOABII5849XtM1",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1029624629/reactions"
      },
      "updated_at" : "2022-02-06T10:29:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1029624629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24231#discussion_r800104114"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24231"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800104114"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Won't this truncate `num_ignore` to 32-bits before checking for overflows?",
      "commit_id" : "fa65d44149160c9d3ec17e80817f28e2bf0d429b",
      "created_at" : "2022-02-05T21:57:10Z",
      "diff_hunk" : "@@ -348,36 +349,32 @@ class CDataStream\n         if (dst.size() == 0) return;\n \n         // Read from the beginning of the buffer\n-        unsigned int nReadPosNext = nReadPos + dst.size();\n-        if (nReadPosNext > vch.size()) {\n+        auto next_read_pos{CheckedAdd<uint32_t>(nReadPos, dst.size())};\n+        if (!next_read_pos.has_value() || next_read_pos.value() > vch.size()) {\n             throw std::ios_base::failure(\"CDataStream::read(): end of data\");\n         }\n         memcpy(dst.data(), &vch[nReadPos], dst.size());\n-        if (nReadPosNext == vch.size())\n-        {\n+        if (next_read_pos.value() == vch.size()) {\n             nReadPos = 0;\n             vch.clear();\n             return;\n         }\n-        nReadPos = nReadPosNext;\n+        nReadPos = next_read_pos.value();\n     }\n \n-    void ignore(int nSize)\n+    void ignore(size_t num_ignore)\n     {\n         // Ignore from the beginning of the buffer\n-        if (nSize < 0) {\n-            throw std::ios_base::failure(\"CDataStream::ignore(): nSize negative\");\n+        auto next_read_pos{CheckedAdd<uint32_t>(nReadPos, num_ignore)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24231#discussion_r800104114",
      "id" : 800104114,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vsJ6y",
      "original_commit_id" : "fa0af11b2e6a99374f13fadb93486a7b3fe016ae",
      "original_line" : 368,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/streams.h",
      "position" : 36,
      "pull_request_review_id" : 873973228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24231",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800104114/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-05T22:01:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800104114",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24231#discussion_r800154218"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24231"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800154218"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes, but this is already done on current master. The second commit fixes this.",
      "commit_id" : "fa65d44149160c9d3ec17e80817f28e2bf0d429b",
      "created_at" : "2022-02-06T09:46:23Z",
      "diff_hunk" : "@@ -348,36 +349,32 @@ class CDataStream\n         if (dst.size() == 0) return;\n \n         // Read from the beginning of the buffer\n-        unsigned int nReadPosNext = nReadPos + dst.size();\n-        if (nReadPosNext > vch.size()) {\n+        auto next_read_pos{CheckedAdd<uint32_t>(nReadPos, dst.size())};\n+        if (!next_read_pos.has_value() || next_read_pos.value() > vch.size()) {\n             throw std::ios_base::failure(\"CDataStream::read(): end of data\");\n         }\n         memcpy(dst.data(), &vch[nReadPos], dst.size());\n-        if (nReadPosNext == vch.size())\n-        {\n+        if (next_read_pos.value() == vch.size()) {\n             nReadPos = 0;\n             vch.clear();\n             return;\n         }\n-        nReadPos = nReadPosNext;\n+        nReadPos = next_read_pos.value();\n     }\n \n-    void ignore(int nSize)\n+    void ignore(size_t num_ignore)\n     {\n         // Ignore from the beginning of the buffer\n-        if (nSize < 0) {\n-            throw std::ios_base::failure(\"CDataStream::ignore(): nSize negative\");\n+        auto next_read_pos{CheckedAdd<uint32_t>(nReadPos, num_ignore)};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24231#discussion_r800154218",
      "id" : 800154218,
      "in_reply_to_id" : 800104114,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vsWJq",
      "original_commit_id" : "fa0af11b2e6a99374f13fadb93486a7b3fe016ae",
      "original_line" : 368,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/streams.h",
      "position" : 36,
      "pull_request_review_id" : 874016116,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24231",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800154218/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-06T09:46:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800154218",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Please review https://github.com/bitcoin/bitcoin/pull/24253 first, while this stays in draft. (Can't be merged because mingw bug)",
      "created_at" : "2022-02-07T08:09:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24231#issuecomment-1031179638",
      "id" : 1031179638,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24231",
      "node_id" : "IC_kwDOABII5849do12",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1031179638/reactions"
      },
      "updated_at" : "2022-02-07T08:09:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1031179638",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Could just disable the -Werror affected, but I guess #24253 is fine too...",
      "created_at" : "2022-02-07T18:17:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24231#issuecomment-1031771827",
      "id" : 1031771827,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24231",
      "node_id" : "IC_kwDOABII5849f5az",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1031771827/reactions"
      },
      "updated_at" : "2022-02-07T18:17:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1031771827",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased. Should be trivial to re-ACK.",
      "created_at" : "2022-02-09T16:33:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24231#issuecomment-1033956040",
      "id" : 1033956040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24231",
      "node_id" : "IC_kwDOABII5849oOrI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1033956040/reactions"
      },
      "updated_at" : "2022-02-09T16:33:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1033956040",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Code Review ACK fa1b89a6bdbab50bdb0504782afd4bb3375d1b57:\r\n* Verified that `CheckedAdd` is used to prevent overflow in `read` and `ignore`\r\n* Verified that the test in https://github.com/bitcoin/bitcoin/pull/24231#issuecomment-1028169066 passed on my local machine\r\n* Verified that an exception is thrown when there is an overflow with the following ad hoc test:\r\n  ```diff\r\n  diff --git a/src/test/coins_tests.cpp b/src/test/coins_tests.cpp\r\n  index 82e4e1c90f..07758799f8 100644\r\n  --- a/src/test/coins_tests.cpp\r\n  +++ b/src/test/coins_tests.cpp\r\n  @@ -534,6 +534,21 @@ \r\n  BOOST_AUTO_TEST_CASE(ccoins_serialization)\r\n       } catch (const std::ios_base::failure&) {\r\n       }\r\n \r\n  +    try {\r\n  +      std::byte write_bytes[100] =  {std::byte{0x3F}};\r\n  +      std::byte read_bytes[100] = {std::byte{0x0}};\r\n  +      CDataStream foo{0, 0};\r\n  +      auto size{100};\r\n  +      foo.resize(size);\r\n  +      foo.write({write_bytes, write_bytes + 99});\r\n  +      foo.read(read_bytes);\r\n  +      foo.ignore(std::numeric_limits<uint64_t>::max());\r\n  +      BOOST_CHECK_MESSAGE(false, \"We should have thrown\");\r\n  +    } catch (const std::ios_base::failure& f) {\r\n  +      std::string err(f.what());\r\n  +      BOOST_CHECK_EQUAL(err, \"CDataStream::ignore(): end of \r\n    data: unspecified iostream_category error\");\r\n  +    }\r\n  +\r\n       // Very large scriptPubKey (3*10^9 bytes) past the end of the \r\n  stream\r\n       CDataStream tmp(SER_DISK, CLIENT_VERSION);\r\n       uint64_t x = 3000000000ULL;\r\n  ```",
      "created_at" : "2022-02-10T14:53:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24231#issuecomment-1035013964",
      "id" : 1035013964,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24231",
      "node_id" : "IC_kwDOABII5849sQ9M",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1035013964/reactions"
      },
      "updated_at" : "2022-02-10T14:56:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1035013964",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/49265907?v=4",
         "events_url" : "https://api.github.com/users/klementtan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/klementtan/followers",
         "following_url" : "https://api.github.com/users/klementtan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/klementtan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/klementtan",
         "id" : 49265907,
         "login" : "klementtan",
         "node_id" : "MDQ6VXNlcjQ5MjY1OTA3",
         "organizations_url" : "https://api.github.com/users/klementtan/orgs",
         "received_events_url" : "https://api.github.com/users/klementtan/received_events",
         "repos_url" : "https://api.github.com/users/klementtan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/klementtan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/klementtan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/klementtan"
      }
   }
]
