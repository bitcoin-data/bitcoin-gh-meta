[
   {
      "author_association" : "NONE",
      "body" : "May I ask why you've added the sub directory `/wallets` ? While `bitcoind` and `bitcoin-cli` now runs fine without `-datadir` option (following my symbolic link), wallets are not found anymore because of that change.\r\n\r\n```\r\n2022-02-05T01:25:45Z Warning: Skipping -wallet path that doesn't exist. Failed to load database path '/home/me/.bitcoin/wallets/watching'. Path does not exist.\r\nWarning: Skipping -wallet path that doesn't exist. Failed to load database path '/home/me/.bitcoin/wallets/watching'. Path does not exist.\r\n```\r\n\r\nNote that the sub directory `/wallets` was properly created\r\n```\r\n~/btc-things/bitcoin$ ll /home/me/.bitcoin/wallets/\r\ntotal 4\r\ndrwxrwxrwx 1 root root    0 Feb  5 10:24 ./\r\ndrwxrwxrwx 1 root root 4096 Feb  5 10:26 ../\r\n```",
      "created_at" : "2022-02-05T01:28:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030489182",
      "id" : 1030489182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849bARe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030489182/reactions"
      },
      "updated_at" : "2022-02-05T01:32:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030489182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9780671?v=4",
         "events_url" : "https://api.github.com/users/nymkappa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nymkappa/followers",
         "following_url" : "https://api.github.com/users/nymkappa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nymkappa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nymkappa",
         "id" : 9780671,
         "login" : "nymkappa",
         "node_id" : "MDQ6VXNlcjk3ODA2NzE=",
         "organizations_url" : "https://api.github.com/users/nymkappa/orgs",
         "received_events_url" : "https://api.github.com/users/nymkappa/received_events",
         "repos_url" : "https://api.github.com/users/nymkappa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nymkappa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nymkappa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nymkappa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "If you create the `/wallets` directory all the time, it will break current setups which don't use it. Now of course I could just move my wallet folder into the `/wallets` sub-directory and it would work fine, but that's probably not the way to go.\r\n\r\nSee here the wallet directory loading logic https://github.com/bitcoin/bitcoin/blob/master/src/wallet/walletutil.cpp#L25",
      "created_at" : "2022-02-05T02:29:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030503427",
      "id" : 1030503427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849bDwD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030503427/reactions"
      },
      "updated_at" : "2022-02-05T05:42:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030503427",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9780671?v=4",
         "events_url" : "https://api.github.com/users/nymkappa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nymkappa/followers",
         "following_url" : "https://api.github.com/users/nymkappa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nymkappa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nymkappa",
         "id" : 9780671,
         "login" : "nymkappa",
         "node_id" : "MDQ6VXNlcjk3ODA2NzE=",
         "organizations_url" : "https://api.github.com/users/nymkappa/orgs",
         "received_events_url" : "https://api.github.com/users/nymkappa/received_events",
         "repos_url" : "https://api.github.com/users/nymkappa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nymkappa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nymkappa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nymkappa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@hebasto How about something like this instead? https://github.com/bitcoin/bitcoin/pull/24267",
      "created_at" : "2022-02-05T03:16:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030511158",
      "id" : 1030511158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849bFo2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030511158/reactions"
      },
      "updated_at" : "2022-02-05T03:23:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030511158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9780671?v=4",
         "events_url" : "https://api.github.com/users/nymkappa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nymkappa/followers",
         "following_url" : "https://api.github.com/users/nymkappa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nymkappa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nymkappa",
         "id" : 9780671,
         "login" : "nymkappa",
         "node_id" : "MDQ6VXNlcjk3ODA2NzE=",
         "organizations_url" : "https://api.github.com/users/nymkappa/orgs",
         "received_events_url" : "https://api.github.com/users/nymkappa/received_events",
         "repos_url" : "https://api.github.com/users/nymkappa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nymkappa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nymkappa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nymkappa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24274](https://github.com/bitcoin/bitcoin/pull/24274) (Introduce GetFileArg and use it where possible by prusnak)\n* [#24265](https://github.com/bitcoin/bitcoin/pull/24265) (Drop StripRedundantLastElementsOfPath() function by hebasto)\n* [#23931](https://github.com/bitcoin/bitcoin/pull/23931) (create bitcoin.conf on first run with template by prayank23)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-02-05T09:00:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030583275",
      "id" : 1030583275,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849bXPr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030583275/reactions"
      },
      "updated_at" : "2022-02-06T10:00:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030583275",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated 94fe141d207999483d54b73a6318cc12fb853b46 -> b9c113af754540341d9529532fbadb7525168102 ([pr24266.01](https://github.com/hebasto/bitcoin/commits/pr24266.01) -> [pr24266.02](https://github.com/hebasto/bitcoin/commits/pr24266.02), [diff](https://github.com/hebasto/bitcoin/compare/pr24266.01..pr24266.02)):\r\n\r\n- addressed @nymkappa's [comment](https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030503427)",
      "created_at" : "2022-02-05T16:40:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030656144",
      "id" : 1030656144,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849bpCQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030656144/reactions"
      },
      "updated_at" : "2022-02-05T16:40:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030656144",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Updated [94fe141](https://github.com/bitcoin/bitcoin/commit/94fe141d207999483d54b73a6318cc12fb853b46) -> [b9c113a](https://github.com/bitcoin/bitcoin/commit/b9c113af754540341d9529532fbadb7525168102) ([pr24266.01](https://github.com/hebasto/bitcoin/commits/pr24266.01) -> [pr24266.02](https://github.com/hebasto/bitcoin/commits/pr24266.02), [diff](https://github.com/hebasto/bitcoin/compare/pr24266.01..pr24266.02)):\r\n> \r\n> * addressed @nymkappa's [comment](https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030503427)\r\n\r\nTested ACK. This fix is superior to https://github.com/bitcoin/bitcoin/pull/24267 as it keeps [pre-20744](https://github.com/bitcoin/bitcoin/commit/c194293883fbb656779102309b2cb3e60889feff) master branch behavior.\r\n\r\nAdditional perk is that it allows to follow symbolik links with a multiple depth levels, for example this works fine with this PR:\r\n```\r\nlrwxrwxrwx 1 me me 27 Feb  6 17:05 /home/me/.bitcoin -> /home/me/.bitcoindatadir/\r\nlrwxrwxrwx 1 me me 31 Feb  6 17:04 /home/me/.bitcoindatadir -> /home/me/Documents/.bitcoin//\r\n```\r\n",
      "created_at" : "2022-02-06T08:08:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1030773742",
      "id" : 1030773742,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849cFvu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030773742/reactions"
      },
      "updated_at" : "2022-02-06T08:08:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030773742",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9780671?v=4",
         "events_url" : "https://api.github.com/users/nymkappa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nymkappa/followers",
         "following_url" : "https://api.github.com/users/nymkappa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nymkappa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nymkappa",
         "id" : 9780671,
         "login" : "nymkappa",
         "node_id" : "MDQ6VXNlcjk3ODA2NzE=",
         "organizations_url" : "https://api.github.com/users/nymkappa/orgs",
         "received_events_url" : "https://api.github.com/users/nymkappa/received_events",
         "repos_url" : "https://api.github.com/users/nymkappa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nymkappa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nymkappa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nymkappa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800155417"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800155417"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why is this comment removed?",
      "commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "created_at" : "2022-02-06T09:56:38Z",
      "diff_hunk" : "@@ -443,14 +443,18 @@ const fs::path& ArgsManager::GetDataDir(bool net_specific) const\n     } else {\n         path = GetDefaultDataDir();\n     }\n-    if (net_specific)\n-        path /= fs::PathFromString(BaseParams().DataDir());\n \n-    if (fs::create_directories(path)) {\n-        // This is the first run, create wallets subdirectory too",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800155417",
      "id" : 800155417,
      "line" : 450,
      "node_id" : "PRRC_kwDOABII584vsWcZ",
      "original_commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "original_line" : 450,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 8,
      "pull_request_review_id" : 874017160,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800155417/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-06T09:56:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800155417",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800156824"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800156824"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Code `if (!fs::exists(path)) { fs::create_directories(path / \"wallets\"); }` expresses the same idea, therefore, the removed comment is redundant.",
      "commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "created_at" : "2022-02-06T10:09:48Z",
      "diff_hunk" : "@@ -443,14 +443,18 @@ const fs::path& ArgsManager::GetDataDir(bool net_specific) const\n     } else {\n         path = GetDefaultDataDir();\n     }\n-    if (net_specific)\n-        path /= fs::PathFromString(BaseParams().DataDir());\n \n-    if (fs::create_directories(path)) {\n-        // This is the first run, create wallets subdirectory too",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800156824",
      "id" : 800156824,
      "in_reply_to_id" : 800155417,
      "line" : 450,
      "node_id" : "PRRC_kwDOABII584vsWyY",
      "original_commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "original_line" : 450,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 8,
      "pull_request_review_id" : 874018408,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800156824/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-06T10:11:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800156824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800852810"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800852810"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: Avoid buggy std::filesystem:::create_directories() call\" (b9c113af754540341d9529532fbadb7525168102)\r\n\r\nCould actually drop this line now. It won't do anything anymore because of the the new `!empty` check added above. But keeping this line is also fine. It's harmless and #24265 removes it anyway.",
      "commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "created_at" : "2022-02-07T16:47:00Z",
      "diff_hunk" : "@@ -443,14 +443,18 @@ const fs::path& ArgsManager::GetDataDir(bool net_specific) const\n     } else {\n         path = GetDefaultDataDir();\n     }\n-    if (net_specific)\n-        path /= fs::PathFromString(BaseParams().DataDir());\n \n-    if (fs::create_directories(path)) {\n-        // This is the first run, create wallets subdirectory too\n+    if (!fs::exists(path)) {\n         fs::create_directories(path / \"wallets\");\n     }\n \n+    if (net_specific && !BaseParams().DataDir().empty()) {\n+        path /= fs::PathFromString(BaseParams().DataDir());\n+        if (!fs::exists(path)) {\n+            fs::create_directories(path / \"wallets\");\n+        }\n+    }\n+\n     path = StripRedundantLastElementsOfPath(path);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800852810",
      "id" : 800852810,
      "line" : 458,
      "node_id" : "PRRC_kwDOABII584vvAtK",
      "original_commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "original_line" : 458,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 20,
      "pull_request_review_id" : 874963447,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800852810/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-07T17:04:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800852810",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800865220"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800865220"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"util: Avoid buggy std::filesystem:::create_directories() call\" (b9c113af754540341d9529532fbadb7525168102)\r\n\r\nThis is a tangent, but it would be nice to avoid creating this wallets directory here in the future. This is done for the backward compatibility, so wallet startup code is able to set `-walletdir=<datadir>` instead of `-walletdir=<datadir>/wallets` later if this directory doesn't exist.\r\n\r\nI think a better approach would be to always use `-walletdir=<datadir>/wallets` and use a `wallets` -> `.` symlink for compatibility instead. On startup, datadir code would not have to create any \"wallets\" subdirectory. Instead wallet startup code would look for a `<datadir>/wallets` directory or symlink and use it if it exists. Otherwise it would call `wallet::ListDatabases(GetDataDir())`, and if the list is empty create the `<datadir>/wallets` directory. If the list is nonempty, create a `<datadir>/wallets` -> `.` symlink.",
      "commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "created_at" : "2022-02-07T16:59:53Z",
      "diff_hunk" : "@@ -443,14 +443,18 @@ const fs::path& ArgsManager::GetDataDir(bool net_specific) const\n     } else {\n         path = GetDefaultDataDir();\n     }\n-    if (net_specific)\n-        path /= fs::PathFromString(BaseParams().DataDir());\n \n-    if (fs::create_directories(path)) {\n-        // This is the first run, create wallets subdirectory too",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800865220",
      "id" : 800865220,
      "in_reply_to_id" : 800155417,
      "line" : 450,
      "node_id" : "PRRC_kwDOABII584vvDvE",
      "original_commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "original_line" : 450,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 8,
      "pull_request_review_id" : 874963447,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800865220/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-07T17:04:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800865220",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800896567"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800896567"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> It's harmless and #24265 removes it anyway.\r\n\r\nExactly :)",
      "commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "created_at" : "2022-02-07T17:33:45Z",
      "diff_hunk" : "@@ -443,14 +443,18 @@ const fs::path& ArgsManager::GetDataDir(bool net_specific) const\n     } else {\n         path = GetDefaultDataDir();\n     }\n-    if (net_specific)\n-        path /= fs::PathFromString(BaseParams().DataDir());\n \n-    if (fs::create_directories(path)) {\n-        // This is the first run, create wallets subdirectory too\n+    if (!fs::exists(path)) {\n         fs::create_directories(path / \"wallets\");\n     }\n \n+    if (net_specific && !BaseParams().DataDir().empty()) {\n+        path /= fs::PathFromString(BaseParams().DataDir());\n+        if (!fs::exists(path)) {\n+            fs::create_directories(path / \"wallets\");\n+        }\n+    }\n+\n     path = StripRedundantLastElementsOfPath(path);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800896567",
      "id" : 800896567,
      "in_reply_to_id" : 800852810,
      "line" : 458,
      "node_id" : "PRRC_kwDOABII584vvLY3",
      "original_commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "original_line" : 458,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 20,
      "pull_request_review_id" : 875024545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800896567/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-07T17:33:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800896567",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800898814"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800898814"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@ryanofsky \r\n\r\nAgree. I was thinking about the same some time back and now. And I think it deserves its own PR, keeping this one focused on a workaround for buggy libc++ preserving the current behavior.",
      "commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "created_at" : "2022-02-07T17:36:24Z",
      "diff_hunk" : "@@ -443,14 +443,18 @@ const fs::path& ArgsManager::GetDataDir(bool net_specific) const\n     } else {\n         path = GetDefaultDataDir();\n     }\n-    if (net_specific)\n-        path /= fs::PathFromString(BaseParams().DataDir());\n \n-    if (fs::create_directories(path)) {\n-        // This is the first run, create wallets subdirectory too",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r800898814",
      "id" : 800898814,
      "in_reply_to_id" : 800155417,
      "line" : 450,
      "node_id" : "PRRC_kwDOABII584vvL7-",
      "original_commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "original_line" : 450,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 8,
      "pull_request_review_id" : 875027724,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800898814/reactions"
      },
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-07T17:36:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/800898814",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r801636174"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801636174"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Looks like this is also adding a new feature?\r\n\r\nPreviously, when a test chain was used on the first run, it wouldn't create the wallets dir in the root datadir (`main`). Now it does?",
      "commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "created_at" : "2022-02-08T13:35:59Z",
      "diff_hunk" : "@@ -443,14 +443,18 @@ const fs::path& ArgsManager::GetDataDir(bool net_specific) const\n     } else {\n         path = GetDefaultDataDir();\n     }\n-    if (net_specific)\n-        path /= fs::PathFromString(BaseParams().DataDir());\n \n-    if (fs::create_directories(path)) {\n-        // This is the first run, create wallets subdirectory too\n+    if (!fs::exists(path)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r801636174",
      "id" : 801636174,
      "line" : 447,
      "node_id" : "PRRC_kwDOABII584vx_9O",
      "original_commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "original_line" : 447,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 9,
      "pull_request_review_id" : 876034319,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801636174/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-08T13:36:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801636174",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r801663092"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801663092"
         }
      },
      "author_association" : "MEMBER",
      "body" : "On master (8afcc89a8f96692dd880b6102c9a85fac18b9021):\r\n```\r\n$ rm -rf ~/.bitcoin\r\n$ ./src/bitcoind -testnet\r\n$ find ~/.bitcoin -type d\r\n/home/hebasto/.bitcoin\r\n/home/hebasto/.bitcoin/wallets\r\n/home/hebasto/.bitcoin/testnet3\r\n/home/hebasto/.bitcoin/testnet3/wallets\r\n/home/hebasto/.bitcoin/testnet3/chainstate\r\n/home/hebasto/.bitcoin/testnet3/blocks\r\n/home/hebasto/.bitcoin/testnet3/blocks/index\r\n```",
      "commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "created_at" : "2022-02-08T14:02:39Z",
      "diff_hunk" : "@@ -443,14 +443,18 @@ const fs::path& ArgsManager::GetDataDir(bool net_specific) const\n     } else {\n         path = GetDefaultDataDir();\n     }\n-    if (net_specific)\n-        path /= fs::PathFromString(BaseParams().DataDir());\n \n-    if (fs::create_directories(path)) {\n-        // This is the first run, create wallets subdirectory too\n+    if (!fs::exists(path)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r801663092",
      "id" : 801663092,
      "in_reply_to_id" : 801636174,
      "line" : 447,
      "node_id" : "PRRC_kwDOABII584vyGh0",
      "original_commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "original_line" : 447,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 9,
      "pull_request_review_id" : 876073488,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801663092/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-08T14:02:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801663092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r801699937"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801699937"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah ok, looks like this is a side effect of reading the config file in the `main` datadir.",
      "commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "created_at" : "2022-02-08T14:37:10Z",
      "diff_hunk" : "@@ -443,14 +443,18 @@ const fs::path& ArgsManager::GetDataDir(bool net_specific) const\n     } else {\n         path = GetDefaultDataDir();\n     }\n-    if (net_specific)\n-        path /= fs::PathFromString(BaseParams().DataDir());\n \n-    if (fs::create_directories(path)) {\n-        // This is the first run, create wallets subdirectory too\n+    if (!fs::exists(path)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#discussion_r801699937",
      "id" : 801699937,
      "in_reply_to_id" : 801636174,
      "line" : 447,
      "node_id" : "PRRC_kwDOABII584vyPhh",
      "original_commit_id" : "b9c113af754540341d9529532fbadb7525168102",
      "original_line" : 447,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/util/system.cpp",
      "position" : 9,
      "pull_request_review_id" : 876128114,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24266",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801699937/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-08T14:37:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/801699937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I presume (way into the future) when the minimum supported gcc version is gcc-12, we can further simplify this:\r\n\r\n```diff\r\ndiff --git a/src/util/system.cpp b/src/util/system.cpp\r\nindex 4ead39dd6c..cee8f01c99 100644\r\n--- a/src/util/system.cpp\r\n+++ b/src/util/system.cpp\r\n@@ -444,15 +444,11 @@ const fs::path& ArgsManager::GetDataDir(bool net_specific) const\r\n         path = GetDefaultDataDir();\r\n     }\r\n \r\n-    if (!fs::exists(path)) {\r\n-        fs::create_directories(path / \"wallets\");\r\n-    }\r\n+    fs::create_directories(path / \"wallets\");\r\n \r\n     if (net_specific && !BaseParams().DataDir().empty()) {\r\n         path /= fs::PathFromString(BaseParams().DataDir());\r\n-        if (!fs::exists(path)) {\r\n-            fs::create_directories(path / \"wallets\");\r\n-        }\r\n+        fs::create_directories(path / \"wallets\");\r\n     }\r\n \r\n     path = StripRedundantLastElementsOfPath(path);\r\n",
      "created_at" : "2022-02-08T14:50:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1032693422",
      "id" : 1032693422,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849jaau",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1032693422/reactions"
      },
      "updated_at" : "2022-02-08T14:50:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1032693422",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I run into a similar issue with the `blocks` directory. I think it would be better to define our own drop in replacement, say, fsbridge::create_directories and use it everywhere that `fs::create_directories` is, not work around this in every single place. \r\n",
      "created_at" : "2022-02-11T14:40:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24266#issuecomment-1036279158",
      "id" : 1036279158,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24266",
      "node_id" : "IC_kwDOABII5849xF12",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036279158/reactions"
      },
      "updated_at" : "2022-02-11T14:40:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036279158",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
