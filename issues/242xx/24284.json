{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "#23306 and #23542 let nodes connect (more often) to other ports than 8333.\r\n\r\n@practicalswift brought up a concern:\r\n\r\n> A third concern (which I think can be addressed: see below) could be that Bitcoin Core users would risk having to deal with bogus complaints along the lines of \"why am I seeing a failed SSH-login to my server on port 22 from your IP-address `w.x.y.z`?\" if we allowed for automatic outgoing connections on _all_ ports by default.\r\n> \r\n> When opening up for additional port numbers we might want to look at how browsers are tackling \"bad ports\":\r\n> \r\n> * [`kRestrictedPorts` in Chromium](https://chromium.googlesource.com/chromium/src.git/+/refs/heads/main/net/base/port_util.cc)\r\n> * [`gBadPortList` in Firefox](https://hg.mozilla.org/mozilla-central/file/tip/netwerk/base/nsIOService.cpp)\r\n> * [Definition of \"bad port\" in whatwg's Fetch standard](https://fetch.spec.whatwg.org/#port-blocking)\r\n> \r\n> Avoiding \"bad ports\" (or a subset of these ports) by default is probably a cheap way to reduce the likelihood of Bitcoin Core users having to deal with these types of bogus complaints.\r\n\r\nThis has been addressed in the second PR, by introducing \"bad ports\" that we don't connect to unless we're running out of other options.\r\n\r\nIn order not to invite a nit-war on that PR, I figured it would be good to discuss the list of ports here, so we can tweak it (now, but also in the more distant future).\r\n\r\nGeneral note from @sipa about expanding the list https://github.com/bitcoin/bitcoin/pull/23542#discussion_r752576326:\r\n\r\n> Adding entries to the list may be undesirable, as it may mean that someone running a node on such a port silently stops getting connections.\r\n\r\n> Not a very serious concern, as this would happen spread over some amount of time anyway, but still a reason I think to err on the side of caution and start with a possibly overly expansive list here\r\n\r\n---\r\n\r\nMy first suggestion would be to add ports 21 (ftp), 80 (http) and 443 (https). These are obviously not considered bad by browsers, but they are most certainly monitored by paranoid system administrators. Some websites are totally off limits for unauthenticated users. And they are heavily logged. \r\n\r\nConversely though, there may be a good reason to have a Bitcoin node listen on port 80, because firewalls won't block it. But we could handle that with special-case connection code, e.g. if we notice all our outbound connection attempts fail, and we've tried nodes from the bad list and those fail too, we specifically look for port 80/443 nodes in our list. We'll need special case code anyway if we ever want to mask our traffic as regular HTTP.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24284/comments",
   "created_at" : "2022-02-07T10:52:33Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24284/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/24284",
   "id" : 1125821425,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24284/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII585DGqvx",
   "number" : 24284,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24284/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24284/timeline",
   "title" : "RFC: bad ports",
   "updated_at" : "2022-02-07T10:54:15Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24284",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
      "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Sjors/followers",
      "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Sjors",
      "id" : 10217,
      "login" : "Sjors",
      "node_id" : "MDQ6VXNlcjEwMjE3",
      "organizations_url" : "https://api.github.com/users/Sjors/orgs",
      "received_events_url" : "https://api.github.com/users/Sjors/received_events",
      "repos_url" : "https://api.github.com/users/Sjors/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Sjors"
   }
}
