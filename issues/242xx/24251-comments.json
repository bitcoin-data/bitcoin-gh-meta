[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24251#discussion_r798723501"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/798723501"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is this going to cause any read or write outside the m_root_path?",
      "commit_id" : "8287489e7c26ecd434bbf07af8e6aa64f41f9bca",
      "created_at" : "2022-02-03T16:07:28Z",
      "diff_hunk" : "@@ -73,8 +73,6 @@ BOOST_AUTO_TEST_CASE(walletinit_verify_walletdir_no_trailing)\n     BOOST_CHECK_EQUAL(walletdir, expected_path);\n }\n \n-#ifndef WIN32\n-// Windows does not consider \"datadir/wallets//\" to be a valid directory path.\n BOOST_AUTO_TEST_CASE(walletinit_verify_walletdir_no_trailing2)\n {\n     SetWalletDir(m_walletdir_path_cases[\"trailing2\"]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24251#discussion_r798723501",
      "id" : 798723501,
      "line" : 78,
      "node_id" : "PRRC_kwDOABII584vm42t",
      "original_commit_id" : "8287489e7c26ecd434bbf07af8e6aa64f41f9bca",
      "original_line" : 78,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/wallet/test/init_tests.cpp",
      "position" : 8,
      "pull_request_review_id" : 872066931,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24251",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/798723501/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-03T16:07:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/798723501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24251#discussion_r799502640"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24251"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/799502640"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> Is this going to cause any read or write outside the m_root_path?\r\n\r\nI don't think so, but I'm also not sure where the question is coming from. Wouldn't you expect invalid paths to trigger errors, not to read or write to completely different locations?",
      "commit_id" : "d216bc8d76d7f4e9dce58b0bb732a2d4deaf23b6",
      "created_at" : "2022-02-04T14:17:06Z",
      "diff_hunk" : "@@ -73,8 +73,6 @@ BOOST_AUTO_TEST_CASE(walletinit_verify_walletdir_no_trailing)\n     BOOST_CHECK_EQUAL(walletdir, expected_path);\n }\n \n-#ifndef WIN32\n-// Windows does not consider \"datadir/wallets//\" to be a valid directory path.\n BOOST_AUTO_TEST_CASE(walletinit_verify_walletdir_no_trailing2)\n {\n     SetWalletDir(m_walletdir_path_cases[\"trailing2\"]);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24251#discussion_r799502640",
      "id" : 799502640,
      "in_reply_to_id" : 798723501,
      "line" : 78,
      "node_id" : "PRRC_kwDOABII584vp3Ew",
      "original_commit_id" : "8287489e7c26ecd434bbf07af8e6aa64f41f9bca",
      "original_line" : 78,
      "original_position" : 8,
      "original_start_line" : null,
      "path" : "src/wallet/test/init_tests.cpp",
      "position" : 8,
      "pull_request_review_id" : 873142045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24251",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/799502640/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-04T14:17:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/799502640",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated 8287489e7c26ecd434bbf07af8e6aa64f41f9bca -> d216bc8d76d7f4e9dce58b0bb732a2d4deaf23b6 ([`pr/wp.1`](https://github.com/ryanofsky/bitcoin/commits/pr/wp.1) -> [`pr/wp.2`](https://github.com/ryanofsky/bitcoin/commits/pr/wp.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/wp.1..pr/wp.2)) hopefully fixing CI errors.\r\n\r\nI think #20744 might have actually caused real regressions on windows. If `-datadir` or `-walletdir` values with trailing slashes are passed, it triggers assert errors or init errors in these two test cases, and it seems like the same problems would happen outside of the test environment.\r\n\r\nNot good to disable tests like this!",
      "created_at" : "2022-02-04T14:23:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24251#issuecomment-1030034841",
      "id" : 1030034841,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24251",
      "node_id" : "IC_kwDOABII5849ZRWZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030034841/reactions"
      },
      "updated_at" : "2022-02-04T14:23:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030034841",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky \r\n> If `-datadir` or `-walletdir` values with trailing slashes are passed, it triggers assert errors or init errors...\r\n\r\nYou're talking about Windows builds only, right?",
      "created_at" : "2022-02-04T21:40:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24251#issuecomment-1030370487",
      "id" : 1030370487,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24251",
      "node_id" : "IC_kwDOABII5849ajS3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030370487/reactions"
      },
      "updated_at" : "2022-02-04T21:40:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030370487",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @ryanofsky\r\n> \r\n> > If `-datadir` or `-walletdir` values with trailing slashes are passed, it triggers assert errors or init errors...\r\n> \r\n> You're talking about Windows builds only, right?\r\n\r\nYou left off the important part where I said \"... in these two test cases.\" And I actually only know about wine, not real windows. With wine, I saw fs::exists and similar functions treat directory paths with trailing dots and slashes as if they did not exist. Normalizing or canonicalizing the arguments made these functions work again and let me re-enable these windows tests. I think adding back test coverage here, and making minor changes to make code more reliable are already good things to do, and would have improved #20744. But it also hints that #20744 could also break some real windows configurations. I don't know for sure.",
      "created_at" : "2022-02-04T22:06:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24251#issuecomment-1030387379",
      "id" : 1030387379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24251",
      "node_id" : "IC_kwDOABII5849anaz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030387379/reactions"
      },
      "updated_at" : "2022-02-04T22:06:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030387379",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Shouldn't this be named \"wallet: Use canonical path in VerifyWallets\"?",
      "created_at" : "2022-02-05T08:25:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24251#issuecomment-1030576576",
      "id" : 1030576576,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24251",
      "node_id" : "IC_kwDOABII5849bVnA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030576576/reactions"
      },
      "updated_at" : "2022-02-05T08:25:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030576576",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24265](https://github.com/bitcoin/bitcoin/pull/24265) (Drop StripRedundantLastElementsOfPath() function and re-enable Windows tests by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-02-05T09:15:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24251#issuecomment-1030586411",
      "id" : 1030586411,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24251",
      "node_id" : "IC_kwDOABII5849bYAr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030586411/reactions"
      },
      "updated_at" : "2022-02-05T09:15:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1030586411",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   }
]
