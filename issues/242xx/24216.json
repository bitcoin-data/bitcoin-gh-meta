{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "MEMBER",
   "body" : "* mention when we're using a cached block rather than actually loading it from disk\r\n* add ms/blk to load block from disk \r\n* log writing of Undo data, so it's tracked separate from writing indexes\r\n\r\nExample outputs from `src/bitcoind -debug=bench` during IBD.\r\n\r\nWhen the pass the block in memory:\r\n\r\n```\r\n2022-01-31T14:21:35Z - Connect block: 251.79ms [59.59s (419.65ms/blk)]\r\n2022-01-31T14:21:35Z   - Using cached block\r\n2022-01-31T14:21:35Z   - Load block from disk: 0.07ms [9.67s (68.12ms/blk)]\r\n2022-01-31T14:21:35Z     - Sanity checks: 0.00ms [0.27s (1.87ms/blk)]\r\n2022-01-31T14:21:35Z     - Fork checks: 0.02ms [0.26s (1.84ms/blk)]\r\n2022-01-31T14:21:35Z       - Connect 597 transactions: 154.84ms (0.259ms/tx, 0.022ms/txin) [34.89s (243.96ms/blk)]\r\n2022-01-31T14:21:35Z     - Verify 7043 txins: 169.60ms (0.024ms/txin) [35.67s (249.46ms/blk)]\r\n2022-01-31T14:21:35Z     - Write undo data: 19.72ms [10.68s (74.68ms/blk)]\r\n2022-01-31T14:21:35Z     - Index writing: 0.05ms [0.73s (5.12ms/blk)]\r\n2022-01-31T14:21:35Z   - Connect total: 189.66ms [48.18s (336.93ms/blk)]\r\n2022-01-31T14:21:35Z   - Flush: 5.23ms [1.19s (8.30ms/blk)]\r\n2022-01-31T14:21:35Z   - Writing chainstate: 0.04ms [0.58s (4.03ms/blk)]\r\n2022-01-31T14:21:35Z UpdateTip: new best=0000000000000000000b94a079a58d64f640f66b0cc338b5831b94c8739439a6 height=660135 version=0x20a00000 log2_work=92.494955 tx=593512887 date='2020-12-06T01:43:07Z' progress=0.850804 cache=138.8MiB(1031560txo)\r\n2022-01-31T14:21:35Z   - Connect postprocess: 0.26ms [0.17s (1.17ms/blk)]\r\n```\r\n\r\nWhen we have to load the block from disk (when blocks are received out of order, they are saved after initial validation steps and then loaded again for the final validation steps and connecting to tip):\r\n\r\n```\r\n2022-01-31T14:21:35Z - Connect block: 195.27ms [59.79s (418.08ms/blk)]\r\n2022-01-31T14:21:38Z   - Load block from disk: 23.35ms [9.70s (67.80ms/blk)]\r\n2022-01-31T14:21:38Z     - Sanity checks: 1.96ms [0.27s (1.87ms/blk)]\r\n2022-01-31T14:21:38Z     - Fork checks: 0.05ms [0.26s (1.83ms/blk)]\r\n2022-01-31T14:21:38Z       - Connect 404 transactions: 116.03ms (0.287ms/tx, 0.017ms/txin) [35.00s (243.07ms/blk)]\r\n2022-01-31T14:21:38Z     - Verify 7031 txins: 119.58ms (0.017ms/txin) [35.79s (248.56ms/blk)]\r\n2022-01-31T14:21:38Z     - Write undo data: 23.54ms [10.70s (74.33ms/blk)]\r\n2022-01-31T14:21:38Z     - Index writing: 1.42ms [0.73s (5.09ms/blk)]\r\n2022-01-31T14:21:38Z   - Connect total: 146.84ms [48.33s (335.61ms/blk)]\r\n2022-01-31T14:21:38Z   - Flush: 4.84ms [1.19s (8.28ms/blk)]\r\n2022-01-31T14:21:38Z   - Writing chainstate: 0.04ms [0.58s (4.00ms/blk)]\r\n2022-01-31T14:21:38Z UpdateTip: new best=00000000000000000004c2cad14fec645807ce236f8e1cc43fe106ee4f27692e height=660136 version=0x2000e000 log2_work=92.494972 tx=593513291 date='2020-12-06T01:46:08Z' progress=0.850804 cache=139.4MiB(1036010txo)\r\n2022-01-31T14:21:38Z   - Connect postprocess: 0.16ms [0.17s (1.16ms/blk)]\r\n```",
   "closed_at" : "2022-04-05T14:19:36Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
      "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
      "followers_url" : "https://api.github.com/users/laanwj/followers",
      "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
      "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/laanwj",
      "id" : 126646,
      "login" : "laanwj",
      "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
      "organizations_url" : "https://api.github.com/users/laanwj/orgs",
      "received_events_url" : "https://api.github.com/users/laanwj/received_events",
      "repos_url" : "https://api.github.com/users/laanwj/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/laanwj"
   },
   "comments" : 4,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24216/comments",
   "created_at" : "2022-01-31T14:25:05Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24216/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/24216",
   "id" : 1119495790,
   "labels" : [
      {
         "color" : "6060aa",
         "default" : false,
         "description" : null,
         "id" : 118379652,
         "name" : "Validation",
         "node_id" : "MDU6TGFiZWwxMTgzNzk2NTI=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24216/labels{/name}",
   "locked" : false,
   "milestone" : {
      "closed_at" : null,
      "closed_issues" : 19,
      "created_at" : "2021-09-14T08:27:02Z",
      "creator" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      },
      "description" : "",
      "due_on" : null,
      "html_url" : "https://github.com/bitcoin/bitcoin/milestone/54",
      "id" : 7150037,
      "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/54/labels",
      "node_id" : "MI_kwDOABII584AbRnV",
      "number" : 54,
      "open_issues" : 12,
      "state" : "open",
      "title" : "24.0",
      "updated_at" : "2022-04-05T14:19:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/milestones/54"
   },
   "node_id" : "PR_kwDOABII584x11m1",
   "number" : 24216,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/24216.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24216",
      "merged_at" : "2022-04-05T14:19:36Z",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/24216.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24216"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24216/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24216/timeline",
   "title" : "validation: improve connect bench logging",
   "updated_at" : "2022-04-05T14:19:37Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24216",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
      "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Sjors/followers",
      "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Sjors",
      "id" : 10217,
      "login" : "Sjors",
      "node_id" : "MDQ6VXNlcjEwMjE3",
      "organizations_url" : "https://api.github.com/users/Sjors/orgs",
      "received_events_url" : "https://api.github.com/users/Sjors/received_events",
      "repos_url" : "https://api.github.com/users/Sjors/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Sjors"
   }
}
