[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I stumbled into this while testing https://github.com/bitcoin/bitcoin/pull/19728.",
      "created_at" : "2020-08-18T19:50:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-675679253",
      "id" : 675679253,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NTY3OTI1Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-18T19:50:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/675679253",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This behavior is intentional, and the hash-based logic to determine where to send exploits it (there is a comment about `m_addr_known` in `RelayAddress`).\r\n\r\nThe idea is that every incoming addr is only relayed to a fixed subset of 1 or 2 peers during windows of 24 hours. This means that if the same address is relayed again, it will go to the same peers (and likely not be sent at all as they already know it). This change would permit someone to unjustly give their address better propagation by sending it repeatedly.",
      "created_at" : "2020-08-18T19:53:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-675680772",
      "id" : 675680772,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NTY4MDc3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-18T19:53:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/675680772",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Alright, I see the problem this would cause.\r\n\r\nThe condition added in this PR `!pnode->m_addr_known->contains(addr)` is too strong. I only intended to avoid relaying to the node that sent us the address, trying to avoid this adverse scenario:\r\n\r\n* let node0 have connections to 8 other nodes: node1, ..., node8.\r\n* node5 sends some address to node0\r\n* node0 is about to relay it to 2 \"random\" nodes and picks node3 and node5\r\n* node5 already knows the address and so is skipped by `PushAddress()`\r\n* the address is relayed to just node3 - one node instead of two :bomb:.\r\n\r\nLooks like the chance of this happening is ~~1/8, or 12.5%~~ 1/4, or 25%.\r\n\r\n> This means that if the same address is relayed again, it will go to the same peers (and likely not be sent at all as they already know it)\r\n\r\nIs this \"likely\" actually \"for sure\"? Is this correct: \"This means that the same address will not be re-relayed again in 24h because we would attempt to send it to the same peers and this will be a noop by `PushAddress()`\"? (assuming the list of peers does not change).",
      "created_at" : "2020-08-18T20:33:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-675698521",
      "id" : 675698521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NTY5ODUyMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-19T08:12:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/675698521",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild Ah, I see. That's a good point, and should probably be improved. I think we can just make sure that the originating node is skipped in the list of considered candidates?",
      "created_at" : "2020-08-18T20:37:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-675703311",
      "id" : 675703311,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NTcwMzMxMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-18T20:37:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/675703311",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> make sure that the originating node is skipped in the list of considered candidates\r\n\r\nExactly! Done in e80a80b and extended a test so that it fails without this fix.\r\n\r\nReopened for review.",
      "created_at" : "2020-08-19T10:44:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-676127052",
      "id" : 676127052,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NjEyNzA1Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-19T10:44:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/676127052",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Interesting. Will review.",
      "created_at" : "2020-08-19T16:08:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-676519017",
      "id" : 676519017,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NjUxOTAxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-19T16:08:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/676519017",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2020-08-19T19:11:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-676609042",
      "id" : 676609042,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NjYwOTA0Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-19T19:11:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/676609042",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "What if the same address is relayed again but from a different peer? I think the list of nodes the address would be relayed to might not be the same, because now it depends on the address AND the origin and not just the address, so the list would only be deterministic for the same origin.",
      "created_at" : "2020-08-19T19:49:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-676626905",
      "id" : 676626905,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NjYyNjkwNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-19T19:49:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/676626905",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@dergoegge, the [hashKey](https://github.com/bitcoin/bitcoin/blob/e80a80b25/src/net_processing.cpp#L1514) of each relay-to candidate does not depend on the originator. Can you elaborate? I think the list of nodes the address would be relayed to does not depend on the originator, except that the originator will be skipped if he happens to be one of the two chosen nodes and in his place another node will be selected.\r\n\r\nNotice that `CSipHasher(hasher).Write(pnode->GetId()).Finalize()` creates a temporary which is destroyed before the next candidate is evaluated.",
      "created_at" : "2020-08-20T07:47:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-677434516",
      "id" : 677434516,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NzQzNDUxNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-20T07:47:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/677434516",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@vasild while trying to come up with an example i realised that you are right and that i didn't fully understand how `sortfunc` works (even though it has \"sort\" in the name ð), sorry. ",
      "created_at" : "2020-08-20T09:30:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-677488472",
      "id" : 677488472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3NzQ4ODQ3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-20T09:30:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/677488472",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19763#discussion_r474110582"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19763"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/474110582"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think the Doxygen style in developer-notes.md might be easier to read.\r\n\r\nLine 1485: s/do/does/",
      "commit_id" : "7fabe0f359ae16ed36ce4ca2c33631d038c21448",
      "created_at" : "2020-08-20T16:23:47Z",
      "diff_hunk" : "@@ -1479,7 +1479,23 @@ void RelayTransaction(const uint256& txid, const uint256& wtxid, const CConnman&\n     });\n }\n \n-static void RelayAddress(const CAddress& addr, bool fReachable, const CConnman& connman)\n+/**\n+ * Relay (gossip) an address to a few randomly chosen nodes.\n+ * We choose the same nodes within a given 24h window (if the list of connected\n+ * nodes do not change) and we don't relay to nodes that already know an\n+ * address. So within 24h we will likely relay a given address once. This is to\n+ * prevent someone to unjustly give their address better propagation by sending\n+ * it to us repeatedly.\n+ */\n+static void RelayAddress(\n+    /** [in] The peer that sent us the address. We don't want to try to relay it back. */\n+    const CNode* originator,\n+    /** [in] Address to relay. */\n+    const CAddress& addr,\n+    /** [in] Whether the address' network is reachable. We relay unreachable addresses less. */\n+    bool fReachable,\n+    /** [in] Connection manager to choose nodes to relay to. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#discussion_r474110582",
      "id" : 474110582,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDExMDU4Mg==",
      "original_commit_id" : "e80a80b25b14b580644b2c29e471412dd932d7c4",
      "original_line" : 1497,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 471782020,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19763",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-10T14:27:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/474110582",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19763#discussion_r474111558"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19763"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/474111558"
         }
      },
      "author_association" : "MEMBER",
      "body" : "<details><summary>a few suggestions for the test code</summary><p>\r\n\r\n```diff\r\n@@ -18,8 +18,6 @@ from test_framework.mininode import (\r\n from test_framework.test_framework import BitcoinTestFramework\r\n from test_framework.util import (\r\n     assert_equal,\r\n-    assert_greater_than,\r\n-    assert_greater_than_or_equal,\r\n )\r\n import time\r\n \r\n@@ -42,8 +40,8 @@ class AddrReceiver(P2PInterface):\r\n     def on_addr(self, message):\r\n         for addr in message.addrs:\r\n             assert_equal(addr.nServices, 9)\r\n-            assert_greater_than(8343, addr.port)\r\n-            assert_greater_than_or_equal(addr.port, 8333)\r\n+            if not 8333 <= addr.port < 8343:\r\n+                raise AssertionError(\"Invalid addr.port of {} (8333-8342 expected)\".format(addr.port))\r\n             assert addr.ip.startswith('123.123.123.')\r\n             self.num_ipv4_received += 1\r\n \r\n@@ -59,14 +57,14 @@ class AddrTest(BitcoinTestFramework):\r\n         msg = msg_addr()\r\n \r\n         self.log.info('Send too-large addr message')\r\n-        msg.addrs = ADDRS * 101 # more than 1000 addresses in one message\r\n+        msg.addrs = ADDRS * 101  # more than 1000 addresses in one message\r\n         with self.nodes[0].assert_debug_log(['addr message size = 1010']):\r\n             addr_source.send_and_ping(msg)\r\n \r\n         self.log.info('Check that addr message content is relayed and added to addrman')\r\n         num_receivers = 7\r\n         receivers = []\r\n-        for i in range(num_receivers):\r\n+        for _ in range(num_receivers):\r\n             receivers.append(self.nodes[0].add_p2p_connection(AddrReceiver()))\r\n         msg.addrs = ADDRS\r\n-        with self.nodes[0].assert_debug_log([\r\n-                'Added {} addresses from 127.0.0.1: 0 tried'.format(num_ipv4_addrs),\r\n-                'received: addr (301 bytes) peer=0',\r\n-        ]):\r\n+        with self.nodes[0].assert_debug_log(\r\n+            [\r\n+                \"Added {} addresses from 127.0.0.1: 0 tried\".format(num_ipv4_addrs),\r\n+                \"received: addr (301 bytes) peer=0\",\r\n+            ]\r\n+        ):\r\n             addr_source.send_and_ping(msg)\r\n```\r\n</p></details>\r\n\r\n",
      "commit_id" : "7fabe0f359ae16ed36ce4ca2c33631d038c21448",
      "created_at" : "2020-08-20T16:25:14Z",
      "diff_hunk" : "@@ -32,11 +37,15 @@\n \n \n class AddrReceiver(P2PInterface):\n+    num_ipv4_received = 0\n+\n     def on_addr(self, message):\n         for addr in message.addrs:\n             assert_equal(addr.nServices, 9)\n+            assert_greater_than(8343, addr.port)\n+            assert_greater_than_or_equal(addr.port, 8333)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#discussion_r474111558",
      "id" : 474111558,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDExMTU1OA==",
      "original_commit_id" : "e80a80b25b14b580644b2c29e471412dd932d7c4",
      "original_line" : 46,
      "original_position" : 28,
      "original_start_line" : null,
      "path" : "test/functional/p2p_addr_relay.py",
      "position" : null,
      "pull_request_review_id" : 471782020,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19763",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-10T14:27:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/474111558",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19763#discussion_r474115675"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19763"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/474115675"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Verified this assertion fails on master with relay to fewer nodes:\r\n```\r\nAssertionError: not(17 == 20)\r\nAssertionError: not(17 == 20)\r\nAssertionError: not(19 == 20)\r\n```",
      "commit_id" : "7fabe0f359ae16ed36ce4ca2c33631d038c21448",
      "created_at" : "2020-08-20T16:31:49Z",
      "diff_hunk" : "@@ -50,21 +59,31 @@ def run_test(self):\n         msg = msg_addr()\n \n         self.log.info('Send too-large addr message')\n-        msg.addrs = ADDRS * 101\n+        msg.addrs = ADDRS * 101 # more than 1000 addresses in one message\n         with self.nodes[0].assert_debug_log(['addr message size = 1010']):\n             addr_source.send_and_ping(msg)\n \n         self.log.info('Check that addr message content is relayed and added to addrman')\n-        addr_receiver = self.nodes[0].add_p2p_connection(AddrReceiver())\n+        num_receivers = 7\n+        receivers = []\n+        for i in range(num_receivers):\n+            receivers.append(self.nodes[0].add_p2p_connection(AddrReceiver()))\n         msg.addrs = ADDRS\n         with self.nodes[0].assert_debug_log([\n-                'Added 10 addresses from 127.0.0.1: 0 tried',\n+                'Added {} addresses from 127.0.0.1: 0 tried'.format(num_ipv4_addrs),\n                 'received: addr (301 bytes) peer=0',\n-                'sending addr (301 bytes) peer=1',\n         ]):\n             addr_source.send_and_ping(msg)\n             self.nodes[0].setmocktime(int(time.time()) + 30 * 60)\n-            addr_receiver.sync_with_ping()\n+            for receiver in receivers:\n+                receiver.sync_with_ping()\n+\n+        total_ipv4_received = sum(r.num_ipv4_received for r in receivers)\n+\n+        # Every IPv4 address must be relayed to two peers, other than the\n+        # originating node (addr_source).\n+        ipv4_branching_factor = 2\n+        assert_equal(total_ipv4_received, num_ipv4_addrs * ipv4_branching_factor)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#discussion_r474115675",
      "id" : 474115675,
      "line" : 84,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDExNTY3NQ==",
      "original_commit_id" : "e80a80b25b14b580644b2c29e471412dd932d7c4",
      "original_line" : 84,
      "original_position" : 68,
      "original_start_line" : null,
      "path" : "test/functional/p2p_addr_relay.py",
      "position" : 67,
      "pull_request_review_id" : 471782020,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19763",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-10T14:27:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/474115675",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #18642 (Use std::chrono for the time to rotate destination of addr messages + tests by naumenkogs)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-08-20T19:53:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-677870688",
      "id" : 677870688,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3Nzg3MDY4OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-02T21:24:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/677870688",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2020-08-23T14:12:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-678779338",
      "id" : 678779338,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3ODc3OTMzOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-23T14:12:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/678779338",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-08-24T15:09:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-679185768",
      "id" : 679185768,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3OTE4NTc2OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-24T15:09:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/679185768",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK e80a80b25b14b580644b2c29e471412dd932d7c4\r\nNeeds rebase.\r\n",
      "created_at" : "2020-08-27T11:39:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-681894776",
      "id" : 681894776,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MTg5NDc3Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-27T11:39:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/681894776",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased to resolve conflicts.",
      "created_at" : "2020-09-02T08:46:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-685452254",
      "id" : 685452254,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NTQ1MjI1NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-02T08:46:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685452254",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Picked some suggestions.",
      "created_at" : "2020-09-02T08:48:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-685452942",
      "id" : 685452942,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NTQ1Mjk0Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-02T08:48:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685452942",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK fd897f89eea2486ccf12ac7b40a99dbcc6084b72",
      "created_at" : "2020-09-02T09:30:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-685494545",
      "id" : 685494545,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NTQ5NDU0NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-02T09:30:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685494545",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19763#discussion_r481945931"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19763"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/481945931"
         }
      },
      "author_association" : "MEMBER",
      "body" : "s/someone to unjustly give/a peer from unjustly giving/",
      "commit_id" : "7fabe0f359ae16ed36ce4ca2c33631d038c21448",
      "created_at" : "2020-09-02T09:51:31Z",
      "diff_hunk" : "@@ -1523,7 +1523,26 @@ void RelayTransaction(const uint256& txid, const uint256& wtxid, const CConnman&\n     });\n }\n \n-static void RelayAddress(const CAddress& addr, bool fReachable, const CConnman& connman)\n+/**\n+ * Relay (gossip) an address to a few randomly chosen nodes.\n+ * We choose the same nodes within a given 24h window (if the list of connected\n+ * nodes does not change) and we don't relay to nodes that already know an\n+ * address. So within 24h we will likely relay a given address once. This is to\n+ * prevent someone to unjustly give their address better propagation by sending",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#discussion_r481945931",
      "id" : 481945931,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk0NTkzMQ==",
      "original_commit_id" : "fd897f89eea2486ccf12ac7b40a99dbcc6084b72",
      "original_line" : 1487,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 480660892,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19763",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-10T14:27:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/481945931",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK fd897f89eea2486ccf12ac7b40a99dbcc6084b72.\r\n\r\nnit, could drop \"try\".",
      "created_at" : "2020-09-02T09:55:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-685529942",
      "id" : 685529942,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NTUyOTk0Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-02T09:55:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/685529942",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-09-03T13:20:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-686485846",
      "id" : 686485846,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NjQ4NTg0Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-03T13:20:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/686485846",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased to resolve conflicts, picked up suggestion and dropped \"try\".",
      "created_at" : "2020-09-03T16:25:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-686606844",
      "id" : 686606844,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NjYwNjg0NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-03T16:25:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/686606844",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review re-ACK 0b8dd9555c57e64212656a3e801502ce9878bd15 per `git range-diff a0a422c fd897f8 0b8dd95`\r\n\r\nThanks for updating.\r\n",
      "created_at" : "2020-09-03T16:34:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-686611913",
      "id" : 686611913,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NjYxMTkxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-03T16:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/686611913",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reACK 0b8dd9555c57e64212656a3e801502ce9878bd15",
      "created_at" : "2020-09-04T06:20:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-686937978",
      "id" : 686937978,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NjkzNzk3OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-04T06:20:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/686937978",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2020-09-25T08:53:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-698809719",
      "id" : 698809719,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5ODgwOTcxOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-25T08:53:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/698809719",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thinking more about this, I have a slight concern here that this enables a sort of \"augmentation\" - if we relay to a peer, and they relay the same address immediately back to us, it will (with this PR) always result in the address being sent out to one extra peer.\r\n\r\nDoes anyone see any issues with skipping addr relay in case `addr` is already in `pnode->m_addr_known`?",
      "created_at" : "2020-09-26T02:33:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-699279543",
      "id" : 699279543,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5OTI3OTU0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-26T02:33:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/699279543",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sipa good catch! It's very unlikely to happen in an honest scenario, but a malicious one is worth discussing. I see two potential issues with relaying to one more peer:\r\n1. overcoming our spam protection (rate limiting)\r\n2. easier link inference (if a malicious node was assigned to get a probe address from a victim being link-probed, it could force a victim to send a probe address to another connection, potentially non-malicious).\r\n\r\nBoth of these effects can also be easily achieved by an attacker today by:\r\n- relaying to more random nodes in the network to get (1)\r\n- using more probe addresses (they don't even have to be real nodes) to get (2)\r\n\r\nAt the same time, the threat doesn't seem to be that big.\r\n\r\nWhile the solution you're suggesting doesn't feel very safe (thus, not adequate to address this low threat). We don't have any guarantees on `m_addr_known` at all, so, maybe a peer relayed some addr to us long time ago, and it would really benefit from getting a reannouncement of that addr, but it still sits in the `m_addr_known` so no luck.\r\nI'm already unhappy with how `m_addr_known` unpredictably affects AddrMan quality, and this would make it even deeper.\r\n\r\nPerhaps in future the issue I'm pointing out above might be addressed by making `m_addr_known` time-aware w.r.t *when an addr record was relayed* (or maybe just addr's `nTime`). It would make the effect of `m_addr_known` on AddrMans much more predictable.\r\n\r\nI'll see if an implementation makes sense (soon). Once we have better control of `m_addr_known`, I'd be more convinced in your suggestion :)\r\n\r\n-----------\r\n\r\nA note for other readers: I was about to say [we already do what Pieter suggests](https://github.com/bitcoin/bitcoin/blob/78f912c9010f686e2d1bbdc1c51f381b496c2a1b/src/net_processing.cpp#L4134), but then realised the suggestion is to ignore it if it *comes from* a node already knowing it (not going *to* a knowing node).",
      "created_at" : "2020-09-26T08:11:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-699456060",
      "id" : 699456060,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5OTQ1NjA2MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-26T09:04:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/699456060",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> if we relay to a peer, and they relay the same address immediately back to us,\r\n\r\nWhen we receive an address from a peer our behavior is the same no matter whether we have sent the same address to that peer before or not. In `master` and in this PR - the peer is marked as knowing the address when we receive it from him. If we have sent the address before to the same peer then it would have been marked as knowing the address already, but this is irrelevant - in either case `m_addr_known` will contain the address just after receiving it.\r\n\r\n> it will (with this PR) always result in the address being sent out to one extra peer\r\n\r\nWe pick 2 random peers and try to relay to them. This PR will only change the behavior in the rare case when one of the 2 randomly selected is the originator, so I don't think \"always\" is the correct word. In this rare case we would relay to 2 peers as intended, not 1, so I don't think \"one extra peer\" is correct either.\r\n\r\nMaybe I misunderstood but the above should read: \"it will (with this PR) in the rare cases when the originator is chosen, result in the address being sent out to the intended 2 peers, not one peer less (to just 1).",
      "created_at" : "2020-10-06T15:16:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-704342961",
      "id" : 704342961,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwNDM0Mjk2MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-06T15:16:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/704342961",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@naumenkogs Those are good arguments. Consider my concern addressed.\r\n\r\n@vasild My thinking is that if an address is echoed back to us, then by definition, one of the two (currently) selected peers would be the originator (as it was chosen before by us). With this PR, the behavior would be:\r\n* Peer A announces an address to us\r\n* We select peers B and C to relay the address to, and send it.\r\n* B echoes the address back to us\r\n* We now select peers C and D to relay the address to, as B is the originator this time, causing an extra relay to D (as B and C have it in m_addr_known already).\r\n\r\nWhat conceptually changed here is that the set of potential destinations - across all originators - is now 3: B, C, and D. And it's not random: B and C can deterministically force us to relay to a 3rd peer.\r\n\r\nI agree this isn't a concern, but I wanted to highlight the potential here.",
      "created_at" : "2020-10-06T17:01:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-704415780",
      "id" : 704415780,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwNDQxNTc4MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-06T17:01:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/704415780",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> as it was chosen before by us\r\n\r\nAh, I see now! Thanks for the elaboration.",
      "created_at" : "2020-10-06T19:27:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-704504006",
      "id" : 704504006,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwNDUwNDAwNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-06T19:27:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/704504006",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I gave some more thought on this.\r\n\r\nWe pick 2 random nodes to relay to regardless of whether those nodes know the address or not. If we happen to pick a node that knows the address we will not relay to it and so we will relay to less than the intended 2 nodes.\r\n\r\nThe originator of the address knows the address and that is just a special case of the above.\r\n\r\nSo, assuming address propagation works, maybe this is not an issue. If it is to be addressed then maybe something like the following should be devised:\r\n\r\n* if this is the first time we are relaying a given address within the current 24h window, then pick 2 random destinations _from the ones that don't know it_\r\n* if we have already relayed the given address within the current 24h window, then don't relay it",
      "created_at" : "2020-10-13T09:08:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-707604660",
      "id" : 707604660,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwNzYwNDY2MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-13T09:08:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/707604660",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure why this was closed. I think the issue is worth addressing, or at least kept in mind...\r\n\r\n>So, assuming address propagation works, maybe this is not an issue.\r\n\r\nI think it is an issue because it is unexpected behavior. We might think that we always relay to 2 (at least best-effort), but this issue makes it not true, and it's trivial to fix.\r\n\r\nI'm wondering what you didn't like about your solution?",
      "created_at" : "2020-10-19T09:19:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-711898473",
      "id" : 711898473,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMTg5ODQ3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-19T09:19:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/711898473",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I closed it because it is fixing just a special case of a more widespread issue. Otherwise I don't think there is a technical issue with the patch. It will be an improvement, thus reopening.\r\n\r\nLet me illustrate with an example:\r\n\r\n* let n0 have connections to 8 other nodes: n1, ..., n8\r\n* n1, n2 and n3 already know some address `addr` (according to n0)\r\n* n5 sends `addr` to n0\r\n* n5 is immediately marked as knowing `addr`\r\n* now nodes n1, n2, n3 and n5 know `addr` (according to n0)\r\n* n0 is about to relay it to 2 \"random\" nodes and picks:\r\n  * in `master` it would pick among all of n1, ..., n8 and if it happens to choose a node that knows the address, then it will skip relaying to it\r\n  * in this PR it will pick among n1, n2, n3, n4, n6, n7, n8 - an improvement but it could still end up skipping relay if it chooses one of the first 3\r\n  * best way: pick among the nodes that don't know addr: n4, n6, n7, n8. But notice this fix is not trivial - if we implement it naively and relay to e.g. n4 and n6 we will mark them as knowing the address and if after 1 hour we are about to relay the same address again, then we would choose from just n7 and n8. We want to keep our choice constant within 24h.\r\n",
      "created_at" : "2020-10-19T09:57:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-711961639",
      "id" : 711961639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMTk2MTYzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-19T09:57:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/711961639",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild I agree with the description. Maybe once someone implements the \"best way\" this can be closed, but for now I think it's better keep this as a reference (and maybe merge this as an improvement with 0 overhead).",
      "created_at" : "2020-10-22T09:40:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-714368999",
      "id" : 714368999,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNDM2ODk5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-22T09:40:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/714368999",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK (other than the test code, which I did not review). I think this is an improvement even if addr relay can be further improved.\r\n\r\nI should add -- I think on balance we should be more concerned about ensuring that honest actors have their addresses relay well, more than we should be concerned about adversaries getting additional relay (I think @naumenkogs made a similar point above).  My intuition right now is that it's easy for someone circumventing our addr relay system to get their own addresses to propagate very well, while honest peers spinning up take a long time to get their addresses gossiped on the network.  This needs more research though.",
      "created_at" : "2020-12-03T18:57:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-738219815",
      "id" : 738219815,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODIxOTgxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T19:06:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738219815",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Maybe once someone implements the \"best way\"\r\n\r\nWhen Erlay for addr messages?",
      "created_at" : "2020-12-03T19:04:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-738229497",
      "id" : 738229497,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczODIyOTQ5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-03T19:04:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/738229497",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "To summarize, if I'm non overlooking anything, this PR has ACKs by @naumenkogs, @sdaftuar, and myself, a fourth ACK (pre-rebase) by @promag, and a concept ACK by @hebasto.",
      "created_at" : "2020-12-08T20:15:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-740965462",
      "id" : 740965462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MDk2NTQ2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-08T20:15:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/740965462",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19763#discussion_r540141198"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19763"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540141198"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I agree. This is inconsistent with the style used in the rest of the project. If you want to update the project style for function comments, please open a PR to do that or raise in an irc meeting.",
      "commit_id" : "7fabe0f359ae16ed36ce4ca2c33631d038c21448",
      "created_at" : "2020-12-10T12:47:27Z",
      "diff_hunk" : "@@ -1479,7 +1479,23 @@ void RelayTransaction(const uint256& txid, const uint256& wtxid, const CConnman&\n     });\n }\n \n-static void RelayAddress(const CAddress& addr, bool fReachable, const CConnman& connman)\n+/**\n+ * Relay (gossip) an address to a few randomly chosen nodes.\n+ * We choose the same nodes within a given 24h window (if the list of connected\n+ * nodes do not change) and we don't relay to nodes that already know an\n+ * address. So within 24h we will likely relay a given address once. This is to\n+ * prevent someone to unjustly give their address better propagation by sending\n+ * it to us repeatedly.\n+ */\n+static void RelayAddress(\n+    /** [in] The peer that sent us the address. We don't want to try to relay it back. */\n+    const CNode* originator,\n+    /** [in] Address to relay. */\n+    const CAddress& addr,\n+    /** [in] Whether the address' network is reachable. We relay unreachable addresses less. */\n+    bool fReachable,\n+    /** [in] Connection manager to choose nodes to relay to. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#discussion_r540141198",
      "id" : 540141198,
      "in_reply_to_id" : 474110582,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDE0MTE5OA==",
      "original_commit_id" : "e80a80b25b14b580644b2c29e471412dd932d7c4",
      "original_line" : 1497,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 549161255,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19763",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-10T14:27:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540141198",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19763#discussion_r540190410"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19763"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540190410"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The guidelines already [say](https://github.com/bitcoin/bitcoin/blame/86f20071931b803b5f26ed8f685d98d4919fb7a7/doc/developer-notes.md#L140)\r\n\r\n> Use Doxygen-compatible comment blocks for functions\r\n\r\nand the above is (was) doxygen-compatible, so I don't think there is anything to update in `developer-notes.md`.\r\n\r\nThe used inline comments have numerous advantages over `@param` which I will summarize and try to get some feedback to eventually get some explicit \"allow that in new code\".\r\n\r\nAnyway, no need to block this PR with that, so I have changed it to use `@param`.",
      "commit_id" : "7fabe0f359ae16ed36ce4ca2c33631d038c21448",
      "created_at" : "2020-12-10T13:59:48Z",
      "diff_hunk" : "@@ -1479,7 +1479,23 @@ void RelayTransaction(const uint256& txid, const uint256& wtxid, const CConnman&\n     });\n }\n \n-static void RelayAddress(const CAddress& addr, bool fReachable, const CConnman& connman)\n+/**\n+ * Relay (gossip) an address to a few randomly chosen nodes.\n+ * We choose the same nodes within a given 24h window (if the list of connected\n+ * nodes do not change) and we don't relay to nodes that already know an\n+ * address. So within 24h we will likely relay a given address once. This is to\n+ * prevent someone to unjustly give their address better propagation by sending\n+ * it to us repeatedly.\n+ */\n+static void RelayAddress(\n+    /** [in] The peer that sent us the address. We don't want to try to relay it back. */\n+    const CNode* originator,\n+    /** [in] Address to relay. */\n+    const CAddress& addr,\n+    /** [in] Whether the address' network is reachable. We relay unreachable addresses less. */\n+    bool fReachable,\n+    /** [in] Connection manager to choose nodes to relay to. */",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#discussion_r540190410",
      "id" : 540190410,
      "in_reply_to_id" : 474110582,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDE5MDQxMA==",
      "original_commit_id" : "e80a80b25b14b580644b2c29e471412dd932d7c4",
      "original_line" : 1497,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 549222132,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19763",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-12-10T14:27:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540190410",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Looks like github just lost my comment. @jnewbery did you get it in email?",
      "created_at" : "2020-12-10T14:04:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-742540962",
      "id" : 742540962,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjU0MDk2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T14:04:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742540962",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "_resurrected the comment by rewinding the PR to an old commit (e80a80b)_\r\n\r\n> I agree. This is inconsistent with the style used in the rest of the project. If you want to update the project style for function comments, please open a PR to do that or raise in an irc meeting.\r\n\r\nThe guidelines already [say](https://github.com/bitcoin/bitcoin/blame/86f20071931b803b5f26ed8f685d98d4919fb7a7/doc/developer-notes.md#L140)\r\n\r\n> Use Doxygen-compatible comment blocks for functions\r\n\r\nand the above is (was) doxygen-compatible, so I don't think there is anything to update in `developer-notes.md`.\r\n\r\nThe used inline comments have numerous advantages over `@param` which I will summarize and try to get some feedback to eventually get some explicit \"allow that in new code\".\r\n\r\nAnyway, no need to block this PR with that, so I have changed it to use `@param`.",
      "created_at" : "2020-12-10T14:27:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-742554261",
      "id" : 742554261,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjU1NDI2MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T14:27:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742554261",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Changes since the ACKs - replace inline doxygen comments with `@param` ones:\r\n\r\nhttps://github.com/bitcoin/bitcoin/compare/0b8dd9555c57e64212656a3e801502ce9878bd15..7fabe0f359ae16ed36ce4ca2c33631d038c21448",
      "created_at" : "2020-12-10T14:29:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-742555783",
      "id" : 742555783,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjU1NTc4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T14:29:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742555783",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 7fabe0f359ae16ed36ce4ca2c33631d038c21448 (this time I looked at the test, and verified the test breaks in expected ways if I break the code).",
      "created_at" : "2020-12-10T14:41:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-742562922",
      "id" : 742562922,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjU2MjkyMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T14:41:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742562922",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Re-reviewing as soon as I finish 19858.",
      "created_at" : "2020-12-10T14:50:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-742568534",
      "id" : 742568534,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjU2ODUzNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T14:50:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742568534",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Not sure what is going on with the failed appveyor or cirrus ci builds; can someone with a better understanding of how those work take a look?",
      "created_at" : "2020-12-10T15:10:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-742580615",
      "id" : 742580615,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjU4MDYxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T15:10:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742580615",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 7fabe0f359ae16ed36ce4ca2c33631d038c21448 (only net_processing changes. I haven't reviewed the test changes)",
      "created_at" : "2020-12-10T15:17:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-742584936",
      "id" : 742584936,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjU4NDkzNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T15:17:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742584936",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "(ci can be ignored. Looks like a ci integration problem)",
      "created_at" : "2020-12-10T15:43:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-742602075",
      "id" : 742602075,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjYwMjA3NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T15:43:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742602075",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> (ci can be ignored. Looks like a ci integration problem)\r\n\r\nOk, I am leaving it as is then. I can rebase or push a minor whitespace change to trigger a fresh CI run (invalidade ACKs).",
      "created_at" : "2020-12-14T09:59:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19763#issuecomment-744326366",
      "id" : 744326366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19763",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NDMyNjM2Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-14T09:59:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/744326366",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   }
]
