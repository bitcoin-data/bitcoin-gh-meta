[
   {
      "author_association" : "MEMBER",
      "body" : "Concept/approach ACK, could add test coverage and release note (see #19731 for an example).",
      "created_at" : "2020-08-21T14:17:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-678314413",
      "id" : 678314413,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3ODMxNDQxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-21T14:18:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/678314413",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for reviewing @jonatack! Added a release note, will add a functional test for this within the next days.",
      "created_at" : "2020-08-21T14:56:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-678334874",
      "id" : 678334874,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3ODMzNDg3NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-21T14:56:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/678334874",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19829 (net processing: Move block inventory state to net_processing by jnewbery)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-08-21T16:02:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-678367498",
      "id" : 678367498,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3ODM2NzQ5OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-19T14:30:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/678367498",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Added a functional test to `p2p_compactblocks.py` that covers all 4 possible combinations of bandwidth_{from,to}.",
      "created_at" : "2020-08-22T23:54:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-678710453",
      "id" : 678710453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3ODcxMDQ1Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-22T23:54:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/678710453",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nWould be nice to have `bitcoin-cli -netinfo t` expose this info in the future :)",
      "created_at" : "2020-08-23T05:38:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-678732220",
      "id" : 678732220,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3ODczMjIyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-23T05:38:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/678732220",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Would be nice to have `bitcoin-cli -netinfo t` expose this info in the future :)\r\n\r\nYes. Along with other new ones like `last_transaction`, `last_block`, `conn_type`.",
      "created_at" : "2020-08-24T06:11:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-678924793",
      "id" : 678924793,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3ODkyNDc5Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-24T06:11:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/678924793",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r475387172"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/475387172"
         }
      },
      "author_association" : "MEMBER",
      "body" : "8e9e5517 suggestion\r\n\r\n```markdown\r\n- The `getpeerinfo` RPC returns two new boolean fields, `highbandwidth_to` and\r\n  `highbandwidth_from`, that respectively indicate whether we selected a peer to\r\n  be in compact blocks high-bandwidth mode or whether a peer selected us as a\r\n  compact blocks high-bandwidth peer. High-bandwidth peers send new block\r\n  announcements via a `cmptblock` message rather than the usual inv/headers\r\n  announcements. See BIP152 for more details. (#19776)\r\n```\r\n",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-08-24T07:14:52Z",
      "diff_hunk" : "@@ -0,0 +1,9 @@\n+Updated RPCs\n+------------\n+\n+- The `getpeerinfo` RPC now has additional `highbandwidth_from` and\n+  `highbandwidth_to` fields that indicate whether a peer selected us as compact\n+  blocks high-bandwidth peer (`..._from`) or whether we selected a peer to be in\n+  compact blocks high-bandwidth mode (`..._to`), respectively. High-bandwidth\n+  peers are supposed to send new block announcements via a `cmptblock` message,\n+  rather than the usual inv/headers announcements. See BIP 152 for more details.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r475387172",
      "id" : 475387172,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM4NzE3Mg==",
      "original_commit_id" : "edb4ad4c9ce1ab0e8ce471b1a37ff17f24dd1fd3",
      "original_line" : 9,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "doc/release-notes-19776.md",
      "position" : null,
      "pull_request_review_id" : 473173541,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/475387172",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r475390168"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/475390168"
         }
      },
      "author_association" : "MEMBER",
      "body" : "d778c4a / f9cc66bc / edb4ad4 here and in `net.h/cpp` and `p2p_compactblocks.py`, consider inverting the order to be to/from, per consistency with the existing `lastsend`/`lastrecv` order in the codebase and the language idioms of to/from and send/receive.",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-08-24T07:21:10Z",
      "diff_hunk" : "@@ -110,6 +110,8 @@ static UniValue getpeerinfo(const JSONRPCRequest& request)\n                             {RPCResult::Type::NUM, \"version\", \"The peer version, such as 70001\"},\n                             {RPCResult::Type::STR, \"subver\", \"The string version\"},\n                             {RPCResult::Type::BOOL, \"inbound\", \"Inbound (true) or Outbound (false)\"},\n+                            {RPCResult::Type::BOOL, \"highbandwidth_from\", \"Whether peer selected us as (compact blocks) high-bandwidth peer\"},\n+                            {RPCResult::Type::BOOL, \"highbandwidth_to\", \"Whether we selected peer as (compact blocks) high-bandwidth peer\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r475390168",
      "id" : 475390168,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM5MDE2OA==",
      "original_commit_id" : "edb4ad4c9ce1ab0e8ce471b1a37ff17f24dd1fd3",
      "original_line" : 114,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 473173541,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/475390168",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r475393299"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/475393299"
         }
      },
      "author_association" : "MEMBER",
      "body" : "edb4ad4 nit, s/both nodes haven't/neither node/",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-08-24T07:27:39Z",
      "diff_hunk" : "@@ -785,6 +785,40 @@ def announce_cmpct_block(node, peer):\n         stalling_peer.send_and_ping(msg)\n         assert_equal(int(node.getbestblockhash(), 16), block.sha256)\n \n+    def test_highbandwidth_mode_states_via_getpeerinfo(self):\n+        # create new p2p connection for a fresh state w/o any prior sendcmpct messages sent\n+        hb_test_node = self.nodes[0].add_p2p_connection(TestP2PConn(cmpct_version=2))\n+\n+        # Asserts that the RPC getpeerinfo boolean result fields \"highbandwidth_{from,to}\"\n+        # for the last peer of a given node match the given parameters\n+        def assert_highbandwidth_states(node, hb_from, hb_to):\n+            peerinfo = node.getpeerinfo()[-1]\n+            assert_equal(peerinfo['highbandwidth_from'], hb_from)\n+            assert_equal(peerinfo['highbandwidth_to'], hb_to)\n+\n+        # initially, both nodes haven't selected the other peer as high-bandwidth yet",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r475393299",
      "id" : 475393299,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTM5MzI5OQ==",
      "original_commit_id" : "edb4ad4c9ce1ab0e8ce471b1a37ff17f24dd1fd3",
      "original_line" : 799,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/functional/p2p_compactblocks.py",
      "position" : null,
      "pull_request_review_id" : 473173541,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/475393299",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r475411024"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/475411024"
         }
      },
      "author_association" : "MEMBER",
      "body" : "f9cc66bc An explanatory comment here may be nice; I found this the least clear line of this PR changeset.",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-08-24T08:01:33Z",
      "diff_hunk" : "@@ -2629,8 +2631,10 @@ void ProcessMessage(\n                 State(pfrom.GetId())->fProvidesHeaderAndIDs = true;\n                 State(pfrom.GetId())->fWantsCmpctWitness = nCMPCTBLOCKVersion == 2;\n             }\n-            if (State(pfrom.GetId())->fWantsCmpctWitness == (nCMPCTBLOCKVersion == 2)) // ignore later version announces\n+            if (State(pfrom.GetId())->fWantsCmpctWitness == (nCMPCTBLOCKVersion == 2)) { // ignore later version announces\n                 State(pfrom.GetId())->fPreferHeaderAndIDs = fAnnounceUsingCMPCTBLOCK;\n+                pfrom.m_highbandwidth_from = fAnnounceUsingCMPCTBLOCK;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r475411024",
      "id" : 475411024,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQxMTAyNA==",
      "original_commit_id" : "edb4ad4c9ce1ab0e8ce471b1a37ff17f24dd1fd3",
      "original_line" : 2636,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 473173541,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/475411024",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r475414849"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/475414849"
         }
      },
      "author_association" : "MEMBER",
      "body" : "edb4ad4 suggestions\r\n```diff\r\n-        # Asserts that the RPC getpeerinfo boolean result fields \"highbandwidth_{from,to}\"\r\n-        # for the last peer of a given node match the given parameters\r\n-        def assert_highbandwidth_states(node, hb_from, hb_to):\r\n+        # Assert the getpeerinfo `highbandwidth_to/highbandwith_from` boolean\r\n+        # fields for the last peer of a given node match the given parameters.\r\n+        def assert_highbandwidth_states_of_last_peer(node, hb_to, hb_from):\r\n```\r\n",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-08-24T08:09:18Z",
      "diff_hunk" : "@@ -785,6 +785,40 @@ def announce_cmpct_block(node, peer):\n         stalling_peer.send_and_ping(msg)\n         assert_equal(int(node.getbestblockhash(), 16), block.sha256)\n \n+    def test_highbandwidth_mode_states_via_getpeerinfo(self):\n+        # create new p2p connection for a fresh state w/o any prior sendcmpct messages sent\n+        hb_test_node = self.nodes[0].add_p2p_connection(TestP2PConn(cmpct_version=2))\n+\n+        # Asserts that the RPC getpeerinfo boolean result fields \"highbandwidth_{from,to}\"\n+        # for the last peer of a given node match the given parameters\n+        def assert_highbandwidth_states(node, hb_from, hb_to):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r475414849",
      "id" : 475414849,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQxNDg0OQ==",
      "original_commit_id" : "edb4ad4c9ce1ab0e8ce471b1a37ff17f24dd1fd3",
      "original_line" : 794,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "test/functional/p2p_compactblocks.py",
      "position" : null,
      "pull_request_review_id" : 473173541,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/475414849",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\n\nI'd suggest putting \"bip152\" somewhere in the name of the field, as the concept of high bandwidth mode is very specific to that BIP (and really doesn't dramatically increase actual bandwidth, as an unqualified name may make seem).",
      "created_at" : "2020-08-24T08:27:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-678985562",
      "id" : 678985562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3ODk4NTU2Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-24T08:27:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/678985562",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa: Agreed that referring to the BIP in the name would make sense here.\r\n@jonatack: Thanks for the detailled review! I plan to address all of your suggestions. \r\n\r\nBefore I take any further changes, I'd like to discuss the naming. Some suggestions:\r\n- `bip152_highbandwidth_{from,to}`\r\n- `bip152_hb_{from,to}` (shorter, but not obvious)\r\n- `bip152_cmpctblk_announce_{from,to}` (avoids the \"high-bandwidth\" terminology)\r\n- ...\r\n\r\nDoes anyone have preferrences here or any other idea? My favourite would simply be `bip152_highbandwidth_{from,to}` (though being quite long). ",
      "created_at" : "2020-08-24T11:15:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-679065891",
      "id" : 679065891,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3OTA2NTg5MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-24T11:15:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/679065891",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> My favourite would simply be `bip152_highbandwidth_{from,to}`\r\n\r\nI agree with you. Might be good to have input from @TheBlueMatt or @gmaxwell.",
      "created_at" : "2020-08-25T13:11:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-680015543",
      "id" : 680015543,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDAxNTU0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-25T13:11:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680015543",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> bip152_highbandwidth_{from,to}\r\n> bip152_hb_{from,to} (shorter, but not obvious)\r\n\r\nThese seems fine, `hb` is shorter so I prefer. Anyone who is using this stuff should be familiar with the BIP and if not read it anyways.",
      "created_at" : "2020-08-25T15:19:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-680091456",
      "id" : 680091456,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDA5MTQ1Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-25T15:20:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680091456",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2020-08-26T12:53:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-680860674",
      "id" : 680860674,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDg2MDY3NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-26T12:53:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680860674",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "// EDIT: Before there was a \"rebased\" comment there that was not accurate, I confused with another PR ð¤¦ââï¸ \r\nWill still wait a bit for more naming opinions before tackling review suggestions.\r\n\r\nCurrently `bip152_bandwidth_{from,to}` (preferred by 2, jonatack and my humble self) is favoured over `bip152_bh_{from,to}` (preferred by 1, instagibbs).",
      "created_at" : "2020-08-26T15:32:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-680954252",
      "id" : 680954252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MDk1NDI1Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-26T15:33:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/680954252",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r478733482"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478733482"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, I like that much better! Adapted it, removed the indentation (as other PR review notes currently in master also don't have it) and added you as co-author.",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-08-27T22:37:57Z",
      "diff_hunk" : "@@ -0,0 +1,9 @@\n+Updated RPCs\n+------------\n+\n+- The `getpeerinfo` RPC now has additional `highbandwidth_from` and\n+  `highbandwidth_to` fields that indicate whether a peer selected us as compact\n+  blocks high-bandwidth peer (`..._from`) or whether we selected a peer to be in\n+  compact blocks high-bandwidth mode (`..._to`), respectively. High-bandwidth\n+  peers are supposed to send new block announcements via a `cmptblock` message,\n+  rather than the usual inv/headers announcements. See BIP 152 for more details.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r478733482",
      "id" : 478733482,
      "in_reply_to_id" : 475387172,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODczMzQ4Mg==",
      "original_commit_id" : "edb4ad4c9ce1ab0e8ce471b1a37ff17f24dd1fd3",
      "original_line" : 9,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "doc/release-notes-19776.md",
      "position" : null,
      "pull_request_review_id" : 477130717,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478733482",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r478733964"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478733964"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-08-27T22:39:27Z",
      "diff_hunk" : "@@ -2629,8 +2631,10 @@ void ProcessMessage(\n                 State(pfrom.GetId())->fProvidesHeaderAndIDs = true;\n                 State(pfrom.GetId())->fWantsCmpctWitness = nCMPCTBLOCKVersion == 2;\n             }\n-            if (State(pfrom.GetId())->fWantsCmpctWitness == (nCMPCTBLOCKVersion == 2)) // ignore later version announces\n+            if (State(pfrom.GetId())->fWantsCmpctWitness == (nCMPCTBLOCKVersion == 2)) { // ignore later version announces\n                 State(pfrom.GetId())->fPreferHeaderAndIDs = fAnnounceUsingCMPCTBLOCK;\n+                pfrom.m_highbandwidth_from = fAnnounceUsingCMPCTBLOCK;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r478733964",
      "id" : 478733964,
      "in_reply_to_id" : 475411024,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODczMzk2NA==",
      "original_commit_id" : "edb4ad4c9ce1ab0e8ce471b1a37ff17f24dd1fd3",
      "original_line" : 2636,
      "original_position" : 21,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 477131268,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478733964",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r478734372"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478734372"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good point, done.",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-08-27T22:40:34Z",
      "diff_hunk" : "@@ -110,6 +110,8 @@ static UniValue getpeerinfo(const JSONRPCRequest& request)\n                             {RPCResult::Type::NUM, \"version\", \"The peer version, such as 70001\"},\n                             {RPCResult::Type::STR, \"subver\", \"The string version\"},\n                             {RPCResult::Type::BOOL, \"inbound\", \"Inbound (true) or Outbound (false)\"},\n+                            {RPCResult::Type::BOOL, \"highbandwidth_from\", \"Whether peer selected us as (compact blocks) high-bandwidth peer\"},\n+                            {RPCResult::Type::BOOL, \"highbandwidth_to\", \"Whether we selected peer as (compact blocks) high-bandwidth peer\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r478734372",
      "id" : 478734372,
      "in_reply_to_id" : 475390168,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODczNDM3Mg==",
      "original_commit_id" : "edb4ad4c9ce1ab0e8ce471b1a37ff17f24dd1fd3",
      "original_line" : 114,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 477131769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478734372",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r478736865"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478736865"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Shortened the comment a bit and also reordered the parameters. Didn't want to change the function name to be even longer though (considering it's so close to where its used, possibly even closer after #19781 would be merged) everything should be clear.",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-08-27T22:47:50Z",
      "diff_hunk" : "@@ -785,6 +785,40 @@ def announce_cmpct_block(node, peer):\n         stalling_peer.send_and_ping(msg)\n         assert_equal(int(node.getbestblockhash(), 16), block.sha256)\n \n+    def test_highbandwidth_mode_states_via_getpeerinfo(self):\n+        # create new p2p connection for a fresh state w/o any prior sendcmpct messages sent\n+        hb_test_node = self.nodes[0].add_p2p_connection(TestP2PConn(cmpct_version=2))\n+\n+        # Asserts that the RPC getpeerinfo boolean result fields \"highbandwidth_{from,to}\"\n+        # for the last peer of a given node match the given parameters\n+        def assert_highbandwidth_states(node, hb_from, hb_to):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r478736865",
      "id" : 478736865,
      "in_reply_to_id" : 475414849,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODczNjg2NQ==",
      "original_commit_id" : "edb4ad4c9ce1ab0e8ce471b1a37ff17f24dd1fd3",
      "original_line" : 794,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "test/functional/p2p_compactblocks.py",
      "position" : null,
      "pull_request_review_id" : 477134626,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478736865",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r478736982"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478736982"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, fixed.",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-08-27T22:48:15Z",
      "diff_hunk" : "@@ -785,6 +785,40 @@ def announce_cmpct_block(node, peer):\n         stalling_peer.send_and_ping(msg)\n         assert_equal(int(node.getbestblockhash(), 16), block.sha256)\n \n+    def test_highbandwidth_mode_states_via_getpeerinfo(self):\n+        # create new p2p connection for a fresh state w/o any prior sendcmpct messages sent\n+        hb_test_node = self.nodes[0].add_p2p_connection(TestP2PConn(cmpct_version=2))\n+\n+        # Asserts that the RPC getpeerinfo boolean result fields \"highbandwidth_{from,to}\"\n+        # for the last peer of a given node match the given parameters\n+        def assert_highbandwidth_states(node, hb_from, hb_to):\n+            peerinfo = node.getpeerinfo()[-1]\n+            assert_equal(peerinfo['highbandwidth_from'], hb_from)\n+            assert_equal(peerinfo['highbandwidth_to'], hb_to)\n+\n+        # initially, both nodes haven't selected the other peer as high-bandwidth yet",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r478736982",
      "id" : 478736982,
      "in_reply_to_id" : 475393299,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODczNjk4Mg==",
      "original_commit_id" : "edb4ad4c9ce1ab0e8ce471b1a37ff17f24dd1fd3",
      "original_line" : 799,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/functional/p2p_compactblocks.py",
      "position" : null,
      "pull_request_review_id" : 477134777,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/478736982",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Decided for the name `bip152_highbandwidth_{to,from}` for now (both for the exposed RPC result fields and the internal variable names) and force-pushed with most of the suggestions from jonatack.",
      "created_at" : "2020-08-27T22:52:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-682230242",
      "id" : 682230242,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MjIzMDI0Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-27T22:52:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682230242",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The patch I carry locally for this calls it \r\n\r\n+            obj.pushKV(\"bip152_hb\", \r\n\r\nbut I don't think it matter other than it should mention BIP152.\r\n",
      "created_at" : "2020-08-28T00:48:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-682262664",
      "id" : 682262664,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4MjI2MjY2NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-28T00:48:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/682262664",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r481056687"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/481056687"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The names have indeed become very long, and they should arguably be written as `bip152_high_bandwidth_{to/from}`, so I'd now vote for `bip152_hb_{to/from}`.\r\n\r\n```\r\n    \"version\" : n,                               (numeric) The peer version, such as 70001\r\n    \"subver\" : \"str\",                            (string) The string version\r\n    \"inbound\" : true|false,                      (boolean) Inbound (true) or Outbound (false)\r\n    \"bip152_highbandwidth_to\" : true|false,      (boolean) Whether we selected peer as (compact blocks) high-bandwidth peer\r\n    \"bip152_highbandwidth_from\" : true|false,    (boolean) Whether peer selected us as (compact blocks) high-bandwidth peer\r\n    \"addnode\" : true|false,                      (boolean) Whether connection was due to addnode/-connect or if it was an automatic/inbound connection\r\n    \"startingheight\" : n,                        (numeric) The starting height (block) of the peer\r\n```\r\n",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-09-01T11:06:30Z",
      "diff_hunk" : "@@ -110,6 +110,8 @@ static UniValue getpeerinfo(const JSONRPCRequest& request)\n                             {RPCResult::Type::NUM, \"version\", \"The peer version, such as 70001\"},\n                             {RPCResult::Type::STR, \"subver\", \"The string version\"},\n                             {RPCResult::Type::BOOL, \"inbound\", \"Inbound (true) or Outbound (false)\"},\n+                            {RPCResult::Type::BOOL, \"bip152_highbandwidth_to\", \"Whether we selected peer as (compact blocks) high-bandwidth peer\"},\n+                            {RPCResult::Type::BOOL, \"bip152_highbandwidth_from\", \"Whether peer selected us as (compact blocks) high-bandwidth peer\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r481056687",
      "id" : 481056687,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA1NjY4Nw==",
      "original_commit_id" : "a286f89a9c02e8b9c68dcf6d69d98007d3bc9aa3",
      "original_line" : 114,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 479633929,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/481056687",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r481056835"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/481056835"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit if you retouch\r\n```suggestion\r\n- The `getpeerinfo` RPC returns two new boolean fields, `bip152_highbandwidth_to`\r\n```",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-09-01T11:06:48Z",
      "diff_hunk" : "@@ -0,0 +1,9 @@\n+Updated RPCs\n+------------\n+\n+The `getpeerinfo` RPC returns two new boolean fields, `bip152_highbandwidth_to`",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r481056835",
      "id" : 481056835,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA1NjgzNQ==",
      "original_commit_id" : "a286f89a9c02e8b9c68dcf6d69d98007d3bc9aa3",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes-19776.md",
      "position" : null,
      "pull_request_review_id" : 479633929,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/481056835",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r482806124"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482806124"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done.",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-09-03T08:36:36Z",
      "diff_hunk" : "@@ -0,0 +1,9 @@\n+Updated RPCs\n+------------\n+\n+The `getpeerinfo` RPC returns two new boolean fields, `bip152_highbandwidth_to`",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r482806124",
      "id" : 482806124,
      "in_reply_to_id" : 481056835,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjgwNjEyNA==",
      "original_commit_id" : "a286f89a9c02e8b9c68dcf6d69d98007d3bc9aa3",
      "original_line" : 4,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "doc/release-notes-19776.md",
      "position" : null,
      "pull_request_review_id" : 481618952,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482806124",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r482806281"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482806281"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done, see comment below.",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-09-03T08:36:52Z",
      "diff_hunk" : "@@ -110,6 +110,8 @@ static UniValue getpeerinfo(const JSONRPCRequest& request)\n                             {RPCResult::Type::NUM, \"version\", \"The peer version, such as 70001\"},\n                             {RPCResult::Type::STR, \"subver\", \"The string version\"},\n                             {RPCResult::Type::BOOL, \"inbound\", \"Inbound (true) or Outbound (false)\"},\n+                            {RPCResult::Type::BOOL, \"bip152_highbandwidth_to\", \"Whether we selected peer as (compact blocks) high-bandwidth peer\"},\n+                            {RPCResult::Type::BOOL, \"bip152_highbandwidth_from\", \"Whether peer selected us as (compact blocks) high-bandwidth peer\"},",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r482806281",
      "id" : 482806281,
      "in_reply_to_id" : 481056687,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjgwNjI4MQ==",
      "original_commit_id" : "a286f89a9c02e8b9c68dcf6d69d98007d3bc9aa3",
      "original_line" : 114,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/rpc/net.cpp",
      "position" : null,
      "pull_request_review_id" : 481619154,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-21T23:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/482806281",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Now that three people voted for the short version (instagibbs, jonatack, and indirectly also gmaxwell), I changed the RPC result fields to `bip152_hb_{to,from}`. The internal state variable names in `CNode{Stats}` are still kept in the long version though.",
      "created_at" : "2020-09-03T08:38:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-686343994",
      "id" : 686343994,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY4NjM0Mzk5NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-03T08:40:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/686343994",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased on master and shortened the test by using the parameterized ctor for `msg_sendcmpct`, now that #19781 has been merged.",
      "created_at" : "2020-09-20T09:56:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-695767929",
      "id" : 695767929,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NTc2NzkyOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-20T09:56:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/695767929",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review re-ACK bc8cc02 per `git range-diff 831b0ec bff461c bc8cc02`",
      "created_at" : "2020-09-20T10:36:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-695771418",
      "id" : 695771418,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NTc3MTQxOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-20T10:36:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/695771418",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK bc8cc02",
      "created_at" : "2020-09-21T09:37:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-696007242",
      "id" : 696007242,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NjAwNzI0Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-21T09:37:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/696007242",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-09-21T22:19:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-696409228",
      "id" : 696409228,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NjQwOTIyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-21T22:19:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/696409228",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased on master (was needed after the recent merge of #17785). Thanks a lot for reviewing, jonatack and naumenkogs!",
      "created_at" : "2020-09-21T23:37:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-696436215",
      "id" : 696436215,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NjQzNjIxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-21T23:37:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/696436215",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reACK 4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-09-22T06:15:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-696528944",
      "id" : 696528944,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NjUyODk0NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-22T06:15:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/696528944",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review re-ACK 4df1d1244cd334fdb946de698fe39eba1b11147b per ` git range-diff 7737603 bc8cc02 4df1d12`",
      "created_at" : "2020-09-22T07:29:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-696556183",
      "id" : 696556183,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5NjU1NjE4Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-22T07:29:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/696556183",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-09-26T17:22:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-699523584",
      "id" : 699523584,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY5OTUyMzU4NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-26T17:22:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/699523584",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r495482994"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495482994"
         }
      },
      "author_association" : "MEMBER",
      "body" : "As these are mutable fields, add a `GUARDED_BY` annotation?",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-09-26T18:31:52Z",
      "diff_hunk" : "@@ -934,6 +936,10 @@ class CNode\n public:\n     uint256 hashContinue;\n     std::atomic<int> nStartingHeight{-1};\n+    // We selected peer as (compact blocks) high-bandwidth peer (BIP152)\n+    bool m_bip152_highbandwidth_to{false};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r495482994",
      "id" : 495482994,
      "line" : 940,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ4Mjk5NA==",
      "original_commit_id" : "d51fc2538d2e8b117f53f9cd1f8cea00c88887c5",
      "original_line" : 940,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 14,
      "pull_request_review_id" : 497022953,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-26T18:31:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495482994",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r495594809"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495594809"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good point, I'm not sure though on what to put into the annotation, i.e. guarded by _what_? I see three possibilities here to protecting concurrent access to the boolean fields:\r\n- introducing a new Mutex (seems overkill)\r\n- guard with cs_main, as that Mutex is already guaranteed to be held when the flags are written (seems overkill as well, considering this is not validation-critical at all and just about some statistics; locking cs_main in CNode::copyStats() just feels wrong)\r\n- simply using an atomic bool\r\n\r\nAny thoughts about this?",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-09-27T17:20:10Z",
      "diff_hunk" : "@@ -934,6 +936,10 @@ class CNode\n public:\n     uint256 hashContinue;\n     std::atomic<int> nStartingHeight{-1};\n+    // We selected peer as (compact blocks) high-bandwidth peer (BIP152)\n+    bool m_bip152_highbandwidth_to{false};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r495594809",
      "id" : 495594809,
      "in_reply_to_id" : 495482994,
      "line" : 940,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTU5NDgwOQ==",
      "original_commit_id" : "d51fc2538d2e8b117f53f9cd1f8cea00c88887c5",
      "original_line" : 940,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 14,
      "pull_request_review_id" : 497096575,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-27T17:20:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495594809",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r495628380"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495628380"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Atomic bools seem easiest.",
      "commit_id" : "4df1d1244cd334fdb946de698fe39eba1b11147b",
      "created_at" : "2020-09-27T23:01:34Z",
      "diff_hunk" : "@@ -934,6 +936,10 @@ class CNode\n public:\n     uint256 hashContinue;\n     std::atomic<int> nStartingHeight{-1};\n+    // We selected peer as (compact blocks) high-bandwidth peer (BIP152)\n+    bool m_bip152_highbandwidth_to{false};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#discussion_r495628380",
      "id" : 495628380,
      "in_reply_to_id" : 495482994,
      "line" : 940,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTYyODM4MA==",
      "original_commit_id" : "d51fc2538d2e8b117f53f9cd1f8cea00c88887c5",
      "original_line" : 940,
      "original_position" : 14,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 14,
      "pull_request_review_id" : 497120419,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19776",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-09-27T23:01:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/495628380",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased on master, changed the data type of the introduced high-bandwidth flags `CNode::m_bip152_highbandwidth_{to,from}` to atomic bools (see discussion https://github.com/bitcoin/bitcoin/pull/19776#discussion_r495482994) and fixed typos in the comments (s/sendcmpt/sendcmpct/).",
      "created_at" : "2020-09-28T23:06:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-700328872",
      "id" : 700328872,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDMyODg3Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-28T23:06:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700328872",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "reACK 343dc4760fd2407895fc8b3417a504b194429156",
      "created_at" : "2020-09-29T06:00:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-700467920",
      "id" : 700467920,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDQ2NzkyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T06:00:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700467920",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 343dc4760fd2407895fc8b3417a504b194429156 per `git range-diff 7ea6499 4df1d12 343dc47`",
      "created_at" : "2020-09-29T06:51:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-700489169",
      "id" : 700489169,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcwMDQ4OTE2OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-09-29T06:51:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/700489169",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Since there hasn't been any activity for more than three weeks: is there anything else I can do for this PR? It has two ACKs (jonatack, naumenkogs) and two Concept ACKs (sipa, practicalswift), I think it should be ready for merge.",
      "created_at" : "2020-10-21T13:21:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-713567204",
      "id" : 713567204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMzU2NzIwNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-21T13:21:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/713567204",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I reckon it's not a reflection on this PR (which seems good AFAICS), just that attention has been focused on reviewing key features before the feature freeze October 15 and now on fixing bugs before branch-off. After branch-off, I'm guessing that features in waiting like this one will see renewed attention (if not before).",
      "created_at" : "2020-10-21T13:33:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-713578107",
      "id" : 713578107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMzU3ODEwNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-21T13:35:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/713578107",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks like this has missed the feature freeze. Can be merged after Nov 1st",
      "created_at" : "2020-10-21T14:32:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19776#issuecomment-713620781",
      "id" : 713620781,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19776",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxMzYyMDc4MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-21T14:32:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/713620781",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
