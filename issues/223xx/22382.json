{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "**Expected behavior**\r\n\r\nWhen using `getrawtransaction` with an included `blockhash`, performance should be better as there is no need to scan the entire txindex.\r\n\r\n**Actual behavior**\r\n\r\nRunning `getrawtransaction`  while including the `blockhash` is ~5x slower.\r\n\r\n<!--- What was the actual behavior (provide screenshots if the issue is GUI-related)? -->\r\n\r\n**To reproduce**\r\n\r\n```\r\n$ time ./bin/bitcoin-cli getrawtransaction 20a93350cd6f4e03dfb6cbb3f104965293627f25c199c1be0e4d187a4ed5f4bb\r\n020000000001018d3f7d8efaa377dda74892af26c1ca028466d97721d2ea6c74a5cbcf404feb9004000000171600147f5a49a2d89f86ff498103bdbcb1762f9f0ab5aefeffffff08a04a05000000000017a91467a849785bb12f1a03260b3b52ec9dff52b30e708724b80100000000001976a914f0b7e8a5ede232c2654fca3b47f8d0c95f7a561688ac50fe0b00000000001976a914ed06524fb21248a37e7f8f20cdc67e27f49c4f1588acf44f01000000000017a9147422dbf3bdf441a640d09a2a91e6fa40837b019f878d9b3100000000001976a9142a5cd9333e4e94c88f7cd33216b2fc0af15fbd8588ac89b400000000000017a914d05dbcdb4587f1a243cc1ed89e96cd4ec19e24a08778e169180000000017a914f520df8923419f60d9a76df60cfc7a0e3a3fc86f8708d806000000000017a9147246c684dd4890e9c8977e6312c30ecdea2b0a55870247304402205704dd3b6d8930e89c660011ab2f6a42aedcbde438d5f121998e3db6a66889310220054a506aee274f885229d6a9ed89eca17bac87dca401f9c63d07990e98b2f0a301210390e3b178ebc51da1589baee9de37de491dba0575838aacf88c2cd70a06a4486eb47c0a00\r\n\r\nreal\t0m0.003s\r\nuser\t0m0.000s\r\nsys\t0m0.002s\r\n$ time ./bin/bitcoin-cli getrawtransaction 20a93350cd6f4e03dfb6cbb3f104965293627f25c199c1be0e4d187a4ed5f4bb false 0000000000000000000a801776a92ced69dc5fb0a5919271872a9261a613d9c3\r\n020000000001018d3f7d8efaa377dda74892af26c1ca028466d97721d2ea6c74a5cbcf404feb9004000000171600147f5a49a2d89f86ff498103bdbcb1762f9f0ab5aefeffffff08a04a05000000000017a91467a849785bb12f1a03260b3b52ec9dff52b30e708724b80100000000001976a914f0b7e8a5ede232c2654fca3b47f8d0c95f7a561688ac50fe0b00000000001976a914ed06524fb21248a37e7f8f20cdc67e27f49c4f1588acf44f01000000000017a9147422dbf3bdf441a640d09a2a91e6fa40837b019f878d9b3100000000001976a9142a5cd9333e4e94c88f7cd33216b2fc0af15fbd8588ac89b400000000000017a914d05dbcdb4587f1a243cc1ed89e96cd4ec19e24a08778e169180000000017a914f520df8923419f60d9a76df60cfc7a0e3a3fc86f8708d806000000000017a9147246c684dd4890e9c8977e6312c30ecdea2b0a55870247304402205704dd3b6d8930e89c660011ab2f6a42aedcbde438d5f121998e3db6a66889310220054a506aee274f885229d6a9ed89eca17bac87dca401f9c63d07990e98b2f0a301210390e3b178ebc51da1589baee9de37de491dba0575838aacf88c2cd70a06a4486eb47c0a00\r\n\r\nreal\t0m0.014s\r\nuser\t0m0.000s\r\nsys\t0m0.002s\r\n```\r\n\r\n**System information**\r\n\r\nGCP c2-standard-4 (4 vCPUs, 16 GB memory) with 1TB of persistent SSD\r\n\r\nUbuntu 20.04.2 LTS\r\nBitcoin Core v0.21.1",
   "closed_at" : "2021-07-22T18:15:58Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 2,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22382/comments",
   "created_at" : "2021-07-01T13:49:23Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22382/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/22382",
   "id" : 934867555,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "description" : null,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22382/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU5MzQ4Njc1NTU=",
   "number" : 22382,
   "performed_via_github_app" : null,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "getrawtransaction is slower when used with blockhash",
   "updated_at" : "2021-07-22T18:15:59Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22382",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/1876045?v=4",
      "events_url" : "https://api.github.com/users/orweinberger/events{/privacy}",
      "followers_url" : "https://api.github.com/users/orweinberger/followers",
      "following_url" : "https://api.github.com/users/orweinberger/following{/other_user}",
      "gists_url" : "https://api.github.com/users/orweinberger/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/orweinberger",
      "id" : 1876045,
      "login" : "orweinberger",
      "node_id" : "MDQ6VXNlcjE4NzYwNDU=",
      "organizations_url" : "https://api.github.com/users/orweinberger/orgs",
      "received_events_url" : "https://api.github.com/users/orweinberger/received_events",
      "repos_url" : "https://api.github.com/users/orweinberger/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/orweinberger/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/orweinberger/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/orweinberger"
   }
}
