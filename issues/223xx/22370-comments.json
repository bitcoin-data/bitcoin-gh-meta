[
   {
      "author_association" : "MEMBER",
      "body" : "> In all my time running the code where 2 block relays are allocated, I have never seen them receiving any blocks - it's always the \"full relay\" nodes that are receiving the blocks.\r\n\r\nI run `watch -t ./src/bitcoin-cli -netinfo 4` for a continuous peer connections dashboard on my nodes, and the outbound-block-relay connections commonly provide blocks (and are correspondingly selected by my node as BIP152 high bandwidth peers). \r\n\r\nAs for their purpose:\r\n\r\n`src/net.h`\r\n```cpp\r\n    /**\r\n     * We use block-relay-only connections to help prevent against partition\r\n     * attacks. By not relaying transactions or addresses, these connections\r\n     * are harder to detect by a third party, thus helping obfuscate the\r\n     * network topology. We automatically attempt to open\r\n     * MAX_BLOCK_RELAY_ONLY_ANCHORS using addresses from our anchors.dat. Then\r\n     * addresses from our AddrMan if MAX_BLOCK_RELAY_ONLY_CONNECTIONS\r\n     * isn't reached yet.\r\n     */\r\n    BLOCK_RELAY,\r\n```\r\n\r\nhttps://github.com/bitcoin-core/bitcoin-devwiki/wiki/P2P-Design-Philosophy is also a good resource, among others.\r\n",
      "created_at" : "2021-06-29T13:28:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22370#issuecomment-870600513",
      "id" : 870600513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22370",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3MDYwMDUxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-29T13:29:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/870600513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "You can generally find more information in the pull request that added the code or in the code itself (comments).\r\n\r\nThe goal of block-relay-only connections is not to \"beat\" the other connections when it comes to providing blocks. The goal is to harden the p2p network against attacks that exploit the p2p topology.",
      "created_at" : "2021-06-29T13:29:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22370#issuecomment-870601389",
      "id" : 870601389,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22370",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3MDYwMTM4OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-29T13:29:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/870601389",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "what does \"harder to detect by a third party\" mean? detect what? the existence of the node? the connections to the node? If they are hard to detect then how does the average node find them?",
      "created_at" : "2021-06-29T15:39:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22370#issuecomment-870708015",
      "id" : 870708015,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22370",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3MDcwODAxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-29T15:39:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/870708015",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=4",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "node_id" : "MDQ6VXNlcjE1MzAyODM=",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Block-relay only connections provide two advantages over normal connections:\r\n* They have far lower bandwidth overhead, while still providing partition protection. This means we can create more of them without worrying about resources costs of the node. Or in other words, while 8 full + 2 block-only connections is weaker in terms of relay power than 10 full connections, it has similar partition resistance as 10 full connections, while only costing resources barely higher than 8 connections in total.\r\n* They don't relay IP addresses or transactions, both of which have been used in various academically described attacks that use these to infer the network topology graph. If part of the graph is harder to know by attackers, that indirectly makes partition attacks harder.\r\n\r\nIn short: it's entirely expected that absent a partitioning attack, these connections don't do much.\r\n\r\nAnd to answer your question: it's not these nodes that are hard to detect - they're just normal nodes chosen at random like others - it's the presence of the connection that's hard to find.",
      "created_at" : "2021-06-29T18:36:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22370#issuecomment-870824597",
      "id" : 870824597,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22370",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3MDgyNDU5Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-29T19:54:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/870824597",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   }
]
