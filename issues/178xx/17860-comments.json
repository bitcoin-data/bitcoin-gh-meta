[
   {
      "author_association" : "MEMBER",
      "body" : "Super strong concept ACK: very happy to see more people interested in adding fuzzers. Very welcome! :)\r\n\r\nAlso: the habit of after fixing a security bug also implementing a fuzz target that could have found the bug is something I think we should strive for. I think @kcc (known for making C++ reasonably sane by introducing the sanitizers, libFuzzer, OSS-Fuzz, CFI, etc.) first coined the term \"regression fuzzing\" for that :)\r\n\r\nA good example of \"regression fuzzing\" was this OOB read in `libc++` `<random>` which not only was fixed but also got a couple of new fuzz targets added: https://bugs.chromium.org/p/chromium/issues/detail?id=994957",
      "created_at" : "2020-01-03T21:36:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-570705528",
      "id" : 570705528,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDcwNTUyOA==",
      "updated_at" : "2020-01-03T21:36:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570705528",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [fanquake](https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-576477165), [dergoegge](https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-1419385623), [jamesob](https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-1531946556) |\n| Stale ACK | [practicalswift](https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-573099391), [jonatack](https://github.com/bitcoin/bitcoin/pull/17860#pullrequestreview-343401073), [fjahr](https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-575416508) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23352](https://github.com/bitcoin/bitcoin/pull/23352) (test: Extend stale_tip_peer_management test by MarcoFalke)\n* [#18470](https://github.com/bitcoin/bitcoin/pull/18470) (test: Extend stale tip test by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2020-01-03T23:35:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-570729631",
      "id" : 570729631,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDcyOTYzMQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570729631/reactions"
      },
      "updated_at" : "2023-05-02T18:25:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570729631",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363743028"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363743028"
         }
      },
      "author_association" : "NONE",
      "body" : "would emplace_back be more efficient / proper here?",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-07T13:18:56Z",
      "diff_hunk" : "@@ -30,7 +30,7 @@ static void AssembleBlock(benchmark::State& state)\n     std::array<CTransactionRef, NUM_BLOCKS - COINBASE_MATURITY + 1> txs;\n     for (size_t b{0}; b < NUM_BLOCKS; ++b) {\n         CMutableTransaction tx;\n-        tx.vin.push_back(MineBlock(g_testing_setup->m_node, SCRIPT_PUB));\n+        tx.vin.push_back(CTxIn{MineBlock(g_testing_setup->m_node, SCRIPT_PUB)});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363743028",
      "id" : 363743028,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzc0MzAyOA==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 5,
      "path" : "src/bench/block_assemble.cpp",
      "position" : 5,
      "pull_request_review_id" : 339228830,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363743028",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10261698?v=4",
         "events_url" : "https://api.github.com/users/sanjaykdragon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sanjaykdragon/followers",
         "following_url" : "https://api.github.com/users/sanjaykdragon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sanjaykdragon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sanjaykdragon",
         "id" : 10261698,
         "login" : "sanjaykdragon",
         "node_id" : "MDQ6VXNlcjEwMjYxNjk4",
         "organizations_url" : "https://api.github.com/users/sanjaykdragon/orgs",
         "received_events_url" : "https://api.github.com/users/sanjaykdragon/received_events",
         "repos_url" : "https://api.github.com/users/sanjaykdragon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sanjaykdragon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sanjaykdragon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sanjaykdragon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363745281"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363745281"
         }
      },
      "author_association" : "NONE",
      "body" : "use .front() instead of .at(0)",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-07T13:24:52Z",
      "diff_hunk" : "@@ -0,0 +1,158 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <consensus/consensus.h>\n+#include <consensus/merkle.h>\n+#include <node/coinstats.h>\n+#include <script/interpreter.h>\n+#include <streams.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/util/mining.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+#include <version.h>\n+\n+enum class Action : uint8_t {\n+    CREATE_INPUT, //!< Append an input-output pair to the last tx in the current block\n+    CREATE_TX,    //!< Append a tx to the list of txs in the current block\n+    CREATE_BLOCK, //!< Append the current block to the active chain\n+};\n+\n+\n+void test_one_input(const std::vector<uint8_t>& buffer)\n+{\n+    /** The testing setup that creates a chainstate and other globals */\n+    TestingSetup test_setup{CBaseChainParams::REGTEST};\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    const auto PrepareNextBlock = [&]() {\n+        // Use OP_FALSE to avoid BIP30 check from hitting early\n+        auto block = PrepareBlock(test_setup.m_node, /* coinbase_scriptPubKey */ OP_FALSE);\n+        // Replace OP_FALSE with OP_TRUE\n+        {\n+            CMutableTransaction tx{*block->vtx.back()};\n+            tx.vout.at(0).scriptPubKey = OP_TRUE;\n+            block->vtx.back() = MakeTransactionRef(tx);\n+        }\n+        return block;\n+    };\n+\n+    /** The block template this fuzzer is working on */\n+    auto current_block = PrepareNextBlock();\n+    /** Append-only set of tx outpoints, entries are not removed when spent */\n+    std::vector<std::pair<COutPoint, CTxOut>> txos;\n+    /** The utxo stats at the chain tip */\n+    CCoinsStats utxo_stats;\n+    /** The total amount of coins in the utxo set */\n+    CAmount circulation{0};\n+\n+\n+    // Store the tx out in the txo map\n+    const auto StoreLastTxo = [&]() {\n+        // get last tx\n+        const CTransaction& tx = *current_block->vtx.back();\n+        // get last out\n+        const uint32_t i = tx.vout.size() - 1;\n+        // store it\n+        txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        if (current_block->vtx.size() == 1 && tx.vout.at(i).scriptPubKey[0] == OP_RETURN) {\n+            // also store coinbase\n+            const uint32_t i = tx.vout.size() - 2;\n+            txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        }\n+    };\n+    const auto AppendRandomTxo = [&](CMutableTransaction& tx) {\n+        const auto& txo = txos.at(fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, txos.size() - 1));\n+        tx.vin.emplace_back(txo.first);\n+        tx.vout.emplace_back(txo.second.nValue, txo.second.scriptPubKey); // \"Forward\" coin with no fee\n+    };\n+    const auto UpdateUtxoStats = [&]() {\n+        LOCK(cs_main);\n+        ::ChainstateActive().ForceFlushStateToDisk();\n+        assert(GetUTXOStats(&ChainstateActive().CoinsDB(), utxo_stats));\n+        // Check that miner can't print more money than they are allowed to\n+        assert(circulation == utxo_stats.nTotalAmount);\n+    };\n+\n+\n+    // Update internal state to chain tip\n+    StoreLastTxo();\n+    UpdateUtxoStats();\n+    assert(ChainActive().Height() == 0);\n+    // Get at which height we duplicate the coinbase\n+    int64_t duplicate_coinbase_height;\n+    CScript duplicate_coinbase_script;\n+    {\n+        // A chance of 1 in 20 for the duplicate coinbase to be within the first 100 blocks feels about right\n+        duplicate_coinbase_height = fuzzed_data_provider.ConsumeIntegralInRange(0, 20 * COINBASE_MATURITY);\n+        // Mine the first block with this duplicate\n+        current_block = PrepareNextBlock();\n+        StoreLastTxo();\n+\n+        // Create duplicate (CScript should match exact format as in CreateNewBlock)\n+        CMutableTransaction tx{*current_block->vtx.back()};\n+        duplicate_coinbase_script = CScript() << duplicate_coinbase_height << OP_0;\n+        tx.vin.at(0).scriptSig = duplicate_coinbase_script;\n+\n+        // Mine block and create next block template\n+        current_block->vtx.back() = MakeTransactionRef(tx);\n+        current_block->hashMerkleRoot = BlockMerkleRoot(*current_block);\n+        assert(!MineBlock(current_block).IsNull());\n+        circulation += GetBlockSubsidy(ChainActive().Height(), Params().GetConsensus());\n+\n+        assert(ChainActive().Height() == 1);\n+        UpdateUtxoStats();\n+        current_block = PrepareNextBlock();\n+        StoreLastTxo();\n+    }\n+\n+    while (fuzzed_data_provider.remaining_bytes()) {\n+        const auto action = static_cast<Action>(fuzzed_data_provider.ConsumeIntegralInRange(0, 2));\n+        switch (action) {\n+        case Action::CREATE_INPUT: {\n+            CMutableTransaction tx{*current_block->vtx.back()};\n+            AppendRandomTxo(tx);\n+            current_block->vtx.back() = MakeTransactionRef(tx);\n+            StoreLastTxo();\n+            break;\n+        }\n+        case Action::CREATE_TX: {\n+            CMutableTransaction tx{};\n+            AppendRandomTxo(tx);\n+            current_block->vtx.push_back(MakeTransactionRef(tx));\n+            StoreLastTxo();\n+            break;\n+        }\n+        case Action::CREATE_BLOCK: {\n+            ReGenerateCommitments(*current_block);\n+            const bool was_valid = !MineBlock(current_block).IsNull();\n+\n+            const auto prev_utxo_stats = utxo_stats;\n+            if (was_valid) {\n+                circulation += GetBlockSubsidy(ChainActive().Height(), Params().GetConsensus());\n+\n+                if (duplicate_coinbase_height == ChainActive().Height()) {\n+                    // we mined the duplicate coinbase\n+                    assert(current_block->vtx.at(0)->vin.at(0).scriptSig == duplicate_coinbase_script);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363745281",
      "id" : 363745281,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzc0NTI4MQ==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 139,
      "path" : "src/test/fuzz/utxo_total_supply.cpp",
      "position" : 139,
      "pull_request_review_id" : 339231752,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363745281",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10261698?v=4",
         "events_url" : "https://api.github.com/users/sanjaykdragon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sanjaykdragon/followers",
         "following_url" : "https://api.github.com/users/sanjaykdragon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sanjaykdragon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sanjaykdragon",
         "id" : 10261698,
         "login" : "sanjaykdragon",
         "node_id" : "MDQ6VXNlcjEwMjYxNjk4",
         "organizations_url" : "https://api.github.com/users/sanjaykdragon/orgs",
         "received_events_url" : "https://api.github.com/users/sanjaykdragon/received_events",
         "repos_url" : "https://api.github.com/users/sanjaykdragon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sanjaykdragon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sanjaykdragon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sanjaykdragon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363760321"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363760321"
         }
      },
      "author_association" : "NONE",
      "body" : "use .front()",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-07T14:01:15Z",
      "diff_hunk" : "@@ -22,19 +25,62 @@ CTxIn generatetoaddress(const NodeContext& node, const std::string& address)\n     return MineBlock(node, coinbase_script);\n }\n \n-CTxIn MineBlock(const NodeContext& node, const CScript& coinbase_scriptPubKey)\n+void ReGenerateCommitments(CBlock& block)\n+{\n+    CMutableTransaction tx{*block.vtx.at(0)};\n+    tx.vout.erase(tx.vout.begin() + GetWitnessCommitmentIndex(block));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363760321",
      "id" : 363760321,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzc2MDMyMQ==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 27,
      "path" : "src/test/util/mining.cpp",
      "position" : 27,
      "pull_request_review_id" : 339252135,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363760321",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10261698?v=4",
         "events_url" : "https://api.github.com/users/sanjaykdragon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sanjaykdragon/followers",
         "following_url" : "https://api.github.com/users/sanjaykdragon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sanjaykdragon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sanjaykdragon",
         "id" : 10261698,
         "login" : "sanjaykdragon",
         "node_id" : "MDQ6VXNlcjEwMjYxNjk4",
         "organizations_url" : "https://api.github.com/users/sanjaykdragon/orgs",
         "received_events_url" : "https://api.github.com/users/sanjaykdragon/received_events",
         "repos_url" : "https://api.github.com/users/sanjaykdragon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sanjaykdragon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sanjaykdragon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sanjaykdragon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363892945"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363892945"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why?\r\n\r\n.at() asserts that the element exists, which I like",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-07T18:43:39Z",
      "diff_hunk" : "@@ -0,0 +1,158 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <consensus/consensus.h>\n+#include <consensus/merkle.h>\n+#include <node/coinstats.h>\n+#include <script/interpreter.h>\n+#include <streams.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/util/mining.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+#include <version.h>\n+\n+enum class Action : uint8_t {\n+    CREATE_INPUT, //!< Append an input-output pair to the last tx in the current block\n+    CREATE_TX,    //!< Append a tx to the list of txs in the current block\n+    CREATE_BLOCK, //!< Append the current block to the active chain\n+};\n+\n+\n+void test_one_input(const std::vector<uint8_t>& buffer)\n+{\n+    /** The testing setup that creates a chainstate and other globals */\n+    TestingSetup test_setup{CBaseChainParams::REGTEST};\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    const auto PrepareNextBlock = [&]() {\n+        // Use OP_FALSE to avoid BIP30 check from hitting early\n+        auto block = PrepareBlock(test_setup.m_node, /* coinbase_scriptPubKey */ OP_FALSE);\n+        // Replace OP_FALSE with OP_TRUE\n+        {\n+            CMutableTransaction tx{*block->vtx.back()};\n+            tx.vout.at(0).scriptPubKey = OP_TRUE;\n+            block->vtx.back() = MakeTransactionRef(tx);\n+        }\n+        return block;\n+    };\n+\n+    /** The block template this fuzzer is working on */\n+    auto current_block = PrepareNextBlock();\n+    /** Append-only set of tx outpoints, entries are not removed when spent */\n+    std::vector<std::pair<COutPoint, CTxOut>> txos;\n+    /** The utxo stats at the chain tip */\n+    CCoinsStats utxo_stats;\n+    /** The total amount of coins in the utxo set */\n+    CAmount circulation{0};\n+\n+\n+    // Store the tx out in the txo map\n+    const auto StoreLastTxo = [&]() {\n+        // get last tx\n+        const CTransaction& tx = *current_block->vtx.back();\n+        // get last out\n+        const uint32_t i = tx.vout.size() - 1;\n+        // store it\n+        txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        if (current_block->vtx.size() == 1 && tx.vout.at(i).scriptPubKey[0] == OP_RETURN) {\n+            // also store coinbase\n+            const uint32_t i = tx.vout.size() - 2;\n+            txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        }\n+    };\n+    const auto AppendRandomTxo = [&](CMutableTransaction& tx) {\n+        const auto& txo = txos.at(fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, txos.size() - 1));\n+        tx.vin.emplace_back(txo.first);\n+        tx.vout.emplace_back(txo.second.nValue, txo.second.scriptPubKey); // \"Forward\" coin with no fee\n+    };\n+    const auto UpdateUtxoStats = [&]() {\n+        LOCK(cs_main);\n+        ::ChainstateActive().ForceFlushStateToDisk();\n+        assert(GetUTXOStats(&ChainstateActive().CoinsDB(), utxo_stats));\n+        // Check that miner can't print more money than they are allowed to\n+        assert(circulation == utxo_stats.nTotalAmount);\n+    };\n+\n+\n+    // Update internal state to chain tip\n+    StoreLastTxo();\n+    UpdateUtxoStats();\n+    assert(ChainActive().Height() == 0);\n+    // Get at which height we duplicate the coinbase\n+    int64_t duplicate_coinbase_height;\n+    CScript duplicate_coinbase_script;\n+    {\n+        // A chance of 1 in 20 for the duplicate coinbase to be within the first 100 blocks feels about right\n+        duplicate_coinbase_height = fuzzed_data_provider.ConsumeIntegralInRange(0, 20 * COINBASE_MATURITY);\n+        // Mine the first block with this duplicate\n+        current_block = PrepareNextBlock();\n+        StoreLastTxo();\n+\n+        // Create duplicate (CScript should match exact format as in CreateNewBlock)\n+        CMutableTransaction tx{*current_block->vtx.back()};\n+        duplicate_coinbase_script = CScript() << duplicate_coinbase_height << OP_0;\n+        tx.vin.at(0).scriptSig = duplicate_coinbase_script;\n+\n+        // Mine block and create next block template\n+        current_block->vtx.back() = MakeTransactionRef(tx);\n+        current_block->hashMerkleRoot = BlockMerkleRoot(*current_block);\n+        assert(!MineBlock(current_block).IsNull());\n+        circulation += GetBlockSubsidy(ChainActive().Height(), Params().GetConsensus());\n+\n+        assert(ChainActive().Height() == 1);\n+        UpdateUtxoStats();\n+        current_block = PrepareNextBlock();\n+        StoreLastTxo();\n+    }\n+\n+    while (fuzzed_data_provider.remaining_bytes()) {\n+        const auto action = static_cast<Action>(fuzzed_data_provider.ConsumeIntegralInRange(0, 2));\n+        switch (action) {\n+        case Action::CREATE_INPUT: {\n+            CMutableTransaction tx{*current_block->vtx.back()};\n+            AppendRandomTxo(tx);\n+            current_block->vtx.back() = MakeTransactionRef(tx);\n+            StoreLastTxo();\n+            break;\n+        }\n+        case Action::CREATE_TX: {\n+            CMutableTransaction tx{};\n+            AppendRandomTxo(tx);\n+            current_block->vtx.push_back(MakeTransactionRef(tx));\n+            StoreLastTxo();\n+            break;\n+        }\n+        case Action::CREATE_BLOCK: {\n+            ReGenerateCommitments(*current_block);\n+            const bool was_valid = !MineBlock(current_block).IsNull();\n+\n+            const auto prev_utxo_stats = utxo_stats;\n+            if (was_valid) {\n+                circulation += GetBlockSubsidy(ChainActive().Height(), Params().GetConsensus());\n+\n+                if (duplicate_coinbase_height == ChainActive().Height()) {\n+                    // we mined the duplicate coinbase\n+                    assert(current_block->vtx.at(0)->vin.at(0).scriptSig == duplicate_coinbase_script);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363892945",
      "id" : 363892945,
      "in_reply_to_id" : 363745281,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5Mjk0NQ==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 139,
      "path" : "src/test/fuzz/utxo_total_supply.cpp",
      "position" : 139,
      "pull_request_review_id" : 339429676,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363892945",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363893018"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363893018"
         }
      },
      "author_association" : "MEMBER",
      "body" : "why?\r\n\r\n.at() asserts that the element exists, which I like",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-07T18:43:47Z",
      "diff_hunk" : "@@ -22,19 +25,62 @@ CTxIn generatetoaddress(const NodeContext& node, const std::string& address)\n     return MineBlock(node, coinbase_script);\n }\n \n-CTxIn MineBlock(const NodeContext& node, const CScript& coinbase_scriptPubKey)\n+void ReGenerateCommitments(CBlock& block)\n+{\n+    CMutableTransaction tx{*block.vtx.at(0)};\n+    tx.vout.erase(tx.vout.begin() + GetWitnessCommitmentIndex(block));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363893018",
      "id" : 363893018,
      "in_reply_to_id" : 363760321,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg5MzAxOA==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 27,
      "path" : "src/test/util/mining.cpp",
      "position" : 27,
      "pull_request_review_id" : 339429771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363893018",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363928146"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363928146"
         }
      },
      "author_association" : "NONE",
      "body" : "> why?\r\n> \r\n> .at() asserts that the element exists, which I like\r\n\r\nwhat do you mean by this?",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-07T20:06:51Z",
      "diff_hunk" : "@@ -22,19 +25,62 @@ CTxIn generatetoaddress(const NodeContext& node, const std::string& address)\n     return MineBlock(node, coinbase_script);\n }\n \n-CTxIn MineBlock(const NodeContext& node, const CScript& coinbase_scriptPubKey)\n+void ReGenerateCommitments(CBlock& block)\n+{\n+    CMutableTransaction tx{*block.vtx.at(0)};\n+    tx.vout.erase(tx.vout.begin() + GetWitnessCommitmentIndex(block));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363928146",
      "id" : 363928146,
      "in_reply_to_id" : 363760321,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkyODE0Ng==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 27,
      "path" : "src/test/util/mining.cpp",
      "position" : 27,
      "pull_request_review_id" : 339476811,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363928146",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10261698?v=4",
         "events_url" : "https://api.github.com/users/sanjaykdragon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sanjaykdragon/followers",
         "following_url" : "https://api.github.com/users/sanjaykdragon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sanjaykdragon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sanjaykdragon",
         "id" : 10261698,
         "login" : "sanjaykdragon",
         "node_id" : "MDQ6VXNlcjEwMjYxNjk4",
         "organizations_url" : "https://api.github.com/users/sanjaykdragon/orgs",
         "received_events_url" : "https://api.github.com/users/sanjaykdragon/received_events",
         "repos_url" : "https://api.github.com/users/sanjaykdragon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sanjaykdragon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sanjaykdragon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sanjaykdragon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363929147"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363929147"
         }
      },
      "author_association" : "MEMBER",
      "body" : ".at() will throw an exception when the vector is empty; front() will just cause UB.",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-07T20:09:21Z",
      "diff_hunk" : "@@ -22,19 +25,62 @@ CTxIn generatetoaddress(const NodeContext& node, const std::string& address)\n     return MineBlock(node, coinbase_script);\n }\n \n-CTxIn MineBlock(const NodeContext& node, const CScript& coinbase_scriptPubKey)\n+void ReGenerateCommitments(CBlock& block)\n+{\n+    CMutableTransaction tx{*block.vtx.at(0)};\n+    tx.vout.erase(tx.vout.begin() + GetWitnessCommitmentIndex(block));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363929147",
      "id" : 363929147,
      "in_reply_to_id" : 363760321,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkyOTE0Nw==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 27,
      "path" : "src/test/util/mining.cpp",
      "position" : 27,
      "pull_request_review_id" : 339478197,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363929147",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363942583"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363942583"
         }
      },
      "author_association" : "NONE",
      "body" : "> .at() will throw an exception when the vector is empty; front() will just cause UB.\r\n\r\nhuh, did not know that. thanks for clarifying",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-07T20:44:58Z",
      "diff_hunk" : "@@ -22,19 +25,62 @@ CTxIn generatetoaddress(const NodeContext& node, const std::string& address)\n     return MineBlock(node, coinbase_script);\n }\n \n-CTxIn MineBlock(const NodeContext& node, const CScript& coinbase_scriptPubKey)\n+void ReGenerateCommitments(CBlock& block)\n+{\n+    CMutableTransaction tx{*block.vtx.at(0)};\n+    tx.vout.erase(tx.vout.begin() + GetWitnessCommitmentIndex(block));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r363942583",
      "id" : 363942583,
      "in_reply_to_id" : 363760321,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk0MjU4Mw==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 27,
      "path" : "src/test/util/mining.cpp",
      "position" : 27,
      "pull_request_review_id" : 339496094,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363942583",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10261698?v=4",
         "events_url" : "https://api.github.com/users/sanjaykdragon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sanjaykdragon/followers",
         "following_url" : "https://api.github.com/users/sanjaykdragon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sanjaykdragon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sanjaykdragon",
         "id" : 10261698,
         "login" : "sanjaykdragon",
         "node_id" : "MDQ6VXNlcjEwMjYxNjk4",
         "organizations_url" : "https://api.github.com/users/sanjaykdragon/orgs",
         "received_events_url" : "https://api.github.com/users/sanjaykdragon/received_events",
         "repos_url" : "https://api.github.com/users/sanjaykdragon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sanjaykdragon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sanjaykdragon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sanjaykdragon"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "This is kind of an aside, but thought I'd post here since this harness makes use of the `ConsumeIntegralInRange` function and I'm curious what others think.\r\n\r\nI modified `FuzzedDataProvider.h` to ignore byte 48 so that afl-tmin could minimize better.  `afl-tmin` zeros out redundant data with ascii '0' (http://lcamtuf.coredump.cx/afl/technical_details.txt) - this is done to reduce the number of execs.  Since the harness uses range (0-2) and all 256 possible fuzz bytes are mapped to this range, ignoring byte 48 should allow for better minimization if running `afl-tmin` on a corpus.  However, with and without ignoring byte 48, `afl-tmin` was not able to minimize at all, but logically, it SHOULD have regardless of whether the byte was ignored or not (I can look into this more so that there's more data on this).  This is the only harness that used `ConsumeIntegralInRange`, so I wasn't able to test `afl-tmin` in a meaningful way on any other harnesses. Thoughts on ignoring byte 48?",
      "created_at" : "2020-01-08T01:12:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-571846309",
      "id" : 571846309,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MTg0NjMwOQ==",
      "updated_at" : "2020-01-08T01:12:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/571846309",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r364965476"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364965476"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`.front()` for clarity that this is a coinbase tx?",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-09T21:21:39Z",
      "diff_hunk" : "@@ -0,0 +1,158 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <consensus/consensus.h>\n+#include <consensus/merkle.h>\n+#include <node/coinstats.h>\n+#include <script/interpreter.h>\n+#include <streams.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/util/mining.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+#include <version.h>\n+\n+enum class Action : uint8_t {\n+    CREATE_INPUT, //!< Append an input-output pair to the last tx in the current block\n+    CREATE_TX,    //!< Append a tx to the list of txs in the current block\n+    CREATE_BLOCK, //!< Append the current block to the active chain\n+};\n+\n+\n+void test_one_input(const std::vector<uint8_t>& buffer)\n+{\n+    /** The testing setup that creates a chainstate and other globals */\n+    TestingSetup test_setup{CBaseChainParams::REGTEST};\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    const auto PrepareNextBlock = [&]() {\n+        // Use OP_FALSE to avoid BIP30 check from hitting early\n+        auto block = PrepareBlock(test_setup.m_node, /* coinbase_scriptPubKey */ OP_FALSE);\n+        // Replace OP_FALSE with OP_TRUE\n+        {\n+            CMutableTransaction tx{*block->vtx.back()};\n+            tx.vout.at(0).scriptPubKey = OP_TRUE;\n+            block->vtx.back() = MakeTransactionRef(tx);\n+        }\n+        return block;\n+    };\n+\n+    /** The block template this fuzzer is working on */\n+    auto current_block = PrepareNextBlock();\n+    /** Append-only set of tx outpoints, entries are not removed when spent */\n+    std::vector<std::pair<COutPoint, CTxOut>> txos;\n+    /** The utxo stats at the chain tip */\n+    CCoinsStats utxo_stats;\n+    /** The total amount of coins in the utxo set */\n+    CAmount circulation{0};\n+\n+\n+    // Store the tx out in the txo map\n+    const auto StoreLastTxo = [&]() {\n+        // get last tx\n+        const CTransaction& tx = *current_block->vtx.back();\n+        // get last out\n+        const uint32_t i = tx.vout.size() - 1;\n+        // store it\n+        txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        if (current_block->vtx.size() == 1 && tx.vout.at(i).scriptPubKey[0] == OP_RETURN) {\n+            // also store coinbase\n+            const uint32_t i = tx.vout.size() - 2;\n+            txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        }\n+    };\n+    const auto AppendRandomTxo = [&](CMutableTransaction& tx) {\n+        const auto& txo = txos.at(fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, txos.size() - 1));\n+        tx.vin.emplace_back(txo.first);\n+        tx.vout.emplace_back(txo.second.nValue, txo.second.scriptPubKey); // \"Forward\" coin with no fee\n+    };\n+    const auto UpdateUtxoStats = [&]() {\n+        LOCK(cs_main);\n+        ::ChainstateActive().ForceFlushStateToDisk();\n+        assert(GetUTXOStats(&ChainstateActive().CoinsDB(), utxo_stats));\n+        // Check that miner can't print more money than they are allowed to\n+        assert(circulation == utxo_stats.nTotalAmount);\n+    };\n+\n+\n+    // Update internal state to chain tip\n+    StoreLastTxo();\n+    UpdateUtxoStats();\n+    assert(ChainActive().Height() == 0);\n+    // Get at which height we duplicate the coinbase\n+    int64_t duplicate_coinbase_height;\n+    CScript duplicate_coinbase_script;\n+    {\n+        // A chance of 1 in 20 for the duplicate coinbase to be within the first 100 blocks feels about right\n+        duplicate_coinbase_height = fuzzed_data_provider.ConsumeIntegralInRange(0, 20 * COINBASE_MATURITY);\n+        // Mine the first block with this duplicate\n+        current_block = PrepareNextBlock();\n+        StoreLastTxo();\n+\n+        // Create duplicate (CScript should match exact format as in CreateNewBlock)\n+        CMutableTransaction tx{*current_block->vtx.back()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r364965476",
      "id" : 364965476,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk2NTQ3Ng==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 96,
      "path" : "src/test/fuzz/utxo_total_supply.cpp",
      "position" : null,
      "pull_request_review_id" : 340822132,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364965476",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r364970490"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364970490"
         }
      },
      "author_association" : "MEMBER",
      "body" : "can  you remind the reader what the OP_0 push is for? I've forgotten as well, or cannot at least find the rule needed for it.",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-09T21:34:21Z",
      "diff_hunk" : "@@ -0,0 +1,158 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <consensus/consensus.h>\n+#include <consensus/merkle.h>\n+#include <node/coinstats.h>\n+#include <script/interpreter.h>\n+#include <streams.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/util/mining.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+#include <version.h>\n+\n+enum class Action : uint8_t {\n+    CREATE_INPUT, //!< Append an input-output pair to the last tx in the current block\n+    CREATE_TX,    //!< Append a tx to the list of txs in the current block\n+    CREATE_BLOCK, //!< Append the current block to the active chain\n+};\n+\n+\n+void test_one_input(const std::vector<uint8_t>& buffer)\n+{\n+    /** The testing setup that creates a chainstate and other globals */\n+    TestingSetup test_setup{CBaseChainParams::REGTEST};\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    const auto PrepareNextBlock = [&]() {\n+        // Use OP_FALSE to avoid BIP30 check from hitting early\n+        auto block = PrepareBlock(test_setup.m_node, /* coinbase_scriptPubKey */ OP_FALSE);\n+        // Replace OP_FALSE with OP_TRUE\n+        {\n+            CMutableTransaction tx{*block->vtx.back()};\n+            tx.vout.at(0).scriptPubKey = OP_TRUE;\n+            block->vtx.back() = MakeTransactionRef(tx);\n+        }\n+        return block;\n+    };\n+\n+    /** The block template this fuzzer is working on */\n+    auto current_block = PrepareNextBlock();\n+    /** Append-only set of tx outpoints, entries are not removed when spent */\n+    std::vector<std::pair<COutPoint, CTxOut>> txos;\n+    /** The utxo stats at the chain tip */\n+    CCoinsStats utxo_stats;\n+    /** The total amount of coins in the utxo set */\n+    CAmount circulation{0};\n+\n+\n+    // Store the tx out in the txo map\n+    const auto StoreLastTxo = [&]() {\n+        // get last tx\n+        const CTransaction& tx = *current_block->vtx.back();\n+        // get last out\n+        const uint32_t i = tx.vout.size() - 1;\n+        // store it\n+        txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        if (current_block->vtx.size() == 1 && tx.vout.at(i).scriptPubKey[0] == OP_RETURN) {\n+            // also store coinbase\n+            const uint32_t i = tx.vout.size() - 2;\n+            txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        }\n+    };\n+    const auto AppendRandomTxo = [&](CMutableTransaction& tx) {\n+        const auto& txo = txos.at(fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, txos.size() - 1));\n+        tx.vin.emplace_back(txo.first);\n+        tx.vout.emplace_back(txo.second.nValue, txo.second.scriptPubKey); // \"Forward\" coin with no fee\n+    };\n+    const auto UpdateUtxoStats = [&]() {\n+        LOCK(cs_main);\n+        ::ChainstateActive().ForceFlushStateToDisk();\n+        assert(GetUTXOStats(&ChainstateActive().CoinsDB(), utxo_stats));\n+        // Check that miner can't print more money than they are allowed to\n+        assert(circulation == utxo_stats.nTotalAmount);\n+    };\n+\n+\n+    // Update internal state to chain tip\n+    StoreLastTxo();\n+    UpdateUtxoStats();\n+    assert(ChainActive().Height() == 0);\n+    // Get at which height we duplicate the coinbase\n+    int64_t duplicate_coinbase_height;\n+    CScript duplicate_coinbase_script;\n+    {\n+        // A chance of 1 in 20 for the duplicate coinbase to be within the first 100 blocks feels about right\n+        duplicate_coinbase_height = fuzzed_data_provider.ConsumeIntegralInRange(0, 20 * COINBASE_MATURITY);\n+        // Mine the first block with this duplicate\n+        current_block = PrepareNextBlock();\n+        StoreLastTxo();\n+\n+        // Create duplicate (CScript should match exact format as in CreateNewBlock)\n+        CMutableTransaction tx{*current_block->vtx.back()};\n+        duplicate_coinbase_script = CScript() << duplicate_coinbase_height << OP_0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r364970490",
      "id" : 364970490,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3MDQ5MA==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 97,
      "path" : "src/test/fuzz/utxo_total_supply.cpp",
      "position" : null,
      "pull_request_review_id" : 340822132,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364970490",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r364970829"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364970829"
         }
      },
      "author_association" : "MEMBER",
      "body" : "about right... for what? :)",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-09T21:35:15Z",
      "diff_hunk" : "@@ -0,0 +1,158 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <consensus/consensus.h>\n+#include <consensus/merkle.h>\n+#include <node/coinstats.h>\n+#include <script/interpreter.h>\n+#include <streams.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/util/mining.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+#include <version.h>\n+\n+enum class Action : uint8_t {\n+    CREATE_INPUT, //!< Append an input-output pair to the last tx in the current block\n+    CREATE_TX,    //!< Append a tx to the list of txs in the current block\n+    CREATE_BLOCK, //!< Append the current block to the active chain\n+};\n+\n+\n+void test_one_input(const std::vector<uint8_t>& buffer)\n+{\n+    /** The testing setup that creates a chainstate and other globals */\n+    TestingSetup test_setup{CBaseChainParams::REGTEST};\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    const auto PrepareNextBlock = [&]() {\n+        // Use OP_FALSE to avoid BIP30 check from hitting early\n+        auto block = PrepareBlock(test_setup.m_node, /* coinbase_scriptPubKey */ OP_FALSE);\n+        // Replace OP_FALSE with OP_TRUE\n+        {\n+            CMutableTransaction tx{*block->vtx.back()};\n+            tx.vout.at(0).scriptPubKey = OP_TRUE;\n+            block->vtx.back() = MakeTransactionRef(tx);\n+        }\n+        return block;\n+    };\n+\n+    /** The block template this fuzzer is working on */\n+    auto current_block = PrepareNextBlock();\n+    /** Append-only set of tx outpoints, entries are not removed when spent */\n+    std::vector<std::pair<COutPoint, CTxOut>> txos;\n+    /** The utxo stats at the chain tip */\n+    CCoinsStats utxo_stats;\n+    /** The total amount of coins in the utxo set */\n+    CAmount circulation{0};\n+\n+\n+    // Store the tx out in the txo map\n+    const auto StoreLastTxo = [&]() {\n+        // get last tx\n+        const CTransaction& tx = *current_block->vtx.back();\n+        // get last out\n+        const uint32_t i = tx.vout.size() - 1;\n+        // store it\n+        txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        if (current_block->vtx.size() == 1 && tx.vout.at(i).scriptPubKey[0] == OP_RETURN) {\n+            // also store coinbase\n+            const uint32_t i = tx.vout.size() - 2;\n+            txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        }\n+    };\n+    const auto AppendRandomTxo = [&](CMutableTransaction& tx) {\n+        const auto& txo = txos.at(fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, txos.size() - 1));\n+        tx.vin.emplace_back(txo.first);\n+        tx.vout.emplace_back(txo.second.nValue, txo.second.scriptPubKey); // \"Forward\" coin with no fee\n+    };\n+    const auto UpdateUtxoStats = [&]() {\n+        LOCK(cs_main);\n+        ::ChainstateActive().ForceFlushStateToDisk();\n+        assert(GetUTXOStats(&ChainstateActive().CoinsDB(), utxo_stats));\n+        // Check that miner can't print more money than they are allowed to\n+        assert(circulation == utxo_stats.nTotalAmount);\n+    };\n+\n+\n+    // Update internal state to chain tip\n+    StoreLastTxo();\n+    UpdateUtxoStats();\n+    assert(ChainActive().Height() == 0);\n+    // Get at which height we duplicate the coinbase\n+    int64_t duplicate_coinbase_height;\n+    CScript duplicate_coinbase_script;\n+    {\n+        // A chance of 1 in 20 for the duplicate coinbase to be within the first 100 blocks feels about right",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r364970829",
      "id" : 364970829,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3MDgyOQ==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 89,
      "path" : "src/test/fuzz/utxo_total_supply.cpp",
      "position" : null,
      "pull_request_review_id" : 340822132,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364970829",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r364972613"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364972613"
         }
      },
      "author_association" : "MEMBER",
      "body" : "this section needs a description what it's setting up for",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-09T21:39:28Z",
      "diff_hunk" : "@@ -0,0 +1,158 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <consensus/consensus.h>\n+#include <consensus/merkle.h>\n+#include <node/coinstats.h>\n+#include <script/interpreter.h>\n+#include <streams.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/util/mining.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+#include <version.h>\n+\n+enum class Action : uint8_t {\n+    CREATE_INPUT, //!< Append an input-output pair to the last tx in the current block\n+    CREATE_TX,    //!< Append a tx to the list of txs in the current block\n+    CREATE_BLOCK, //!< Append the current block to the active chain\n+};\n+\n+\n+void test_one_input(const std::vector<uint8_t>& buffer)\n+{\n+    /** The testing setup that creates a chainstate and other globals */\n+    TestingSetup test_setup{CBaseChainParams::REGTEST};\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    const auto PrepareNextBlock = [&]() {\n+        // Use OP_FALSE to avoid BIP30 check from hitting early\n+        auto block = PrepareBlock(test_setup.m_node, /* coinbase_scriptPubKey */ OP_FALSE);\n+        // Replace OP_FALSE with OP_TRUE\n+        {\n+            CMutableTransaction tx{*block->vtx.back()};\n+            tx.vout.at(0).scriptPubKey = OP_TRUE;\n+            block->vtx.back() = MakeTransactionRef(tx);\n+        }\n+        return block;\n+    };\n+\n+    /** The block template this fuzzer is working on */\n+    auto current_block = PrepareNextBlock();\n+    /** Append-only set of tx outpoints, entries are not removed when spent */\n+    std::vector<std::pair<COutPoint, CTxOut>> txos;\n+    /** The utxo stats at the chain tip */\n+    CCoinsStats utxo_stats;\n+    /** The total amount of coins in the utxo set */\n+    CAmount circulation{0};\n+\n+\n+    // Store the tx out in the txo map\n+    const auto StoreLastTxo = [&]() {\n+        // get last tx\n+        const CTransaction& tx = *current_block->vtx.back();\n+        // get last out\n+        const uint32_t i = tx.vout.size() - 1;\n+        // store it\n+        txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        if (current_block->vtx.size() == 1 && tx.vout.at(i).scriptPubKey[0] == OP_RETURN) {\n+            // also store coinbase\n+            const uint32_t i = tx.vout.size() - 2;\n+            txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        }\n+    };\n+    const auto AppendRandomTxo = [&](CMutableTransaction& tx) {\n+        const auto& txo = txos.at(fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, txos.size() - 1));\n+        tx.vin.emplace_back(txo.first);\n+        tx.vout.emplace_back(txo.second.nValue, txo.second.scriptPubKey); // \"Forward\" coin with no fee\n+    };\n+    const auto UpdateUtxoStats = [&]() {\n+        LOCK(cs_main);\n+        ::ChainstateActive().ForceFlushStateToDisk();\n+        assert(GetUTXOStats(&ChainstateActive().CoinsDB(), utxo_stats));\n+        // Check that miner can't print more money than they are allowed to\n+        assert(circulation == utxo_stats.nTotalAmount);\n+    };\n+\n+\n+    // Update internal state to chain tip\n+    StoreLastTxo();\n+    UpdateUtxoStats();\n+    assert(ChainActive().Height() == 0);\n+    // Get at which height we duplicate the coinbase\n+    int64_t duplicate_coinbase_height;\n+    CScript duplicate_coinbase_script;\n+    {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r364972613",
      "id" : 364972613,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDk3MjYxMw==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 88,
      "path" : "src/test/fuzz/utxo_total_supply.cpp",
      "position" : null,
      "pull_request_review_id" : 340822132,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/364972613",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r365009609"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/365009609"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thx. Used `front` in both instances in this scope.",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-09T23:27:12Z",
      "diff_hunk" : "@@ -0,0 +1,158 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <consensus/consensus.h>\n+#include <consensus/merkle.h>\n+#include <node/coinstats.h>\n+#include <script/interpreter.h>\n+#include <streams.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/util/mining.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+#include <version.h>\n+\n+enum class Action : uint8_t {\n+    CREATE_INPUT, //!< Append an input-output pair to the last tx in the current block\n+    CREATE_TX,    //!< Append a tx to the list of txs in the current block\n+    CREATE_BLOCK, //!< Append the current block to the active chain\n+};\n+\n+\n+void test_one_input(const std::vector<uint8_t>& buffer)\n+{\n+    /** The testing setup that creates a chainstate and other globals */\n+    TestingSetup test_setup{CBaseChainParams::REGTEST};\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    const auto PrepareNextBlock = [&]() {\n+        // Use OP_FALSE to avoid BIP30 check from hitting early\n+        auto block = PrepareBlock(test_setup.m_node, /* coinbase_scriptPubKey */ OP_FALSE);\n+        // Replace OP_FALSE with OP_TRUE\n+        {\n+            CMutableTransaction tx{*block->vtx.back()};\n+            tx.vout.at(0).scriptPubKey = OP_TRUE;\n+            block->vtx.back() = MakeTransactionRef(tx);\n+        }\n+        return block;\n+    };\n+\n+    /** The block template this fuzzer is working on */\n+    auto current_block = PrepareNextBlock();\n+    /** Append-only set of tx outpoints, entries are not removed when spent */\n+    std::vector<std::pair<COutPoint, CTxOut>> txos;\n+    /** The utxo stats at the chain tip */\n+    CCoinsStats utxo_stats;\n+    /** The total amount of coins in the utxo set */\n+    CAmount circulation{0};\n+\n+\n+    // Store the tx out in the txo map\n+    const auto StoreLastTxo = [&]() {\n+        // get last tx\n+        const CTransaction& tx = *current_block->vtx.back();\n+        // get last out\n+        const uint32_t i = tx.vout.size() - 1;\n+        // store it\n+        txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        if (current_block->vtx.size() == 1 && tx.vout.at(i).scriptPubKey[0] == OP_RETURN) {\n+            // also store coinbase\n+            const uint32_t i = tx.vout.size() - 2;\n+            txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        }\n+    };\n+    const auto AppendRandomTxo = [&](CMutableTransaction& tx) {\n+        const auto& txo = txos.at(fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, txos.size() - 1));\n+        tx.vin.emplace_back(txo.first);\n+        tx.vout.emplace_back(txo.second.nValue, txo.second.scriptPubKey); // \"Forward\" coin with no fee\n+    };\n+    const auto UpdateUtxoStats = [&]() {\n+        LOCK(cs_main);\n+        ::ChainstateActive().ForceFlushStateToDisk();\n+        assert(GetUTXOStats(&ChainstateActive().CoinsDB(), utxo_stats));\n+        // Check that miner can't print more money than they are allowed to\n+        assert(circulation == utxo_stats.nTotalAmount);\n+    };\n+\n+\n+    // Update internal state to chain tip\n+    StoreLastTxo();\n+    UpdateUtxoStats();\n+    assert(ChainActive().Height() == 0);\n+    // Get at which height we duplicate the coinbase\n+    int64_t duplicate_coinbase_height;\n+    CScript duplicate_coinbase_script;\n+    {\n+        // A chance of 1 in 20 for the duplicate coinbase to be within the first 100 blocks feels about right\n+        duplicate_coinbase_height = fuzzed_data_provider.ConsumeIntegralInRange(0, 20 * COINBASE_MATURITY);\n+        // Mine the first block with this duplicate\n+        current_block = PrepareNextBlock();\n+        StoreLastTxo();\n+\n+        // Create duplicate (CScript should match exact format as in CreateNewBlock)\n+        CMutableTransaction tx{*current_block->vtx.back()};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r365009609",
      "id" : 365009609,
      "in_reply_to_id" : 364965476,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAwOTYwOQ==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 96,
      "path" : "src/test/fuzz/utxo_total_supply.cpp",
      "position" : null,
      "pull_request_review_id" : 340878458,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/365009609",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r365009704"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/365009704"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Padding to avoid bad-cb-length. Added comment",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-09T23:27:35Z",
      "diff_hunk" : "@@ -0,0 +1,158 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <consensus/consensus.h>\n+#include <consensus/merkle.h>\n+#include <node/coinstats.h>\n+#include <script/interpreter.h>\n+#include <streams.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/util/mining.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+#include <version.h>\n+\n+enum class Action : uint8_t {\n+    CREATE_INPUT, //!< Append an input-output pair to the last tx in the current block\n+    CREATE_TX,    //!< Append a tx to the list of txs in the current block\n+    CREATE_BLOCK, //!< Append the current block to the active chain\n+};\n+\n+\n+void test_one_input(const std::vector<uint8_t>& buffer)\n+{\n+    /** The testing setup that creates a chainstate and other globals */\n+    TestingSetup test_setup{CBaseChainParams::REGTEST};\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    const auto PrepareNextBlock = [&]() {\n+        // Use OP_FALSE to avoid BIP30 check from hitting early\n+        auto block = PrepareBlock(test_setup.m_node, /* coinbase_scriptPubKey */ OP_FALSE);\n+        // Replace OP_FALSE with OP_TRUE\n+        {\n+            CMutableTransaction tx{*block->vtx.back()};\n+            tx.vout.at(0).scriptPubKey = OP_TRUE;\n+            block->vtx.back() = MakeTransactionRef(tx);\n+        }\n+        return block;\n+    };\n+\n+    /** The block template this fuzzer is working on */\n+    auto current_block = PrepareNextBlock();\n+    /** Append-only set of tx outpoints, entries are not removed when spent */\n+    std::vector<std::pair<COutPoint, CTxOut>> txos;\n+    /** The utxo stats at the chain tip */\n+    CCoinsStats utxo_stats;\n+    /** The total amount of coins in the utxo set */\n+    CAmount circulation{0};\n+\n+\n+    // Store the tx out in the txo map\n+    const auto StoreLastTxo = [&]() {\n+        // get last tx\n+        const CTransaction& tx = *current_block->vtx.back();\n+        // get last out\n+        const uint32_t i = tx.vout.size() - 1;\n+        // store it\n+        txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        if (current_block->vtx.size() == 1 && tx.vout.at(i).scriptPubKey[0] == OP_RETURN) {\n+            // also store coinbase\n+            const uint32_t i = tx.vout.size() - 2;\n+            txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        }\n+    };\n+    const auto AppendRandomTxo = [&](CMutableTransaction& tx) {\n+        const auto& txo = txos.at(fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, txos.size() - 1));\n+        tx.vin.emplace_back(txo.first);\n+        tx.vout.emplace_back(txo.second.nValue, txo.second.scriptPubKey); // \"Forward\" coin with no fee\n+    };\n+    const auto UpdateUtxoStats = [&]() {\n+        LOCK(cs_main);\n+        ::ChainstateActive().ForceFlushStateToDisk();\n+        assert(GetUTXOStats(&ChainstateActive().CoinsDB(), utxo_stats));\n+        // Check that miner can't print more money than they are allowed to\n+        assert(circulation == utxo_stats.nTotalAmount);\n+    };\n+\n+\n+    // Update internal state to chain tip\n+    StoreLastTxo();\n+    UpdateUtxoStats();\n+    assert(ChainActive().Height() == 0);\n+    // Get at which height we duplicate the coinbase\n+    int64_t duplicate_coinbase_height;\n+    CScript duplicate_coinbase_script;\n+    {\n+        // A chance of 1 in 20 for the duplicate coinbase to be within the first 100 blocks feels about right\n+        duplicate_coinbase_height = fuzzed_data_provider.ConsumeIntegralInRange(0, 20 * COINBASE_MATURITY);\n+        // Mine the first block with this duplicate\n+        current_block = PrepareNextBlock();\n+        StoreLastTxo();\n+\n+        // Create duplicate (CScript should match exact format as in CreateNewBlock)\n+        CMutableTransaction tx{*current_block->vtx.back()};\n+        duplicate_coinbase_script = CScript() << duplicate_coinbase_height << OP_0;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r365009704",
      "id" : 365009704,
      "in_reply_to_id" : 364970490,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAwOTcwNA==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 97,
      "path" : "src/test/fuzz/utxo_total_supply.cpp",
      "position" : null,
      "pull_request_review_id" : 340878583,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/365009704",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r365010189"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/365010189"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Removed wording and added different doc comment.\r\n\r\nThe fuzzer mines shorter chains more often than longer ones, so it should be small. Though we also want it to be large sometimes, but not too large.",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-09T23:29:23Z",
      "diff_hunk" : "@@ -0,0 +1,158 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <consensus/consensus.h>\n+#include <consensus/merkle.h>\n+#include <node/coinstats.h>\n+#include <script/interpreter.h>\n+#include <streams.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/util/mining.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+#include <version.h>\n+\n+enum class Action : uint8_t {\n+    CREATE_INPUT, //!< Append an input-output pair to the last tx in the current block\n+    CREATE_TX,    //!< Append a tx to the list of txs in the current block\n+    CREATE_BLOCK, //!< Append the current block to the active chain\n+};\n+\n+\n+void test_one_input(const std::vector<uint8_t>& buffer)\n+{\n+    /** The testing setup that creates a chainstate and other globals */\n+    TestingSetup test_setup{CBaseChainParams::REGTEST};\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    const auto PrepareNextBlock = [&]() {\n+        // Use OP_FALSE to avoid BIP30 check from hitting early\n+        auto block = PrepareBlock(test_setup.m_node, /* coinbase_scriptPubKey */ OP_FALSE);\n+        // Replace OP_FALSE with OP_TRUE\n+        {\n+            CMutableTransaction tx{*block->vtx.back()};\n+            tx.vout.at(0).scriptPubKey = OP_TRUE;\n+            block->vtx.back() = MakeTransactionRef(tx);\n+        }\n+        return block;\n+    };\n+\n+    /** The block template this fuzzer is working on */\n+    auto current_block = PrepareNextBlock();\n+    /** Append-only set of tx outpoints, entries are not removed when spent */\n+    std::vector<std::pair<COutPoint, CTxOut>> txos;\n+    /** The utxo stats at the chain tip */\n+    CCoinsStats utxo_stats;\n+    /** The total amount of coins in the utxo set */\n+    CAmount circulation{0};\n+\n+\n+    // Store the tx out in the txo map\n+    const auto StoreLastTxo = [&]() {\n+        // get last tx\n+        const CTransaction& tx = *current_block->vtx.back();\n+        // get last out\n+        const uint32_t i = tx.vout.size() - 1;\n+        // store it\n+        txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        if (current_block->vtx.size() == 1 && tx.vout.at(i).scriptPubKey[0] == OP_RETURN) {\n+            // also store coinbase\n+            const uint32_t i = tx.vout.size() - 2;\n+            txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        }\n+    };\n+    const auto AppendRandomTxo = [&](CMutableTransaction& tx) {\n+        const auto& txo = txos.at(fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, txos.size() - 1));\n+        tx.vin.emplace_back(txo.first);\n+        tx.vout.emplace_back(txo.second.nValue, txo.second.scriptPubKey); // \"Forward\" coin with no fee\n+    };\n+    const auto UpdateUtxoStats = [&]() {\n+        LOCK(cs_main);\n+        ::ChainstateActive().ForceFlushStateToDisk();\n+        assert(GetUTXOStats(&ChainstateActive().CoinsDB(), utxo_stats));\n+        // Check that miner can't print more money than they are allowed to\n+        assert(circulation == utxo_stats.nTotalAmount);\n+    };\n+\n+\n+    // Update internal state to chain tip\n+    StoreLastTxo();\n+    UpdateUtxoStats();\n+    assert(ChainActive().Height() == 0);\n+    // Get at which height we duplicate the coinbase\n+    int64_t duplicate_coinbase_height;\n+    CScript duplicate_coinbase_script;\n+    {\n+        // A chance of 1 in 20 for the duplicate coinbase to be within the first 100 blocks feels about right",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r365010189",
      "id" : 365010189,
      "in_reply_to_id" : 364970829,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAxMDE4OQ==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 89,
      "path" : "src/test/fuzz/utxo_total_supply.cpp",
      "position" : null,
      "pull_request_review_id" : 340879187,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/365010189",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r365010258"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/365010258"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Made scope shorter",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-09T23:29:42Z",
      "diff_hunk" : "@@ -0,0 +1,158 @@\n+// Copyright (c) 2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <consensus/consensus.h>\n+#include <consensus/merkle.h>\n+#include <node/coinstats.h>\n+#include <script/interpreter.h>\n+#include <streams.h>\n+#include <test/fuzz/FuzzedDataProvider.h>\n+#include <test/fuzz/fuzz.h>\n+#include <test/util/mining.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+#include <version.h>\n+\n+enum class Action : uint8_t {\n+    CREATE_INPUT, //!< Append an input-output pair to the last tx in the current block\n+    CREATE_TX,    //!< Append a tx to the list of txs in the current block\n+    CREATE_BLOCK, //!< Append the current block to the active chain\n+};\n+\n+\n+void test_one_input(const std::vector<uint8_t>& buffer)\n+{\n+    /** The testing setup that creates a chainstate and other globals */\n+    TestingSetup test_setup{CBaseChainParams::REGTEST};\n+    FuzzedDataProvider fuzzed_data_provider(buffer.data(), buffer.size());\n+\n+    const auto PrepareNextBlock = [&]() {\n+        // Use OP_FALSE to avoid BIP30 check from hitting early\n+        auto block = PrepareBlock(test_setup.m_node, /* coinbase_scriptPubKey */ OP_FALSE);\n+        // Replace OP_FALSE with OP_TRUE\n+        {\n+            CMutableTransaction tx{*block->vtx.back()};\n+            tx.vout.at(0).scriptPubKey = OP_TRUE;\n+            block->vtx.back() = MakeTransactionRef(tx);\n+        }\n+        return block;\n+    };\n+\n+    /** The block template this fuzzer is working on */\n+    auto current_block = PrepareNextBlock();\n+    /** Append-only set of tx outpoints, entries are not removed when spent */\n+    std::vector<std::pair<COutPoint, CTxOut>> txos;\n+    /** The utxo stats at the chain tip */\n+    CCoinsStats utxo_stats;\n+    /** The total amount of coins in the utxo set */\n+    CAmount circulation{0};\n+\n+\n+    // Store the tx out in the txo map\n+    const auto StoreLastTxo = [&]() {\n+        // get last tx\n+        const CTransaction& tx = *current_block->vtx.back();\n+        // get last out\n+        const uint32_t i = tx.vout.size() - 1;\n+        // store it\n+        txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        if (current_block->vtx.size() == 1 && tx.vout.at(i).scriptPubKey[0] == OP_RETURN) {\n+            // also store coinbase\n+            const uint32_t i = tx.vout.size() - 2;\n+            txos.emplace_back(COutPoint{tx.GetHash(), i}, tx.vout.at(i));\n+        }\n+    };\n+    const auto AppendRandomTxo = [&](CMutableTransaction& tx) {\n+        const auto& txo = txos.at(fuzzed_data_provider.ConsumeIntegralInRange<size_t>(0, txos.size() - 1));\n+        tx.vin.emplace_back(txo.first);\n+        tx.vout.emplace_back(txo.second.nValue, txo.second.scriptPubKey); // \"Forward\" coin with no fee\n+    };\n+    const auto UpdateUtxoStats = [&]() {\n+        LOCK(cs_main);\n+        ::ChainstateActive().ForceFlushStateToDisk();\n+        assert(GetUTXOStats(&ChainstateActive().CoinsDB(), utxo_stats));\n+        // Check that miner can't print more money than they are allowed to\n+        assert(circulation == utxo_stats.nTotalAmount);\n+    };\n+\n+\n+    // Update internal state to chain tip\n+    StoreLastTxo();\n+    UpdateUtxoStats();\n+    assert(ChainActive().Height() == 0);\n+    // Get at which height we duplicate the coinbase\n+    int64_t duplicate_coinbase_height;\n+    CScript duplicate_coinbase_script;\n+    {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r365010258",
      "id" : 365010258,
      "in_reply_to_id" : 364972613,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTAxMDI1OA==",
      "original_commit_id" : "fa3d9b79c15a21d2b39bf246de616c77b1e661c3",
      "original_position" : 88,
      "path" : "src/test/fuzz/utxo_total_supply.cpp",
      "position" : null,
      "pull_request_review_id" : 340879293,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-10T15:33:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/365010258",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Very nice fuzzing harness! Thanks for adding!\r\n\r\nTested ACK 5b90f46b0217af88dd3a88b028c2919361bdade5 modulo squash of last commit\r\n\r\nCompared to the other fuzzers this one is very slow (6 executions/second), but I guess that is largely unavoidable given the code being tested :)\r\n\r\nAlso, a slow fuzzing harness is better than no fuzzing harness.",
      "created_at" : "2020-01-10T15:07:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-573071927",
      "id" : 573071927,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MzA3MTkyNw==",
      "updated_at" : "2020-01-10T15:07:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573071927",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Compared to the other fuzzers this one is very slow (6 executions/second), but I guess that is largely unavoidable given the code being tested :)\r\n\r\nGood question. This is actually a question in the review club next week: https://bitcoincore.reviews/17860.html\r\n\r\nYou (and all other reviewers) are invited to join and share your thoughts and ideas.",
      "created_at" : "2020-01-10T15:40:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-573085851",
      "id" : 573085851,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MzA4NTg1MQ==",
      "updated_at" : "2020-01-10T15:40:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573085851",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-10T16:12:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-573099391",
      "id" : 573099391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MzA5OTM5MQ==",
      "updated_at" : "2020-01-10T16:12:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573099391",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I am trying fuzzing `utxo_total_supply` with AFL and the fuzz is returning crash like this:\r\n`[-] PROGRAM ABORT : Test case 'id:000000,orig:f66a2f2925ab9d377ea5c18ba941e7d1601b7509' results in a crash`\r\n\r\nOne possible cause for crash is memory limit as reported by the fuzzer (52MB), and it suggests doing this:\r\n`( ulimit -Sv $[51 << 10]; /path/to/binary [...] <testcase )`\r\n\r\nWhile setting ulimit at [51<<10] gives a `SYSTEM ERROR : Unable to mmap file 'test/fuzz/utxo_total_supply'`, setting it to [51<<100] (and for higher values) gives the crash back.\r\n\r\nI am new to fuzzing, and am not very sure whats exactly happening here. Seems like its crashing for the very first test case itself. Would appreciate some guidance to navigate this.\r\n\r\nI am at `8b868f174`\r\n",
      "created_at" : "2020-01-11T11:43:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-573309381",
      "id" : 573309381,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MzMwOTM4MQ==",
      "updated_at" : "2020-01-11T11:43:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573309381",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/36541669?v=4",
         "events_url" : "https://api.github.com/users/codeShark149/events{/privacy}",
         "followers_url" : "https://api.github.com/users/codeShark149/followers",
         "following_url" : "https://api.github.com/users/codeShark149/following{/other_user}",
         "gists_url" : "https://api.github.com/users/codeShark149/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/codeShark149",
         "id" : 36541669,
         "login" : "codeShark149",
         "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
         "organizations_url" : "https://api.github.com/users/codeShark149/orgs",
         "received_events_url" : "https://api.github.com/users/codeShark149/received_events",
         "repos_url" : "https://api.github.com/users/codeShark149/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/codeShark149/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/codeShark149/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/codeShark149"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@codeShark149 Does it work if you fuzz with `libFuzzer` instead?\r\n\r\nTry this:\r\n\r\n```\r\n$ make distclean\r\n$ ./autogen.sh\r\n$ CC=clang CXX=clang++ ./configure --enable-fuzz --with-sanitizers=address,fuzzer,undefined\r\n$ make\r\n$ src/test/fuzz/utxo_total_supply\r\n```",
      "created_at" : "2020-01-13T15:39:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-573724886",
      "id" : 573724886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MzcyNDg4Ng==",
      "updated_at" : "2020-01-13T15:39:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573724886",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@codeShark149 I fixed that error on macOS by turning AFL's forkserver off `export AFL_NO_FORKSRV=1`.  If AFL continually crashes on the initial input, then it's probably because the binary isn't being instrumented correctly.",
      "created_at" : "2020-01-13T15:43:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-573726974",
      "id" : 573726974,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MzcyNjk3NA==",
      "updated_at" : "2020-01-13T15:43:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573726974",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/15145615?v=4",
         "events_url" : "https://api.github.com/users/Crypt-iQ/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Crypt-iQ/followers",
         "following_url" : "https://api.github.com/users/Crypt-iQ/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Crypt-iQ/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Crypt-iQ",
         "id" : 15145615,
         "login" : "Crypt-iQ",
         "node_id" : "MDQ6VXNlcjE1MTQ1NjE1",
         "organizations_url" : "https://api.github.com/users/Crypt-iQ/orgs",
         "received_events_url" : "https://api.github.com/users/Crypt-iQ/received_events",
         "repos_url" : "https://api.github.com/users/Crypt-iQ/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Crypt-iQ/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Crypt-iQ/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Crypt-iQ"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've played a bit more with this harness:\r\n\r\nI'm currently using a seed corpus of 3247 files. I'm fuzzing at a rate of 6 execs/second which means that it takes almost ten minutes just to initialize `libFuzzer` with all seeds in a fuzzing session.\r\n\r\nA lot of the time is spent setting up (and tearing down) the `TestingSetup` object for each input.\r\n\r\nCan we think of ways to speed up this fuzzing harness?\r\n\r\nPerhaps a fully featured `TestingSetup` object is not needed? Would limiting the setup to only the absolute minimum needed speed up things?",
      "created_at" : "2020-01-13T16:29:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-573749950",
      "id" : 573749950,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3Mzc0OTk1MA==",
      "updated_at" : "2020-01-13T16:29:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573749950",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@practicalswift I suspected as much, that the testing harness is the heavy part of the test. On my non-beefy machine it looks like I'm getting 1 a second?\r\n\r\nAlternative might be to allow it to run longer to build a longer chain?",
      "created_at" : "2020-01-13T16:32:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-573751619",
      "id" : 573751619,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3Mzc1MTYxOQ==",
      "updated_at" : "2020-01-13T16:32:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573751619",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Another data point:\r\n\r\nAs a crude way to quantify the impact of the test setup I made `TestingSetup` persistent across test inputs (`static TestingSetup`). That obviously invalidates all assertions (and thus makes the fuzzer meaningless), but the speed jumps to 32 exec/second.",
      "created_at" : "2020-01-13T16:43:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-573757270",
      "id" : 573757270,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3Mzc1NzI3MA==",
      "updated_at" : "2020-01-13T16:43:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573757270",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> I've played a bit more with this harness:\r\n> \r\n> I'm currently using a seed corpus of 3247 files. I'm fuzzing at a rate of 6 execs/second which means that it takes almost ten minutes just to initialize `libFuzzer` with all seeds in a fuzzing session.\r\n> \r\n> A lot of the time is spent setting up (and tearing down) the `TestingSetup` object for each input.\r\n> \r\n> Can we think of ways to speed up this fuzzing harness?\r\n> \r\n> Perhaps a fully featured `TestingSetup` object is not needed? Would limiting the setup to only the absolute minimum needed speed up things?\r\n\r\nYou mind posting a profiler view of this? I'll try to optimize this if I can. (VS has an optimization profiler section).",
      "created_at" : "2020-01-13T17:30:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-573778424",
      "id" : 573778424,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3Mzc3ODQyNA==",
      "updated_at" : "2020-01-13T17:30:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573778424",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10261698?v=4",
         "events_url" : "https://api.github.com/users/sanjaykdragon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sanjaykdragon/followers",
         "following_url" : "https://api.github.com/users/sanjaykdragon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sanjaykdragon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sanjaykdragon",
         "id" : 10261698,
         "login" : "sanjaykdragon",
         "node_id" : "MDQ6VXNlcjEwMjYxNjk4",
         "organizations_url" : "https://api.github.com/users/sanjaykdragon/orgs",
         "received_events_url" : "https://api.github.com/users/sanjaykdragon/received_events",
         "repos_url" : "https://api.github.com/users/sanjaykdragon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sanjaykdragon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sanjaykdragon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sanjaykdragon"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sanjaykdragon I don't have any profiler view to post :)  The quoted numbers are from the output you'll get when running `utxo_total_supply` with `libFuzzer` using the following steps\r\n\r\n```\r\n$ make distclean\r\n$ ./autogen.sh\r\n$ CC=clang CXX=clang++ ./configure --enable-fuzz \\\r\n      --with-sanitizers=address,fuzzer,undefined\r\n$ make\r\n$ src/test/fuzz/utxo_total_supply\r\n```",
      "created_at" : "2020-01-13T22:05:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-573894611",
      "id" : 573894611,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3Mzg5NDYxMQ==",
      "updated_at" : "2020-01-13T22:05:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/573894611",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> @codeShark149 Does it work if you fuzz with `libFuzzer` instead?\r\n\r\n\r\n@practicalswift yes libfuzzer can fuzz it. \r\n\r\n\r\n\r\n> @codeShark149 I fixed that error on macOS by turning AFL's forkserver off `export AFL_NO_FORKSRV=1`.\r\n\r\n@Crypt-iQ thanks for suggesting but for some reason that did'nt work. The problem is simple though. The instrumented binary takes about 103 MB memory to run. So just had to change `-m200` while running the fuzzer. Now its fuzzing with AFL. \r\n\r\nSome note on execution: libfuzzer reported around 5 exec/sec. AFL reported 3.13/sec. Which is natural given the thing being tested. \r\nAny idea on how to make this thing run faster? I will try parallel but i doubt its gonna complete in any reasonable time.   ",
      "created_at" : "2020-01-14T15:18:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-574223927",
      "id" : 574223927,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NDIyMzkyNw==",
      "updated_at" : "2020-01-14T15:18:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/574223927",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/36541669?v=4",
         "events_url" : "https://api.github.com/users/codeShark149/events{/privacy}",
         "followers_url" : "https://api.github.com/users/codeShark149/followers",
         "following_url" : "https://api.github.com/users/codeShark149/following{/other_user}",
         "gists_url" : "https://api.github.com/users/codeShark149/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/codeShark149",
         "id" : 36541669,
         "login" : "codeShark149",
         "node_id" : "MDQ6VXNlcjM2NTQxNjY5",
         "organizations_url" : "https://api.github.com/users/codeShark149/orgs",
         "received_events_url" : "https://api.github.com/users/codeShark149/received_events",
         "repos_url" : "https://api.github.com/users/codeShark149/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/codeShark149/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/codeShark149/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/codeShark149"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r367014351"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367014351"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could squash this commit.",
      "commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "created_at" : "2020-01-15T17:41:38Z",
      "diff_hunk" : "@@ -32,8 +32,7 @@ static void ApplyStats(CCoinsStats &stats, CHashWriter& ss, const uint256& hash,\n     ss << VARINT(0u);\n }\n \n-//! Calculate statistics about the unspent transaction output set",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#discussion_r367014351",
      "id" : 367014351,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzAxNDM1MQ==",
      "original_commit_id" : "8b868f1741d37d97d09218093bc9434bbe5a749d",
      "original_position" : 4,
      "path" : "src/node/coinstats.cpp",
      "position" : 4,
      "pull_request_review_id" : 343401073,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17860",
      "updated_at" : "2020-01-15T18:14:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/367014351",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK 8b868f1\r\n\r\nReviewed code and successfully ran with AFL.",
      "created_at" : "2020-01-17T00:54:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-575416508",
      "id" : 575416508,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NTQxNjUwOA==",
      "updated_at" : "2020-01-17T00:54:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575416508",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Now running since 2 1l2 days, taking > 1 gb of RAM, and it's slowed to a crawl of < 10 executions per minute and still has not found the CVE. It also drains my laptop battery at least twice faster than normal.\r\n```\r\n#22184\tREDUCE cov: 48346 ft: 261959 corp: 1540/3628Kb exec/s: 0 rss: 1020Mb L: 4077/4096 MS: 1 EraseBytes-\r\n#22285\tNEW    cov: 48346 ft: 261963 corp: 1541/3632Kb exec/s: 0 rss: 1020Mb L: 4096/4096 MS: 1 ChangeBit-\r\n#22296\tREDUCE cov: 48346 ft: 261963 corp: 1541/3632Kb exec/s: 0 rss: 1020Mb L: 838/4096 MS: 1 EraseBytes-\r\n#22320\tREDUCE cov: 48346 ft: 261963 corp: 1541/3632Kb exec/s: 0 rss: 1020Mb L: 4007/4096 MS: 4 ChangeBinInt-ChangeByte-ChangeBit-EraseBytes-\r\n#22343\tREDUCE cov: 48346 ft: 261963 corp: 1541/3632Kb exec/s: 0 rss: 1020Mb L: 1938/4096 MS: 3 InsertRepeatedBytes-ChangeByte-EraseBytes-\r\n#22344\tREDUCE cov: 48346 ft: 261963 corp: 1541/3632Kb exec/s: 0 rss: 1020Mb L: 169/4096 MS: 1 EraseBytes-\r\n#22370\tREDUCE cov: 48346 ft: 261963 corp: 1541/3632Kb exec/s: 0 rss: 1020Mb L: 3804/4096 MS: 1 CrossOver-\r\n```\r\nMaybe I've done something dumb in removing and rebuilding without the CVE fix:\r\n```diff\r\ndiff --git a/src/consensus/tx_check.cpp b/src/consensus/tx_check.cpp\r\n@@ -36,12 +36,6 @@ bool CheckTransaction(const CTransaction& tx, TxValidationState& state)\r\n     // Failure to run this check will result in either a crash or an inflation bug, depending on the implementation of\r\n     // the underlying coins database.\r\n-    std::set<COutPoint> vInOutPoints;\r\n-    for (const auto& txin : tx.vin) {\r\n-        if (!vInOutPoints.insert(txin.prevout).second)\r\n-            return state.Invalid(TxValidationResult::TX_CONSENSUS, \"bad-txns-inputs-duplicate\");\r\n-    }\r\n\r\n```\r\nI'm not sure why the test runs continually slower. Unless my experience is atypical, this seems to be a real handicap.\r\n\r\nThis also underscores how necessary it is to run the fuzz tests *continuously* for them to be most effective.",
      "created_at" : "2020-01-17T11:09:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-575582915",
      "id" : 575582915,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NTU4MjkxNQ==",
      "updated_at" : "2020-01-17T11:32:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575582915",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonatack The increase in memory usage and slow-down is clearly undesired.  Which version of clang are you using? I presume 3.8? Could you try with https://packages.debian.org/stretch-backports/clang-6.0 , or even later, if possible?\r\n\r\nYour patch to reintroduce the CVE looks correct.\r\n\r\n",
      "created_at" : "2020-01-18T23:06:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-575946553",
      "id" : 575946553,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NTk0NjU1Mw==",
      "updated_at" : "2020-01-18T23:06:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575946553",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke thanks, and good idea to verify the clang version. I've been using:\r\n\r\n```\r\n$ clang --version\r\nclang version 6.0.0 (tags/RELEASE_600/final)\r\nTarget: x86_64-unknown-linux-gnu\r\nThread model: posix\r\nInstalledDir: /usr/local/bin\r\n```\r\nWhich version are you running?",
      "created_at" : "2020-01-19T12:13:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-575998600",
      "id" : 575998600,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NTk5ODYwMA==",
      "updated_at" : "2020-01-19T12:13:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/575998600",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've been using Ubuntu Focal clang-9:\r\n\r\n```\r\n$ clang --version \r\nclang version 9.0.1-6build1 \r\nTarget: x86_64-pc-linux-gnu\r\n```\r\n\r\nAlso, clang-8 on Fedora 30.\r\n\r\nJust some more questions:\r\n\r\n* The exec/s are 0, but the CPU usage is also low?\r\n* If you restart the fuzzer, do the exec/s start with a high value again?\r\n* What storage are you using hard drive/SSD?",
      "created_at" : "2020-01-19T15:17:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-576014728",
      "id" : 576014728,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NjAxNDcyOA==",
      "updated_at" : "2020-01-19T15:17:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/576014728",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2020-01-20T21:16:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-576432477",
      "id" : 576432477,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NjQzMjQ3Nw==",
      "updated_at" : "2020-01-20T21:16:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/576432477",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\nI've been fuzzing this target using libFuzzer (Debian & Clang 9) and have hit the crashes. Took ~half a day of runtime. I've posted the container I was using, the crash inputs found and some setup notes here [in core-review](https://github.com/fanquake/core-review/tree/master/fuzzing).\r\n\r\n```bash\r\n#23497\tRELOAD cov: 48632 ft: 251363 corp: 2318/93Kb lim: 192 exec/s: 2 rss: 683Mb\r\n#23557\tNEW    cov: 48632 ft: 251369 corp: 2319/94Kb lim: 192 exec/s: 2 rss: 683Mb L: 176/192 MS: 2 ShuffleBytes-CopyPart-\r\nutxo_total_supply: test/fuzz/utxo_total_supply.cpp:77: auto test_one_input(const std::vector<uint8_t> &)::(anonymous class)::operator()() const: Assertion \"circulation == utxo_stats.nTotalAmount\" failed.\r\n==16247== ERROR: libFuzzer: deadly signal\r\n    #0 0x561d1c715d91  (/bitcoin/src/test/fuzz/utxo_total_supply+0x208bd91)\r\n    #1 0x561d1c6603c8  (/bitcoin/src/test/fuzz/utxo_total_supply+0x1fd63c8)\r\n    #2 0x561d1c645b33  (/bitcoin/src/test/fuzz/utxo_total_supply+0x1fbbb33)\r\n    #3 0x7f510df1551f  (/lib/x86_64-linux-gnu/libpthread.so.0+0x1351f)\r\n    #4 0x7f510dc0b080  (/lib/x86_64-linux-gnu/libc.so.6+0x3a080)\r\n    #5 0x7f510dbf6534  (/lib/x86_64-linux-gnu/libc.so.6+0x25534)\r\n    #6 0x7f510dbf640e  (/lib/x86_64-linux-gnu/libc.so.6+0x2540e)\r\n    #7 0x7f510dc03b91  (/lib/x86_64-linux-gnu/libc.so.6+0x32b91)\r\n    #8 0x561d1c7497c9  (/bitcoin/src/test/fuzz/utxo_total_supply+0x20bf7c9)\r\n    #9 0x561d1c746e2d  (/bitcoin/src/test/fuzz/utxo_total_supply+0x20bce2d)\r\n    #10 0x561d1c73f8ca  (/bitcoin/src/test/fuzz/utxo_total_supply+0x20b58ca)\r\n    #11 0x561d1c6470c1  (/bitcoin/src/test/fuzz/utxo_total_supply+0x1fbd0c1)\r\n    #12 0x561d1c646905  (/bitcoin/src/test/fuzz/utxo_total_supply+0x1fbc905)\r\n    #13 0x561d1c648ba7  (/bitcoin/src/test/fuzz/utxo_total_supply+0x1fbeba7)\r\n    #14 0x561d1c6498c5  (/bitcoin/src/test/fuzz/utxo_total_supply+0x1fbf8c5)\r\n    #15 0x561d1c6376a8  (/bitcoin/src/test/fuzz/utxo_total_supply+0x1fad6a8)\r\n    #16 0x561d1c660af2  (/bitcoin/src/test/fuzz/utxo_total_supply+0x1fd6af2)\r\n    #17 0x7f510dbf7bba  (/lib/x86_64-linux-gnu/libc.so.6+0x26bba)\r\n    #18 0x561d1c60af49  (/bitcoin/src/test/fuzz/utxo_total_supply+0x1f80f49)\r\n\r\nNOTE: libFuzzer has rudimentary signal handlers.\r\n      Combine libFuzzer with AddressSanitizer or similar for better crash reports.\r\nSUMMARY: libFuzzer: deadly signal\r\nMS: 5 CrossOver-ShuffleBytes-ChangeASCIIInt-ChangeBit-EraseBytes-; base unit: d1a5c27d68809f2e9c739d76c69065ff17ae7d6f\r\n0x8f,0x7a,0x5,0xcb,0x7a,0x2,0x2f,0x5,0x5, <trimmed> 0x89,0x89,0x89,0x89,0x0,0x0,0x0,\r\n\\x8fz\\x05\\xcbz\\x02/\\x05\\x052\\x025 <trimmed> \\x89\\x89\\x89\\x89\\x00\\x00\\x00\r\nartifact_prefix='./'; Test unit written to ./crash-9c947d9ff00fa36eca41ad27d337743fd5fee54b\r\nBase64: j3oFy3oCLwUFMgI1BQIFHS96ekF3uYB6QOLIyAcFjwABenoFZHEFBQFNIMpNBTMFPwXHuYB6CpWVBVBQenp6enpieoB6enoFBQUAplmmDQA9BQV6enoCj/j4+Pj4+Pj4+PgFBQUFBQVQUHp6j4+PjwUFBXpZenp6BVBQenqPj4+PBQUFell6enpZUFCqenp6Anp6eoB6AuZZUFBpenqPelCPeo+JiYmJiQAAAA==\r\nstat::number_of_executed_units: 23579\r\nstat::average_exec_per_sec:     2\r\nstat::new_units_added:          92\r\nstat::slowest_unit_time_sec:    0\r\nstat::peak_rss_mb:              683\r\n```",
      "created_at" : "2020-01-21T01:12:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-576477165",
      "id" : 576477165,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NjQ3NzE2NQ==",
      "updated_at" : "2020-01-21T01:12:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/576477165",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I've been using Ubuntu Focal clang-9:\r\n> \r\n> ```\r\n> $ clang --version \r\n> clang version 9.0.1-6build1 \r\n> Target: x86_64-pc-linux-gnu\r\n> ```\r\n> \r\n> Also, clang-8 on Fedora 30.\r\n> \r\n> Just some more questions:\r\n> \r\n>     * The exec/s are 0, but the CPU usage is also low? \r\n>     * If you restart the fuzzer, do the exec/s start with a high value again?\r\n>     * What storage are you using hard drive/SSD?\r\n\r\nThanks @MarcoFalke. Yes, the fuzz test runs faster after restarting before slowing down again. Storage is a 1To nvme 960Pro SSD. I'm building clang master from source and will try again.",
      "created_at" : "2020-01-21T15:26:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-576733447",
      "id" : 576733447,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NjczMzQ0Nw==",
      "updated_at" : "2020-01-21T15:26:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/576733447",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonatack clang-6 should be recent enough, no need to compile clang from source when later versions are not in your package manager. That could be a pain (or at least time consuming) to get libFuzzer and everything compiled.",
      "created_at" : "2020-01-21T20:04:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-576856594",
      "id" : 576856594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3Njg1NjU5NA==",
      "updated_at" : "2020-01-21T20:04:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/576856594",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "For anyone running into issues with slow executions. What happens if you start the fuzzer with `export TMPDIR=/dev/shm`?",
      "created_at" : "2020-01-21T20:32:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-576867823",
      "id" : 576867823,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3Njg2NzgyMw==",
      "updated_at" : "2020-01-21T20:32:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/576867823",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke significantly faster, something like 2x",
      "created_at" : "2020-01-21T20:51:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-576875460",
      "id" : 576875460,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3Njg3NTQ2MA==",
      "updated_at" : "2020-01-21T20:51:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/576875460",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Debian / Clang 6: Reproduced the crash with the CVE fix removed and @fanquake's first crasher:\r\n\r\n```\r\n$ src/test/fuzz/utxo_total_supply crash-9c947d9ff00fa36eca41ad27d337743fd5fee54b\r\nINFO: Seed: 38327181\r\nINFO: Loaded 1 modules   (511594 inline 8-bit counters): 511594 [0x55c2cba38958, 0x55c2cbab57c2), \r\nINFO: Loaded 1 PC tables (511594 PCs): 511594 [0x55c2cbab57c8,0x55c2cc283e68), \r\nsrc/test/fuzz/utxo_total_supply: Running 1 inputs 1 time(s) each.\r\nRunning: crash-9c947d9ff00fa36eca41ad27d337743fd5fee54b\r\nutxo_total_supply: test/fuzz/utxo_total_supply.cpp:77: auto test_one_input(const std::vector<uint8_t> &)::(anonymous class)::operator()() const: Assertion `circulation == utxo_stats.nTotalAmount' failed.\r\n==14985== ERROR: libFuzzer: deadly signal\r\n.../...\r\n```\r\nAnd no crash (IIUC) with the CVE fix reinstated:\r\n```\r\n$ src/test/fuzz/utxo_total_supply -print_final_stats=1 crash-9c947d9ff00fa36eca41ad27d337743fd5fee54b\r\nINFO: Seed: 1310013831\r\nINFO: Loaded 1 modules   (512056 inline 8-bit counters): 512056 [0x557a2b535818, 0x557a2b5b2850), \r\nINFO: Loaded 1 PC tables (512056 PCs): 512056 [0x557a2b5b2850,0x557a2bd82bd0), \r\nsrc/test/fuzz/utxo_total_supply: Running 1 inputs 1 time(s) each.\r\nRunning: crash-9c947d9ff00fa36eca41ad27d337743fd5fee54b\r\nExecuted crash-9c947d9ff00fa36eca41ad27d337743fd5fee54b in 3056 ms\r\n***\r\n*** NOTE: fuzzing was not performed, you have only\r\n***       executed the target code on a fixed set of inputs.\r\n***\r\n```\r\nDid this a few times as it is quick to run.\r\n\r\nNow running `export TMPDIR=/dev/shm ; time src/test/fuzz/utxo_total_supply -jobs=10 -print_final_stats=1 -workers=5` and letting it run overnight...",
      "created_at" : "2020-01-21T23:46:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-576940037",
      "id" : 576940037,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3Njk0MDAzNw==",
      "updated_at" : "2020-01-21T23:46:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/576940037",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Stopping it for now after 12 hours, CPUs running at 100%, here is the bottom of one of the log files:\r\n```\r\n#11181\tREDUCE cov: 48212 ft: 257522 corp: 1449/3276Kb exec/s: 0 rss: 878Mb L: 3969/4096 MS: 2 ChangeBit-EraseBytes-\r\n#11298\tNEW    cov: 48212 ft: 257523 corp: 1450/3279Kb exec/s: 0 rss: 878Mb L: 3302/4096 MS: 2 ChangeBinInt-InsertByte-\r\n```",
      "created_at" : "2020-01-22T11:30:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-577138908",
      "id" : 577138908,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NzEzODkwOA==",
      "updated_at" : "2020-01-22T11:30:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/577138908",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Now running `export TMPDIR=/dev/shm ; time src/test/fuzz/utxo_total_supply -jobs=10 -print_final_stats=1 -workers=5` and letting it run overnight...\r\n\r\n@jonatack This is really confusing. One more try, if you don't mind:\r\n\r\n```sh\r\nmkdir /dev/shm/fuzz_temp_seeds\r\nexport TMPDIR=/dev/shm ; time src/test/fuzz/utxo_total_supply /dev/shm/fuzz_temp_seeds\r\n```\r\n\r\nThis will:\r\n* Run only one fuzzer to rule out interference from the other fuzzers\r\n* Specify a seed dir explicitly. This should put the seeds on the same RAM disk that the datadirs are placed in. (I am not sure what the behaviour of libFuzzer even is when you specify multiple workers, but no dir for the inputs)\r\n\r\nCould you report back the initial exec/s, to see if they are larger than the 6 exec/s you got initially. I presume initially you ran on the SSD and /dev/shm should be a RAM disk and speed up disk io.",
      "created_at" : "2020-01-23T02:59:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-577482939",
      "id" : 577482939,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NzQ4MjkzOQ==",
      "updated_at" : "2020-01-23T02:59:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/577482939",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've tested using `/dev/shm/` as the `TMPDIR` as you suggested, and am also seeing significant speedups. Added some additional notes [here](https://github.com/fanquake/core-review/tree/master/fuzzing#faster-fuzzing-using-devshm-as-tmpdir) as using it with docker requires a larger than the default (only 64mb) `/dev/shm`.",
      "created_at" : "2020-01-23T12:23:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-577659008",
      "id" : 577659008,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NzY1OTAwOA==",
      "updated_at" : "2020-01-23T12:23:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/577659008",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks, will give it another good run with those suggestions.",
      "created_at" : "2020-01-23T12:29:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-577661009",
      "id" : 577661009,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NzY2MTAwOQ==",
      "updated_at" : "2020-01-23T12:29:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/577661009",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@fanquake Let me explain that the TMPDIR hack will only change the location of the datadir. Ideally, we can completely mock it out for fuzz tests (see  #17990).",
      "created_at" : "2020-01-23T13:00:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-577671519",
      "id" : 577671519,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NzY3MTUxOQ==",
      "updated_at" : "2020-01-23T13:00:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/577671519",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke Just launched as per your suggestion; here are the first 1200 iterations: https://gist.github.com/jonatack/fd81eecf390a6c750fd9c2dbd511caa8\r\n\r\nIt's running slowly. I use LUKS encryption on the SSD, PureOS (https://www.pureos.net) variant of Debian, and Coreboot (https://www.coreboot.org). 32gb RAM, only 8 used. I'll let it run overnight and see if it finds the CVE.\r\n\r\nEdit: It seems to be running faster than before and sometimes shows 1/s instead of 0/s.",
      "created_at" : "2020-01-24T19:08:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-578260352",
      "id" : 578260352,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3ODI2MDM1Mg==",
      "updated_at" : "2020-01-24T19:21:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/578260352",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "From that log it looks like it already starts at 0 exec/s, so at least it is not slowing down over time. Sorry, I can't find anything else to debug the slow executions. Long term you might want to hope for #17990. ",
      "created_at" : "2020-01-24T19:21:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-578264876",
      "id" : 578264876,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3ODI2NDg3Ng==",
      "updated_at" : "2020-01-24T19:21:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/578264876",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "There was a rebase because of a conflict due to the makefile being resorted. Would be nice to get a re-ACK on the code from one of the earlier ACKers.",
      "created_at" : "2020-01-24T19:23:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-578265757",
      "id" : 578265757,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3ODI2NTc1Nw==",
      "updated_at" : "2020-01-24T19:23:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/578265757",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-run ci",
      "created_at" : "2020-01-24T19:23:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-578265886",
      "id" : 578265886,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3ODI2NTg4Ng==",
      "updated_at" : "2020-01-24T19:23:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/578265886",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "After ~15 hours, less than 1 exec/*minute*. Most of the execs occured at the beginning (1200 in the first 30 minues) and it slowed dramatically after. RSS up to 1056Mb from 656Mb at the beginning.\r\n```\r\n#8192\tpulse  cov: 52209 ft: 269435 corp: 1186/1943Kb exec/s: 0 rss: 1056Mb\r\n#8213\tNEW    cov: 52209 ft: 269460 corp: 1187/1947Kb exec/s: 0 rss: 1056Mb L: 4096/4096 MS: 4 ChangeBit-CMP-ChangeASCIIInt-ChangeBit- DE: \"T\\x00\\x00\\x00\\x00\\x00\\x00\\x00\"-\r\n#8252\tNEW    cov: 52209 ft: 269462 corp: 1188/1950Kb exec/s: 0 rss: 1056Mb L: 3101/4096 MS: 4 InsertByte-ChangeByte-ChangeBit-InsertByte-\r\n#8338\tNEW    cov: 52209 ft: 269463 corp: 1189/1953Kb exec/s: 0 rss: 1056Mb L: 2376/4096 MS: 1 CopyPart-\r\n#8387\tNEW    cov: 52210 ft: 269464 corp: 1190/1956Kb exec/s: 0 rss: 1056Mb L: 3219/4096 MS: 4 ShuffleBytes-CrossOver-ChangeBinInt-EraseBytes-\r\n#8418\tNEW    cov: 52210 ft: 269473 corp: 1191/1960Kb exec/s: 0 rss: 1056Mb L: 4096/4096 MS: 1 PersAutoDict- DE: \"\\x00\\x00\\x00\\x00\\x00\\x00\\x00U\"-\r\n#8429\tNEW    cov: 52210 ft: 269526 corp: 1192/1960Kb exec/s: 0 rss: 1056Mb L: 63/4096 MS: 1 EraseBytes-\r\n#8479\tREDUCE cov: 52210 ft: 269526 corp: 1192/1960Kb exec/s: 0 rss: 1056Mb L: 311/4096 MS: 5 CMP-EraseBytes-EraseBytes-ChangeBinInt-InsertRepeatedBytes- DE: \"\\x99&aS\\xbb\\xb9\\xa5\\xce\\xcf\\xd1\\xb2\\xd2\\xc9#\\xc5\\xe9S\\x7f^\\x8cn\\x8c.@\\xf0x\\xce\\xf2\\xbb\\x03QW\"-\r\n```\r\n",
      "created_at" : "2020-01-25T10:00:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-578393166",
      "id" : 578393166,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3ODM5MzE2Ng==",
      "updated_at" : "2020-01-25T10:04:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/578393166",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonatack Would you mind debugging why it takes so long in later stages? I don't know if libFuzzer-instrumented binaries can be instrumented with other frameworks, but maybe a simple `std::cout` in a few places would be sufficient to see where it is hanging?",
      "created_at" : "2020-01-27T22:34:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-578987998",
      "id" : 578987998,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3ODk4Nzk5OA==",
      "updated_at" : "2020-01-27T22:34:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/578987998",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/fa733bbd78add587e19f0175ab9c127a8c27e024/CONTRIBUTING.md#rebasing-changes).",
      "created_at" : "2020-03-11T19:06:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-597814720",
      "id" : 597814720,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU5NzgxNDcyMA==",
      "updated_at" : "2020-03-11T19:06:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/597814720",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Would be happy to re-review after rebase :)",
      "created_at" : "2020-06-17T05:44:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-645164882",
      "id" : 645164882,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY0NTE2NDg4Mg==",
      "updated_at" : "2020-06-17T05:44:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/645164882",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase :)",
      "created_at" : "2020-11-11T21:11:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-725663695",
      "id" : 725663695,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyNTY2MzY5NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-11T21:11:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/725663695",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke, are you planning to continue work on this PR? I'd like to review it once rebased :)",
      "created_at" : "2021-02-28T20:25:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-787516892",
      "id" : 787516892,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4NzUxNjg5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-28T20:25:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/787516892",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--13523179cfe9479db18ec6c5d236f789-->There hasn't been much activity lately and the patch still needs rebase. What is the status here?\n\n* Is it still relevant? â¡ï¸ Please solve the conflicts to make it ready for review and to ensure the CI passes.\n* Is it no longer relevant? â¡ï¸ Please close.\n* Did the author lose interest or time to work on this? â¡ï¸ Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\n",
      "created_at" : "2021-12-15T11:22:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-994695246",
      "id" : 994695246,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "IC_kwDOABII5847SdhO",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/994695246/reactions"
      },
      "updated_at" : "2021-12-15T11:22:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/994695246",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-08-30T16:36:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-1231905974",
      "id" : 1231905974,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "IC_kwDOABII585JbWS2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1231905974/reactions"
      },
      "updated_at" : "2022-08-30T16:36:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1231905974",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--13523179cfe9479db18ec6c5d236f789-->\nThere hasn't been much activity lately and the patch still needs rebase. What is the status here?\n\n* Is it still relevant? â¡ï¸ Please solve the conflicts to make it ready for review and to ensure the CI passes.\n* Is it no longer relevant? â¡ï¸ Please close.\n* Did the author lose interest or time to work on this? â¡ï¸ Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\n",
      "created_at" : "2022-12-12T01:40:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-1345750219",
      "id" : 1345750219,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "IC_kwDOABII585QNoTL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345750219/reactions"
      },
      "updated_at" : "2022-12-12T01:40:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345750219",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2023-02-06T16:40:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-1419385623",
      "id" : 1419385623,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "IC_kwDOABII585UmhsX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1419385623/reactions"
      },
      "updated_at" : "2023-02-06T16:40:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1419385623",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8077169?v=4",
         "events_url" : "https://api.github.com/users/dergoegge/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dergoegge/followers",
         "following_url" : "https://api.github.com/users/dergoegge/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dergoegge/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dergoegge",
         "id" : 8077169,
         "login" : "dergoegge",
         "node_id" : "MDQ6VXNlcjgwNzcxNjk=",
         "organizations_url" : "https://api.github.com/users/dergoegge/orgs",
         "received_events_url" : "https://api.github.com/users/dergoegge/received_events",
         "repos_url" : "https://api.github.com/users/dergoegge/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dergoegge/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dergoegge/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dergoegge"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Are you still working on this?",
      "created_at" : "2023-04-25T16:10:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-1522062568",
      "id" : 1522062568,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "IC_kwDOABII585auNTo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1522062568/reactions"
      },
      "updated_at" : "2023-04-25T16:10:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1522062568",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, will review this week",
      "created_at" : "2023-05-02T18:25:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-1531946556",
      "id" : 1531946556,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "IC_kwDOABII585bT6Y8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531946556/reactions"
      },
      "updated_at" : "2023-05-02T18:25:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531946556",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/73197?v=4",
         "events_url" : "https://api.github.com/users/jamesob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jamesob/followers",
         "following_url" : "https://api.github.com/users/jamesob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jamesob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jamesob",
         "id" : 73197,
         "login" : "jamesob",
         "node_id" : "MDQ6VXNlcjczMTk3",
         "organizations_url" : "https://api.github.com/users/jamesob/orgs",
         "received_events_url" : "https://api.github.com/users/jamesob/received_events",
         "repos_url" : "https://api.github.com/users/jamesob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jamesob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jamesob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jamesob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased and partly rewritten",
      "created_at" : "2023-05-02T19:45:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17860#issuecomment-1532052827",
      "id" : 1532052827,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17860",
      "node_id" : "IC_kwDOABII585bUUVb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1532052827/reactions"
      },
      "updated_at" : "2023-05-02T19:45:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1532052827",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
