[
   {
      "author_association" : "MEMBER",
      "body" : "Some questions:\r\n\r\n* It was claimed that this speeds up the build. Is this true?\r\n* Who is going to be able to reset builds? (For appveyor it is only me, I believe. So anything other than that is an improvement)\r\n* There were concerns that we shouldn't put all eggs in one basket (GitHub), but it seems they are free and for appveyor we pay 50$ per month for two parallel jobs",
      "created_at" : "2019-12-27T15:06:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-569287500",
      "id" : 569287500,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2OTI4NzUwMA==",
      "updated_at" : "2019-12-27T15:06:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/569287500",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke \r\n> * It was claimed that this speeds up the build. Is this true?\r\n\r\nYes, it is. But not substantially: ~5..10% (this estimation is based on builds in my account).\r\n\r\nIf cache is invalidated, additional time up to 30 minutes is required (same as AppVeyor). But this does not cause timeout.\r\n\r\n> * Who is going to be able to reset builds?\r\n\r\n[Managing a workflow run - About workflow permissions](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/managing-a-workflow-run#about-workflow-permissions):\r\n> You must have at least write-level access to cancel or re-run workflow runs.",
      "created_at" : "2019-12-27T16:07:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-569297974",
      "id" : 569297974,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2OTI5Nzk3NA==",
      "updated_at" : "2019-12-27T16:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/569297974",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It was claimed that this speeds up the build. Is this true?\r\n\r\nI've found GitHub builds are 10 mins faster (Appveyor between 50-60 mins, GH between 40-50 mins). GH also lets builds run over 1 hr and permits parallel jobs (I know the Bitcoin Core CI job has a special arrangement with AppVeyor but jobs on my fork regularly timeout).\r\n\r\n> There were concerns that we shouldn't put all eggs in one basket (GitHub), but it seems they are free and for appveyor we pay 50$ per month for two parallel jobs\r\n\r\nA possible plan is:\r\n\r\n - Enable GitHub Actions build for `master` only and leave AppVeyor in place (I believe the \"tick\" for a PR will depend on whether GH Actions is enabled for PR's or not).\r\n - If no problems enable GH Actions for PR's. That will impact contributors as they now have three CI systems that need to pass to get a green tick,\r\n - If no problems evaluate whether it's worth cancelling AppVeyor and saving the $50/month.",
      "created_at" : "2019-12-31T22:48:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570001558",
      "id" : 570001558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDAwMTU1OA==",
      "updated_at" : "2019-12-31T22:48:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570001558",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It looks like GitHub Actions (when granted) gives any permission to modify the repository. This is overkill and harmful. A CI should be read-only, not be allowed to push arbitrary code changes (or even just modify labels)",
      "created_at" : "2020-01-02T16:41:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570264369",
      "id" : 570264369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDI2NDM2OQ==",
      "updated_at" : "2020-01-02T16:41:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570264369",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes the worry is that it would allow PRs that modify the CI instructions to make (indirectly) arbitrary changes to the repository, e.g. through `${{ secrets.GITHUB_TOKEN }}`. I'd like to be really sure that this is not possible before activating third-party actions.",
      "created_at" : "2020-01-02T16:53:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570267830",
      "id" : 570267830,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDI2NzgzMA==",
      "updated_at" : "2020-01-02T16:53:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570267830",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Do you mean the GHA can make commits if the access token is set? That's the same as AppVeyor (and probably most CI's).\r\n\r\nThe token has to be set by a repo maintainer. Without it an action won't be able to make any commits.",
      "created_at" : "2020-01-02T17:02:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570270749",
      "id" : 570270749,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDI3MDc0OQ==",
      "updated_at" : "2020-01-02T17:02:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570270749",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> The token has to be set by a repo maintainer\r\n\r\nAre you sure? https://github.com/bitcoin/bitcoin/settings/secrets is empty (for me in my fork) and I could add a new label to a pull request with an action.",
      "created_at" : "2020-01-02T17:10:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570273134",
      "id" : 570273134,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDI3MzEzNA==",
      "updated_at" : "2020-01-02T17:10:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570273134",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "https://github.com/settings/tokens is where I have got tokens that allow one of my AppVeyor jobs to make automatic commits.\r\n\r\nBut as to whether there are other ways that a repo can be modified, no I'm not sure. I also can't find why the GHA on this repo is being triggered by issues comments (like this one). On my fork only pushes trigger the job.",
      "created_at" : "2020-01-02T17:28:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570278832",
      "id" : 570278832,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDI3ODgzMg==",
      "updated_at" : "2020-01-02T17:28:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570278832",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "https://github.com/settings/tokens does not contain a token named `GITHUB_TOKEN` either.\r\n\r\n![Screenshot_2020-01-02 Build software better, together](https://user-images.githubusercontent.com/6399679/71682111-b4190080-2d5c-11ea-95cb-a1cf31ff4bd4.png)\r\n",
      "created_at" : "2020-01-02T17:38:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570281701",
      "id" : 570281701,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDI4MTcwMQ==",
      "updated_at" : "2020-01-02T17:38:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570281701",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "But isn't that the point? Unless a token is explicitly created and added to the GHA workflow file it won't be able to make commits.\r\n\r\nHere's what it looks like for AppVeyor. I manually created the token on my GitHub `settings\\tokens` page and then encrypt it for my AppVeyor account settings. With the token the AppVeyor job can make commits on a specific branch in one of my repos. Without it my understanding is commits can't be made.\r\n\r\n````\r\nversion: 1.0.{build}\r\nenvironment:\r\n  APPVEYOR_SAVE_CACHE_ON_ERROR: true\r\n  access_token:\r\n    # Token for github pages publishing.\r\n    secure: 21m76jAVvcu7oACAHFnfCBltcwon+r5ZI3avfRmrNFAqJMn6RfLXwpBhPcJ617tD\r\nimage: Visual Studio 2019\r\n````\r\nMy expectation is that GHA is the same as AppVeyor. But I'm not sure. I'll post a question on the GitHub support forum.\r\n\r\n https://github.community/t5/GitHub-Actions/Can-an-Action-make-commits-without-explicitly-setting-an-access/m-p/42383#M4973",
      "created_at" : "2020-01-02T17:45:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570284040",
      "id" : 570284040,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDI4NDA0MA==",
      "updated_at" : "2020-01-02T17:50:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570284040",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke looks like setting the `Actions Permissions` to `Enable local Actions only for this repository` causes the Action to be triggered for isuse comments (and probably every other report interactions). This is not what we want and it might be better to disable the Action. ~~while I track down why this behaviour occurs.~~\r\n\r\nUpdate: Most likely cause for the behaviour is that GitHub triggers the Action on every event and then lets the workflow file filter them. By setting the `Enable local Actions only for this repository` permission it causes an error immediately since the `ci.yml` file on this repo is using 3rd party actions. The Action is going to permanently fail until the permission is changed or 3rd party actions are removed. Recommendation is to disable pending further investigation into permissions.\r\n\r\nSetting the permission to `Enable local and third party Actions for this repository` results in my fork only triggering on Pull requests. I think that permission level simply means 3rd party actions like the cache and checkout ones can be used in a workflow file. But until we know for sure it rules out potential for commits might be best to disable Actions again.",
      "created_at" : "2020-01-02T18:00:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570288458",
      "id" : 570288458,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDI4ODQ1OA==",
      "updated_at" : "2020-01-02T18:12:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570288458",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I am using the placeholder, so I am not explicitly setting a token:\r\n\r\nhttps://github.com/MarcoFalke/bitcoin-core/blob/21dd161ef18a1c0b88269ee5ddbcd7c0dbceffc5/.github/workflows/label.yml#L19\r\n\r\nThen it was somehow able to add a label: https://github.com/MarcoFalke/bitcoin-core/pull/10#event-2918185136",
      "created_at" : "2020-01-02T18:43:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570301644",
      "id" : 570301644,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDMwMTY0NA==",
      "updated_at" : "2020-01-02T18:43:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570301644",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Turns out an [automatic token](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/authenticating-with-the-github_token) is available for a GitHub Action. That's not good for the Bitcoin Core repo as that token does have [write permissions](https://help.github.com/en/actions/automating-your-workflow-with-github-actions/authenticating-with-the-github_token#permissions-for-the-github_token).\r\n\r\nMarcoFalke's comment below is thus very valid.\r\n\r\n> It looks like GitHub Actions (when granted) gives any permission to modify the repository. This is overkill and harmful. A CI should be read-only, not be allowed to push arbitrary code changes (or even just modify labels)\r\n\r\nMaybe there's a way to disable write permissions for the `Actions App` but I'm yet to find it.",
      "created_at" : "2020-01-02T19:34:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570317499",
      "id" : 570317499,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDMxNzQ5OQ==",
      "updated_at" : "2020-01-02T19:34:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570317499",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Reported upstream: https://github.community/t5/GitHub-Actions/Read-only-token-for-CI/m-p/42393#M4978",
      "created_at" : "2020-01-02T20:10:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570328727",
      "id" : 570328727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDMyODcyNw==",
      "updated_at" : "2020-01-02T20:10:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570328727",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Assuming the answer on MacroFalke's question is correct and there is no way to disable the default token then I think using a GitHub Action build on Bitcoin Core is a NACK.\r\n\r\nThe risk could be managed by replacing 3rd party actions with custom actions but that's way too big a burden for the benefits over the existing AppVeyor build.\r\n\r\nNACK until a GitHub Action readonly token option is available.\r\n",
      "created_at" : "2020-01-04T10:53:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-570775483",
      "id" : 570775483,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3MDc3NTQ4Mw==",
      "updated_at" : "2020-01-04T10:53:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/570775483",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/197660?v=4",
         "events_url" : "https://api.github.com/users/sipsorcery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipsorcery/followers",
         "following_url" : "https://api.github.com/users/sipsorcery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipsorcery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipsorcery",
         "id" : 197660,
         "login" : "sipsorcery",
         "node_id" : "MDQ6VXNlcjE5NzY2MA==",
         "organizations_url" : "https://api.github.com/users/sipsorcery/orgs",
         "received_events_url" : "https://api.github.com/users/sipsorcery/received_events",
         "repos_url" : "https://api.github.com/users/sipsorcery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipsorcery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipsorcery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipsorcery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Fortunately we have the ear of the GitHub CEO: #15847",
      "created_at" : "2020-01-28T18:00:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-579377518",
      "id" : 579377518,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3OTM3NzUxOA==",
      "updated_at" : "2020-01-28T18:00:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579377518",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't think they ever made changes based on our feedback.\r\n\r\nIt would probably be good to remove the github ci script again.",
      "created_at" : "2020-01-30T18:42:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-580395325",
      "id" : 580395325,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4MDM5NTMyNQ==",
      "updated_at" : "2020-01-30T18:42:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/580395325",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Going to close for now, given we've removed the GitHub Actions workflow (#18031).",
      "created_at" : "2020-02-04T22:22:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-582144829",
      "id" : 582144829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU4MjE0NDgyOQ==",
      "updated_at" : "2020-02-04T22:22:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/582144829",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Yes the worry is that it would allow PRs that modify the CI instructions to make (indirectly) arbitrary changes to the repository, e.g. through `${{ secrets.GITHUB_TOKEN }}`. I'd like to be really sure that this is not possible before activating third-party actions.\r\n\r\nThat's not possible as I understand it.\r\n\r\nThis blog post clarifies that pull requests from forks only get a read-only token:\r\nhttps://github.blog/2020-08-03-github-actions-improvements-for-fork-and-pull-request-workflows/#improvements-for-public-repository-forks\r\n  (see in particular the first paragraph in the second section... the entire section section is about dealing with workflows that need write access **but currently do not have it** ):\r\n> In order to protect public repositories for malicious users we run all pull request workflows raised from repository forks with a read-only token and no access to secrets. \r\n\r\nBut the docs are bad here. That behavior is not at all clear from \r\nhttps://docs.github.com/en/free-pro-team@latest/actions/reference/encrypted-secrets#using-encrypted-secrets-in-a-workflow and \r\nhttps://docs.github.com/en/free-pro-team@latest/actions/reference/authentication-in-a-workflow#permissions-for-the-github_token ... Maybe I'll create a PR to their docs. If we're in doubt, we could just try on a new repo. \r\n\r\nWere there further concerns? If not, GitHub Actions is again an interesting option. (Not saying we should do this, I'm at the moment just looking into options for secp256k1 (https://github.com/bitcoin-core/secp256k1/issues/707).",
      "created_at" : "2020-11-11T17:20:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-725551444",
      "id" : 725551444,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyNTU1MTQ0NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-11T17:20:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/725551444",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/1071625?v=4",
         "events_url" : "https://api.github.com/users/real-or-random/events{/privacy}",
         "followers_url" : "https://api.github.com/users/real-or-random/followers",
         "following_url" : "https://api.github.com/users/real-or-random/following{/other_user}",
         "gists_url" : "https://api.github.com/users/real-or-random/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/real-or-random",
         "id" : 1071625,
         "login" : "real-or-random",
         "node_id" : "MDQ6VXNlcjEwNzE2MjU=",
         "organizations_url" : "https://api.github.com/users/real-or-random/orgs",
         "received_events_url" : "https://api.github.com/users/real-or-random/received_events",
         "repos_url" : "https://api.github.com/users/real-or-random/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/real-or-random/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/real-or-random/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/real-or-random"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> the docs are bad\r\n\r\nWe don't have the resources to read through outdated and incorrect docs to decide whether a token has read or write permissions. Even if the docs were clear that some token has only read permissions attached, it is probably vulnerable in the implementation. See also https://bugs.chromium.org/p/project-zero/issues/detail?id=2070\r\n\r\nHosting the code, managing access control and running untrusted CI scripts on the same server/domain is just going to leave us dealing with commits such as this one (https://github.com/rails/rails/commit/b83965785db1eec019edf1fc272b1aa393e6dc57) in master\r\n\r\nEven if there was no vulnerability, with software today moving to shorter release cycles and speeding up the release process by having the ci directly deploy the code is demanding GitHub to offer write tokens at some point (if they haven't already).\r\n\r\nMoreover, GitHub doesn't even allow us to assign our contributors the right permissions to manage issues, labels and projects. I highly doubt they have figured out the permissions for ci tokens in a way that makes sense for us.",
      "created_at" : "2020-11-11T17:54:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17803#issuecomment-725569747",
      "id" : 725569747,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17803",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyNTU2OTc0Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-11T17:54:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/725569747",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
