{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "During testing, a completely synchronized 0.8.3 node was updated to 0.22.0 using static release binaries. As expected, this faulted with an error describing that to continue a `-reindex` would need to be used to account for the missing witness data post-segwit\r\n\r\n````Opening LevelDB in /root/.bitcoin/chainstate\r\nOpened LevelDB successfully\r\nUsing obfuscation key for /root/.bitcoin/chainstate: 0000000000000000\r\nUpgrading utxo-set database...\r\n[0%]...[10%]...[20%]...[30%]...[40%]...[50%]...[60%]...[70%]...[80%]...[90%]...[100%]...[DONE].\r\nLoaded best chain: hashBestChain=00000000000000000009c8231207a2e13e246db331dc8c536454c37683d3ccdb height=715165 date=2021-12-21T23:08:50Z progress=0.997369\r\n: Witness data for blocks after height 481824 requires validation. Please restart with -reindex..\r\nPlease restart with -reindex or -reindex-chainstate to recover.\r\n: Witness data for blocks after height 481824 requires validation. Please restart with -reindex..\r\nPlease restart with -reindex or -reindex-chainstate to recover.\r\nAborted block database rebuild. Exiting.\r\n````\r\n\r\nRestarting 0.22 with `bitcoind -reindex` resulted in apparent consensus failure, with the node being unable to make forward progress and failing each block on disk. \r\n\r\n````\r\nERROR: AcceptBlock: bad-witness-nonce-size, ContextualCheckBlock : invalid witness reserved value size\r\n````\r\n\r\nRestarting the node again has the software seemingly making forward progress with reindexing past height 310k without further issue or AcceptBlock() failure. There is no viable snapshot of my 0.8.3 data pre-upgrade so this can't be easily replicated, and is such an absurd situation as to almost certainly be unique, however it seemed worthy of reporting in case this is indicative of some other concerns. ",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23913/comments",
   "created_at" : "2021-12-30T18:23:32Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23913/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/23913",
   "id" : 1091247119,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "description" : null,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23913/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII585BCxwP",
   "number" : 23913,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23913/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23913/timeline",
   "title" : "Transient consensus failure while upgrading bitcoind 0.8.3 > 0.22.0",
   "updated_at" : "2021-12-30T18:23:32Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/23913",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/60858013?v=4",
      "events_url" : "https://api.github.com/users/wpeckr/events{/privacy}",
      "followers_url" : "https://api.github.com/users/wpeckr/followers",
      "following_url" : "https://api.github.com/users/wpeckr/following{/other_user}",
      "gists_url" : "https://api.github.com/users/wpeckr/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/wpeckr",
      "id" : 60858013,
      "login" : "wpeckr",
      "node_id" : "MDQ6VXNlcjYwODU4MDEz",
      "organizations_url" : "https://api.github.com/users/wpeckr/orgs",
      "received_events_url" : "https://api.github.com/users/wpeckr/received_events",
      "repos_url" : "https://api.github.com/users/wpeckr/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/wpeckr/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/wpeckr/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/wpeckr"
   }
}
