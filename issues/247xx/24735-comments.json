[
   {
      "author_association" : "MEMBER",
      "body" : "No objection, but it would be good for either clang or valgrind to fix this, so that we can revert the workaround and that devs are able to use clang-14 out of the box.",
      "created_at" : "2022-04-01T12:47:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24735#issuecomment-1085856671",
      "id" : 1085856671,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24735",
      "node_id" : "IC_kwDOABII585AuNuf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1085856671/reactions"
      },
      "updated_at" : "2022-04-01T12:47:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1085856671",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks like there is at least discussion on the Valgrind mailing list [[Valgrind-users] does Valgrind-3.19.0.GIT support Clang14 dwarf 5?](https://sourceforge.net/p/valgrind/mailman/valgrind-users/thread/AM0PR08MB513876B66ECBBFF37E3AD2FF89329%40AM0PR08MB5138.eurprd08.prod.outlook.com/#msg376098280). I haven't found anything on the LLVM side yet.",
      "created_at" : "2022-04-01T12:55:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24735#issuecomment-1085864666",
      "id" : 1085864666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24735",
      "node_id" : "IC_kwDOABII585AuPra",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1085864666/reactions"
      },
      "updated_at" : "2022-04-01T12:55:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1085864666",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't know how big of a change it is, but if it's anything like going from DWARF 2 to 3 it's not going to be a trivial change in valgrind. I suspect it's going to take a while to support it.\r\n\r\nCould add a comment to mention why this override is needed and what would be the condition to remove it.\r\n\r\nOtherwise code review ACK 5691a8f0ec8d0bfc470990dfaed9d230346a116e",
      "created_at" : "2022-04-01T16:13:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24735#issuecomment-1086102073",
      "id" : 1086102073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24735",
      "node_id" : "IC_kwDOABII585AvJo5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1086102073/reactions"
      },
      "updated_at" : "2022-04-01T16:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1086102073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24735#discussion_r841401605"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841401605"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could leave CXXFLAGS untouched to minimize the effective changes?\r\n\r\n```suggestion\r\n# Temporarily pin dwarf 4, until valgrind can understand clang's dwarf 5\r\nexport BITCOIN_CONFIG=\"--enable-fuzz --with-sanitizers=fuzzer CC=clang CXX='clang++ -fdebug-default-version=4'\"\r\n```",
      "commit_id" : "5691a8f0ec8d0bfc470990dfaed9d230346a116e",
      "created_at" : "2022-04-04T06:29:07Z",
      "diff_hunk" : "@@ -15,5 +15,5 @@ export RUN_FUNCTIONAL_TESTS=false\n export RUN_FUZZ_TESTS=true\n export FUZZ_TESTS_CONFIG=\"--valgrind\"\n export GOAL=\"install\"\n-export BITCOIN_CONFIG=\"--enable-fuzz --with-sanitizers=fuzzer CC=clang CXX=clang++\"\n+export BITCOIN_CONFIG=\"--enable-fuzz --with-sanitizers=fuzzer CC=clang CXX=clang++ CXXFLAGS='-fdebug-default-version=4'\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24735#discussion_r841401605",
      "id" : 841401605,
      "line" : 18,
      "node_id" : "PRRC_kwDOABII584yJsUF",
      "original_commit_id" : "5691a8f0ec8d0bfc470990dfaed9d230346a116e",
      "original_line" : 18,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "ci/test/00_setup_env_native_fuzz_with_valgrind.sh",
      "position" : 5,
      "pull_request_review_id" : 929880820,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841401605/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-04T06:29:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841401605",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Could add a comment to mention why this override is needed and what would be the condition to remove it.\r\n\r\nAdded. \r\n\r\n> Could leave CXXFLAGS untouched to minimize the effective changes?\r\n\r\nDone. Used `-gdwarf-4` to minimize even further.",
      "created_at" : "2022-04-04T08:30:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24735#issuecomment-1087268055",
      "id" : 1087268055,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24735",
      "node_id" : "IC_kwDOABII585AzmTX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1087268055/reactions"
      },
      "updated_at" : "2022-04-04T08:30:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1087268055",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This actually only seems to work when using `CXXFLAGS` and the full `-fdebug-default-version=4`, so I've reverted back to the original change + the comment.",
      "created_at" : "2022-04-04T09:28:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24735#issuecomment-1087325103",
      "id" : 1087325103,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24735",
      "node_id" : "IC_kwDOABII585Az0Ov",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1087325103/reactions"
      },
      "updated_at" : "2022-04-04T09:28:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1087325103",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24735#discussion_r841560444"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841560444"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\nexport BITCOIN_CONFIG=\"--enable-zmq --with-incompatible-bdb --with-gui=no CC=clang CXX=clang++ CXXFLAGS='-fdebug-default-version=4'\"  # TODO enable GUI\r\n```",
      "commit_id" : "15893a07811e022bf9e774b831f8386df7ac52e5",
      "created_at" : "2022-04-04T09:52:38Z",
      "diff_hunk" : "@@ -13,4 +13,5 @@ export USE_VALGRIND=1\n export NO_DEPENDS=1\n export TEST_RUNNER_EXTRA=\"--nosandbox --exclude feature_init,rpc_bind,feature_bind_extra\"  # Excluded for now, see https://github.com/bitcoin/bitcoin/issues/17765#issuecomment-602068547\n export GOAL=\"install\"\n-export BITCOIN_CONFIG=\"--enable-zmq --with-incompatible-bdb --with-gui=no CC=clang CXX=clang++\"  # TODO enable GUI\n+# Temporarily pin dwarf 4, until valgrind can understand clang's dwarf 5\n+export BITCOIN_CONFIG=\"--enable-zmq --with-incompatible-bdb --with-gui=no CC=clang CXX=clang++ CXXFLAGS='-fdebug-default-version=4\"  # TODO enable GUI",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24735#discussion_r841560444",
      "id" : 841560444,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yKTF8",
      "original_commit_id" : "951ddd320aa7d243869308aacc2c6d3bcf75ae4d",
      "original_line" : 17,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "ci/test/00_setup_env_native_valgrind.sh",
      "position" : null,
      "pull_request_review_id" : 930108066,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841560444/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-04T09:52:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841560444",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24735#discussion_r841564747"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24735"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841564747"
         }
      },
      "author_association" : "MEMBER",
      "body" : "ð° ",
      "commit_id" : "15893a07811e022bf9e774b831f8386df7ac52e5",
      "created_at" : "2022-04-04T09:57:36Z",
      "diff_hunk" : "@@ -13,4 +13,5 @@ export USE_VALGRIND=1\n export NO_DEPENDS=1\n export TEST_RUNNER_EXTRA=\"--nosandbox --exclude feature_init,rpc_bind,feature_bind_extra\"  # Excluded for now, see https://github.com/bitcoin/bitcoin/issues/17765#issuecomment-602068547\n export GOAL=\"install\"\n-export BITCOIN_CONFIG=\"--enable-zmq --with-incompatible-bdb --with-gui=no CC=clang CXX=clang++\"  # TODO enable GUI\n+# Temporarily pin dwarf 4, until valgrind can understand clang's dwarf 5\n+export BITCOIN_CONFIG=\"--enable-zmq --with-incompatible-bdb --with-gui=no CC=clang CXX=clang++ CXXFLAGS='-fdebug-default-version=4\"  # TODO enable GUI",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24735#discussion_r841564747",
      "id" : 841564747,
      "in_reply_to_id" : 841560444,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yKUJL",
      "original_commit_id" : "951ddd320aa7d243869308aacc2c6d3bcf75ae4d",
      "original_line" : 17,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "ci/test/00_setup_env_native_valgrind.sh",
      "position" : null,
      "pull_request_review_id" : 930114161,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24735",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841564747/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-04T09:57:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/841564747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
