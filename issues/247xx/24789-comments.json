[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24830](https://github.com/bitcoin/bitcoin/pull/24830) (init: Allow -proxy=\"\" setting values by ryanofsky)\n* [#22072](https://github.com/bitcoin/bitcoin/pull/22072) (Add reindex=auto flag to automatically reindex corrupt data by AaronDewes)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-04-06T18:59:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24789#issuecomment-1090636839",
      "id" : 1090636839,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24789",
      "node_id" : "IC_kwDOABII585BAcwn",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1090636839/reactions"
      },
      "updated_at" : "2022-04-23T11:18:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1090636839",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Seems ok (with the noted provision that it is a temporary state of affairs). Theoretially `-reindex-chainstate` is supposed to be simply a faster `-reindex` that doesn't rebuild the block index, and work exactly the same otherwise. But if it doesn't work that way, it's better to disable the combination for now than have corruption and errors.",
      "created_at" : "2022-04-07T11:20:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24789#issuecomment-1091613555",
      "id" : 1091613555,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24789",
      "node_id" : "IC_kwDOABII585BELNz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1091613555/reactions"
      },
      "updated_at" : "2022-04-07T11:21:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1091613555",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok with this temporarily, but I think we should [really fix the issue](https://github.com/bitcoin/bitcoin/pull/24630#issuecomment-1079587504) instead long-term.",
      "created_at" : "2022-04-12T21:03:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24789#issuecomment-1097214328",
      "id" : 1097214328,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24789",
      "node_id" : "IC_kwDOABII585BZil4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1097214328/reactions"
      },
      "updated_at" : "2022-04-12T21:03:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1097214328",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r853621604"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853621604"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"init: disallow reindex-chainstate with optional indexes\" (93fa8f651242af5354ba92f7aaec18e878d4f840)\r\n\r\nIt would be good to replace `args.IsArgSet(\"-reindex-chainstate\")` with `args.GetBoolArg(\"-reindex-chainstate\", false)` because otherwise this will wrongly trigger for `-noreindex-chainstate`.\r\n\r\n(In general, it's good to avoid the `IsArgSet` function. It's frequently misused and leads to minor bugs like this.)",
      "commit_id" : "93fa8f651242af5354ba92f7aaec18e878d4f840",
      "created_at" : "2022-04-20T00:15:46Z",
      "diff_hunk" : "@@ -1031,6 +1031,19 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         return InitError(_(\"No proxy server specified. Use -proxy=<ip> or -proxy=<ip:port>.\"));\n     }\n \n+    if (args.IsArgSet(\"-reindex-chainstate\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r853621604",
      "id" : 853621604,
      "line" : 1034,
      "node_id" : "PRRC_kwDOABII584y4Ttk",
      "original_commit_id" : "93fa8f651242af5354ba92f7aaec18e878d4f840",
      "original_line" : 1034,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 13,
      "pull_request_review_id" : 946461589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853621604/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-20T00:59:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853621604",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r853628252"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853628252"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"init: disallow reindex-chainstate with optional indexes\" (93fa8f651242af5354ba92f7aaec18e878d4f840)\r\n\r\nCurious, but do you know how or whether txindex gets corrupted? #24630 only mentions the other two indexes. I guess even if the txindex doesn't get corrupted, it is probably still good to prevent `-reindex-chainstate` and `-txindex` from being used together if the current implementation is wastefully slow and inefficient, until we properly make the options more compatible.",
      "commit_id" : "93fa8f651242af5354ba92f7aaec18e878d4f840",
      "created_at" : "2022-04-20T00:25:19Z",
      "diff_hunk" : "@@ -1031,6 +1031,19 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         return InitError(_(\"No proxy server specified. Use -proxy=<ip> or -proxy=<ip:port>.\"));\n     }\n \n+    if (args.IsArgSet(\"-reindex-chainstate\")) {\n+        // indexes that must be deactivated to prevent index corruption, see #24630\n+        if (args.GetBoolArg(\"-coinstatsindex\", DEFAULT_COINSTATSINDEX)) {\n+            return InitError(_(\"reindex-chainstate with active coinstatsindex is not possible. Please deactivate the index temporarily or perform a full -reindex, which will also rebuild the index.\"));\n+        }\n+        if (g_enabled_filter_types.count(BlockFilterType::BASIC)) {\n+            return InitError(_(\"reindex-chainstate with active blockfilterindex is not possible. Please deactivate the index temporarily or perform a full -reindex, which will also rebuild the index.\"));\n+        }\n+        if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n+            return InitError(_(\"reindex-chainstate with active txindex is not possible. Please deactivate the index temporarily or perform a full -reindex, which will also rebuild the index.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r853628252",
      "id" : 853628252,
      "line" : 1043,
      "node_id" : "PRRC_kwDOABII584y4VVc",
      "original_commit_id" : "93fa8f651242af5354ba92f7aaec18e878d4f840",
      "original_line" : 1043,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 24,
      "pull_request_review_id" : 946461589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853628252/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-20T00:59:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853628252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r853637267"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853637267"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit \"init: disallow reindex-chainstate with optional indexes\" (93fa8f651242af5354ba92f7aaec18e878d4f840)\r\n\r\nMinor: Here and below I think you could make recommendations more explicit. I would say \"-reindex-chainstate option is not compatible with -coinstatsindex. Please temporarily disable -coinstatsindex while using -reindex-chainstate, or replace -reindex-chainstate with -reindex to fully rebuild all indexes.\" But current wording is also OK if you prefer it.",
      "commit_id" : "93fa8f651242af5354ba92f7aaec18e878d4f840",
      "created_at" : "2022-04-20T00:46:25Z",
      "diff_hunk" : "@@ -1031,6 +1031,19 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         return InitError(_(\"No proxy server specified. Use -proxy=<ip> or -proxy=<ip:port>.\"));\n     }\n \n+    if (args.IsArgSet(\"-reindex-chainstate\")) {\n+        // indexes that must be deactivated to prevent index corruption, see #24630\n+        if (args.GetBoolArg(\"-coinstatsindex\", DEFAULT_COINSTATSINDEX)) {\n+            return InitError(_(\"reindex-chainstate with active coinstatsindex is not possible. Please deactivate the index temporarily or perform a full -reindex, which will also rebuild the index.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r853637267",
      "id" : 853637267,
      "line" : 1037,
      "node_id" : "PRRC_kwDOABII584y4XiT",
      "original_commit_id" : "93fa8f651242af5354ba92f7aaec18e878d4f840",
      "original_line" : 1037,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 18,
      "pull_request_review_id" : 946461589,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853637267/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-20T00:59:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853637267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r857173736"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857173736"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I don't think that it will get corrupted, because it doesn't have any kind of running variable like the other two indexes. However, it would get \"rebuilt\" by processing `BlockConnected()` signals for the entire chain (with the result being identical to the previously saved index data), which is probably not be what the user expects from running a `-reindex-chainstate` command. That's why I disabled it as well - I don't think it is strictly necessary and can drop this, if you / others would prefer that.",
      "commit_id" : "dac44fc06ff9938d070aa5221d106a7f31da9d81",
      "created_at" : "2022-04-24T20:12:37Z",
      "diff_hunk" : "@@ -1031,6 +1031,19 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         return InitError(_(\"No proxy server specified. Use -proxy=<ip> or -proxy=<ip:port>.\"));\n     }\n \n+    if (args.IsArgSet(\"-reindex-chainstate\")) {\n+        // indexes that must be deactivated to prevent index corruption, see #24630\n+        if (args.GetBoolArg(\"-coinstatsindex\", DEFAULT_COINSTATSINDEX)) {\n+            return InitError(_(\"reindex-chainstate with active coinstatsindex is not possible. Please deactivate the index temporarily or perform a full -reindex, which will also rebuild the index.\"));\n+        }\n+        if (g_enabled_filter_types.count(BlockFilterType::BASIC)) {\n+            return InitError(_(\"reindex-chainstate with active blockfilterindex is not possible. Please deactivate the index temporarily or perform a full -reindex, which will also rebuild the index.\"));\n+        }\n+        if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n+            return InitError(_(\"reindex-chainstate with active txindex is not possible. Please deactivate the index temporarily or perform a full -reindex, which will also rebuild the index.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r857173736",
      "id" : 857173736,
      "in_reply_to_id" : 853628252,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zF27o",
      "original_commit_id" : "93fa8f651242af5354ba92f7aaec18e878d4f840",
      "original_line" : 1043,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 951244960,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857173736/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-24T20:12:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857173736",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r857174188"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857174188"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks, I took your suggestion (just didn't use a \"-\" after \"disable\" because here the index is meant, not the command option). ",
      "commit_id" : "dac44fc06ff9938d070aa5221d106a7f31da9d81",
      "created_at" : "2022-04-24T20:17:16Z",
      "diff_hunk" : "@@ -1031,6 +1031,19 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         return InitError(_(\"No proxy server specified. Use -proxy=<ip> or -proxy=<ip:port>.\"));\n     }\n \n+    if (args.IsArgSet(\"-reindex-chainstate\")) {\n+        // indexes that must be deactivated to prevent index corruption, see #24630\n+        if (args.GetBoolArg(\"-coinstatsindex\", DEFAULT_COINSTATSINDEX)) {\n+            return InitError(_(\"reindex-chainstate with active coinstatsindex is not possible. Please deactivate the index temporarily or perform a full -reindex, which will also rebuild the index.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r857174188",
      "id" : 857174188,
      "in_reply_to_id" : 853637267,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zF3Cs",
      "original_commit_id" : "93fa8f651242af5354ba92f7aaec18e878d4f840",
      "original_line" : 1037,
      "original_position" : 18,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 951245342,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857174188/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-24T20:17:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857174188",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r857174886"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857174886"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done as suggested, good catch! Maybe there could be a warning about this in the doc of `IsArgSet`  (`system.h`).",
      "commit_id" : "dac44fc06ff9938d070aa5221d106a7f31da9d81",
      "created_at" : "2022-04-24T20:24:17Z",
      "diff_hunk" : "@@ -1031,6 +1031,19 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         return InitError(_(\"No proxy server specified. Use -proxy=<ip> or -proxy=<ip:port>.\"));\n     }\n \n+    if (args.IsArgSet(\"-reindex-chainstate\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r857174886",
      "id" : 857174886,
      "in_reply_to_id" : 853621604,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584zF3Nm",
      "original_commit_id" : "93fa8f651242af5354ba92f7aaec18e878d4f840",
      "original_line" : 1034,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 951245915,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857174886/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-24T20:24:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857174886",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed feedback by @ryanofsky ",
      "created_at" : "2022-04-24T20:30:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24789#issuecomment-1107912972",
      "id" : 1107912972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24789",
      "node_id" : "IC_kwDOABII585CCWkM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107912972/reactions"
      },
      "updated_at" : "2022-04-24T20:30:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1107912972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/48763452?v=4",
         "events_url" : "https://api.github.com/users/mzumsande/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mzumsande/followers",
         "following_url" : "https://api.github.com/users/mzumsande/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mzumsande/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mzumsande",
         "id" : 48763452,
         "login" : "mzumsande",
         "node_id" : "MDQ6VXNlcjQ4NzYzNDUy",
         "organizations_url" : "https://api.github.com/users/mzumsande/orgs",
         "received_events_url" : "https://api.github.com/users/mzumsande/received_events",
         "repos_url" : "https://api.github.com/users/mzumsande/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mzumsande/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mzumsande/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mzumsande"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r859453665"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/859453665"
         }
      },
      "author_association" : "MEMBER",
      "body" : "not sure how helpful it is to write `#24630`. Either this should be a full URL or even better a description for devs to explain which indexes must be deactivated and which ones do not.\r\n\r\nIf all need to be deactivated it would be better to write \"All index\" instead of \"indexes that\".",
      "commit_id" : "dac44fc06ff9938d070aa5221d106a7f31da9d81",
      "created_at" : "2022-04-27T07:05:04Z",
      "diff_hunk" : "@@ -1031,6 +1031,19 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         return InitError(_(\"No proxy server specified. Use -proxy=<ip> or -proxy=<ip:port>.\"));\n     }\n \n+    if (args.GetBoolArg(\"-reindex-chainstate\", false)) {\n+        // indexes that must be deactivated to prevent index corruption, see #24630",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r859453665",
      "id" : 859453665,
      "line" : 1035,
      "node_id" : "PRRC_kwDOABII584zOjjh",
      "original_commit_id" : "dac44fc06ff9938d070aa5221d106a7f31da9d81",
      "original_line" : 1035,
      "original_position" : 16,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 16,
      "pull_request_review_id" : 954414104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/859453665/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-27T07:05:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/859453665",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r859454448"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/859454448"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Maybe this can be wrapped in a lambda that takes the index name?",
      "commit_id" : "dac44fc06ff9938d070aa5221d106a7f31da9d81",
      "created_at" : "2022-04-27T07:06:11Z",
      "diff_hunk" : "@@ -1031,6 +1031,19 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n         return InitError(_(\"No proxy server specified. Use -proxy=<ip> or -proxy=<ip:port>.\"));\n     }\n \n+    if (args.GetBoolArg(\"-reindex-chainstate\", false)) {\n+        // indexes that must be deactivated to prevent index corruption, see #24630\n+        if (args.GetBoolArg(\"-coinstatsindex\", DEFAULT_COINSTATSINDEX)) {\n+            return InitError(_(\"-reindex-chainstate option is not compatible with -coinstatsindex. Please temporarily disable coinstatsindex while using -reindex-chainstate, or replace -reindex-chainstate with -reindex to fully rebuild all indexes.\"));\n+        }\n+        if (g_enabled_filter_types.count(BlockFilterType::BASIC)) {\n+            return InitError(_(\"-reindex-chainstate option is not compatible with -blockfilterindex. Please temporarily disable blockfilterindex while using -reindex-chainstate, or replace -reindex-chainstate with -reindex to fully rebuild all indexes.\"));\n+        }\n+        if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n+            return InitError(_(\"-reindex-chainstate option is not compatible with -txindex. Please temporarily disable txindex while using -reindex-chainstate, or replace -reindex-chainstate with -reindex to fully rebuild all indexes.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24789#discussion_r859454448",
      "id" : 859454448,
      "line" : 1043,
      "node_id" : "PRRC_kwDOABII584zOjvw",
      "original_commit_id" : "dac44fc06ff9938d070aa5221d106a7f31da9d81",
      "original_line" : 1043,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/init.cpp",
      "position" : 24,
      "pull_request_review_id" : 954415287,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24789",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/859454448/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-27T07:06:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/859454448",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
