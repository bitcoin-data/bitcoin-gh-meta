[
   {
      "author_association" : "MEMBER",
      "body" : "There is some overlap here with the descriptor wallet project: https://github.com/bitcoin/bitcoin/projects/12, particularly 32f73f57450d4bab188d73c9d6a9e8060b75a7c7 from #17261 which starts to lock `CWallet::cs_wallet` and `FillableSigningProvider::cs_KeyStore` mutexes in different place.\r\n\r\nOverall, I'm not so enthusiastic about adding more fine-grained mutexes to the wallet. I think you could probably get better performance and fewer bugs using a small number of mutexes (maybe even just one), but just being more careful to keep the mutex locked as briefly as possible, and doing blocking operations like database writes with the mutex unlocked.\r\n\r\nThat's just an overall inclination, though. There may be different wallet functions which don't need to interact with each other and really should break off and do their own synchronization.",
      "created_at" : "2019-12-04T20:21:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17667#issuecomment-561822421",
      "id" : 561822421,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17667",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2MTgyMjQyMQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561822421/reactions"
      },
      "updated_at" : "2019-12-04T20:21:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561822421",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yes don't have spent that much time thinking on it, so don't have any strong inclination, just wanted to raise the awareness than if `cs_main` get removed it's now worthy to do work to improve performance, either way with more fine-grained locks or short-lived, just-in-time mutex holding",
      "created_at" : "2019-12-04T21:25:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17667#issuecomment-561845181",
      "id" : 561845181,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17667",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2MTg0NTE4MQ==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561845181/reactions"
      },
      "updated_at" : "2019-12-04T21:25:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/561845181",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "`cs_main` was removed from the wallet. You may open a new issue if there is anything else to be done here.",
      "created_at" : "2022-08-03T11:57:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17667#issuecomment-1203853888",
      "id" : 1203853888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17667",
      "node_id" : "IC_kwDOABII585HwVpA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1203853888/reactions"
      },
      "updated_at" : "2022-08-03T11:57:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1203853888",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke FYI, the idea is about introducing more fine-grained wallet data structures locks, it's not about removing `cs_main`. We still have hundreds of lock taking of `cs_wallet` (though I don't plan to work on that). ",
      "created_at" : "2022-08-03T14:18:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17667#issuecomment-1204012937",
      "id" : 1204012937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17667",
      "node_id" : "IC_kwDOABII585Hw8eJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1204012937/reactions"
      },
      "updated_at" : "2022-08-03T14:18:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1204012937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, I guess it is fine to just implement this if there is need, but not need to keep an issue open for it?",
      "created_at" : "2022-08-03T14:24:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17667#issuecomment-1204019311",
      "id" : 1204019311,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17667",
      "node_id" : "IC_kwDOABII585Hw-Bv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1204019311/reactions"
      },
      "updated_at" : "2022-08-03T14:24:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1204019311",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I started working on decoupling some responsibilities from `cs_wallet` without knowing about this issue. PR #25620 (open discussion there)",
      "created_at" : "2022-08-03T14:31:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17667#issuecomment-1204029695",
      "id" : 1204029695,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17667",
      "node_id" : "IC_kwDOABII585HxAj_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1204029695/reactions"
      },
      "updated_at" : "2022-08-03T14:31:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1204029695",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Ok, I guess it is fine to just implement this if there is need, but not need to keep an issue open for it?\r\n\r\nYep no need to keep open. Nice we keep awareness as a project wallet refactors are welcome.",
      "created_at" : "2022-08-03T15:07:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/17667#issuecomment-1204073972",
      "id" : 1204073972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17667",
      "node_id" : "IC_kwDOABII585HxLX0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1204073972/reactions"
      },
      "updated_at" : "2022-08-03T15:07:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1204073972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   }
]
