[
   {
      "author_association" : "MEMBER",
      "body" : "cc @kallewoof since you designed the first iteration",
      "created_at" : "2019-11-27T16:11:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#issuecomment-559152851",
      "id" : 559152851,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17621",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1OTE1Mjg1MQ==",
      "updated_at" : "2019-11-27T16:11:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/559152851",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK\r\n\r\nTests please  :)",
      "created_at" : "2019-12-06T21:58:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#issuecomment-562752173",
      "id" : 562752173,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17621",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2Mjc1MjE3Mw==",
      "updated_at" : "2019-12-06T21:59:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/562752173",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-12-06T23:13:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#issuecomment-562776453",
      "id" : 562776453,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17621",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2Mjc3NjQ1Mw==",
      "updated_at" : "2019-12-06T23:13:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/562776453",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Pushed test, updated logic to fix test failure.\r\n\r\nRemoved a function that resulted in a used footgun.",
      "created_at" : "2019-12-09T15:38:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#issuecomment-563296236",
      "id" : 563296236,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17621",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2MzI5NjIzNg==",
      "updated_at" : "2019-12-09T15:38:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/563296236",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r358539866"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358539866"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, also add the EXCLUSIVE_LOCKS_REQUIRED annotation.",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2019-12-17T00:42:35Z",
      "diff_hunk" : "@@ -719,17 +719,31 @@ void CWallet::SetUsedDestinationState(WalletBatch& batch, const uint256& hash, u\n     }\n }\n \n-bool CWallet::IsUsedDestination(const CTxDestination& dst) const\n-{\n-    LOCK(cs_wallet);\n-    return IsMine(dst) && GetDestData(dst, \"used\", nullptr);\n-}\n-\n bool CWallet::IsUsedDestination(const uint256& hash, unsigned int n) const\n {\n+    AssertLockHeld(cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r358539866",
      "id" : 358539866,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1ODUzOTg2Ng==",
      "original_commit_id" : "ef4a1a4941be5a4a018aedc5f4dc41cea3cb816e",
      "original_position" : 12,
      "path" : "src/wallet/wallet.cpp",
      "position" : 12,
      "pull_request_review_id" : 332959521,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-03T22:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358539866",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r358540779"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358540779"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should be `>`?",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2019-12-17T00:46:26Z",
      "diff_hunk" : "@@ -719,17 +719,31 @@ void CWallet::SetUsedDestinationState(WalletBatch& batch, const uint256& hash, u\n     }\n }\n \n-bool CWallet::IsUsedDestination(const CTxDestination& dst) const\n-{\n-    LOCK(cs_wallet);\n-    return IsMine(dst) && GetDestData(dst, \"used\", nullptr);\n-}\n-\n bool CWallet::IsUsedDestination(const uint256& hash, unsigned int n) const\n {\n+    AssertLockHeld(cs_wallet);\n     CTxDestination dst;\n     const CWalletTx* srctx = GetWalletTx(hash);\n-    return srctx && ExtractDestination(srctx->tx->vout[n].scriptPubKey, dst) && IsUsedDestination(dst);\n+    if (srctx) {\n+        assert(srctx->tx->vout.size() >= n);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r358540779",
      "id" : 358540779,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1ODU0MDc3OQ==",
      "original_commit_id" : "ef4a1a4941be5a4a018aedc5f4dc41cea3cb816e",
      "original_position" : 17,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 332960641,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-03T22:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358540779",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r358541499"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358541499"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Haven't profiled but looks like `GetDestData && IsMine` should be faster? ",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2019-12-17T00:49:17Z",
      "diff_hunk" : "@@ -719,17 +719,31 @@ void CWallet::SetUsedDestinationState(WalletBatch& batch, const uint256& hash, u\n     }\n }\n \n-bool CWallet::IsUsedDestination(const CTxDestination& dst) const\n-{\n-    LOCK(cs_wallet);\n-    return IsMine(dst) && GetDestData(dst, \"used\", nullptr);\n-}\n-\n bool CWallet::IsUsedDestination(const uint256& hash, unsigned int n) const\n {\n+    AssertLockHeld(cs_wallet);\n     CTxDestination dst;\n     const CWalletTx* srctx = GetWalletTx(hash);\n-    return srctx && ExtractDestination(srctx->tx->vout[n].scriptPubKey, dst) && IsUsedDestination(dst);\n+    if (srctx) {\n+        assert(srctx->tx->vout.size() >= n);\n+        LegacyScriptPubKeyMan* spk_man = GetLegacyScriptPubKeyMan();\n+        assert(spk_man != nullptr);\n+        for (const auto& keyid : GetAffectedKeys(srctx->tx->vout[n].scriptPubKey, *spk_man)) {\n+            WitnessV0KeyHash wpkh_dest(keyid);\n+            if (IsMine(wpkh_dest) && GetDestData(wpkh_dest, \"used\", nullptr)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r358541499",
      "id" : 358541499,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1ODU0MTQ5OQ==",
      "original_commit_id" : "ef4a1a4941be5a4a018aedc5f4dc41cea3cb816e",
      "original_position" : 22,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 332961450,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-03T22:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358541499",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r358804704"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358804704"
         }
      },
      "author_association" : "MEMBER",
      "body" : "d'oh, I always have to sit there and reason with myself on this :)",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2019-12-17T13:59:23Z",
      "diff_hunk" : "@@ -719,17 +719,31 @@ void CWallet::SetUsedDestinationState(WalletBatch& batch, const uint256& hash, u\n     }\n }\n \n-bool CWallet::IsUsedDestination(const CTxDestination& dst) const\n-{\n-    LOCK(cs_wallet);\n-    return IsMine(dst) && GetDestData(dst, \"used\", nullptr);\n-}\n-\n bool CWallet::IsUsedDestination(const uint256& hash, unsigned int n) const\n {\n+    AssertLockHeld(cs_wallet);\n     CTxDestination dst;\n     const CWalletTx* srctx = GetWalletTx(hash);\n-    return srctx && ExtractDestination(srctx->tx->vout[n].scriptPubKey, dst) && IsUsedDestination(dst);\n+    if (srctx) {\n+        assert(srctx->tx->vout.size() >= n);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r358804704",
      "id" : 358804704,
      "in_reply_to_id" : 358540779,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1ODgwNDcwNA==",
      "original_commit_id" : "ef4a1a4941be5a4a018aedc5f4dc41cea3cb816e",
      "original_position" : 17,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 333291810,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-03T22:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358804704",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r358816438"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358816438"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I just got rid of the `IsMine` check. If a record for `used` exists in the wallet we should trust it.",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2019-12-17T14:20:37Z",
      "diff_hunk" : "@@ -719,17 +719,31 @@ void CWallet::SetUsedDestinationState(WalletBatch& batch, const uint256& hash, u\n     }\n }\n \n-bool CWallet::IsUsedDestination(const CTxDestination& dst) const\n-{\n-    LOCK(cs_wallet);\n-    return IsMine(dst) && GetDestData(dst, \"used\", nullptr);\n-}\n-\n bool CWallet::IsUsedDestination(const uint256& hash, unsigned int n) const\n {\n+    AssertLockHeld(cs_wallet);\n     CTxDestination dst;\n     const CWalletTx* srctx = GetWalletTx(hash);\n-    return srctx && ExtractDestination(srctx->tx->vout[n].scriptPubKey, dst) && IsUsedDestination(dst);\n+    if (srctx) {\n+        assert(srctx->tx->vout.size() >= n);\n+        LegacyScriptPubKeyMan* spk_man = GetLegacyScriptPubKeyMan();\n+        assert(spk_man != nullptr);\n+        for (const auto& keyid : GetAffectedKeys(srctx->tx->vout[n].scriptPubKey, *spk_man)) {\n+            WitnessV0KeyHash wpkh_dest(keyid);\n+            if (IsMine(wpkh_dest) && GetDestData(wpkh_dest, \"used\", nullptr)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r358816438",
      "id" : 358816438,
      "in_reply_to_id" : 358541499,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1ODgxNjQzOA==",
      "original_commit_id" : "ef4a1a4941be5a4a018aedc5f4dc41cea3cb816e",
      "original_position" : 22,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 333307166,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-03T22:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358816438",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r358816869"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358816869"
         }
      },
      "author_association" : "MEMBER",
      "body" : "done",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2019-12-17T14:21:24Z",
      "diff_hunk" : "@@ -719,17 +719,31 @@ void CWallet::SetUsedDestinationState(WalletBatch& batch, const uint256& hash, u\n     }\n }\n \n-bool CWallet::IsUsedDestination(const CTxDestination& dst) const\n-{\n-    LOCK(cs_wallet);\n-    return IsMine(dst) && GetDestData(dst, \"used\", nullptr);\n-}\n-\n bool CWallet::IsUsedDestination(const uint256& hash, unsigned int n) const\n {\n+    AssertLockHeld(cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r358816869",
      "id" : 358816869,
      "in_reply_to_id" : 358539866,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM1ODgxNjg2OQ==",
      "original_commit_id" : "ef4a1a4941be5a4a018aedc5f4dc41cea3cb816e",
      "original_position" : 12,
      "path" : "src/wallet/wallet.cpp",
      "position" : 12,
      "pull_request_review_id" : 333307771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-03T22:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/358816869",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "ACK 9f7eea56f2b0fbc128b83fccab344190b1e6ce54\r\n\r\nReviewed code and tested locally.",
      "created_at" : "2019-12-24T13:11:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#issuecomment-568745824",
      "id" : 568745824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17621",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2ODc0NTgyNA==",
      "updated_at" : "2019-12-24T13:11:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/568745824",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17889](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17889.html) (wallet: Improve CWallet:MarkDestinationsDirty by promag)\n* [#17843](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17843.html) (wallet: Reset reused transactions cache by fjahr)\n* [#17838](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17838.html) (test: test the >10 UTXO case for output groups by kallewoof)\n* [#17824](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17824.html) (wallet: Improve coin selection for destination groups >10 by fjahr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-12-29T05:52:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#issuecomment-569477484",
      "id" : 569477484,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17621",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU2OTQ3NzQ4NA==",
      "updated_at" : "2020-01-07T19:14:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/569477484",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r362976593"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362976593"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The annotation is supposed to go in the header file.",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2020-01-03T22:05:01Z",
      "diff_hunk" : "@@ -719,17 +719,31 @@ void CWallet::SetUsedDestinationState(WalletBatch& batch, const uint256& hash, u\n     }\n }\n \n-bool CWallet::IsUsedDestination(const CTxDestination& dst) const\n-{\n-    LOCK(cs_wallet);\n-    return IsMine(dst) && GetDestData(dst, \"used\", nullptr);\n-}\n-\n bool CWallet::IsUsedDestination(const uint256& hash, unsigned int n) const\n {\n+    AssertLockHeld(cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r362976593",
      "id" : 362976593,
      "in_reply_to_id" : 358539866,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk3NjU5Mw==",
      "original_commit_id" : "ef4a1a4941be5a4a018aedc5f4dc41cea3cb816e",
      "original_position" : 12,
      "path" : "src/wallet/wallet.cpp",
      "position" : 12,
      "pull_request_review_id" : 338294926,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-03T22:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362976593",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r362978185"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362978185"
         }
      },
      "author_association" : "MEMBER",
      "body" : "is it just a no-op here? I am not a clang wizard.",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2020-01-03T22:11:18Z",
      "diff_hunk" : "@@ -719,17 +719,31 @@ void CWallet::SetUsedDestinationState(WalletBatch& batch, const uint256& hash, u\n     }\n }\n \n-bool CWallet::IsUsedDestination(const CTxDestination& dst) const\n-{\n-    LOCK(cs_wallet);\n-    return IsMine(dst) && GetDestData(dst, \"used\", nullptr);\n-}\n-\n bool CWallet::IsUsedDestination(const uint256& hash, unsigned int n) const\n {\n+    AssertLockHeld(cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r362978185",
      "id" : 362978185,
      "in_reply_to_id" : 358539866,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk3ODE4NQ==",
      "original_commit_id" : "ef4a1a4941be5a4a018aedc5f4dc41cea3cb816e",
      "original_position" : 12,
      "path" : "src/wallet/wallet.cpp",
      "position" : 12,
      "pull_request_review_id" : 338296879,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-03T22:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362978185",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r362979357"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362979357"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: `label` isn't needed",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2020-01-03T22:16:02Z",
      "diff_hunk" : "@@ -193,7 +198,7 @@ def test_fund_send_fund_send(self):\n         '''\n         self.log.info(\"Test fund send fund send\")\n \n-        fundaddr = self.nodes[1].getnewaddress()\n+        fundaddr = self.nodes[1].getnewaddress(label=\"\", address_type=\"legacy\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r362979357",
      "id" : 362979357,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk3OTM1Nw==",
      "original_commit_id" : "9f7eea56f2b0fbc128b83fccab344190b1e6ce54",
      "original_position" : 28,
      "path" : "test/functional/wallet_avoidreuse.py",
      "position" : 28,
      "pull_request_review_id" : 338298287,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-03T22:23:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362979357",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r362980530"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362980530"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`Attributes must be attached to named declarations` oooohkay fixed",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2020-01-03T22:20:56Z",
      "diff_hunk" : "@@ -719,17 +719,31 @@ void CWallet::SetUsedDestinationState(WalletBatch& batch, const uint256& hash, u\n     }\n }\n \n-bool CWallet::IsUsedDestination(const CTxDestination& dst) const\n-{\n-    LOCK(cs_wallet);\n-    return IsMine(dst) && GetDestData(dst, \"used\", nullptr);\n-}\n-\n bool CWallet::IsUsedDestination(const uint256& hash, unsigned int n) const\n {\n+    AssertLockHeld(cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r362980530",
      "id" : 362980530,
      "in_reply_to_id" : 358539866,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk4MDUzMA==",
      "original_commit_id" : "ef4a1a4941be5a4a018aedc5f4dc41cea3cb816e",
      "original_position" : 12,
      "path" : "src/wallet/wallet.cpp",
      "position" : 12,
      "pull_request_review_id" : 338299614,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-03T22:21:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362980530",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r362980998"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362980998"
         }
      },
      "author_association" : "MEMBER",
      "body" : "From [clang docs](https://clang.llvm.org/docs/ThreadSafetyAnalysis.html#frequently-asked-questions):\r\n\r\n> Attributes are part of the formal interface of a function, and should always go in the header, where they are visible to anything that includes the header. Attributes in the .cpp file are not visible outside of the immediate translation unit, which leads to false negatives and false positives.",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2020-01-03T22:22:50Z",
      "diff_hunk" : "@@ -719,17 +719,31 @@ void CWallet::SetUsedDestinationState(WalletBatch& batch, const uint256& hash, u\n     }\n }\n \n-bool CWallet::IsUsedDestination(const CTxDestination& dst) const\n-{\n-    LOCK(cs_wallet);\n-    return IsMine(dst) && GetDestData(dst, \"used\", nullptr);\n-}\n-\n bool CWallet::IsUsedDestination(const uint256& hash, unsigned int n) const\n {\n+    AssertLockHeld(cs_wallet);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r362980998",
      "id" : 362980998,
      "in_reply_to_id" : 358539866,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjk4MDk5OA==",
      "original_commit_id" : "ef4a1a4941be5a4a018aedc5f4dc41cea3cb816e",
      "original_position" : 12,
      "path" : "src/wallet/wallet.cpp",
      "position" : 12,
      "pull_request_review_id" : 338298287,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-03T22:23:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/362980998",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r363006765"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363006765"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It would be, once address type default is changed, no?",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2020-01-04T01:20:15Z",
      "diff_hunk" : "@@ -193,7 +198,7 @@ def test_fund_send_fund_send(self):\n         '''\n         self.log.info(\"Test fund send fund send\")\n \n-        fundaddr = self.nodes[1].getnewaddress()\n+        fundaddr = self.nodes[1].getnewaddress(label=\"\", address_type=\"legacy\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r363006765",
      "id" : 363006765,
      "in_reply_to_id" : 362979357,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzAwNjc2NQ==",
      "original_commit_id" : "9f7eea56f2b0fbc128b83fccab344190b1e6ce54",
      "original_position" : 28,
      "path" : "test/functional/wallet_avoidreuse.py",
      "position" : 28,
      "pull_request_review_id" : 338329349,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-04T01:20:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363006765",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/250224?v=4",
         "events_url" : "https://api.github.com/users/kallewoof/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kallewoof/followers",
         "following_url" : "https://api.github.com/users/kallewoof/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kallewoof/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kallewoof",
         "id" : 250224,
         "login" : "kallewoof",
         "node_id" : "MDQ6VXNlcjI1MDIyNA==",
         "organizations_url" : "https://api.github.com/users/kallewoof/orgs",
         "received_events_url" : "https://api.github.com/users/kallewoof/received_events",
         "repos_url" : "https://api.github.com/users/kallewoof/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kallewoof/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kallewoof/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kallewoof"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r363124918"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363124918"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, you could move this line after L2932 - no point in calling `IsUsedDestination` if this address doesn't matter.",
      "commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "created_at" : "2020-01-05T23:26:00Z",
      "diff_hunk" : "@@ -2927,7 +2927,7 @@ static UniValue listunspent(const JSONRPCRequest& request)\n         CTxDestination address;\n         const CScript& scriptPubKey = out.tx->tx->vout[out.i].scriptPubKey;\n         bool fValidAddress = ExtractDestination(scriptPubKey, address);\n-        bool reused = avoid_reuse && pwallet->IsUsedDestination(address);\n+        bool reused = avoid_reuse && pwallet->IsUsedDestination(out.tx->GetHash(), out.i);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#discussion_r363124918",
      "id" : 363124918,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzEyNDkxOA==",
      "original_commit_id" : "09502452bbbe21bb974f1de8cf53196373921ab9",
      "original_position" : 5,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 338428516,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/17621",
      "updated_at" : "2020-01-05T23:45:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/363124918",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Being backported in 17792.",
      "created_at" : "2020-01-14T09:40:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/17621#issuecomment-574088397",
      "id" : 574088397,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/17621",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU3NDA4ODM5Nw==",
      "updated_at" : "2020-01-14T09:40:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/574088397",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
