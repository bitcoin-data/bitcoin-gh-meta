{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "**Description**\r\nI expect to be able to create and load a wallet with Bitcoin CLI using the command \"bitcoin-cli createwallet mywallet.dat\" but it fails and Bitcoin Core crashes. The wallet appears to be partially created and the folder does exist.\r\n\r\nI also have that wallet listed as one to load via the config. The crash then causes bitcoin to restart via the systemd service and when it restarts it exits with an error indicating the wallet cannot be read.\r\n\r\n**Expected Behavior**\r\nI expected the wallet to be created. This works fine on Bitcoin Core 21.2, but fails on 22.0.\r\n\r\n**Actual Behavior**\r\nBitcoin crashes and a corrupt wallet is made. This causes Bitcoin to reboot, attempt to read the new wallet, and exit again leading to a cyclic restart.\r\n\r\n**Reliability**\r\nI can reliably re-create it, but only on one device. On another very similar device, the issue is not present.\r\n\r\n**Version**\r\nv22.0 from the website.\r\n\r\n**Device Info**\r\nDebian, amd64.\r\n\r\nLinux mynode 4.19.0-20-amd64 #1 SMP Debian 4.19.235-1 (2022-03-17) x86_64 GNU/Linux\r\n\r\n**GUI**\r\nNot GUI related.\r\n\r\n**CLI output when creating wallet**\r\n```\r\nadmin@mynode:~$ bitcoin-cli createwallet break2\r\nerror: timeout on transient error: Could not connect to the server 127.0.0.1:8332 (error code 1 - \"EOF reached\")\r\n\r\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\r\nadmin@mynode:~$ \r\n```\r\n\r\n**Log when creating wallet** (read bottom to top)\r\n```\r\n...\r\n2022-04-08T18:28:12Z Bitcoin Core version v22.0.0 (release build)\r\n\r\n<crash>\r\n\r\n2022-04-08T18:27:41Z BerkeleyEnvironment::Open: LogDir=/home/bitcoin/.bitcoin/break2/database ErrorFile=/home/bitcoin/.bitcoin/break2/db.log\r\n2022-04-08T18:27:41Z Using wallet /home/bitcoin/.bitcoin/break2/wallet.dat\r\n2022-04-08T18:27:41Z Using BerkeleyDB version Berkeley DB 4.8.30: (April  9, 2010)\r\n2022-04-08T18:27:41Z UpdateTip: new best=00000000000000000011ce88f1e73e85f7463f002b093b635e6fbdfb937937c5 height=552252 version=0x20000000 log2_work=90.084721 tx=361369223 date='2018-12-02T09:47:52Z' progress=0.507781 cache=622.6MiB(4620436txo)\r\n2022-04-08T18:27:41Z UpdateTip: new best=00000000000000000026cd6e6d1ffad655908877051cc7b7b778d7236ae64e14 height=552251 version=0x20c00000 log2_work=90.084690 tx=361366404 date='2018-12-02T09:25:26Z' progress=0.507777 cache=622.4MiB(4618903txo)\r\n```\r\n\r\n",
   "closed_at" : "2022-10-26T23:08:28Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
      "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
      "followers_url" : "https://api.github.com/users/achow101/followers",
      "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
      "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/achow101",
      "id" : 3782274,
      "login" : "achow101",
      "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
      "organizations_url" : "https://api.github.com/users/achow101/orgs",
      "received_events_url" : "https://api.github.com/users/achow101/received_events",
      "repos_url" : "https://api.github.com/users/achow101/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/achow101"
   },
   "comments" : 8,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24810/comments",
   "created_at" : "2022-04-08T18:34:41Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24810/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/24810",
   "id" : 1197668829,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "description" : null,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      },
      {
         "color" : "08a781",
         "default" : false,
         "description" : null,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24810/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "I_kwDOABII585HYvnd",
   "number" : 24810,
   "performed_via_github_app" : null,
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24810/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "state_reason" : "not_planned",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24810/timeline",
   "title" : "Crash when creating wallet via bitcoin-cli",
   "updated_at" : "2022-10-26T23:08:28Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24810",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/5722611?v=4",
      "events_url" : "https://api.github.com/users/tehelsper/events{/privacy}",
      "followers_url" : "https://api.github.com/users/tehelsper/followers",
      "following_url" : "https://api.github.com/users/tehelsper/following{/other_user}",
      "gists_url" : "https://api.github.com/users/tehelsper/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/tehelsper",
      "id" : 5722611,
      "login" : "tehelsper",
      "node_id" : "MDQ6VXNlcjU3MjI2MTE=",
      "organizations_url" : "https://api.github.com/users/tehelsper/orgs",
      "received_events_url" : "https://api.github.com/users/tehelsper/received_events",
      "repos_url" : "https://api.github.com/users/tehelsper/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/tehelsper/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/tehelsper/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/tehelsper"
   }
}
