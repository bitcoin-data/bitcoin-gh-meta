[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r850907747"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850907747"
         }
      },
      "author_association" : "NONE",
      "body" : "```suggestion\r\n    exit_code |= exec_cmd([\r\n```",
      "commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "created_at" : "2022-04-15T00:03:13Z",
      "diff_hunk" : "@@ -0,0 +1,57 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2018-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for assertions with obvious side effects.\n+\n+import sys\n+\n+from subprocess import check_output, CalledProcessError\n+\n+\n+def exec_cmd(command: [], error_msg: \"\"):\n+    try:\n+        output = check_output(command, universal_newlines=True, encoding=\"utf8\")\n+        print(error_msg)\n+        print(output)\n+        return 1\n+    except CalledProcessError as ex1:\n+        if ex1.returncode > 1:\n+            raise ex1\n+    return 0\n+\n+\n+def main():\n+    # PRE31-C (SEI CERT C Coding Standard):\n+    # \"Assertions should not contain assignments, increment, or decrement operators.\"\n+    exit_code = exec_cmd([\n+        \"git\",\n+        \"grep\",\n+        \"-E\",\n+        r\"[^_]assert\\(.*(\\+\\+|\\-\\-|[^=!<>]=[^=!<>]).*\\);\",\n+        \"--\",\n+        \"*.cpp\",\n+        \"*.h\"\n+    ], \"Assertions should not have side effects:\")\n+\n+    # Macro CHECK_NONFATAL(condition) should be used instead of assert for RPC code, where it\n+    # is undesirable to crash the whole program. See: src/util/check.h\n+    # src/rpc/server.cpp is excluded from this check since it's mostly meta-code.\n+    exit_code += exec_cmd([",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r850907747",
      "id" : 850907747,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yt9Jj",
      "original_commit_id" : "501e75534c21910bedf018635caa068e066bc9d3",
      "original_line" : 42,
      "original_position" : 42,
      "original_start_line" : null,
      "path" : "test/lint/lint-assertions.py",
      "position" : null,
      "pull_request_review_id" : 943046216,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850907747/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-15T00:09:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850907747",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/33084435?v=4",
         "events_url" : "https://api.github.com/users/Eunoia1729/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Eunoia1729/followers",
         "following_url" : "https://api.github.com/users/Eunoia1729/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Eunoia1729/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Eunoia1729",
         "id" : 33084435,
         "login" : "Eunoia1729",
         "node_id" : "MDQ6VXNlcjMzMDg0NDM1",
         "organizations_url" : "https://api.github.com/users/Eunoia1729/orgs",
         "received_events_url" : "https://api.github.com/users/Eunoia1729/received_events",
         "repos_url" : "https://api.github.com/users/Eunoia1729/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Eunoia1729/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Eunoia1729/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Eunoia1729"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r850911378"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850911378"
         }
      },
      "author_association" : "NONE",
      "body" : "nit: the code will more clearer if we import subprocess and then make calls using `subprocess.check_output` and so on.",
      "commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "created_at" : "2022-04-15T00:08:59Z",
      "diff_hunk" : "@@ -0,0 +1,57 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2018-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for assertions with obvious side effects.\n+\n+import sys\n+\n+from subprocess import check_output, CalledProcessError",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r850911378",
      "id" : 850911378,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yt-CS",
      "original_commit_id" : "501e75534c21910bedf018635caa068e066bc9d3",
      "original_line" : 11,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "test/lint/lint-assertions.py",
      "position" : null,
      "pull_request_review_id" : 943046216,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850911378/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-15T00:13:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/850911378",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/33084435?v=4",
         "events_url" : "https://api.github.com/users/Eunoia1729/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Eunoia1729/followers",
         "following_url" : "https://api.github.com/users/Eunoia1729/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Eunoia1729/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Eunoia1729",
         "id" : 33084435,
         "login" : "Eunoia1729",
         "node_id" : "MDQ6VXNlcjMzMDg0NDM1",
         "organizations_url" : "https://api.github.com/users/Eunoia1729/orgs",
         "received_events_url" : "https://api.github.com/users/Eunoia1729/received_events",
         "repos_url" : "https://api.github.com/users/Eunoia1729/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Eunoia1729/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Eunoia1729/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Eunoia1729"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851129347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851129347"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Why check for a return code larger than 1 here? The original script doesn't check return codes at all. As we've discussed in other linter reviews, it's fine to leave out this `except` and let a `CalledProcessError` escalate. This only hapens if git fails.",
      "commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "created_at" : "2022-04-15T07:58:22Z",
      "diff_hunk" : "@@ -0,0 +1,56 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2018-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for assertions with obvious side effects.\n+\n+import sys\n+import subprocess\n+\n+\n+def exec_cmd(command: [], error_msg: \"\"):\n+    try:\n+        output = subprocess.check_output(command, universal_newlines=True, encoding=\"utf8\")\n+        print(error_msg)\n+        print(output)\n+        return 1\n+    except subprocess.CalledProcessError as ex1:\n+        if ex1.returncode > 1:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851129347",
      "id" : 851129347,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII584yuzQD",
      "original_commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/lint/lint-assertions.py",
      "position" : 20,
      "pull_request_review_id" : 943236415,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851129347/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-15T08:02:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851129347",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851129730"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851129730"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You should check the output for being non-empty, like in the original script.",
      "commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "created_at" : "2022-04-15T07:59:10Z",
      "diff_hunk" : "@@ -0,0 +1,56 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2018-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for assertions with obvious side effects.\n+\n+import sys\n+import subprocess\n+\n+\n+def exec_cmd(command: [], error_msg: \"\"):\n+    try:\n+        output = subprocess.check_output(command, universal_newlines=True, encoding=\"utf8\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851129730",
      "id" : 851129730,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII584yuzWC",
      "original_commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "original_line" : 15,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/lint/lint-assertions.py",
      "position" : 15,
      "pull_request_review_id" : 943236940,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851129730/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-15T07:59:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851129730",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851130581"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851130581"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Would prefer not to have this wrapper and use `subprocess.check_output` directly below where relevant. The amount of shared code is minimal, no need to define a function.",
      "commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "created_at" : "2022-04-15T08:01:00Z",
      "diff_hunk" : "@@ -0,0 +1,56 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2018-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for assertions with obvious side effects.\n+\n+import sys\n+import subprocess\n+\n+\n+def exec_cmd(command: [], error_msg: \"\"):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851130581",
      "id" : 851130581,
      "line" : 13,
      "node_id" : "PRRC_kwDOABII584yuzjV",
      "original_commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "test/lint/lint-assertions.py",
      "position" : 13,
      "pull_request_review_id" : 943238106,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851130581/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-15T08:01:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851130581",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851301312"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851301312"
         }
      },
      "author_association" : "NONE",
      "body" : "When the output of grep is empty the return code will be 1, it in the bash script it don't stop the execution because it in a `$()`, that will get only output ignoring the exit code.\r\nThe idea here is expect the `CalledProcessError.returncode` equal 1 to have sure if command output is empty.",
      "commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "created_at" : "2022-04-15T14:29:36Z",
      "diff_hunk" : "@@ -0,0 +1,56 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2018-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for assertions with obvious side effects.\n+\n+import sys\n+import subprocess\n+\n+\n+def exec_cmd(command: [], error_msg: \"\"):\n+    try:\n+        output = subprocess.check_output(command, universal_newlines=True, encoding=\"utf8\")\n+        print(error_msg)\n+        print(output)\n+        return 1\n+    except subprocess.CalledProcessError as ex1:\n+        if ex1.returncode > 1:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851301312",
      "id" : 851301312,
      "in_reply_to_id" : 851129347,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII584yvdPA",
      "original_commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/lint/lint-assertions.py",
      "position" : 20,
      "pull_request_review_id" : 943459034,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851301312/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-15T14:29:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851301312",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9092494?v=4",
         "events_url" : "https://api.github.com/users/hdutra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hdutra/followers",
         "following_url" : "https://api.github.com/users/hdutra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hdutra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hdutra",
         "id" : 9092494,
         "login" : "hdutra",
         "node_id" : "MDQ6VXNlcjkwOTI0OTQ=",
         "organizations_url" : "https://api.github.com/users/hdutra/orgs",
         "received_events_url" : "https://api.github.com/users/hdutra/received_events",
         "repos_url" : "https://api.github.com/users/hdutra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hdutra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hdutra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hdutra"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851301476"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851301476"
         }
      },
      "author_association" : "NONE",
      "body" : "If it prints the output, so it isn't empty.",
      "commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "created_at" : "2022-04-15T14:29:53Z",
      "diff_hunk" : "@@ -0,0 +1,56 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2018-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for assertions with obvious side effects.\n+\n+import sys\n+import subprocess\n+\n+\n+def exec_cmd(command: [], error_msg: \"\"):\n+    try:\n+        output = subprocess.check_output(command, universal_newlines=True, encoding=\"utf8\")",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851301476",
      "id" : 851301476,
      "in_reply_to_id" : 851129730,
      "line" : 15,
      "node_id" : "PRRC_kwDOABII584yvdRk",
      "original_commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "original_line" : 15,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/lint/lint-assertions.py",
      "position" : 15,
      "pull_request_review_id" : 943459233,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851301476/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-15T14:29:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851301476",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9092494?v=4",
         "events_url" : "https://api.github.com/users/hdutra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hdutra/followers",
         "following_url" : "https://api.github.com/users/hdutra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hdutra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hdutra",
         "id" : 9092494,
         "login" : "hdutra",
         "node_id" : "MDQ6VXNlcjkwOTI0OTQ=",
         "organizations_url" : "https://api.github.com/users/hdutra/orgs",
         "received_events_url" : "https://api.github.com/users/hdutra/received_events",
         "repos_url" : "https://api.github.com/users/hdutra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hdutra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hdutra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hdutra"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851301584"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851301584"
         }
      },
      "author_association" : "NONE",
      "body" : "I did it because of the try catch needed to check the return code when it is empty.",
      "commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "created_at" : "2022-04-15T14:30:07Z",
      "diff_hunk" : "@@ -0,0 +1,56 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2018-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for assertions with obvious side effects.\n+\n+import sys\n+import subprocess\n+\n+\n+def exec_cmd(command: [], error_msg: \"\"):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851301584",
      "id" : 851301584,
      "in_reply_to_id" : 851130581,
      "line" : 13,
      "node_id" : "PRRC_kwDOABII584yvdTQ",
      "original_commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "test/lint/lint-assertions.py",
      "position" : 13,
      "pull_request_review_id" : 943459377,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851301584/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-15T14:30:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851301584",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/9092494?v=4",
         "events_url" : "https://api.github.com/users/hdutra/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hdutra/followers",
         "following_url" : "https://api.github.com/users/hdutra/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hdutra/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hdutra",
         "id" : 9092494,
         "login" : "hdutra",
         "node_id" : "MDQ6VXNlcjkwOTI0OTQ=",
         "organizations_url" : "https://api.github.com/users/hdutra/orgs",
         "received_events_url" : "https://api.github.com/users/hdutra/received_events",
         "repos_url" : "https://api.github.com/users/hdutra/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hdutra/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hdutra/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hdutra"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851520921"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851520921"
         }
      },
      "author_association" : "MEMBER",
      "body" : "OK, that makes sense. Do you know if this behavior of `git grep` is documented anywhere? The manual page doesn't mention anything about return codes.\r\n\r\nEdit: apparently this is expected behavior because `grep` does it:\r\n```\r\nEXIT STATUS\r\n       Normally the exit status is 0 if a line is selected, 1 if no lines were selected, and 2 if an error  occurred.\r\n       However,  if  the  -q  or  --quiet or --silent is used and a line is selected, the exit status is 0 even if an\r\n       error occurred.\r\n```",
      "commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "created_at" : "2022-04-15T21:23:43Z",
      "diff_hunk" : "@@ -0,0 +1,56 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2018-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for assertions with obvious side effects.\n+\n+import sys\n+import subprocess\n+\n+\n+def exec_cmd(command: [], error_msg: \"\"):\n+    try:\n+        output = subprocess.check_output(command, universal_newlines=True, encoding=\"utf8\")\n+        print(error_msg)\n+        print(output)\n+        return 1\n+    except subprocess.CalledProcessError as ex1:\n+        if ex1.returncode > 1:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851520921",
      "id" : 851520921,
      "in_reply_to_id" : 851129347,
      "line" : 20,
      "node_id" : "PRRC_kwDOABII584ywS2Z",
      "original_commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "test/lint/lint-assertions.py",
      "position" : 20,
      "pull_request_review_id" : 943749620,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851520921/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-15T21:31:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851520921",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851524939"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851524939"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fair enough. Though this logic is specific to `git grep`. It makes sense to make it a  `git_grep` wrapper specifically.",
      "commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "created_at" : "2022-04-15T21:37:10Z",
      "diff_hunk" : "@@ -0,0 +1,56 @@\n+#!/usr/bin/env python3\n+#\n+# Copyright (c) 2018-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+#\n+# Check for assertions with obvious side effects.\n+\n+import sys\n+import subprocess\n+\n+\n+def exec_cmd(command: [], error_msg: \"\"):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#discussion_r851524939",
      "id" : 851524939,
      "in_reply_to_id" : 851130581,
      "line" : 13,
      "node_id" : "PRRC_kwDOABII584ywT1L",
      "original_commit_id" : "f8b3dfd90f8adca032230efb1b2a46db2f2f58b4",
      "original_line" : 13,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "test/lint/lint-assertions.py",
      "position" : 13,
      "pull_request_review_id" : 943754737,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24856",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851524939/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-15T21:37:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851524939",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK 1e0a9ad1cedafe10a1e8743a4eda1d64cef5fe2c\r\n\r\nBefore:\r\n```\r\nAssertions should not have side effects:\r\n\r\nsrc/addrman.cpp:            assert(--nIds != nNew); // this means nNew was wrong, oh ow\r\nsrc/bench/ccoins_caching.cpp:        assert(success = 2);\r\nsrc/bench/checkblock.cpp:        assert(rewound ++);\r\nsrc/bench/verify_script.cpp:        assert(success += 1);\r\nsrc/node/coin.cpp:    assert(node.mempool -= 1);\r\nCHECK_NONFATAL(condition) should be used instead of assert for RPC code.\r\n\r\nsrc/rpc/blockchain.cpp:77:    assert(blockindex);\r\nsrc/rpc/rawtransaction.cpp:469:            assert(false);\r\n```\r\n\r\nAfter:\r\n```\r\nAssertions should not have side effects:\r\nsrc/addrman.cpp:            assert(--nIds != nNew); // this means nNew was wrong, oh ow\r\nsrc/bench/ccoins_caching.cpp:        assert(success = 2);\r\nsrc/bench/checkblock.cpp:        assert(rewound ++);\r\nsrc/bench/verify_script.cpp:        assert(success += 1);\r\nsrc/node/coin.cpp:    assert(node.mempool -= 1);\r\n\r\nCHECK_NONFATAL(condition) should be used instead of assert for RPC code.\r\nsrc/rpc/blockchain.cpp:77:    assert(blockindex);\r\nsrc/rpc/rawtransaction.cpp:469:            assert(false);\r\n```",
      "created_at" : "2022-04-20T20:04:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#issuecomment-1104408355",
      "id" : 1104408355,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24856",
      "node_id" : "IC_kwDOABII585B0-8j",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104408355/reactions"
      },
      "updated_at" : "2022-04-20T20:04:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104408355",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2314891?v=4",
         "events_url" : "https://api.github.com/users/KevinMusgrave/events{/privacy}",
         "followers_url" : "https://api.github.com/users/KevinMusgrave/followers",
         "following_url" : "https://api.github.com/users/KevinMusgrave/following{/other_user}",
         "gists_url" : "https://api.github.com/users/KevinMusgrave/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/KevinMusgrave",
         "id" : 2314891,
         "login" : "KevinMusgrave",
         "node_id" : "MDQ6VXNlcjIzMTQ4OTE=",
         "organizations_url" : "https://api.github.com/users/KevinMusgrave/orgs",
         "received_events_url" : "https://api.github.com/users/KevinMusgrave/received_events",
         "repos_url" : "https://api.github.com/users/KevinMusgrave/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/KevinMusgrave/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/KevinMusgrave/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/KevinMusgrave"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I guess you should squash your commits, see: https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits",
      "created_at" : "2022-04-20T20:06:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#issuecomment-1104410379",
      "id" : 1104410379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24856",
      "node_id" : "IC_kwDOABII585B0_cL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104410379/reactions"
      },
      "updated_at" : "2022-04-20T20:06:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1104410379",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2314891?v=4",
         "events_url" : "https://api.github.com/users/KevinMusgrave/events{/privacy}",
         "followers_url" : "https://api.github.com/users/KevinMusgrave/followers",
         "following_url" : "https://api.github.com/users/KevinMusgrave/following{/other_user}",
         "gists_url" : "https://api.github.com/users/KevinMusgrave/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/KevinMusgrave",
         "id" : 2314891,
         "login" : "KevinMusgrave",
         "node_id" : "MDQ6VXNlcjIzMTQ4OTE=",
         "organizations_url" : "https://api.github.com/users/KevinMusgrave/orgs",
         "received_events_url" : "https://api.github.com/users/KevinMusgrave/received_events",
         "repos_url" : "https://api.github.com/users/KevinMusgrave/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/KevinMusgrave/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/KevinMusgrave/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/KevinMusgrave"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested ACK 172c2333f03aecb4c347c791537e13c296adbde2",
      "created_at" : "2022-04-25T17:46:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24856#issuecomment-1108861048",
      "id" : 1108861048,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24856",
      "node_id" : "IC_kwDOABII585CF-B4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108861048/reactions"
      },
      "updated_at" : "2022-04-25T17:46:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108861048",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
