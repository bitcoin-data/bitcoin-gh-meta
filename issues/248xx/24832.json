{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "This PR picks up the abandoned #19280\r\n\r\nBlockFilterIndex was depending on `GolombRiceDecode()` during the filter decode to sanity check that the filter wasn't corrupt. However, we can check for corruption by ensuring that the encoded blockfilter's hash matches up with the one stored in the index database.\r\n\r\nBenchmarks that were added in #19280 showed that checking the hash is much faster.\r\n\r\nThe benchmarks were changed to nanobench and the relevant benchmarks were like below, showing a clear win for the hash check method.\r\n\r\n```\r\n|             ns/elem |              elem/s |    err% |        ins/elem |       bra/elem |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|---------------:|--------:|----------:|:----------\r\n|              531.40 |        1,881,819.43 |    0.3% |        3,527.01 |         411.00 |    0.2% |      0.01 | `DecodeCheckedGCSFilter`\r\n|          258,220.50 |            3,872.66 |    0.1% |    2,990,092.00 |     586,706.00 |    1.7% |      0.01 | `DecodeGCSFilter`\r\n|           13,036.77 |           76,706.09 |    0.3% |       64,238.24 |         513.04 |    0.2% |      0.01 | `BlockFilterGetHash`\r\n```",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 0,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24832/comments",
   "created_at" : "2022-04-12T10:38:26Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24832/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/24832",
   "id" : 1201641341,
   "labels" : [
      {
         "color" : "fbca04",
         "default" : false,
         "description" : null,
         "id" : 97470796,
         "name" : "UTXO Db and Indexes",
         "node_id" : "MDU6TGFiZWw5NzQ3MDc5Ng==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24832/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII5842F1bM",
   "number" : 24832,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/24832.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24832",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/24832.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24832"
   },
   "reactions" : {
      "+1" : 0,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 0,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24832/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24832/timeline",
   "title" : "index: Verify the block filter hash when reading the filter from disk.",
   "updated_at" : "2022-04-12T11:45:00Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24832",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/37185887?v=4",
      "events_url" : "https://api.github.com/users/kcalvinalvin/events{/privacy}",
      "followers_url" : "https://api.github.com/users/kcalvinalvin/followers",
      "following_url" : "https://api.github.com/users/kcalvinalvin/following{/other_user}",
      "gists_url" : "https://api.github.com/users/kcalvinalvin/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/kcalvinalvin",
      "id" : 37185887,
      "login" : "kcalvinalvin",
      "node_id" : "MDQ6VXNlcjM3MTg1ODg3",
      "organizations_url" : "https://api.github.com/users/kcalvinalvin/orgs",
      "received_events_url" : "https://api.github.com/users/kcalvinalvin/received_events",
      "repos_url" : "https://api.github.com/users/kcalvinalvin/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/kcalvinalvin/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/kcalvinalvin/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/kcalvinalvin"
   }
}
