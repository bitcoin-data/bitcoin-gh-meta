[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r849671970"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849671970"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit:\r\n```suggestion\r\n        # TODO: use helper create_confirmed_utxos as soon as it uses MiniWallet\r\n```",
      "commit_id" : "b33bfe3335770adcc805b61249c55d5c51d1dee0",
      "created_at" : "2022-04-13T16:21:45Z",
      "diff_hunk" : "@@ -131,7 +134,11 @@ def run_test(self):\n         self.relayfee = self.nodes[0].getnetworkinfo()['relayfee']\n \n         utxo_count = 90\n-        utxos = create_confirmed_utxos(self, self.relayfee, self.nodes[0], utxo_count)\n+        # TODO: use helper create_confirmed_utxos as soon at it uses MiniWallet",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r849671970",
      "id" : 849671970,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584ypPci",
      "original_commit_id" : "2f7f8fb8baa9975781160d2f5cbff31f5bcb8d11",
      "original_line" : 137,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "test/functional/mining_prioritisetransaction.py",
      "position" : null,
      "pull_request_review_id" : 941242842,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849671970/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-13T18:44:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849671970",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/21211904?v=4",
         "events_url" : "https://api.github.com/users/ayush933/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ayush933/followers",
         "following_url" : "https://api.github.com/users/ayush933/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ayush933/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ayush933",
         "id" : 21211904,
         "login" : "ayush933",
         "node_id" : "MDQ6VXNlcjIxMjExOTA0",
         "organizations_url" : "https://api.github.com/users/ayush933/orgs",
         "received_events_url" : "https://api.github.com/users/ayush933/received_events",
         "repos_url" : "https://api.github.com/users/ayush933/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ayush933/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ayush933/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ayush933"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r849953337"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849953337"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for your review, fixed.",
      "commit_id" : "b33bfe3335770adcc805b61249c55d5c51d1dee0",
      "created_at" : "2022-04-13T22:44:20Z",
      "diff_hunk" : "@@ -131,7 +134,11 @@ def run_test(self):\n         self.relayfee = self.nodes[0].getnetworkinfo()['relayfee']\n \n         utxo_count = 90\n-        utxos = create_confirmed_utxos(self, self.relayfee, self.nodes[0], utxo_count)\n+        # TODO: use helper create_confirmed_utxos as soon at it uses MiniWallet",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r849953337",
      "id" : 849953337,
      "in_reply_to_id" : 849671970,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yqUI5",
      "original_commit_id" : "2f7f8fb8baa9975781160d2f5cbff31f5bcb8d11",
      "original_line" : 137,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "test/functional/mining_prioritisetransaction.py",
      "position" : null,
      "pull_request_review_id" : 941628253,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849953337/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-13T22:44:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849953337",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r851214685"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851214685"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I am not a fan of putting TODO in the source code. If (for any reason) they become stale, they will cause more damage/confusion than helping.\r\n\r\nIt would be better as an issue, so that it can be tracked easier as the code evolves. Also it can be discussed easier and discarded trivially if needed without touching the code.\r\n\r\nMoreover, it seems that `send_large_txs` can be replaced by `create_lots_of_big_transactions`?\r\nSame for `mine_large_block`?",
      "commit_id" : "b33bfe3335770adcc805b61249c55d5c51d1dee0",
      "created_at" : "2022-04-15T11:06:38Z",
      "diff_hunk" : "@@ -131,7 +134,11 @@ def run_test(self):\n         self.relayfee = self.nodes[0].getnetworkinfo()['relayfee']\n \n         utxo_count = 90\n-        utxos = create_confirmed_utxos(self, self.relayfee, self.nodes[0], utxo_count)\n+        # TODO: use helper create_confirmed_utxos as soon as it uses MiniWallet",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r851214685",
      "id" : 851214685,
      "line" : 137,
      "node_id" : "PRRC_kwDOABII584yvIFd",
      "original_commit_id" : "b33bfe3335770adcc805b61249c55d5c51d1dee0",
      "original_line" : 137,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "test/functional/mining_prioritisetransaction.py",
      "position" : 53,
      "pull_request_review_id" : 943345497,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851214685/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-15T11:07:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851214685",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r851663988"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851663988"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> It would be better as an issue, so that it can be tracked easier as the code evolves. Also it can be discussed easier and discarded trivially if needed without touching the code.\r\n\r\nI see your point, though I think creating an issue for merely refactoring three lines of code is a bit like taking a sledgehammer to crack a nut (and one also has to think about opening it after the PR is merged which \"triggers\" the TODO). Removed the TODO for now -- replacing `create_confirmed_utxos` (and feature_dbcrash.py) with MiniWallet is one of the next things I'll work on anyways and in the course of that I'll check where it can dedup code.\r\n\r\n> Moreover, it seems that send_large_txs can be replaced by create_lots_of_big_transactions?\r\nSame for mine_large_block?\r\n\r\nGood idea, I added a second refactoring commit doing exactly that. For that to work, I had to generalize `create_lots_of_big_transactions` a bit, in particular the possibility to not pass in any UTXOs (MiniWallet picks one of it's internal UTXOs then in this case). Also it validates the fee now, like it's done in `send_large_txs`, which I think makes a lot of sense.",
      "commit_id" : "b167e536d0f5ae4c86d0c3da4a63337f9f0448ba",
      "created_at" : "2022-04-16T19:38:48Z",
      "diff_hunk" : "@@ -131,7 +134,11 @@ def run_test(self):\n         self.relayfee = self.nodes[0].getnetworkinfo()['relayfee']\n \n         utxo_count = 90\n-        utxos = create_confirmed_utxos(self, self.relayfee, self.nodes[0], utxo_count)\n+        # TODO: use helper create_confirmed_utxos as soon as it uses MiniWallet",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r851663988",
      "id" : 851663988,
      "in_reply_to_id" : 851214685,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yw1x0",
      "original_commit_id" : "b33bfe3335770adcc805b61249c55d5c51d1dee0",
      "original_line" : 137,
      "original_position" : 53,
      "original_start_line" : null,
      "path" : "test/functional/mining_prioritisetransaction.py",
      "position" : null,
      "pull_request_review_id" : 943881993,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851663988/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-16T19:38:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851663988",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Force-pushed with [suggestions from MarcoFalke](https://github.com/bitcoin/bitcoin/pull/24839#discussion_r851214685) taken into account. There is now a second commit which takes use of the brand-new shiny MiniWallet-variant of `create_lots_of_big_transactions` to deduplicate code. This PR affects the functional tests\r\n\r\n- `mining_prioritisetransaction.py` (obviously)\r\n- `mempool_limit.py` (`send_large_txs` is replaced by `create_lots_of_big_transactions`)\r\n- `feature_maxuploadtarget.py` (calls `mine_large_block` where also `create_lots_of_big_transactions` is used to replace part of its function)",
      "created_at" : "2022-04-16T19:46:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24839#issuecomment-1100742857",
      "id" : 1100742857,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24839",
      "node_id" : "IC_kwDOABII585BnADJ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100742857/reactions"
      },
      "updated_at" : "2022-04-16T19:46:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100742857",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ayush933 want to take another look?",
      "created_at" : "2022-04-20T10:13:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24839#issuecomment-1103760317",
      "id" : 1103760317,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24839",
      "node_id" : "IC_kwDOABII585Bygu9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103760317/reactions"
      },
      "updated_at" : "2022-04-20T10:13:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1103760317",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r886987884"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886987884"
         }
      },
      "author_association" : "NONE",
      "body" : "nit: `create_lots_of_big_transactions` is not introduced in this PR, but maybe include \"send\" in the name, to clearly indicate functionality? ",
      "commit_id" : "b167e536d0f5ae4c86d0c3da4a63337f9f0448ba",
      "created_at" : "2022-06-01T16:09:54Z",
      "diff_hunk" : "@@ -552,38 +552,31 @@ def gen_return_txouts():\n \n # Create a spend of each passed-in utxo, splicing in \"txouts\" to each raw\n # transaction to make it large.  See gen_return_txouts() above.\n-def create_lots_of_big_transactions(node, txouts, utxos, num, fee):\n-    addr = node.getnewaddress()\n+def create_lots_of_big_transactions(mini_wallet, node, fee, tx_batch_size, txouts, utxos=None):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r886987884",
      "id" : 886987884,
      "line" : 555,
      "node_id" : "PRRC_kwDOABII58403lxs",
      "original_commit_id" : "b167e536d0f5ae4c86d0c3da4a63337f9f0448ba",
      "original_line" : 555,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/util.py",
      "position" : 6,
      "pull_request_review_id" : 992235185,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886987884/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-01T16:24:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/886987884",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/18506343?v=4",
         "events_url" : "https://api.github.com/users/kouloumos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kouloumos/followers",
         "following_url" : "https://api.github.com/users/kouloumos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kouloumos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kouloumos",
         "id" : 18506343,
         "login" : "kouloumos",
         "node_id" : "MDQ6VXNlcjE4NTA2MzQz",
         "organizations_url" : "https://api.github.com/users/kouloumos/orgs",
         "received_events_url" : "https://api.github.com/users/kouloumos/received_events",
         "repos_url" : "https://api.github.com/users/kouloumos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kouloumos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kouloumos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kouloumos"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r894565455"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/894565455"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "tiny nit:\r\nif utxos is not empty, maybe assert that `tx_batch_size >= len(utxos)`.",
      "commit_id" : "b167e536d0f5ae4c86d0c3da4a63337f9f0448ba",
      "created_at" : "2022-06-10T13:59:37Z",
      "diff_hunk" : "@@ -552,24 +552,22 @@ def gen_return_txouts():\n \n # Create a spend of each passed-in utxo, splicing in \"txouts\" to each raw\n # transaction to make it large.  See gen_return_txouts() above.\n-def create_lots_of_big_transactions(node, txouts, utxos, num, fee):\n-    addr = node.getnewaddress()\n+def create_lots_of_big_transactions(mini_wallet, node, fee, tx_batch_size, txouts, utxos=None):\n+    from .messages import COIN\n+    fee_sats = int(fee * COIN)\n     txids = []\n-    from .messages import tx_from_hex\n-    for _ in range(num):\n-        t = utxos.pop()\n-        inputs = [{\"txid\": t[\"txid\"], \"vout\": t[\"vout\"]}]\n-        outputs = {}\n-        change = t['amount'] - fee\n-        outputs[addr] = satoshi_round(change)\n-        rawtx = node.createrawtransaction(inputs, outputs)\n-        tx = tx_from_hex(rawtx)\n-        for txout in txouts:\n-            tx.vout.append(txout)\n-        newtx = tx.serialize().hex()\n-        signresult = node.signrawtransactionwithwallet(newtx, None, \"NONE\")\n-        txid = node.sendrawtransaction(signresult[\"hex\"], 0)\n-        txids.append(txid)\n+    use_internal_utxos = utxos is None\n+    for _ in range(tx_batch_size):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r894565455",
      "id" : 894565455,
      "line" : 560,
      "node_id" : "PRRC_kwDOABII5841UfxP",
      "original_commit_id" : "8973eeb4124112a8cb7bb3d486780ac668b3e7bd",
      "original_line" : 560,
      "original_position" : 26,
      "original_start_line" : 559,
      "path" : "test/functional/test_framework/util.py",
      "position" : 26,
      "pull_request_review_id" : 1002842039,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/894565455/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 559,
      "start_side" : "RIGHT",
      "updated_at" : "2022-06-10T14:31:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/894565455",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r896472729"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896472729"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I really wonder if it is worth it to move this to `create_confirmed_utxos`? Seems 2-3 LOC duplicated everywhere are fine compared to 1 LOC + import + definition in separate file?\r\n\r\nMaybe just remove `create_confirmed_utxos`?",
      "commit_id" : "b167e536d0f5ae4c86d0c3da4a63337f9f0448ba",
      "created_at" : "2022-06-14T07:31:07Z",
      "diff_hunk" : "@@ -131,7 +134,10 @@ def run_test(self):\n         self.relayfee = self.nodes[0].getnetworkinfo()['relayfee']\n \n         utxo_count = 90\n-        utxos = create_confirmed_utxos(self, self.relayfee, self.nodes[0], utxo_count)\n+        utxos = self.wallet.send_self_transfer_multi(from_node=self.nodes[0], num_outputs=utxo_count)['new_utxos']\n+        self.generate(self.wallet, 1)\n+        assert_equal(len(self.nodes[0].getrawmempool()), 0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r896472729",
      "id" : 896472729,
      "line" : 139,
      "node_id" : "PRRC_kwDOABII5841bxaZ",
      "original_commit_id" : "b167e536d0f5ae4c86d0c3da4a63337f9f0448ba",
      "original_line" : 139,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "test/functional/mining_prioritisetransaction.py",
      "position" : 55,
      "pull_request_review_id" : 1005367973,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896472729/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-14T07:31:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/896472729",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r897394751"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/897394751"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Right, I agree that it's not worth it, calling `send_self_transfer_multi` with a subsequent `generate` is simple enough. Opened a follow-up PR: #25374",
      "commit_id" : "b167e536d0f5ae4c86d0c3da4a63337f9f0448ba",
      "created_at" : "2022-06-14T23:17:40Z",
      "diff_hunk" : "@@ -131,7 +134,10 @@ def run_test(self):\n         self.relayfee = self.nodes[0].getnetworkinfo()['relayfee']\n \n         utxo_count = 90\n-        utxos = create_confirmed_utxos(self, self.relayfee, self.nodes[0], utxo_count)\n+        utxos = self.wallet.send_self_transfer_multi(from_node=self.nodes[0], num_outputs=utxo_count)['new_utxos']\n+        self.generate(self.wallet, 1)\n+        assert_equal(len(self.nodes[0].getrawmempool()), 0)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24839#discussion_r897394751",
      "id" : 897394751,
      "in_reply_to_id" : 896472729,
      "line" : 139,
      "node_id" : "PRRC_kwDOABII5841fSg_",
      "original_commit_id" : "b167e536d0f5ae4c86d0c3da4a63337f9f0448ba",
      "original_line" : 139,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "test/functional/mining_prioritisetransaction.py",
      "position" : 55,
      "pull_request_review_id" : 1006679846,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24839",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/897394751/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-06-14T23:17:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/897394751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   }
]
