[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143427433"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143427433"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In commit *Default wallet directory is wallets/ if it exists*, missing test?",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:06:50Z",
      "diff_hunk" : "@@ -590,6 +590,10 @@ fs::path GetWalletDir()\n         }\n     } else {\n         path = GetDataDir();\n+        // If a wallets directory exists, use that, otherwise default to GetDataDir\n+        if (fs::is_directory(path / \"wallets\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143427433",
      "id" : 143427433,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 5,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 67936045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143427433",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143428584"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143428584"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is breaking change. Also, this is not so relevant to this PR? I suggest to create a PR with this to separate discussions.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:12:32Z",
      "diff_hunk" : "@@ -2626,17 +2626,16 @@ UniValue listwallets(const JSONRPCRequest& request)\n             \"Returns a list of currently loaded wallets.\\n\"\n             \"For full information on the wallet, use \\\"getwalletinfo\\\"\\n\"\n             \"\\nResult:\\n\"\n-            \"[                         (json array of strings)\\n\"\n-            \"  \\\"walletname\\\"            (string) the wallet name\\n\"\n-            \"   ...\\n\"\n-            \"]\\n\"\n+            \"{\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143428584",
      "id" : 143428584,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 67936045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143428584",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143428650"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143428650"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`++it`.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:12:57Z",
      "diff_hunk" : "@@ -2645,10 +2644,23 @@ UniValue listwallets(const JSONRPCRequest& request)\n \n         LOCK(pwallet->cs_wallet);\n \n-        obj.push_back(pwallet->GetName());\n+        loaded.push_back(pwallet->GetName());\n     }\n \n-    return obj;\n+    UniValue available(UniValue::VARR);\n+    fs::path walletdir = GetWalletDir();\n+    for (fs::directory_iterator it(walletdir); it != fs::directory_iterator(); it++) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143428650",
      "id" : 143428650,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 34,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 67936045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143428650",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143429029"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143429029"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "When is this directory created? ",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:14:57Z",
      "diff_hunk" : "@@ -579,6 +579,26 @@ const fs::path &GetDataDir(bool fNetSpecific)\n     return path;\n }\n \n+fs::path GetWalletDir()\n+{\n+    fs::path path;\n+\n+    if (gArgs.IsArgSet(\"-walletdir\")) {\n+        path = fs::system_complete(gArgs.GetArg(\"-walletdir\", \"\"));\n+        if (!fs::is_directory(path)) {\n+            path = \"\";\n+        }\n+    } else {\n+        path = GetDataDir();\n+        // If a wallets directory exists, use that, otherwise default to GetDataDir\n+        if (fs::is_directory(path / \"wallets\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143429029",
      "id" : 143429029,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 16,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 67936045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143429029",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143429197"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143429197"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "At the moment `GetWalletDir` is used in the startup and in runtime.\r\n\r\nIMO, in runtime, this should not be possible. Create a `bool IsValidWalletDir()` (or whatever) to use in startup and here assert `is_directory`?",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:15:53Z",
      "diff_hunk" : "@@ -579,6 +579,26 @@ const fs::path &GetDataDir(bool fNetSpecific)\n     return path;\n }\n \n+fs::path GetWalletDir()\n+{\n+    fs::path path;\n+\n+    if (gArgs.IsArgSet(\"-walletdir\")) {\n+        path = fs::system_complete(gArgs.GetArg(\"-walletdir\", \"\"));\n+        if (!fs::is_directory(path)) {\n+            path = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143429197",
      "id" : 143429197,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 11,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 67936045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143429197",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143429280"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143429280"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "`{` in this line.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:16:23Z",
      "diff_hunk" : "@@ -626,6 +626,12 @@ int main(int argc, char *argv[])\n                               QObject::tr(\"Error: Specified data directory \\\"%1\\\" does not exist.\").arg(QString::fromStdString(gArgs.GetArg(\"-datadir\", \"\"))));\n         return EXIT_FAILURE;\n     }\n+    if (gArgs.IsArgSet(\"-walletdir\") && !fs::is_directory(GetWalletDir()))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143429280",
      "id" : 143429280,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 4,
      "path" : "src/qt/bitcoin.cpp",
      "position" : null,
      "pull_request_review_id" : 67936045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143429280",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143429735"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143429735"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Another interface is:\r\n```json\r\n{\r\n  \"wallets\": [\r\n    { \"name\": \"foo\", \"loaded\": true },\r\n    { \"name\": \"bar\", \"loaded\": false }\r\n  ]\r\n}\r\n```\r\nWhich has the advantage of allowing to add new attributes later.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:18:50Z",
      "diff_hunk" : "@@ -2626,17 +2626,16 @@ UniValue listwallets(const JSONRPCRequest& request)\n             \"Returns a list of currently loaded wallets.\\n\"\n             \"For full information on the wallet, use \\\"getwalletinfo\\\"\\n\"\n             \"\\nResult:\\n\"\n-            \"[                         (json array of strings)\\n\"\n-            \"  \\\"walletname\\\"            (string) the wallet name\\n\"\n-            \"   ...\\n\"\n-            \"]\\n\"\n+            \"{\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143429735",
      "id" : 143429735,
      "in_reply_to_id" : 143428584,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 67936045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143429735",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143429837"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143429837"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is kind of hard to read. Care to simplify?",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:19:25Z",
      "diff_hunk" : "@@ -2645,10 +2644,23 @@ UniValue listwallets(const JSONRPCRequest& request)\n \n         LOCK(pwallet->cs_wallet);\n \n-        obj.push_back(pwallet->GetName());\n+        loaded.push_back(pwallet->GetName());\n     }\n \n-    return obj;\n+    UniValue available(UniValue::VARR);\n+    fs::path walletdir = GetWalletDir();\n+    for (fs::directory_iterator it(walletdir); it != fs::directory_iterator(); it++) {\n+        if (is_regular_file(*it)\n+         && it->path().filename().string().length() > 4\n+         && it->path().filename().string().substr(it->path().filename().string().length() - 4) == \".dat\") {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143429837",
      "id" : 143429837,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 37,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 67936045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143429837",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143430048"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143430048"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Ã°ÂÂÂ to release notes.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:20:39Z",
      "diff_hunk" : "@@ -74,6 +74,13 @@ Due to a backward-incompatible change in the wallet database, wallets created\n with version 0.16.0 will be rejected by previous versions. Also, version 0.16.0\n will only create hierarchical deterministic (HD) wallets.\n \n+Custom wallet directories",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143430048",
      "id" : 143430048,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 13,
      "path" : "doc/release-notes.md",
      "position" : 13,
      "pull_request_review_id" : 67936045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143430048",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143430120"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143430120"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Missing `datadir/wallets` case?",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:21:07Z",
      "diff_hunk" : "@@ -74,6 +74,13 @@ Due to a backward-incompatible change in the wallet database, wallets created\n with version 0.16.0 will be rejected by previous versions. Also, version 0.16.0\n will only create hierarchical deterministic (HD) wallets.\n \n+Custom wallet directories\n+---------------------\n+The ability to specify a directory other than the default data directory in which to store\n+wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`\n+argument. The parameter defaults to using the data directory location if not included.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143430120",
      "id" : 143430120,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 17,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 67936045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143430120",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143431510"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143431510"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Specify directory to hold wallets?",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:28:02Z",
      "diff_hunk" : "@@ -367,6 +367,7 @@ std::string HelpMessage(HelpMessageMode mode)\n     strUsage += HelpMessageOpt(\"-sysperms\", _(\"Create new files with system default permissions, instead of umask 077 (only effective with disabled wallet functionality)\"));\n #endif\n     strUsage += HelpMessageOpt(\"-txindex\", strprintf(_(\"Maintain a full transaction index, used by the getrawtransaction rpc call (default: %u)\"), DEFAULT_TXINDEX));\n+    strUsage += HelpMessageOpt(\"-walletdir=<dir>\", _(\"Specify wallet directory\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143431510",
      "id" : 143431510,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 67936045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143431510",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143431659"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143431659"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit, should be `-walletsdir` (plural)?",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:28:29Z",
      "diff_hunk" : "@@ -74,6 +74,13 @@ Due to a backward-incompatible change in the wallet database, wallets created\n with version 0.16.0 will be rejected by previous versions. Also, version 0.16.0\n will only create hierarchical deterministic (HD) wallets.\n \n+Custom wallet directories\n+---------------------\n+The ability to specify a directory other than the default data directory in which to store\n+wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143431659",
      "id" : 143431659,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 16,
      "path" : "doc/release-notes.md",
      "position" : 16,
      "pull_request_review_id" : 67936045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143431659",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143435117"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143435117"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is part of the WIP, I'll add a test for that when I make it actually initialise the directory :)",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:48:18Z",
      "diff_hunk" : "@@ -590,6 +590,10 @@ fs::path GetWalletDir()\n         }\n     } else {\n         path = GetDataDir();\n+        // If a wallets directory exists, use that, otherwise default to GetDataDir\n+        if (fs::is_directory(path / \"wallets\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143435117",
      "id" : 143435117,
      "in_reply_to_id" : 143427433,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 5,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 67944982,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143435117",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143435389"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143435389"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yep I'll include something similar when reworking the directory caching stuff I think, datadir and walletdir shouldn't change throughout execution so no point rechecking every time",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:49:51Z",
      "diff_hunk" : "@@ -579,6 +579,26 @@ const fs::path &GetDataDir(bool fNetSpecific)\n     return path;\n }\n \n+fs::path GetWalletDir()\n+{\n+    fs::path path;\n+\n+    if (gArgs.IsArgSet(\"-walletdir\")) {\n+        path = fs::system_complete(gArgs.GetArg(\"-walletdir\", \"\"));\n+        if (!fs::is_directory(path)) {\n+            path = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143435389",
      "id" : 143435389,
      "in_reply_to_id" : 143429197,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 11,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 67945297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143435389",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143435523"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143435523"
         }
      },
      "author_association" : "MEMBER",
      "body" : "It's not yet, it's on the to-do list ;)",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:50:21Z",
      "diff_hunk" : "@@ -579,6 +579,26 @@ const fs::path &GetDataDir(bool fNetSpecific)\n     return path;\n }\n \n+fs::path GetWalletDir()\n+{\n+    fs::path path;\n+\n+    if (gArgs.IsArgSet(\"-walletdir\")) {\n+        path = fs::system_complete(gArgs.GetArg(\"-walletdir\", \"\"));\n+        if (!fs::is_directory(path)) {\n+            path = \"\";\n+        }\n+    } else {\n+        path = GetDataDir();\n+        // If a wallets directory exists, use that, otherwise default to GetDataDir\n+        if (fs::is_directory(path / \"wallets\")) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143435523",
      "id" : 143435523,
      "in_reply_to_id" : 143429029,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 16,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 67945450,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143435523",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143435897"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143435897"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I prefer walletdir, no real difference though imo",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:52:35Z",
      "diff_hunk" : "@@ -74,6 +74,13 @@ Due to a backward-incompatible change in the wallet database, wallets created\n with version 0.16.0 will be rejected by previous versions. Also, version 0.16.0\n will only create hierarchical deterministic (HD) wallets.\n \n+Custom wallet directories\n+---------------------\n+The ability to specify a directory other than the default data directory in which to store\n+wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143435897",
      "id" : 143435897,
      "in_reply_to_id" : 143431659,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 16,
      "path" : "doc/release-notes.md",
      "position" : 16,
      "pull_request_review_id" : 67945898,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143435897",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143436129"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143436129"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Re: breaking change, I believe it was only added in 0.15 anyway so its expected to be more unstable. Can separate into a new PR if desired, but I think its only really a useful change in this context, so I'll wait to see what others think",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:54:04Z",
      "diff_hunk" : "@@ -2626,17 +2626,16 @@ UniValue listwallets(const JSONRPCRequest& request)\n             \"Returns a list of currently loaded wallets.\\n\"\n             \"For full information on the wallet, use \\\"getwalletinfo\\\"\\n\"\n             \"\\nResult:\\n\"\n-            \"[                         (json array of strings)\\n\"\n-            \"  \\\"walletname\\\"            (string) the wallet name\\n\"\n-            \"   ...\\n\"\n-            \"]\\n\"\n+            \"{\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143436129",
      "id" : 143436129,
      "in_reply_to_id" : 143428584,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 67946210,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143436129",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143436257"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143436257"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Will add when implemented :+1:",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-09T10:54:35Z",
      "diff_hunk" : "@@ -74,6 +74,13 @@ Due to a backward-incompatible change in the wallet database, wallets created\n with version 0.16.0 will be rejected by previous versions. Also, version 0.16.0\n will only create hierarchical deterministic (HD) wallets.\n \n+Custom wallet directories\n+---------------------\n+The ability to specify a directory other than the default data directory in which to store\n+wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`\n+argument. The parameter defaults to using the data directory location if not included.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143436257",
      "id" : 143436257,
      "in_reply_to_id" : 143430120,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 17,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 67946350,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143436257",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I haven't looked at the code, but how is this interacting with the multi-wallet-mode?\r\nDoes it allow a directory per wallet?",
      "created_at" : "2017-10-09T19:55:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-335268764",
      "id" : 335268764,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-10-09T19:55:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335268764",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jonasschnelli no, all wallets would be inside the walletdir specified",
      "created_at" : "2017-10-09T20:51:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-335283556",
      "id" : 335283556,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-10-09T20:51:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335283556",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Addressed @promag nits, will work on the directory creation stuff as soon as I can",
      "created_at" : "2017-10-10T06:12:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-335371134",
      "id" : 335371134,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-10-10T06:12:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335371134",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143637425"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143637425"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Also re: interface, that idea is nice but it doesn't work well with the current logic of looking for `*.dat` files imo, `available` is slightly less suggestive that they *are* actually wallets than putting them all in a `wallets` list, you'd end up with `{ \"name\": \"peers.dat\", \"loaded\": false}` if you were using the datadir. If you or anyone has a better idea for finding wallets then that would be ok",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T06:16:34Z",
      "diff_hunk" : "@@ -2626,17 +2626,16 @@ UniValue listwallets(const JSONRPCRequest& request)\n             \"Returns a list of currently loaded wallets.\\n\"\n             \"For full information on the wallet, use \\\"getwalletinfo\\\"\\n\"\n             \"\\nResult:\\n\"\n-            \"[                         (json array of strings)\\n\"\n-            \"  \\\"walletname\\\"            (string) the wallet name\\n\"\n-            \"   ...\\n\"\n-            \"]\\n\"\n+            \"{\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143637425",
      "id" : 143637425,
      "in_reply_to_id" : 143428584,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 68174954,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143637425",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143730935"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143730935"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "> If you or anyone has a better idea for finding wallets then that would be ok\r\n\r\nYou could look for berkeleydb magic bytes to at least filter out files which can't be bdb databases:\r\n\r\nhttps://github.com/file/file/blob/master/magic/Magdir/database",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T13:43:04Z",
      "diff_hunk" : "@@ -2626,17 +2626,16 @@ UniValue listwallets(const JSONRPCRequest& request)\n             \"Returns a list of currently loaded wallets.\\n\"\n             \"For full information on the wallet, use \\\"getwalletinfo\\\"\\n\"\n             \"\\nResult:\\n\"\n-            \"[                         (json array of strings)\\n\"\n-            \"  \\\"walletname\\\"            (string) the wallet name\\n\"\n-            \"   ...\\n\"\n-            \"]\\n\"\n+            \"{\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143730935",
      "id" : 143730935,
      "in_reply_to_id" : 143428584,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 68284055,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143730935",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143733780"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143733780"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "What is the goal? Why anyone wants to list available wallets? I guess that whoever wants multiwallet keeps a record of the wallets externally? ~~Anyway, I strongly suggest to move that discussion to a new PR.~~",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T13:52:25Z",
      "diff_hunk" : "@@ -2626,17 +2626,16 @@ UniValue listwallets(const JSONRPCRequest& request)\n             \"Returns a list of currently loaded wallets.\\n\"\n             \"For full information on the wallet, use \\\"getwalletinfo\\\"\\n\"\n             \"\\nResult:\\n\"\n-            \"[                         (json array of strings)\\n\"\n-            \"  \\\"walletname\\\"            (string) the wallet name\\n\"\n-            \"   ...\\n\"\n-            \"]\\n\"\n+            \"{\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143733780",
      "id" : 143733780,
      "in_reply_to_id" : 143428584,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 68287495,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143733780",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143791327"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143791327"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This change may have been influenced by my comment here: https://github.com/bitcoin/bitcoin/issues/11348#issuecomment-330234723. See the original post in that issue for motivation.\r\n\r\nMy view is that `listwallets` was announced as experimental in v0.15 (along with all the other multiwallet RPCs) so we have a bit more licence to make breaking changes than normal. I think this change should stay, but like @MeshCollider says, there may be better ways to achieve it.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T17:04:24Z",
      "diff_hunk" : "@@ -2626,17 +2626,16 @@ UniValue listwallets(const JSONRPCRequest& request)\n             \"Returns a list of currently loaded wallets.\\n\"\n             \"For full information on the wallet, use \\\"getwalletinfo\\\"\\n\"\n             \"\\nResult:\\n\"\n-            \"[                         (json array of strings)\\n\"\n-            \"  \\\"walletname\\\"            (string) the wallet name\\n\"\n-            \"   ...\\n\"\n-            \"]\\n\"\n+            \"{\\n\"",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143791327",
      "id" : 143791327,
      "in_reply_to_id" : 143428584,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 8,
      "path" : "src/wallet/rpcwallet.cpp",
      "position" : null,
      "pull_request_review_id" : 68355771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143791327",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143792101"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143792101"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think this help text should go in `GetWalletHelpString()` in `src/wallet/init.cpp`",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T17:07:36Z",
      "diff_hunk" : "@@ -367,6 +367,7 @@ std::string HelpMessage(HelpMessageMode mode)\n     strUsage += HelpMessageOpt(\"-sysperms\", _(\"Create new files with system default permissions, instead of umask 077 (only effective with disabled wallet functionality)\"));\n #endif\n     strUsage += HelpMessageOpt(\"-txindex\", strprintf(_(\"Maintain a full transaction index, used by the getrawtransaction rpc call (default: %u)\"), DEFAULT_TXINDEX));\n+    strUsage += HelpMessageOpt(\"-walletdir=<dir>\", _(\"Specify directory to hold wallets\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143792101",
      "id" : 143792101,
      "original_commit_id" : "ead92c2d0310dcba68c44d7d0b5830ef34248ac6",
      "original_position" : 4,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 68355771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143792101",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143792569"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143792569"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Again, I think this log should go in the wallet module rather than server.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T17:09:29Z",
      "diff_hunk" : "@@ -1224,6 +1225,7 @@ bool AppInitMain(boost::thread_group& threadGroup, CScheduler& scheduler)\n         LogPrintf(\"Startup time: %s\\n\", DateTimeStrFormat(\"%Y-%m-%d %H:%M:%S\", GetTime()));\n     LogPrintf(\"Default data directory %s\\n\", GetDefaultDataDir().string());\n     LogPrintf(\"Using data directory %s\\n\", GetDataDir().string());\n+    LogPrintf(\"Using wallet directory %s\\n\", GetWalletDir().string());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143792569",
      "id" : 143792569,
      "original_commit_id" : "ead92c2d0310dcba68c44d7d0b5830ef34248ac6",
      "original_position" : 12,
      "path" : "src/init.cpp",
      "position" : null,
      "pull_request_review_id" : 68355771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143792569",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143793979"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143793979"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't love this. At the moment you're using `path = \"\"` to essentially return an error to the caller (since on start-up, the calling function checks that the returned `fs::path` is a directory). That's not at all clear from reading just this function.\r\n\r\nCan you be more explicit about how the error is returned, either by explicitly returning bool or at the least by adding a comment here?",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T17:14:43Z",
      "diff_hunk" : "@@ -579,6 +579,26 @@ const fs::path &GetDataDir(bool fNetSpecific)\n     return path;\n }\n \n+fs::path GetWalletDir()\n+{\n+    fs::path path;\n+\n+    if (gArgs.IsArgSet(\"-walletdir\")) {\n+        path = fs::system_complete(gArgs.GetArg(\"-walletdir\", \"\"));\n+        if (!fs::is_directory(path)) {\n+            path = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143793979",
      "id" : 143793979,
      "original_commit_id" : "ead92c2d0310dcba68c44d7d0b5830ef34248ac6",
      "original_position" : 11,
      "path" : "src/util.cpp",
      "position" : null,
      "pull_request_review_id" : 68355771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143793979",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143795233"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143795233"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is this necessary? Where is the wallet name used in `bitcoin-cli.cpp`?",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T17:19:13Z",
      "diff_hunk" : "@@ -105,6 +105,10 @@ static int AppInitRPC(int argc, char* argv[])\n         fprintf(stderr, \"Error: Specified data directory \\\"%s\\\" does not exist.\\n\", gArgs.GetArg(\"-datadir\", \"\").c_str());\n         return EXIT_FAILURE;\n     }\n+    if (gArgs.IsArgSet(\"-walletdir\") && !fs::is_directory(GetWalletDir())) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143795233",
      "id" : 143795233,
      "original_commit_id" : "ead92c2d0310dcba68c44d7d0b5830ef34248ac6",
      "original_position" : 4,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 68355771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143795233",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143801037"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143801037"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Wallet names are currently allowed to not end with `.dat`. This test verified that we don't regress that support.\r\n\r\nI'm not sure if we should go on supporting that, but we should discuss that before removing support.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T17:40:42Z",
      "diff_hunk" : "@@ -15,30 +15,41 @@ class MultiWalletTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.setup_clean_chain = True\n         self.num_nodes = 1\n-        self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3']]\n+        self.extra_args = [['-wallet=w1.dat', '-wallet=w2.dat', '-wallet=w3.dat']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143801037",
      "id" : 143801037,
      "original_commit_id" : "ead92c2d0310dcba68c44d7d0b5830ef34248ac6",
      "original_position" : 5,
      "path" : "test/functional/multiwallet.py",
      "position" : null,
      "pull_request_review_id" : 68355771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143801037",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143801619"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143801619"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This test should also test having multiple wallets in the walletdir, and issuing an RPC command to one of them.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T17:42:52Z",
      "diff_hunk" : "@@ -15,30 +15,41 @@ class MultiWalletTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.setup_clean_chain = True\n         self.num_nodes = 1\n-        self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3']]\n+        self.extra_args = [['-wallet=w1.dat', '-wallet=w2.dat', '-wallet=w3.dat']]\n \n     def run_test(self):\n-        assert_equal(set(self.nodes[0].listwallets()), {\"w1\", \"w2\", \"w3\"})\n+        assert_equal(set(self.nodes[0].listwallets()['loaded']), {\"w1.dat\", \"w2.dat\", \"w3.dat\"})\n \n         self.stop_node(0)\n \n         # should not initialize if there are duplicate wallets\n-        self.assert_start_raises_init_error(0, ['-wallet=w1', '-wallet=w1'], 'Error loading wallet w1. Duplicate -wallet filename specified.')\n+        self.assert_start_raises_init_error(0, ['-wallet=w1.dat', '-wallet=w1.dat'], 'Error loading wallet w1.dat. Duplicate -wallet filename specified.')\n \n         # should not initialize if wallet file is a directory\n-        os.mkdir(os.path.join(self.options.tmpdir, 'node0', 'regtest', 'w11'))\n-        self.assert_start_raises_init_error(0, ['-wallet=w11'], 'Error loading wallet w11. -wallet filename must be a regular file.')\n+        os.mkdir(os.path.join(self.options.tmpdir, 'node0', 'regtest', 'w11.dat'))\n+        self.assert_start_raises_init_error(0, ['-wallet=w11.dat'], 'Error loading wallet w11.dat. -wallet filename must be a regular file.')\n \n         # should not initialize if wallet file is a symlink\n-        os.symlink(os.path.join(self.options.tmpdir, 'node0', 'regtest', 'w1'), os.path.join(self.options.tmpdir, 'node0', 'regtest', 'w12'))\n-        self.assert_start_raises_init_error(0, ['-wallet=w12'], 'Error loading wallet w12. -wallet filename must be a regular file.')\n+        os.symlink(os.path.join(self.options.tmpdir, 'node0', 'regtest', 'w1.dat'), os.path.join(self.options.tmpdir, 'node0', 'regtest', 'w12.dat'))\n+        self.assert_start_raises_init_error(0, ['-wallet=w12.dat'], 'Error loading wallet w12.dat. -wallet filename must be a regular file.')\n+\n+        # should not initialize if the specified walletdir does not exist\n+        self.assert_start_raises_init_error(0, ['-walletdir=bad'], 'Error: Specified wallet directory \"bad\" does not exist.')\n+\n+        # running the node with specified walletdir should only have the default wallet in it\n+        os.mkdir(os.path.join(self.options.tmpdir, 'node0', 'regtest', 'walletdir'))\n+        self.start_node(0, ['-walletdir=' + os.path.join(self.options.tmpdir, 'node0', 'regtest', 'walletdir')])\n+        assert_equal(set(self.nodes[0].listwallets()['loaded']), {\"wallet.dat\"})",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143801619",
      "id" : 143801619,
      "original_commit_id" : "ead92c2d0310dcba68c44d7d0b5830ef34248ac6",
      "original_position" : 35,
      "path" : "test/functional/multiwallet.py",
      "position" : null,
      "pull_request_review_id" : 68355771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143801619",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143804114"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143804114"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`relative to this wallet directory` or `must be in this wallet directory`",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T17:51:40Z",
      "diff_hunk" : "@@ -74,6 +74,13 @@ Due to a backward-incompatible change in the wallet database, wallets created\n with version 0.16.0 will be rejected by previous versions. Also, version 0.16.0\n will only create hierarchical deterministic (HD) wallets.\n \n+Custom wallet directories\n+---------------------\n+The ability to specify a directory other than the default data directory in which to store\n+wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`\n+argument. The parameter defaults to using the data directory location if not included.\n+Wallets loaded via `-wallet` arguments are relative to this wallet directory.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143804114",
      "id" : 143804114,
      "original_commit_id" : "ead92c2d0310dcba68c44d7d0b5830ef34248ac6",
      "original_position" : 18,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 68355771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143804114",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143804646"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143804646"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm not sure, but perhaps we should add a warning that `-walletdir` must refer to a reliable directory in the filesystem. For example, I think we want to discourage people using ephemeral, removable storage for their `-walletdir` since if the directory becomes unavailable during operation, funds may be lost.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T17:53:37Z",
      "diff_hunk" : "@@ -74,6 +74,13 @@ Due to a backward-incompatible change in the wallet database, wallets created\n with version 0.16.0 will be rejected by previous versions. Also, version 0.16.0\n will only create hierarchical deterministic (HD) wallets.\n \n+Custom wallet directories\n+---------------------\n+The ability to specify a directory other than the default data directory in which to store\n+wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`\n+argument. The parameter defaults to using the data directory location if not included.\n+Wallets loaded via `-wallet` arguments are relative to this wallet directory.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143804646",
      "id" : 143804646,
      "original_commit_id" : "ead92c2d0310dcba68c44d7d0b5830ef34248ac6",
      "original_position" : 18,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 68355771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143804646",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143805092"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143805092"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The arguments in the declaration and definition for `VerifyEnvironment()` and `VerifyDatabaseFile()` are still `dataDir`. Those should be updated to indicate that they're now refering to the wallet directory.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-10T17:55:19Z",
      "diff_hunk" : "@@ -208,7 +208,7 @@ bool VerifyWallets()\n         }\n \n         std::string strError;\n-        if (!CWalletDB::VerifyEnvironment(walletFile, GetDataDir().string(), strError)) {\n+        if (!CWalletDB::VerifyEnvironment(walletFile, GetWalletDir().string(), strError)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143805092",
      "id" : 143805092,
      "original_commit_id" : "ead92c2d0310dcba68c44d7d0b5830ef34248ac6",
      "original_position" : 14,
      "path" : "src/wallet/init.cpp",
      "position" : 46,
      "pull_request_review_id" : 68355771,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143805092",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143911688"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143911688"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-11T04:48:56Z",
      "diff_hunk" : "@@ -208,7 +208,7 @@ bool VerifyWallets()\n         }\n \n         std::string strError;\n-        if (!CWalletDB::VerifyEnvironment(walletFile, GetDataDir().string(), strError)) {\n+        if (!CWalletDB::VerifyEnvironment(walletFile, GetWalletDir().string(), strError)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143911688",
      "id" : 143911688,
      "in_reply_to_id" : 143805092,
      "original_commit_id" : "ead92c2d0310dcba68c44d7d0b5830ef34248ac6",
      "original_position" : 14,
      "path" : "src/wallet/init.cpp",
      "position" : 46,
      "pull_request_review_id" : 68491308,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143911688",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143912995"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143912995"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agreed, I'm unsure if there are any real benefits of adding an `available` list to the listwallets RPC after all, or if it just complicates the PR. Will discuss on IRC and then remove if not.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-11T05:03:22Z",
      "diff_hunk" : "@@ -15,30 +15,41 @@ class MultiWalletTest(BitcoinTestFramework):\n     def set_test_params(self):\n         self.setup_clean_chain = True\n         self.num_nodes = 1\n-        self.extra_args = [['-wallet=w1', '-wallet=w2', '-wallet=w3']]\n+        self.extra_args = [['-wallet=w1.dat', '-wallet=w2.dat', '-wallet=w3.dat']]",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r143912995",
      "id" : 143912995,
      "in_reply_to_id" : 143801037,
      "original_commit_id" : "ead92c2d0310dcba68c44d7d0b5830ef34248ac6",
      "original_position" : 5,
      "path" : "test/functional/multiwallet.py",
      "position" : null,
      "pull_request_review_id" : 68492585,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/143912995",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've split the `listwallets` RPC changes out into #11485. Squashed nit-fix commits, reworked the datadir caching stuff. Needs some careful testing and review now but I think its ready for proper review, let's see how travis goes. Will fix stuff in the morning. ",
      "created_at" : "2017-10-11T11:15:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-335777141",
      "id" : 335777141,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-10-11T11:33:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335777141",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It might eventually make sense to have each wallet in each own directory, ie the structure would be:\r\n\r\n```\r\n/<dataDir>\r\n  .\r\n  .-/wallets\r\n      .\r\n      .-/wallet1\r\n      .   .\r\n      .   .-wallet1.dat\r\n      .   .-db.log\r\n      .   ./database\r\n      .\r\n      .-/wallet2\r\n      .   ....\r\n      ....\r\n ```\r\n\r\nThat way, every wallet has its own bdb environment and we avoid nasty surprises like https://github.com/bitcoin/bitcoin/issues/11429#issuecomment-335571653.\r\n\r\nThat might involve a large code change, which would be necessary anyway if we want to separate wallets into their own processes.\r\n\r\nI don't think that has any impact on this PR right now, but it's worth considering what we want the final structure to look like.",
      "created_at" : "2017-10-11T14:23:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-335827526",
      "id" : 335827526,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-10-11T14:23:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335827526",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Since we are relying on filesystem then :+1: to @jnewbery suggestion.",
      "created_at" : "2017-10-11T14:34:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-335831332",
      "id" : 335831332,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-10-11T14:34:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/335831332",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased",
      "created_at" : "2017-10-13T22:47:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-336584862",
      "id" : 336584862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-10-13T22:47:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/336584862",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r146588801"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146588801"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This error message still says 'data directory'. The whole error message is a bit confusing, and I think it's rendered obsolete by the additional error checking at https://github.com/bitcoin/bitcoin/blob/57ee73990f1ce29916adfd99f93eae1ccea1a43b/src/wallet/init.cpp#L193 . Perhaps @jonasschnelli can confirm?",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-24T14:58:17Z",
      "diff_hunk" : "@@ -226,23 +227,23 @@ bool CDB::Recover(const std::string& filename, void *callbackDataIn, bool (*reco\n     return fSuccess;\n }\n \n-bool CDB::VerifyEnvironment(const std::string& walletFile, const fs::path& dataDir, std::string& errorStr)\n+bool CDB::VerifyEnvironment(const std::string& walletFile, const fs::path& walletDir, std::string& errorStr)\n {\n     LogPrintf(\"Using BerkeleyDB version %s\\n\", DbEnv::version(0, 0, 0));\n     LogPrintf(\"Using wallet %s\\n\", walletFile);\n \n     // Wallet file must be a plain filename without a directory\n     if (walletFile != fs::basename(walletFile) + fs::extension(walletFile))\n     {\n-        errorStr = strprintf(_(\"Wallet %s resides outside data directory %s\"), walletFile, dataDir.string());\n+        errorStr = strprintf(_(\"Wallet %s resides outside data directory %s\"), walletFile, walletDir.string());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r146588801",
      "id" : 146588801,
      "original_commit_id" : "30daa93e6404c972e83e3c898c9cb72185b1f5a9",
      "original_position" : 22,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 71552112,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146588801",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r146596435"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146596435"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps make some local variables here rather than repeating the same calls to `os.path.join()`:\r\n\r\n```python\r\nwallet_dir = os.path.join(self.options.tmpdir, 'node0', 'regtest', 'wallets')\r\n...\r\nwallet_dir2 = os.path.join(self.options.tmpdir, 'node0', 'regtest', 'walletdir')\r\n```\r\n\r\nor whatever",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-24T15:21:05Z",
      "diff_hunk" : "@@ -26,13 +26,34 @@ def run_test(self):\n         self.assert_start_raises_init_error(0, ['-wallet=w1', '-wallet=w1'], 'Error loading wallet w1. Duplicate -wallet filename specified.')\n \n         # should not initialize if wallet file is a directory\n-        os.mkdir(os.path.join(self.options.tmpdir, 'node0', 'regtest', 'w11'))\n+        os.mkdir(os.path.join(self.options.tmpdir, 'node0', 'regtest', 'wallets', 'w11'))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r146596435",
      "id" : 146596435,
      "original_commit_id" : "30daa93e6404c972e83e3c898c9cb72185b1f5a9",
      "original_position" : 5,
      "path" : "test/functional/multiwallet.py",
      "position" : null,
      "pull_request_review_id" : 71552112,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146596435",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r146597354"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146597354"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Are you Satoshi? :slightly_smiling_face: If not, I guess you can remove this copyright line (and the same from `walletutil.h`)",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-10-24T15:23:48Z",
      "diff_hunk" : "@@ -0,0 +1,28 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r146597354",
      "id" : 146597354,
      "original_commit_id" : "30daa93e6404c972e83e3c898c9cb72185b1f5a9",
      "original_position" : 1,
      "path" : "src/wallet/walletutil.cpp",
      "position" : null,
      "pull_request_review_id" : 71552112,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/146597354",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Fixed @jnewbery's nits and squashed as suggested. Thanks :)",
      "created_at" : "2017-10-27T02:25:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-339854612",
      "id" : 339854612,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-10-27T02:25:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/339854612",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK c36cb54711fe7677db6efc4db00a6e7d42e62f8d",
      "created_at" : "2017-10-28T18:22:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-340210315",
      "id" : 340210315,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-10-28T18:22:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/340210315",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Adding a -walletdir option seems more cumbersome than just tweaking the existing -wallet option to allow directory separator characters (\\\\/).\r\n\r\nAdvantages of allowing -wallet directory paths instead of adding -walletdir option:\r\n- Simpler for users: they don't need to look at 3 different options (-wallet, -walletdir, -datadir) to figure out where wallet will be stored. They just need to look at 1 or 2 (-wallet and -datadir if wallet path is not absolute).\r\n- More flexible: Users can store wallets in different locations.\r\n- Doesn't add 100 lines of code.\r\n- 100% backwards compatible. New bitcoin releases continue to store wallet.dat in same places releases.\r\n\r\nDisadvantages of allowing -wallet directory paths instead of adding -walletdir option:\r\n- Because users are not forced to store all wallets in single directory, we lose the ability to have a listwallets RPC that can return a complete list of all possible wallets (though it's still possible to list wallets in datadir).\r\n\r\nIs this a fair analysis or am I missing something?\r\n\r\n",
      "created_at" : "2017-10-31T18:20:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-340855947",
      "id" : 340855947,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-10-31T18:20:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/340855947",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Supporting multiple wallet directories also requires support for multiple BDB environments first, which would be extra code complication.",
      "created_at" : "2017-10-31T18:22:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-340856546",
      "id" : 340856546,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-10-31T18:22:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/340856546",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Supporting multiple wallet directories also requires support for multiple BDB environments first, which would be extra code complication.\r\n\r\nOh right, that is the thing I forgot. Allowing -wallet paths would be a little more complicated to implement than I was suggesting, but not much more. And this by itself doesn't seem like a good enough reason to make user experience worse and add complexity that we will need to support into the future.",
      "created_at" : "2017-10-31T18:54:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-340871087",
      "id" : 340871087,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-10-31T18:54:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/340871087",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @ryanofsky 100% backwards compatible. New bitcoin releases continue to store wallet.dat in same places releases.\r\n\r\nNote that this PR doesn't rely on moving the default directory location, that was just suggested as a good idea in https://github.com/bitcoin/bitcoin/issues/11348 (that was the main point of that issue). So that point is orthogonal to `-walletdir` or a relative `-wallet`, and probably should still be done",
      "created_at" : "2017-11-01T09:07:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-341043294",
      "id" : 341043294,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-01T09:07:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/341043294",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> ... or a relative -wallet, and probably should still be done\r\n\r\nI don't see how we could reasonably test behavior when `-datadir`, `-walletdir` and `-wallet` support directories as paths. Extending `-wallet` to accept file names, relative paths (to the datadir) or absolute paths should make the need to specify a `-walletdir` obsolete.",
      "created_at" : "2017-11-01T15:12:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-341135554",
      "id" : 341135554,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-01T15:12:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/341135554",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke sorry I meant the moving of default walletdir to datadir/wallets/ not making it accept relative paths :)",
      "created_at" : "2017-11-01T18:28:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-341196791",
      "id" : 341196791,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-01T18:28:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/341196791",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Yeah, right. Why would you change the default wallet dir when already could specify a path through `-wallet`?",
      "created_at" : "2017-11-01T18:32:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-341198108",
      "id" : 341198108,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-01T18:32:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/341198108",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Just to keep the wallets and their BDB environments contained in their own subdirectory, a cleanup and bit more separation. Would make it clearer to users what they should back up, for example, in the case of multiwallet. That's what #11348 was discussing",
      "created_at" : "2017-11-01T21:24:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-341247521",
      "id" : 341247521,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-01T21:24:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/341247521",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "An alternative idea would be to not have a `-walletdir` option, but have it be implied from the `-wallet` arguments. In a first version, a requirement could exist that all wallet files are in the same directory (which would then become the db env directory).",
      "created_at" : "2017-11-02T00:25:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-341282591",
      "id" : 341282591,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-02T00:25:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/341282591",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "IMO it's a bad idea to infer the wallet dir from the wallet filename. This would encourage confusion among users with regard to the db.log file and database directory - they'll wonder why they exist, possibly delete them, and/or not notice and neglect to back them up (although backups ought to always be made using Core, some users still don't know that).",
      "created_at" : "2017-11-10T14:42:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-343491005",
      "id" : 343491005,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-10T14:42:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343491005",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r150251905"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150251905"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Here and above: We should never create the wallets directory if wallet support is disabled. Additionally, if we're going to default to a wallet subdir, we should create it when there is no wallet yet, regardless of whether the datadir exists or not (eg, if datadir exists, but wallet.dat does not, make and use the wallet subdir).",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-10T14:45:34Z",
      "diff_hunk" : "@@ -574,7 +574,10 @@ const fs::path &GetDataDir(bool fNetSpecific)\n     if (fNetSpecific)\n         path /= BaseParams().DataDir();\n \n-    fs::create_directories(path);\n+    if (fs::create_directories(path)) {\n+        // This is the first run, create wallets subdirectory too\n+        fs::create_directories(path / \"wallets\");\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r150251905",
      "id" : 150251905,
      "original_commit_id" : "c36cb54711fe7677db6efc4db00a6e7d42e62f8d",
      "original_position" : 8,
      "path" : "src/util.cpp",
      "position" : 8,
      "pull_request_review_id" : 75776801,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150251905",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Perhaps another option would be to allow specifying a directory (ending in a `/`) for `-wallet`, and treat the entire directory as dedicated to that wallet, including naming the file itself `wallet.dat` unconditionally...?",
      "created_at" : "2017-11-10T14:47:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-343492375",
      "id" : 343492375,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-10T14:47:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/343492375",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r150296291"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150296291"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I had the same reaction when I first saw this, but I don't think it's a problem. If wallet support is disabled, we'll just have an empty wallet directory in the datadir.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-10T17:39:14Z",
      "diff_hunk" : "@@ -574,7 +574,10 @@ const fs::path &GetDataDir(bool fNetSpecific)\n     if (fNetSpecific)\n         path /= BaseParams().DataDir();\n \n-    fs::create_directories(path);\n+    if (fs::create_directories(path)) {\n+        // This is the first run, create wallets subdirectory too\n+        fs::create_directories(path / \"wallets\");\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r150296291",
      "id" : 150296291,
      "in_reply_to_id" : 150251905,
      "original_commit_id" : "c36cb54711fe7677db6efc4db00a6e7d42e62f8d",
      "original_position" : 8,
      "path" : "src/util.cpp",
      "position" : 8,
      "pull_request_review_id" : 75831115,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/150296291",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "I think we should go forward with this, instead of turning this into a big argument. `walletdir` might not be the perfect solution for everything (e.g. it cannot handle multiple wallets in different places), but for people storing their wallets on a different filesystem this is enough, and much safer than the dangerous symlink tricks they're using currently.\r\n\r\nAnd after @sipa's idea, or #11687,  `-walletdir` will just be the \"default wallet directory\". But that will require implementing that in a safe way first (and needs a more longer testing/review cycle). This is a good first step.",
      "created_at" : "2017-11-17T09:47:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-345195563",
      "id" : 345195563,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-17T09:55:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345195563",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased",
      "created_at" : "2017-11-17T09:57:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-345198025",
      "id" : 345198025,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-17T09:57:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345198025",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151653578"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151653578"
         }
      },
      "author_association" : "OWNER",
      "body" : "u-nit: space after `if`",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T10:39:58Z",
      "diff_hunk" : "@@ -214,7 +214,10 @@ bool Intro::pickDataDirectory()\n             }\n             dataDir = intro.getDataDirectory();\n             try {\n-                TryCreateDirectories(GUIUtil::qstringToBoostPath(dataDir));\n+                if(TryCreateDirectories(GUIUtil::qstringToBoostPath(dataDir))) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151653578",
      "id" : 151653578,
      "original_commit_id" : "aa9bbcf1eb0dd4ac7555fd8691b0868e4f20357c",
      "original_position" : 5,
      "path" : "src/qt/intro.cpp",
      "position" : null,
      "pull_request_review_id" : 77396060,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151653578",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151655245"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151655245"
         }
      },
      "author_association" : "OWNER",
      "body" : "I think it's fine to create an empty wallets directory, no matter if wallets are enabled or not (either at build or runtime). Aesthetically it would be better otherwise but practically it makes sense:\r\n\r\nAs the presence of this directory is used as signal where to put wallets, transitioning to it for an existing data directory is non-trivial. How would it even know if a legacy datadir has no wallets and you're creating the first one? That would be some nightmare heuristic logic...\r\nBetter to leave it to the user to create `wallets` themselves an move any relevant wallets there.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T10:46:44Z",
      "diff_hunk" : "@@ -574,7 +574,10 @@ const fs::path &GetDataDir(bool fNetSpecific)\n     if (fNetSpecific)\n         path /= BaseParams().DataDir();\n \n-    fs::create_directories(path);\n+    if (fs::create_directories(path)) {\n+        // This is the first run, create wallets subdirectory too\n+        fs::create_directories(path / \"wallets\");\n+    }",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151655245",
      "id" : 151655245,
      "in_reply_to_id" : 150251905,
      "original_commit_id" : "c36cb54711fe7677db6efc4db00a6e7d42e62f8d",
      "original_position" : 8,
      "path" : "src/util.cpp",
      "position" : 8,
      "pull_request_review_id" : 77397780,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151655245",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@laanwj nit addressed, and travis is passing, so shall I squash the last two commits now?",
      "created_at" : "2017-11-17T10:57:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-345212827",
      "id" : 345212827,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-17T10:57:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345212827",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151659576"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151659576"
         }
      },
      "author_association" : "OWNER",
      "body" : "`walletsdir` seems like something I'd fat finger into `walletdir` every time, prefer to leave out the extra letter :)",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T11:07:00Z",
      "diff_hunk" : "@@ -74,6 +74,13 @@ Due to a backward-incompatible change in the wallet database, wallets created\n with version 0.16.0 will be rejected by previous versions. Also, version 0.16.0\n will only create hierarchical deterministic (HD) wallets.\n \n+Custom wallet directories\n+---------------------\n+The ability to specify a directory other than the default data directory in which to store\n+wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151659576",
      "id" : 151659576,
      "in_reply_to_id" : 143431659,
      "original_commit_id" : "f8dc7acb8c4776b8a68b91a03487313a7c92e862",
      "original_position" : 16,
      "path" : "doc/release-notes.md",
      "position" : 16,
      "pull_request_review_id" : 77402603,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151659576",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151660024"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151660024"
         }
      },
      "author_association" : "OWNER",
      "body" : "Agree on creating a separate walletutil, this avoids picking up #ifdef WALLET_ENABLE logic in util.cpp.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T11:09:26Z",
      "diff_hunk" : "@@ -0,0 +1,27 @@\n+// Copyright (c) 2017 The Bitcoin Core developers",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151660024",
      "id" : 151660024,
      "original_commit_id" : "b15bd530151c071976cf080db1944042155ad4b8",
      "original_position" : 1,
      "path" : "src/wallet/walletutil.cpp",
      "position" : 1,
      "pull_request_review_id" : 77403136,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151660024",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151661051"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151661051"
         }
      },
      "author_association" : "OWNER",
      "body" : "Need information about the default here: `<datadir>/wallets if it exists, otherwise <datadir>`",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T11:14:28Z",
      "diff_hunk" : "@@ -34,6 +35,7 @@ std::string GetWalletHelpString(bool showDebug)\n     strUsage += HelpMessageOpt(\"-upgradewallet\", _(\"Upgrade wallet to latest format on startup\"));\n     strUsage += HelpMessageOpt(\"-wallet=<file>\", _(\"Specify wallet file (within data directory)\") + \" \" + strprintf(_(\"(default: %s)\"), DEFAULT_WALLET_DAT));\n     strUsage += HelpMessageOpt(\"-walletbroadcast\", _(\"Make the wallet broadcast transactions\") + \" \" + strprintf(_(\"(default: %u)\"), DEFAULT_WALLETBROADCAST));\n+    strUsage += HelpMessageOpt(\"-walletdir=<dir>\", _(\"Specify directory to hold wallets\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151661051",
      "id" : 151661051,
      "original_commit_id" : "b15bd530151c071976cf080db1944042155ad4b8",
      "original_position" : 15,
      "path" : "src/wallet/init.cpp",
      "position" : null,
      "pull_request_review_id" : 77404327,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151661051",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151662297"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151662297"
         }
      },
      "author_association" : "OWNER",
      "body" : "Seems overkill to call GetWalletDir() so many times in this function (`VerifyWallets()`), we could just call and store it once. But no, no need to fix in this PR, this is easier to review.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T11:21:19Z",
      "diff_hunk" : "@@ -230,7 +238,7 @@ bool VerifyWallets()\n         }\n \n         std::string strWarning;\n-        bool dbV = CWalletDB::VerifyDatabaseFile(walletFile, GetDataDir().string(), strWarning, strError);\n+        bool dbV = CWalletDB::VerifyDatabaseFile(walletFile, GetWalletDir().string(), strWarning, strError);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151662297",
      "id" : 151662297,
      "original_commit_id" : "b15bd530151c071976cf080db1944042155ad4b8",
      "original_position" : 55,
      "path" : "src/wallet/init.cpp",
      "position" : 55,
      "pull_request_review_id" : 77405737,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151662297",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151662500"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151662500"
         }
      },
      "author_association" : "OWNER",
      "body" : "You already have walletDir here, just log that?",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T11:22:47Z",
      "diff_hunk" : "@@ -282,18 +283,18 @@ bool CDB::VerifyEnvironment(const std::string& walletFile, const fs::path& dataD\n         }\n \n         // try again\n-        if (!bitdb.Open(dataDir)) {\n+        if (!bitdb.Open(walletDir)) {\n             // if it still fails, it probably means we can't even create the database env\n-            errorStr = strprintf(_(\"Error initializing wallet database environment %s!\"), GetDataDir());\n+            errorStr = strprintf(_(\"Error initializing wallet database environment %s!\"), GetWalletDir());",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151662500",
      "id" : 151662500,
      "original_commit_id" : "b15bd530151c071976cf080db1944042155ad4b8",
      "original_position" : 45,
      "path" : "src/wallet/db.cpp",
      "position" : null,
      "pull_request_review_id" : 77406017,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151662500",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151662796"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151662796"
         }
      },
      "author_association" : "OWNER",
      "body" : "I think this is a very important change from the viewpoint of users (\"where's my wallet.dat?! all wiki articles say it's in the data directory!\"), and probably warrants its own section.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T11:24:35Z",
      "diff_hunk" : "@@ -62,6 +62,19 @@ Due to a backward-incompatible change in the wallet database, wallets created\n with version 0.16.0 will be rejected by previous versions. Also, version 0.16.0\n will only create hierarchical deterministic (HD) wallets.\n \n+Custom wallet directories\n+---------------------\n+The ability to specify a directory other than the default data directory in which to store\n+wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`\n+argument. Wallets loaded via `-wallet` arguments must be in this wallet directory. Care should be taken\n+when choosing a wallet directory location, as if  it becomes unavailable during operation,\n+funds may be lost.\n+\n+On new installations (if the data directory doesn't exist), this parameter will default to a",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151662796",
      "id" : 151662796,
      "original_commit_id" : "bfacfbfff7609714dbd16323f5497b117c7d7408",
      "original_position" : 21,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 77406394,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151662796",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151663963"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151663963"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agreed, although I would hope most users would be able to work out what the new \"wallets/\" directory was for ;)",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T11:30:50Z",
      "diff_hunk" : "@@ -62,6 +62,19 @@ Due to a backward-incompatible change in the wallet database, wallets created\n with version 0.16.0 will be rejected by previous versions. Also, version 0.16.0\n will only create hierarchical deterministic (HD) wallets.\n \n+Custom wallet directories\n+---------------------\n+The ability to specify a directory other than the default data directory in which to store\n+wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`\n+argument. Wallets loaded via `-wallet` arguments must be in this wallet directory. Care should be taken\n+when choosing a wallet directory location, as if  it becomes unavailable during operation,\n+funds may be lost.\n+\n+On new installations (if the data directory doesn't exist), this parameter will default to a",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151663963",
      "id" : 151663963,
      "in_reply_to_id" : 151662796,
      "original_commit_id" : "bfacfbfff7609714dbd16323f5497b117c7d7408",
      "original_position" : 21,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 77407762,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T11:51:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151663963",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Manually tested:\r\n- Current datadir (testnet) - ok, still uses existing wallet\r\n- Create new datadir (testnet) - ok, `wallets` is created and wallet.dat is there\r\n- Create new datadir (testnet), different `-wallet=test.dat` name - ok, `wallets` is created and `test.dat` is there\r\n- `-choosedatadir` with GUI, new datadir - ok, `wallets` is created and wallet.dat is there\r\n- `-choosedatadir` with GUI, re-select default datadir - ok, datadir is left as-is, uses existing wallet\r\n- `-walletdir` override to existing directory, and no existing wallet - ok, wallet is created and used in supplied directory\r\n- `-walletdir` override to non-existing directory - ok, gives non-existing error as expected, bitcoin-qt shuts down cleanly\r\n- `-walletdir` override to existing directory with wallet - ok, wallet is used as expected",
      "created_at" : "2017-11-17T11:31:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-345220006",
      "id" : 345220006,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-17T11:34:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345220006",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Squashed fixup commits",
      "created_at" : "2017-11-17T11:52:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-345224218",
      "id" : 345224218,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-17T11:52:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345224218",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "Tested ACK c1e5d40",
      "created_at" : "2017-11-17T11:52:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-345224284",
      "id" : 345224284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-17T11:52:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345224284",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151694618"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151694618"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The logic data_dir + \"/wallets\" exists in a couple of places. Doesn't this also ignores -walletdir?",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T14:18:56Z",
      "diff_hunk" : "@@ -214,7 +214,10 @@ bool Intro::pickDataDirectory()\n             }\n             dataDir = intro.getDataDirectory();\n             try {\n-                TryCreateDirectories(GUIUtil::qstringToBoostPath(dataDir));\n+                if (TryCreateDirectories(GUIUtil::qstringToBoostPath(dataDir))) {\n+                    // If a new data directory has been created, make wallets subdirectory too\n+                    TryCreateDirectories(GUIUtil::qstringToBoostPath(dataDir) / \"wallets\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151694618",
      "id" : 151694618,
      "original_commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "original_position" : 7,
      "path" : "src/qt/intro.cpp",
      "position" : 7,
      "pull_request_review_id" : 77445913,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T14:18:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151694618",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151695181"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151695181"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why? Couldn't create it? Is it bad setting?",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T14:21:17Z",
      "diff_hunk" : "@@ -0,0 +1,27 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"wallet/walletutil.h\"\n+\n+fs::path GetWalletDir()\n+{\n+    fs::path path;\n+\n+    if (gArgs.IsArgSet(\"-walletdir\")) {\n+        path = fs::system_complete(gArgs.GetArg(\"-walletdir\", \"\"));\n+        if (!fs::is_directory(path)) {\n+            // If the path specified doesn't exist, we return the deliberately\n+            // invalid empty string.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151695181",
      "id" : 151695181,
      "original_commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "original_position" : 15,
      "path" : "src/wallet/walletutil.cpp",
      "position" : 15,
      "pull_request_review_id" : 77446597,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T14:21:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151695181",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151701021"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151701021"
         }
      },
      "author_association" : "OWNER",
      "body" : "This is just for creating the initial wallets directory. If it's not used it will stay empty.\r\n\r\nIt always creates a wallets directory under the data directory to make sure it isn't recognized as a legacy data directory (with wallets at the top level) in case any wallets are ever added to it.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T14:44:56Z",
      "diff_hunk" : "@@ -214,7 +214,10 @@ bool Intro::pickDataDirectory()\n             }\n             dataDir = intro.getDataDirectory();\n             try {\n-                TryCreateDirectories(GUIUtil::qstringToBoostPath(dataDir));\n+                if (TryCreateDirectories(GUIUtil::qstringToBoostPath(dataDir))) {\n+                    // If a new data directory has been created, make wallets subdirectory too\n+                    TryCreateDirectories(GUIUtil::qstringToBoostPath(dataDir) / \"wallets\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151701021",
      "id" : 151701021,
      "in_reply_to_id" : 151694618,
      "original_commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "original_position" : 7,
      "path" : "src/qt/intro.cpp",
      "position" : 7,
      "pull_request_review_id" : 77453608,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T14:54:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151701021",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151701304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151701304"
         }
      },
      "author_association" : "OWNER",
      "body" : "Unlike the datadir, `walletdir` is not created if it doesn't exist. This throws an error in init:\r\n```\r\n$ src/bitcoind -regtest -walletdir=/tmp/walletsdf\r\nError: Error: Specified wallet directory \"/tmp/walletsdf\" does not exist.\r\n```\r\nThat's the right behavior, IMO.\r\n(nit: doubled **Error:**)",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T14:45:57Z",
      "diff_hunk" : "@@ -0,0 +1,27 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"wallet/walletutil.h\"\n+\n+fs::path GetWalletDir()\n+{\n+    fs::path path;\n+\n+    if (gArgs.IsArgSet(\"-walletdir\")) {\n+        path = fs::system_complete(gArgs.GetArg(\"-walletdir\", \"\"));\n+        if (!fs::is_directory(path)) {\n+            // If the path specified doesn't exist, we return the deliberately\n+            // invalid empty string.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151701304",
      "id" : 151701304,
      "in_reply_to_id" : 151695181,
      "original_commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "original_position" : 15,
      "path" : "src/wallet/walletutil.cpp",
      "position" : 15,
      "pull_request_review_id" : 77453909,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T14:46:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151701304",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "There's a small thing I'm unsure about here, which just came to me, which only affects testnet and regtest: do we want to subdir the `-walletdir` with the chain name (like done with datadir?)? I think this would make sense, because currently it's impossible to specify `walletdir` in bitcoin.conf without running into conflicts.\r\n(this can be skipped if the `wallets` directory in the data directory is used, because it's already under the chain-specific dir)",
      "created_at" : "2017-11-17T14:48:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-345263672",
      "id" : 345263672,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-17T14:50:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345263672",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151706393"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151706393"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Nit, if `/tmp/walletsdf` is non-directory then the error could be different.",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T15:06:28Z",
      "diff_hunk" : "@@ -0,0 +1,27 @@\n+// Copyright (c) 2017 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"wallet/walletutil.h\"\n+\n+fs::path GetWalletDir()\n+{\n+    fs::path path;\n+\n+    if (gArgs.IsArgSet(\"-walletdir\")) {\n+        path = fs::system_complete(gArgs.GetArg(\"-walletdir\", \"\"));\n+        if (!fs::is_directory(path)) {\n+            // If the path specified doesn't exist, we return the deliberately\n+            // invalid empty string.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151706393",
      "id" : 151706393,
      "in_reply_to_id" : 151695181,
      "original_commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "original_position" : 15,
      "path" : "src/wallet/walletutil.cpp",
      "position" : 15,
      "pull_request_review_id" : 77460374,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T15:06:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151706393",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested ACK c1e5d40.\r\n\r\nNits and improvements to regtest and testnet can be left for followups?",
      "created_at" : "2017-11-17T15:08:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-345269204",
      "id" : 345269204,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-17T15:08:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345269204",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "You guys should look at #11687, too. It works standalone, but combined with this PR, it basically implements what john suggested here: https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-335827526\r\n\r\nIt also has a number of other improvements. I'm currently fixing a crazy problem with the tests (they were only failing on travis and I spent hours yesterday trying to reproduce them locally before eventually succeeding this morning and finding a shutdown bug.) Luke-jr posted a very reasonable comment there objecting to an earlier version of the PR that didn't include the third commit, but I think that should be addressed now. I'm planning on posting an update there after I fix travis, but the PR is very well documented and includes detailed release notes that I think should be pretty clear.",
      "created_at" : "2017-11-17T15:19:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-345272167",
      "id" : 345272167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-17T15:19:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345272167",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "OWNER",
      "body" : "@ryanofsky will look at that one next\r\n\r\n> Nits and improvements to regtest and testnet can be left for followups?\r\n\r\nYes, fine with me, will leave it up to @MeshCollider .",
      "created_at" : "2017-11-17T15:35:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-345276749",
      "id" : 345276749,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-17T15:35:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345276749",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Yes, fine with me, will leave it up to @MeshCollider .\r\n\r\nYep I'm happy to open a follow-up PR",
      "created_at" : "2017-11-17T17:26:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-345308862",
      "id" : 345308862,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-17T17:26:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345308862",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151759307"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151759307"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: double space (`if  it`).",
      "commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "created_at" : "2017-11-17T18:41:19Z",
      "diff_hunk" : "@@ -62,6 +62,20 @@ Due to a backward-incompatible change in the wallet database, wallets created\n with version 0.16.0 will be rejected by previous versions. Also, version 0.16.0\n will only create hierarchical deterministic (HD) wallets.\n \n+Custom wallet directories\n+---------------------\n+The ability to specify a directory other than the default data directory in which to store\n+wallets has been added. An existing directory can be specified using the `-walletdir=<dir>`\n+argument. Wallets loaded via `-wallet` arguments must be in this wallet directory. Care should be taken\n+when choosing a wallet directory location, as if  it becomes unavailable during operation,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#discussion_r151759307",
      "id" : 151759307,
      "original_commit_id" : "c1e5d40e166f0b9ad832c14747e77322ab439185",
      "original_position" : 18,
      "path" : "doc/release-notes.md",
      "position" : 18,
      "pull_request_review_id" : 77524881,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/11466",
      "updated_at" : "2017-11-17T18:41:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/151759307",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Nit cleanup and regtest/testnet change on new branch here: https://github.com/MeshCollider/bitcoin/tree/201711_walletdir\r\nThe second commit requires more testing so best if I leave them both for a new PR, approach can be discussed there too\r\n",
      "created_at" : "2017-11-18T00:45:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/11466#issuecomment-345403368",
      "id" : 345403368,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/11466",
      "updated_at" : "2017-11-18T00:45:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/345403368",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/MeshCollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MeshCollider/followers",
         "following_url" : "https://api.github.com/users/MeshCollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MeshCollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MeshCollider",
         "id" : 3211283,
         "login" : "MeshCollider",
         "organizations_url" : "https://api.github.com/users/MeshCollider/orgs",
         "received_events_url" : "https://api.github.com/users/MeshCollider/received_events",
         "repos_url" : "https://api.github.com/users/MeshCollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MeshCollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MeshCollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MeshCollider"
      }
   }
]
