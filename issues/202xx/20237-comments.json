[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> This makes no sense now as there are hardly any\r\n\r\nThere are many nodes that have there onion v3 address linked to 8333 created in /etc/tor/torrc but probably won't tell and stay onlynet onion or don't enable service calls port 9051 and cant use the additional v3 support from 0.21 by auto creating onions anyway.\r\n\r\nBut since almost all old nodes versions can do connect and addnode with long v3 address since years, if thre Tor software is above Tor 0.3.2.2-alpha (October  2017 ),  it might be useful to have a short list core approved list they could add manual to there old nodes,\r\n\r\nAnd btw. why not add the Tor v3 addr from the known seeders ( if they have Tor nodes ) in the vseeds list, i.e. when the user selects onlynet=onion to make sure we don't seed by ADDR messages via Tor exit nodes and stay at least for virgin bootstrap in Tor, i somewhere posted a patch for `chainparms.cpp` but forgot where.\r\nThat way. nodes with 0.21 update would fast learn from the seeders ADDRv2 messages new v3 and stay in pure in Tor if they wish.\r\nIf u like i can dig for that?  \r\n\r\n``` Diff\r\ndiff --git a/src/chainparams.cpp b/src/chainparams.cpp\r\nindex ffd2076c9..4903e3bda 100644\r\n--- a/src/chainparams.cpp\r\n+++ b/src/chainparams.cpp\r\n@@ -10,6 +10,7 @@\r\n #include <tinyformat.h>\r\n #include <util/system.h>\r\n #include <util/strencodings.h>\r\n+#include <util/system.h>\r\n #include <versionbitsinfo.h>\r\n \r\n #include <assert.h>\r\n@@ -113,6 +114,7 @@ public:\r\n         // This is fine at runtime as we'll fall back to using them as an addrfetch if they don't support the\r\n         // service bits we want, but we should get them updated to support all service bits wanted by any\r\n         // release ASAP to avoid it where possible.\r\n+        if (gArgs.GetArg(\"-onlynet\", \"\") != \"onion\") {\r\n         vSeeds.emplace_back(\"seed.bitcoin.sipa.be\"); // Pieter Wuille, only supports x1, x5, x9, and xd\r\n         vSeeds.emplace_back(\"dnsseed.bluematt.me\"); // Matt Corallo, only supports x9\r\n         vSeeds.emplace_back(\"dnsseed.bitcoin.dashjr.org\"); // Luke Dashjr\r\n@@ -122,6 +124,11 @@ public:\r\n         vSeeds.emplace_back(\"seed.bitcoin.sprovoost.nl\"); // Sjors Provoost\r\n         vSeeds.emplace_back(\"dnsseed.emzy.de\"); // Stephan Oeste\r\n         vSeeds.emplace_back(\"seed.bitcoin.wiz.biz\"); // Jason Maurice\r\n+        };\r\n+\r\n+        if (gArgs.GetArg(\"-onlynet\", \"\") == \"onion\") {\r\n+        vSeeds.emplace_back(\"seedersv3onionaddressasdasdasdasdad.onion:8333\"); // Add seeder onion v3 address\r\n+       // since we can not seed over Tor UDP DNS and call anyway the first node from the return +       // the exit socket  the exit Tor node give us for the FQDN of normal seeders, so why not call    \r\n+      //if onlynet=onion the Tor seeder node and gossip from ADDRv2 or ADDR,\r\n+        }\r\n \r\n         base58Prefixes[PUBKEY_ADDRESS] = std::vector<unsigned char>(1,0);\r\n         base58Prefixes[SCRIPT_ADDRESS] = std::vector<unsigned char>(1,5);\r\n\r\n```",
      "created_at" : "2020-10-25T15:14:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20237#issuecomment-716164054",
      "id" : 716164054,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20237",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNjE2NDA1NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-25T16:10:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/716164054",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "concept ptACK \r\nTested only the Tor nodes and so far all on this new list encoded and decoded at boostrap and where except two reachable.\r\n\r\nTyi, those two on the list \r\n```\r\n4vorvtoyegh4zbvr.onion 8333\r\nh6a32n4blbwwyn4d.onion 8333\r\n```\r\ni was unable to reach. ",
      "created_at" : "2020-10-25T22:36:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20237#issuecomment-716223831",
      "id" : 716223831,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20237",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNjIyMzgzMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-25T22:36:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/716223831",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Saibato Thanks for testing! Yes, I'd assume a part of them will be unreachable at any single time, I'm surprised the other 510 were connectable.",
      "created_at" : "2020-10-27T10:16:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20237#issuecomment-717136779",
      "id" : 717136779,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20237",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNzEzNjc3OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-27T10:16:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717136779",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I'm surprised the other 510 were connectable\r\n\r\n\r\nMe 2 , i did run the test twice, at first thought also impossible, but that was the case with a ten second delay between next address connect in the list.\r\nBut its v2 so there could be nodes doubles we wont be aware with the easy connect 8333 check i did.\r\n\r\nBtw. a big improvement compared to the 3 working fixed that we only have now in 0.20",
      "created_at" : "2020-10-27T13:39:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20237#issuecomment-717250416",
      "id" : 717250416,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20237",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxNzI1MDQxNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-27T13:39:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/717250416",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/34917548?v=4",
         "events_url" : "https://api.github.com/users/Saibato/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Saibato/followers",
         "following_url" : "https://api.github.com/users/Saibato/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Saibato/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Saibato",
         "id" : 34917548,
         "login" : "Saibato",
         "node_id" : "MDQ6VXNlcjM0OTE3NTQ4",
         "organizations_url" : "https://api.github.com/users/Saibato/orgs",
         "received_events_url" : "https://api.github.com/users/Saibato/received_events",
         "repos_url" : "https://api.github.com/users/Saibato/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Saibato/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Saibato/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Saibato"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The changes look fine. I'm now running the instructions in `contrib/seeds/README.md` to see what I get. Edit: just saw the review tips in the PR description.\r\n\r\n```\r\n  IPv4   IPv6  Onion Pass                                               \r\n427708  59843   8114 Initial\r\n427708  59843   8114 Skip entries with invalid address\r\n427708  59843   8114 After removing duplicates\r\n427707  59843   8114 Skip entries from suspicious hosts\r\n124199  52104   8001 Enforce minimal number of blocks\r\n122607  51619   7794 Require service bit 1\r\n  4769   1456   3830 Require minimum uptime\r\n  4180   1126   3762 Require a known and recent user agent\r\n  4089   1103   3762 Filter out hosts with multiple bitcoin ports\r\n   512    143    512 Look up ASNs and limit results per ASN and per net\r\n```\r\nRan makeseeds.py a second time to see the variance.\r\n```\r\n  IPv4   IPv6  Onion Pass                                               \r\n427693  59849   8131 Initial\r\n427693  59849   8131 Skip entries with invalid address\r\n427693  59849   8131 After removing duplicates\r\n427692  59849   8131 Skip entries from suspicious hosts\r\n124185  52110   8018 Enforce minimal number of blocks\r\n122597  51627   7810 Require service bit 1\r\n  4752   1456   3842 Require minimum uptime\r\n  4165   1126   3774 Require a known and recent user agent\r\n  4076   1103   3774 Filter out hosts with multiple bitcoin ports\r\n   512    147    512 Look up ASNs and limit results per ASN and per net\r\n```",
      "created_at" : "2020-11-02T17:33:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20237#issuecomment-720617939",
      "id" : 720617939,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20237",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMDYxNzkzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-02T19:28:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/720617939",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "ÐÑÐ¿ÑÐ°Ð²Ð»ÐµÐ½Ð¾ Ñ Ð¼Ð¾ÐµÐ³Ð¾ ÑÐµÐ»ÐµÑÐ¾Ð½Ð° Huawei-------- ÐÑÑÐ¾Ð´Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±ÑÐµÐ½Ð¸Ðµ --------ÐÑ: Jon Atack <notifications@github.com>ÐÐ°ÑÐ°: Ð¿Ð½, 2 Ð½Ð¾ÑÐ±. 2020 Ð³., 23:36ÐÐ¾Ð¼Ñ: bitcoin/bitcoin <bitcoin@noreply.github.com>ÐÐ¾Ð¿Ð¸Ñ: Subscribed <subscribed@noreply.github.com>Ð¢ÐµÐ¼Ð°: Re: [bitcoin/bitcoin] net: Hardcoded seeds update for 0.21  (#20237)\nI'm unsure how to review this. The changes look fine. I'm now running the instructions in contrib/seeds/README.md to see what I get. The last steps of makeseeds.py seem to be taking a while (I have a slow connection via vpn/tor). Edit: done, checking.\n427708  59843   8114 Initial\n427708  59843   8114 Skip entries with invalid address\n427708  59843   8114 After removing duplicates\n427707  59843   8114 Skip entries from suspicious hosts\n124199  52104   8001 Enforce minimal number of blocks\n122607  51619   7794 Require service bit 1\n  4769   1456   3830 Require minimum uptime\n  4180   1126   3762 Require a known and recent user agent\n  4089   1103   3762 Filter out hosts with multiple bitcoin ports\n   512    143    512 Look up ASNs and limit results per ASN and per net\n\n\nâYou are receiving this because you are subscribed to this thread.Reply to this email directly, view it on GitHub, or unsubscribe.",
      "created_at" : "2020-11-02T17:49:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20237#issuecomment-720626408",
      "id" : 720626408,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20237",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMDYyNjQwOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-02T17:49:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/720626408",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/73768599?v=4",
         "events_url" : "https://api.github.com/users/BARMOLEY007/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BARMOLEY007/followers",
         "following_url" : "https://api.github.com/users/BARMOLEY007/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BARMOLEY007/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BARMOLEY007",
         "id" : 73768599,
         "login" : "BARMOLEY007",
         "node_id" : "MDQ6VXNlcjczNzY4NTk5",
         "organizations_url" : "https://api.github.com/users/BARMOLEY007/orgs",
         "received_events_url" : "https://api.github.com/users/BARMOLEY007/received_events",
         "repos_url" : "https://api.github.com/users/BARMOLEY007/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BARMOLEY007/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BARMOLEY007/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BARMOLEY007"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I confirm that running `python3 generate-seeds.py . > ../../src/chainparamsseeds.h` locally generates identical result.\r\n\r\nRe-downloading the seeds and running `python3 makeseeds.py < seeds_main.txt > nodes_main.txt` changes `nodes_main.txt` about 12% (`nodes_main.txt` is 1167 lines and that command removed 137 lines and added 140).\r\n\r\nMaybe as a future improvement we may devise some deterministic way to generate the seeds, so that everybody can generate `seeds.txt` and confirm http://bitcoin.sipa.be/seeds.txt.gz is not compromised. Or at least that there is a significant overlap between that file from `bitcoin.sipa.be` and a locally generated.",
      "created_at" : "2020-11-03T09:31:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20237#issuecomment-721003171",
      "id" : 721003171,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20237",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMTAwMzE3MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-03T09:31:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/721003171",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I confirm that running python3 generate-seeds.py . > ../../src/chainparamsseeds.h locally generates identical result.\r\n\r\n@jonatack @vasild Thanks for checking !\r\n\r\n> Maybe as a future improvement we may devise some deterministic way to generate the seeds, so that everybody can generate seeds.txt and confirm http://bitcoin.sipa.be/seeds.txt.gz is not compromised. Or at least that there is a significant overlap between that file from bitcoin.sipa.be and a locally generated.\r\n\r\nYes, maybe.\r\nGiven the same `seeds.txt.gz` it should be deterministic already. Well, I guess the ASN mapping could changeâ¦\r\nI could upload mine somewhere but I don't think it would prove anything. The thing is that the `seeds.txt.gz` on the server changes continuously, and there is no way to prove that mine was ever the current state there and hasn't been tampered with.\r\n\r\nThe topic of improvements to the seed generation comes up every time just before the release and then dies down immediately after it. I'm happy for someone to put effort in this though. See also #17020 which ahs quite the TODO list alrady :smile: ",
      "created_at" : "2020-11-03T14:00:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20237#issuecomment-721132907",
      "id" : 721132907,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20237",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMTEzMjkwNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-03T14:02:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/721132907",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
