[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think wallets should keep being directories. Few reasons:\r\n\r\n- Aesthetics, usability, and the road to ambiguity. People are used to file names having extensions, and directory names not having extensions. If you create wallet named \"My Wallet\" in the GUI, or run `bitcoin-cli createwallet \"My Wallet\"`, there's nothing unusual about seeing a directory called `\"My Wallet\"` in `<walletdir>`. If `\"My Wallet\"` is created as a file not a directory, then you have an unusual looking file with no extension. So then there is a reason to call `bitcoin-cli createwallet` with a name that looks more like a filename: `mywallet.dat`, `mywallet.db` `mywallet.wallet`. And then the GUI starts showing lists of wallets like `mywallet1.wallet` and `mywallet2.wallet` and RPC endpoints looks like `/wallet/mywallet1.wallet` and `/wallet/mywallet2.wallet`. And then to improve ergonomics, somebody writes a PR to strip extensions, so GUI is more user-friendly or so RPC endpoint names are less verbose. And then simple mapping of wallet name == RPC endpoint name == GUI display name is broken, so now there are multiple mappings, ambiguity, more confusion, and everything is more complicated and stupid.\r\n\r\n- Backup safety. The claim that \"Since SQLite does not have database environments it is not necessary to have these directories\" is ambiguous and not accurate as far as I know. The sqlite implementation does not require periodic flushing to consolidate log files, but that doesn't mean that sqlite doesn't create log files. If you create a `<walletname>` wallet, sqlite will create a `<walletname>.wallet-journal` file, so if you have a backup script that is periodically backing up the `<walletdir>/<walletname>` path, it can miss the journal file. If the backup script wants to include the journal file, it needs to know about wallet database layout. It is better if wallet is just a directory, so the backup script can back up the directory without having to care about database layout. If script wants to care about the layout, it can still do that and exclude things, but the simple non-invasive approach will include data instead of excluding it.\r\n\r\n- Future extensibility. It's nice if wallets are directories instead of files, so there is a place to add new files associated with the wallet. I have PRs that let wallets run as separate processes. These wallet processes will want to run RPC servers. These RPC servers will need a place to put cookie files. A logical place would be inside the wallet directory. Similarly with future per-wallet debug logs, per-wallet settings files, per-wallet socket endpoints. If you have wallet directory, there is a natural place to put all these things. Users and external tools will be able to locate all data associated with a wallet without having to make assumptions about layout.",
      "created_at" : "2020-10-28T22:55:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20260#issuecomment-718254715",
      "id" : 718254715,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20260",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODI1NDcxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-28T22:55:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718254715",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20199 (Ignoring (but warn) on dublicate -wallet parameters by jonasschnelli)\n* #20186 (wallet: Make -wallet setting not create wallets by ryanofsky)\n* #20094 (wallet: Unify wallet directory lock error message by hebasto)\n* #19502 (Bugfix: Wallet: Soft-fail exceptions within ListWalletDir file checks by luke-jr)\n* #19168 (Refactor: Improve setup_clean_chain semantics by fjahr)\n* #19137 (wallettool: Add dump and createfromdump commands by achow101)\n* #19013 (test: add v0.20.1 to backwards compatibility test by Sjors)\n* #18788 (tests: Update more tests to work with descriptor wallets by achow101)\n* #18095 (Fix crashes and infinite loop in ListWalletDir() by uhliksk)\n* #16546 (External signer support - Wallet Box edition by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-10-29T02:24:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20260#issuecomment-718317902",
      "id" : 718317902,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20260",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODMxNzkwMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T02:24:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718317902",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I agree with @ryanofsky's reasons, especially with \"Future extensibility\" and \"Backup safety\".\r\n\r\nAs for wallet names that looks like \\<filename\\>\\<dot\\>\\<extension\\>, they could cause user confusion and fund loss because some OSes hide extensions from users.",
      "created_at" : "2020-10-29T04:53:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20260#issuecomment-718358615",
      "id" : 718358615,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20260",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODM1ODYxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T04:53:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718358615",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky I considered being able to move to non-directory wallets an advantage of sqlite, but you give good arguments for sticking with directories.",
      "created_at" : "2020-10-29T05:05:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20260#issuecomment-718362028",
      "id" : 718362028,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20260",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODM2MjAyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T05:05:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718362028",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-10-29T14:19:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20260#issuecomment-718784028",
      "id" : 718784028,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20260",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODc4NDAyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T14:19:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718784028",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ryanofsky makes a convincing argument. Closing.",
      "created_at" : "2020-10-29T18:54:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20260#issuecomment-718954278",
      "id" : 718954278,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20260",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxODk1NDI3OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-10-29T18:54:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/718954278",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
