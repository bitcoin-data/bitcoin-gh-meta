[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23127](https://github.com/bitcoin/bitcoin/pull/23127) (tests: Use test framework utils where possible by vincenzopalazzo)\n* [#21327](https://github.com/bitcoin/bitcoin/pull/21327) (net_processing: ignore transactions while in IBD by glozow)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-10-31T09:17:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-719907780",
      "id" : 719907780,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcxOTkwNzc4MA==",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/719907780/reactions"
      },
      "updated_at" : "2021-11-28T09:05:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/719907780",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515544072"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515544072"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Does the scope resolution operator need to be used here like everywhere else? `if (::ChainstateActive().IsInitialBlockDownload()) return;`",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-10-31T21:53:10Z",
      "diff_hunk" : "@@ -3019,6 +3019,15 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n             if (!fRejectedParents) {\n                 const auto current_time = GetTime<std::chrono::microseconds>();\n \n+                // To save bandwidth during IBD, stop orphan processing early. With the state of\n+                // our UTXO set far from tip, we might not have yet the unspent output spend by this\n+                // transaction or this transaction is already double-spend but not yet seen block.\n+                // Further, we can't assert accuracy of its feerate.\n+                //\n+                // Orphan transaction is discarded. Note, we don't both to add id to recentRejects\n+                // as it's expected to be quickly clean up during IBD.\n+                if (ChainstateActive().IsInitialBlockDownload()) return;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515544072",
      "id" : 515544072,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTU0NDA3Mg==",
      "original_commit_id" : "8afa4fa3530389a06ddccd57235493cc7ae806f0",
      "original_line" : 3029,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 521173493,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515544072",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7217256?v=4",
         "events_url" : "https://api.github.com/users/mjdietzx/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mjdietzx/followers",
         "following_url" : "https://api.github.com/users/mjdietzx/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mjdietzx/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mjdietzx",
         "id" : 7217256,
         "login" : "mjdietzx",
         "node_id" : "MDQ6VXNlcjcyMTcyNTY=",
         "organizations_url" : "https://api.github.com/users/mjdietzx/orgs",
         "received_events_url" : "https://api.github.com/users/mjdietzx/received_events",
         "repos_url" : "https://api.github.com/users/mjdietzx/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mjdietzx/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mjdietzx/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mjdietzx"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515562121"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515562121"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point! I'll update once PR got Concept ACK/NACK.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-01T01:31:01Z",
      "diff_hunk" : "@@ -3019,6 +3019,15 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n             if (!fRejectedParents) {\n                 const auto current_time = GetTime<std::chrono::microseconds>();\n \n+                // To save bandwidth during IBD, stop orphan processing early. With the state of\n+                // our UTXO set far from tip, we might not have yet the unspent output spend by this\n+                // transaction or this transaction is already double-spend but not yet seen block.\n+                // Further, we can't assert accuracy of its feerate.\n+                //\n+                // Orphan transaction is discarded. Note, we don't both to add id to recentRejects\n+                // as it's expected to be quickly clean up during IBD.\n+                if (ChainstateActive().IsInitialBlockDownload()) return;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515562121",
      "id" : 515562121,
      "in_reply_to_id" : 515544072,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTU2MjEyMQ==",
      "original_commit_id" : "8afa4fa3530389a06ddccd57235493cc7ae806f0",
      "original_line" : 3029,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 521185373,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515562121",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515653390"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515653390"
         }
      },
      "author_association" : "MEMBER",
      "body" : "78b1044 Could you update the name of `INBOUND_PEER_TX_RELAY` for clarity and searchability of its equivalent in the net_processing code?\r\n\r\n```suggestion\r\nTXID_RELAY_DELAY = 2  # seconds\r\n```",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-01T18:12:39Z",
      "diff_hunk" : "@@ -116,6 +116,9 @@\n     \"signet\": b\"\\x0a\\x03\\xcf\\x40\",    # signet\n }\n \n+# Constants from net_processing\n+INBOUND_PEER_TX_DELAY = 2  # seconds\n+TXID_RELAY_DELAY = 2 # seconds",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515653390",
      "id" : 515653390,
      "line" : 125,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY1MzM5MA==",
      "original_commit_id" : "8afa4fa3530389a06ddccd57235493cc7ae806f0",
      "original_line" : 125,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/p2p.py",
      "position" : 6,
      "pull_request_review_id" : 521247512,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515653390",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515655202"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515655202"
         }
      },
      "author_association" : "MEMBER",
      "body" : "78b1044 \r\n\r\n```suggestion\r\n            if (i.type & MSG_TYPE_MASK) in {MSG_TX, MSG_WTX}:\r\n```",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-01T18:29:44Z",
      "diff_hunk" : "@@ -401,6 +406,11 @@ def on_version(self, message):\n             self.send_message(msg_sendaddrv2())\n         self.nServices = message.nServices\n \n+    def on_getdata(self, message):\n+        for i in message.inv:\n+            if i.type & MSG_TYPE_MASK == MSG_TX or i.type & MSG_TYPE_MASK == MSG_WTX:",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515655202",
      "id" : 515655202,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY1NTIwMg==",
      "original_commit_id" : "8afa4fa3530389a06ddccd57235493cc7ae806f0",
      "original_line" : 411,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/p2p.py",
      "position" : null,
      "pull_request_review_id" : 521247512,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515655202",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515661399"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515661399"
         }
      },
      "author_association" : "MEMBER",
      "body" : "8afa4fa s/parent are/parents are/\r\n```suggestion\r\n        sleep(INBOUND_PEER_TX_DELAY + TXID_RELAY_DELAY)\r\n```",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-01T19:26:57Z",
      "diff_hunk" : "@@ -22,7 +50,50 @@ def set_test_params(self):\n             [\"-minrelaytxfee={}\".format(NORMAL_FEE_FILTER)],\n         ]\n \n-    def run_test(self):\n+    def test_inv_ibd(self):\n+        self.log.info(\"Check that nodes don't request txn while still in IBD\")\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_inv([CInv(t=MSG_WTX, h=0xffaa)]))\n+        # As tx-announcing connection is inbound, wait for the inbound delay applied by requester.\n+        sleep(INBOUND_PEER_TX_DELAY)\n+        peer.sync_with_ping()\n+        with p2p_lock:\n+            assert_equal(peer.tx_getdata_count, 0)\n+        peer.peer_disconnect()\n+        peer.wait_for_disconnect()\n+\n+    def test_orphan_ibd(self):\n+        self.log.info(\"Check that nodes don't request orphan parent while still in IBD\")\n+\n+        # Build an orphan parent tx\n+        witness_program = CScript([OP_TRUE])\n+        witness_hash = sha256(witness_program)\n+        script_pubkey = CScript([OP_0, witness_hash])\n+\n+        tx_parent = CTransaction()\n+        tx_parent.vin.append(CTxIn(outpoint=COutPoint(uint256_from_str(b\"23c70ed7c0506e9178fc1a987f40a33946d4ad4c962b5ae3a52546da53af0c5c\"),\n+ 0)))\n+        tx_parent.vout.append(CTxOut(nValue=50 * COIN - 12000, scriptPubKey=script_pubkey))\n+        tx_parent.calc_sha256()\n+\n+        # Build an orphan tx\n+        tx_orphan = CTransaction()\n+        tx_orphan.vin.append(CTxIn(outpoint=COutPoint(tx_parent.sha256, 0)))\n+        tx_orphan.vout = [CTxOut(nValue=10 * COIN, scriptPubKey=script_pubkey)]\n+        tx_orphan.calc_sha256()\n+\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_tx(tx_orphan))\n+        # As tx-announcing connection is inbound, wait for the inbound delay applied by requester.\n+        # Also apply the txid delay as orphan parent are requested in the legacy way.\n+        sleep(INBOUND_PEER_TX_DELAY+TXID_RELAY_DELAY)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515661399",
      "id" : 515661399,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY2MTM5OQ==",
      "original_commit_id" : "8afa4fa3530389a06ddccd57235493cc7ae806f0",
      "original_line" : 89,
      "original_position" : 79,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_txrelay.py",
      "position" : null,
      "pull_request_review_id" : 521247512,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515661399",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515661758"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515661758"
         }
      },
      "author_association" : "MEMBER",
      "body" : "2ada3103 tabulation is off for all of the added imports, should be 4 spaces\r\n",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-01T19:29:59Z",
      "diff_hunk" : "@@ -6,8 +6,36 @@\n \n from decimal import Decimal\n \n-from test_framework.messages import COIN\n+from time import sleep\n+\n+from test_framework.messages import (\n+        COIN,\n+        COutPoint,\n+        CTransaction,\n+        CTxIn,\n+        CTxOut,\n+        CInv,\n+        MSG_WTX,\n+        msg_inv,\n+        msg_tx,\n+        sha256,\n+        uint256_from_str\n+)\n+from test_framework.p2p import (\n+        P2PInterface,\n+        p2p_lock,\n+        INBOUND_PEER_TX_DELAY,\n+        TXID_RELAY_DELAY,\n+)\n from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.script import (\n+        CScript,\n+        OP_TRUE,\n+        OP_0,\n+)\n+from test_framework.util import (\n+        assert_equal,\n+)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515661758",
      "id" : 515661758,
      "line" : 26,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY2MTc1OA==",
      "original_commit_id" : "8afa4fa3530389a06ddccd57235493cc7ae806f0",
      "original_line" : 26,
      "original_position" : 34,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_txrelay.py",
      "position" : 27,
      "pull_request_review_id" : 521247512,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515661758",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515662647"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515662647"
         }
      },
      "author_association" : "MEMBER",
      "body" : "d65dca43 partial WIP suggestions, though I think it could still be more clearly written\r\n```diff\r\n-                // To save bandwidth during IBD, stop orphan processing early. With the state of\r\n-                // our UTXO set far from tip, we might not have yet the unspent output spend by this\r\n-                // transaction or this transaction is already double-spend but not yet seen block.\r\n-                // Further, we can't assert accuracy of its feerate.\r\n+                // If we are in IBD, exit from orphan processing early to save bandwidth. With the\r\n+                // state of our UTXO set far from the tip, we might not yet have the unspent output\r\n+                // of this transaction, or the transaction is already double-spent but not yet\r\n+                // included in a block. We also cannot assert the accuracy of its feerate.\r\n                 //\r\n-                // Orphan transaction is discarded. Note, we don't both to add id to recentRejects\r\n-                // as it's expected to be quickly clean up during IBD.\r\n-                if (ChainstateActive().IsInitialBlockDownload()) return;\r\n+                // Orphan transaction is discarded. We don't bother to add it to recentRejects, as\r\n+                // it's expected to be quickly cleaned up during IBD.\r\n+                if (::ChainstateActive().IsInitialBlockDownload()) return;\r\n```\r\n\"it's expected\" is somewhat ambiguous, could you use an explicit subject?",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-01T19:38:28Z",
      "diff_hunk" : "@@ -3019,6 +3019,15 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n             if (!fRejectedParents) {\n                 const auto current_time = GetTime<std::chrono::microseconds>();\n \n+                // To save bandwidth during IBD, stop orphan processing early. With the state of\n+                // our UTXO set far from tip, we might not have yet the unspent output spend by this\n+                // transaction or this transaction is already double-spend but not yet seen block.\n+                // Further, we can't assert accuracy of its feerate.\n+                //\n+                // Orphan transaction is discarded. Note, we don't both to add id to recentRejects\n+                // as it's expected to be quickly clean up during IBD.\n+                if (ChainstateActive().IsInitialBlockDownload()) return;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r515662647",
      "id" : 515662647,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY2MjY0Nw==",
      "original_commit_id" : "8afa4fa3530389a06ddccd57235493cc7ae806f0",
      "original_line" : 3029,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 521247512,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/515662647",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "How much difference is this going to make in practice? For a node without incoming connections it seems unlikely to have peers that don't support the `feefilter` message. For a node with incoming connections, minor traffic waste doesn't seem to be a concern.",
      "created_at" : "2020-11-02T07:33:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-720293190",
      "id" : 720293190,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMDI5MzE5MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-02T07:33:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/720293190",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2020-11-02T15:11:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-720531320",
      "id" : 720531320,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMDUzMTMyMA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-02T15:11:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/720531320",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/60179867?v=4",
         "events_url" : "https://api.github.com/users/decryp2kanon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/decryp2kanon/followers",
         "following_url" : "https://api.github.com/users/decryp2kanon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/decryp2kanon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/decryp2kanon",
         "id" : 60179867,
         "login" : "decryp2kanon",
         "node_id" : "MDQ6VXNlcjYwMTc5ODY3",
         "organizations_url" : "https://api.github.com/users/decryp2kanon/orgs",
         "received_events_url" : "https://api.github.com/users/decryp2kanon/received_events",
         "repos_url" : "https://api.github.com/users/decryp2kanon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/decryp2kanon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/decryp2kanon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/decryp2kanon"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Ð¿Ð½, 2 Ð½Ð¾ÑÐ±. 2020 Ð³., 21:14 kanon <notifications@github.com>:\n\n> Concept ACK\n>\n> â\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-720531320>,\n> or unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/ARSZ5F2X63EGAE65OJU3BE3SN3EFDANCNFSM4TFSVFRA>\n> .\n>\n",
      "created_at" : "2020-11-02T15:21:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-720537549",
      "id" : 720537549,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMDUzNzU0OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-02T15:21:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/720537549",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/73768599?v=4",
         "events_url" : "https://api.github.com/users/BARMOLEY007/events{/privacy}",
         "followers_url" : "https://api.github.com/users/BARMOLEY007/followers",
         "following_url" : "https://api.github.com/users/BARMOLEY007/following{/other_user}",
         "gists_url" : "https://api.github.com/users/BARMOLEY007/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/BARMOLEY007",
         "id" : 73768599,
         "login" : "BARMOLEY007",
         "node_id" : "MDQ6VXNlcjczNzY4NTk5",
         "organizations_url" : "https://api.github.com/users/BARMOLEY007/orgs",
         "received_events_url" : "https://api.github.com/users/BARMOLEY007/received_events",
         "repos_url" : "https://api.github.com/users/BARMOLEY007/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/BARMOLEY007/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/BARMOLEY007/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/BARMOLEY007"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r516351204"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/516351204"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Switched to NONPREF_PEER_TX_RELAY.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-03T00:09:51Z",
      "diff_hunk" : "@@ -116,6 +116,9 @@\n     \"signet\": b\"\\x0a\\x03\\xcf\\x40\",    # signet\n }\n \n+# Constants from net_processing\n+INBOUND_PEER_TX_DELAY = 2  # seconds\n+TXID_RELAY_DELAY = 2 # seconds",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r516351204",
      "id" : 516351204,
      "in_reply_to_id" : 515653390,
      "line" : 125,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM1MTIwNA==",
      "original_commit_id" : "8afa4fa3530389a06ddccd57235493cc7ae806f0",
      "original_line" : 125,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/p2p.py",
      "position" : 6,
      "pull_request_review_id" : 522118957,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/516351204",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r516362195"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/516362195"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes this is the recentRejects filter. I did modify the comment to underscore that during IBD blocks are received fast and thus the filter quickly cleanup in consequence.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-03T00:33:52Z",
      "diff_hunk" : "@@ -3019,6 +3019,15 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n             if (!fRejectedParents) {\n                 const auto current_time = GetTime<std::chrono::microseconds>();\n \n+                // To save bandwidth during IBD, stop orphan processing early. With the state of\n+                // our UTXO set far from tip, we might not have yet the unspent output spend by this\n+                // transaction or this transaction is already double-spend but not yet seen block.\n+                // Further, we can't assert accuracy of its feerate.\n+                //\n+                // Orphan transaction is discarded. Note, we don't both to add id to recentRejects\n+                // as it's expected to be quickly clean up during IBD.\n+                if (ChainstateActive().IsInitialBlockDownload()) return;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r516362195",
      "id" : 516362195,
      "in_reply_to_id" : 515662647,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjM2MjE5NQ==",
      "original_commit_id" : "8afa4fa3530389a06ddccd57235493cc7ae806f0",
      "original_line" : 3029,
      "original_position" : 11,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 522123794,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/516362195",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke \r\n\r\nRight, I should have explicit the assumption on sender, that they are non-Bitcoin Core clients. Thus we can't be certain they enforce the regular tx-relay flow inv,getdata,tx but might send directly txn, don't bothering with any `feefilter` at all nor sending an inv first.\r\n\r\nI agree that the waste is likely to be minor in any-case, but note that this PR is aiming to align behavior with current inv-reception code (L2690) as described in PR description. This point has the added benefit to make easier to reason on holistic tx-relay behavior when we review more important p2p stuff, IMHO.",
      "created_at" : "2020-11-03T00:46:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-720808689",
      "id" : 720808689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMDgwODY4OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-03T00:47:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/720808689",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "EDIT: this was for a different version of this PR.\r\n\r\nThis seems like an extremely verbose PR to modify an unlikely and unimportant edge case. We don't expect to process unconfirmed transactions during IBD for a couple of reasons:\r\n\r\n- we'll send a feefilter set to MAX_MONEY, telling our peers not to INV transactions to us.\r\n- we'll ignore INVs for transactions.\r\n\r\nSo a peer would need to send us an unsolicited tx ignoring our feefilter for us to even reach this logic. It seems inconsistent to process that transaction as normal, but not do the normal orphan processing logic too.\r\n\r\nWe could modify the transaction processing logic to ignore all tx messages during IBD, which seems reasonable and at least consistent. I don't think we need a 10 line comment and 100 line test case to justify that - just say that we don't process unconfirmed transactions during IBD.",
      "created_at" : "2020-11-04T12:23:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-721701255",
      "id" : 721701255,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMTcwMTI1NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-16T10:39:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/721701255",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I tend to agree with @jnewbery that just ignoring all unrequested transactions during IBD would make more sense, but I'd go further and suggest we generally ignore all unrequested transactions (perhaps excepting peers with PF_RELAY permission), to mitigate potential CPU DoS.",
      "created_at" : "2020-11-04T16:02:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-721819763",
      "id" : 721819763,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMTgxOTc2Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-04T16:02:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/721819763",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">  It seems inconsistent to process that transaction as normal, but not do the normal orphan processing logic too.\r\n\r\nThanks to answering my wonder about jumping directly to stop processing unrequested transaction instead of only scoping to orphan. Updated branch with this behavior.\r\n\r\n> I don't think we need a 10 line comment and 100 line test case to justify that - just say that we don't process unconfirmed transactions during IBD.\r\n\r\nI hear you on that, some reviewers might like comments on rational not only on code behaviors, even for edge cases, hard to all agree on. Note that \"100 line test case\" includes a new test (`test_inv_ibd`) for old behavior, not processing inv-tx during IBD.",
      "created_at" : "2020-11-05T01:43:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-722071996",
      "id" : 722071996,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMjA3MTk5Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-05T01:43:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/722071996",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Note to reviewers, you might verify `test_inv_ibd` coverage with:\r\n\r\n```\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex c21c9e3ee..5def5178e 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -2687,7 +2687,7 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\r\n                     LogPrint(BCLog::NET, \"transaction (%s) inv sent in violation of protocol, disconnecting peer=%d\\n\", inv.hash.ToString(), pfrom.GetId());\r\n                     pfrom.fDisconnect = true;\r\n                     return;\r\n-                } else if (!fAlreadyHave && !m_chainman.ActiveChainstate().IsInitialBlockDownload()) {\r\n+                } else if (!fAlreadyHave) {\r\n                     AddTxAnnouncement(pfrom, gtxid, current_time);\r\n                 }\r\n             } else {\r\n```\r\n\r\nAnd `test_unrequested_tx_ibd`:\r\n```\r\ndiff --git a/src/net_processing.cpp b/src/net_processing.cpp\r\nindex c21c9e3ee..32cdba5f2 100644\r\n--- a/src/net_processing.cpp\r\n+++ b/src/net_processing.cpp\r\n@@ -2928,8 +2928,8 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\r\n         // and mitigate potential DoS risks.\r\n         if (!pfrom.HasPermission(PF_RELAY) && ::ChainstateActive().IsInitialBlockDownload())\r\n         {\r\n-            LogPrint(BCLog::NET, \"unrequested transaction while in IBD from peer=%d\\n\", pfrom.GetId());\r\n-            return;\r\n+            //LogPrint(BCLog::NET, \"unrequested transaction while in IBD from peer=%d\\n\", pfrom.GetId());\r\n+            //return;\r\n         }\r\n \r\n         CTransactionRef ptx;\r\n```",
      "created_at" : "2020-11-05T02:01:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-722077323",
      "id" : 722077323,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMjA3NzMyMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-05T02:01:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/722077323",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r517818190"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/517818190"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        if (!pfrom.HasPermission(PF_RELAY) && m_chainman.ActiveChainstate().IsInitialBlockDownload()) {\r\n```\r\n\r\nstyle-nit: Please don't use the deprecated wrappers. This is going to silently conflict with ongoing work to remove them\r\n\r\nAlso clang-format for new code ",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-05T06:29:15Z",
      "diff_hunk" : "@@ -2924,6 +2924,14 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n             return;\n         }\n \n+        // If we are in IBD, exit from unrequested transaction processing early to save bandwidth\n+        // and mitigate potential DoS risks.\n+        if (!pfrom.HasPermission(PF_RELAY) && ::ChainstateActive().IsInitialBlockDownload())",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r517818190",
      "id" : 517818190,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzgxODE5MA==",
      "original_commit_id" : "51ea531ecf1b3f57041c792141fa007a82689e0d",
      "original_line" : 2929,
      "original_position" : 6,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 523956803,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/517818190",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r517819829"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/517819829"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think the tx needs to be valid (and it can't be valid because the utxo set is empty). Just using `0` or default constructors for CTxIn/Out should be sufficient.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-05T06:34:26Z",
      "diff_hunk" : "@@ -22,7 +49,40 @@ def set_test_params(self):\n             [\"-minrelaytxfee={}\".format(NORMAL_FEE_FILTER)],\n         ]\n \n-    def run_test(self):\n+    def test_inv_ibd(self):\n+        self.log.info(\"Check that nodes don't request txn while still in IBD\")\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_inv([CInv(t=MSG_WTX, h=0xffaa)]))\n+        # As tx-announcing connection is inbound, wait for the inbound delay applied by requester.\n+        sleep(NONPREF_PEER_TX_DELAY)\n+        peer.sync_with_ping()\n+        with p2p_lock:\n+            assert_equal(peer.tx_getdata_count, 0)\n+        peer.peer_disconnect()\n+        peer.wait_for_disconnect()\n+\n+    def test_unrequested_tx_ibd(self):\n+        self.log.info(\"Check that nodes don't process unrequested txn while still in IBD\")\n+\n+        witness_program = CScript([OP_TRUE])\n+        witness_hash = sha256(witness_program)\n+        script_pubkey = CScript([OP_0, witness_hash])\n+\n+        unrequested_tx = CTransaction()\n+        unrequested_tx.vin.append(CTxIn(outpoint=COutPoint(uint256_from_str(b\"23c70ed7c0506e9178fc1a987f40a33946d4ad4c962b5ae3a52546da53af0c5c\"),\n+ 0)))\n+        unrequested_tx.vout.append(CTxOut(nValue=50 * COIN - 12000, scriptPubKey=script_pubkey))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r517819829",
      "id" : 517819829,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzgxOTgyOQ==",
      "original_commit_id" : "51ea531ecf1b3f57041c792141fa007a82689e0d",
      "original_line" : 74,
      "original_position" : 64,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_txrelay.py",
      "position" : null,
      "pull_request_review_id" : 523956803,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/517819829",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r517820308"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/517820308"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        peer.send_and_ping(msg_tx(unrequested_tx))\r\n```\r\n\r\nOtherwise you are using the debug.log to synchronize. And the `assert_equal(len(self.nodes[0].getrawmempool()), 0)` doesn't actually check anything.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-05T06:35:53Z",
      "diff_hunk" : "@@ -22,7 +49,40 @@ def set_test_params(self):\n             [\"-minrelaytxfee={}\".format(NORMAL_FEE_FILTER)],\n         ]\n \n-    def run_test(self):\n+    def test_inv_ibd(self):\n+        self.log.info(\"Check that nodes don't request txn while still in IBD\")\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_inv([CInv(t=MSG_WTX, h=0xffaa)]))\n+        # As tx-announcing connection is inbound, wait for the inbound delay applied by requester.\n+        sleep(NONPREF_PEER_TX_DELAY)\n+        peer.sync_with_ping()\n+        with p2p_lock:\n+            assert_equal(peer.tx_getdata_count, 0)\n+        peer.peer_disconnect()\n+        peer.wait_for_disconnect()\n+\n+    def test_unrequested_tx_ibd(self):\n+        self.log.info(\"Check that nodes don't process unrequested txn while still in IBD\")\n+\n+        witness_program = CScript([OP_TRUE])\n+        witness_hash = sha256(witness_program)\n+        script_pubkey = CScript([OP_0, witness_hash])\n+\n+        unrequested_tx = CTransaction()\n+        unrequested_tx.vin.append(CTxIn(outpoint=COutPoint(uint256_from_str(b\"23c70ed7c0506e9178fc1a987f40a33946d4ad4c962b5ae3a52546da53af0c5c\"),\n+ 0)))\n+        unrequested_tx.vout.append(CTxOut(nValue=50 * COIN - 12000, scriptPubKey=script_pubkey))\n+        unrequested_tx.calc_sha256()\n+\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_tx(unrequested_tx))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r517820308",
      "id" : 517820308,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzgyMDMwOA==",
      "original_commit_id" : "51ea531ecf1b3f57041c792141fa007a82689e0d",
      "original_line" : 70,
      "original_position" : 68,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_txrelay.py",
      "position" : null,
      "pull_request_review_id" : 523956803,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/517820308",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r519499867"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519499867"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I introduced a `sync_with_ping` inside the with statement. Test is breaking as expected with new code muted. Let me know if it achieves what you intended.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-09T00:22:38Z",
      "diff_hunk" : "@@ -22,7 +49,40 @@ def set_test_params(self):\n             [\"-minrelaytxfee={}\".format(NORMAL_FEE_FILTER)],\n         ]\n \n-    def run_test(self):\n+    def test_inv_ibd(self):\n+        self.log.info(\"Check that nodes don't request txn while still in IBD\")\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_inv([CInv(t=MSG_WTX, h=0xffaa)]))\n+        # As tx-announcing connection is inbound, wait for the inbound delay applied by requester.\n+        sleep(NONPREF_PEER_TX_DELAY)\n+        peer.sync_with_ping()\n+        with p2p_lock:\n+            assert_equal(peer.tx_getdata_count, 0)\n+        peer.peer_disconnect()\n+        peer.wait_for_disconnect()\n+\n+    def test_unrequested_tx_ibd(self):\n+        self.log.info(\"Check that nodes don't process unrequested txn while still in IBD\")\n+\n+        witness_program = CScript([OP_TRUE])\n+        witness_hash = sha256(witness_program)\n+        script_pubkey = CScript([OP_0, witness_hash])\n+\n+        unrequested_tx = CTransaction()\n+        unrequested_tx.vin.append(CTxIn(outpoint=COutPoint(uint256_from_str(b\"23c70ed7c0506e9178fc1a987f40a33946d4ad4c962b5ae3a52546da53af0c5c\"),\n+ 0)))\n+        unrequested_tx.vout.append(CTxOut(nValue=50 * COIN - 12000, scriptPubKey=script_pubkey))\n+        unrequested_tx.calc_sha256()\n+\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_tx(unrequested_tx))",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r519499867",
      "id" : 519499867,
      "in_reply_to_id" : 517820308,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTQ5OTg2Nw==",
      "original_commit_id" : "51ea531ecf1b3f57041c792141fa007a82689e0d",
      "original_line" : 70,
      "original_position" : 68,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_txrelay.py",
      "position" : null,
      "pull_request_review_id" : 525863376,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/519499867",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @MarcoFalke, updated at 75b45eb.",
      "created_at" : "2020-11-09T00:23:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-723690048",
      "id" : 723690048,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDcyMzY5MDA0OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-11-10T00:01:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/723690048",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r520450520"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/520450520"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The docstring in this file could be updated. It's no longer just testing fee filters.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-10T10:23:19Z",
      "diff_hunk" : "@@ -6,8 +6,27 @@\n ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r520450520",
      "id" : 520450520,
      "line" : 9,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDQ1MDUyMA==",
      "original_commit_id" : "75b45eb0dab82bbc2e712946a36b46eefe81adf4",
      "original_line" : 9,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_txrelay.py",
      "position" : 9,
      "pull_request_review_id" : 527056971,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/520450520",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r520452215"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/520452215"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This doesn't save bandwidth since the tx is already downloaded. I think \"Do not process unrequested transactions during IBD\" is sufficient as a comment.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-10T10:25:42Z",
      "diff_hunk" : "@@ -2924,6 +2924,14 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n             return;\n         }\n \n+        // If we are in IBD, exit from unrequested transaction processing early to save bandwidth\n+        // and mitigate potential DoS risks.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r520452215",
      "id" : 520452215,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDQ1MjIxNQ==",
      "original_commit_id" : "75b45eb0dab82bbc2e712946a36b46eefe81adf4",
      "original_line" : 2928,
      "original_position" : 5,
      "original_start_line" : 2927,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 527056971,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/520452215",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r520454615"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/520454615"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The unexpected_msgs here is very specific. I understand that you're trying to check that the tx wasn't rejected by the mempool, but if the log format ever changes, then the unexpected_msgs string isn't actually testing anything, and would just be dead code. I'd suggest removing it and relying on the expected_msgs string.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-11-10T10:29:17Z",
      "diff_hunk" : "@@ -22,7 +41,36 @@ def set_test_params(self):\n             [\"-minrelaytxfee={}\".format(NORMAL_FEE_FILTER)],\n         ]\n \n-    def run_test(self):\n+    def test_inv_ibd(self):\n+        self.log.info(\"Check that nodes don't request txn while still in IBD\")\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_inv([CInv(t=MSG_WTX, h=0xffaa)]))\n+        # As tx-announcing connection is inbound, wait for the inbound delay applied by requester.\n+        sleep(NONPREF_PEER_TX_DELAY)\n+        peer.sync_with_ping()\n+        with p2p_lock:\n+            assert_equal(peer.tx_getdata_count, 0)\n+        peer.peer_disconnect()\n+        peer.wait_for_disconnect()\n+\n+    def test_unrequested_tx_ibd(self):\n+        self.log.info(\"Check that nodes don't process unrequested txn while still in IBD\")\n+\n+        unrequested_tx = CTransaction()\n+        unrequested_tx.vin.append(CTxIn())\n+\n+        unrequested_tx.vout.append(CTxOut())\n+        unrequested_tx.calc_sha256()\n+\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_tx(unrequested_tx))\n+        with self.nodes[0].assert_debug_log(expected_msgs=['unrequested transaction while in IBD from peer=2'], unexpected_msgs=['from peer=2 was not accepted: scriptpubkey']):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r520454615",
      "id" : 520454615,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDQ1NDYxNQ==",
      "original_commit_id" : "75b45eb0dab82bbc2e712946a36b46eefe81adf4",
      "original_line" : 67,
      "original_position" : 57,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_txrelay.py",
      "position" : null,
      "pull_request_review_id" : 527056971,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/520454615",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r540335434"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540335434"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes updated the docstring, lmk about the formatting by bullet point.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-12-10T16:56:58Z",
      "diff_hunk" : "@@ -6,8 +6,27 @@\n ",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r540335434",
      "id" : 540335434,
      "in_reply_to_id" : 520450520,
      "line" : 9,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDMzNTQzNA==",
      "original_commit_id" : "75b45eb0dab82bbc2e712946a36b46eefe81adf4",
      "original_line" : 9,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_txrelay.py",
      "position" : 9,
      "pull_request_review_id" : 549407088,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540335434",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r540336267"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540336267"
         }
      },
      "author_association" : "MEMBER",
      "body" : "There is a edge case where the transaction is an orphan and thus trigger further download but that's not worthy to document as bandwidth saving. Updated.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-12-10T16:57:56Z",
      "diff_hunk" : "@@ -2924,6 +2924,14 @@ void PeerManager::ProcessMessage(CNode& pfrom, const std::string& msg_type, CDat\n             return;\n         }\n \n+        // If we are in IBD, exit from unrequested transaction processing early to save bandwidth\n+        // and mitigate potential DoS risks.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r540336267",
      "id" : 540336267,
      "in_reply_to_id" : 520452215,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDMzNjI2Nw==",
      "original_commit_id" : "75b45eb0dab82bbc2e712946a36b46eefe81adf4",
      "original_line" : 2928,
      "original_position" : 5,
      "original_start_line" : 2927,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 549408058,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540336267",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r540339858"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540339858"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks for the tip, removed it. I've searched for a while for this but I don't think we have better than checking the logs to test that feeding the node with some input (an unrequested tx) is effectively rejected by the targeted code check (the new check L2928) and not by the mempool checks further down in the code path ?\r\n\r\nI'm still ramping up on our p2p functional test framework :)",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2020-12-10T17:02:30Z",
      "diff_hunk" : "@@ -22,7 +41,36 @@ def set_test_params(self):\n             [\"-minrelaytxfee={}\".format(NORMAL_FEE_FILTER)],\n         ]\n \n-    def run_test(self):\n+    def test_inv_ibd(self):\n+        self.log.info(\"Check that nodes don't request txn while still in IBD\")\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_inv([CInv(t=MSG_WTX, h=0xffaa)]))\n+        # As tx-announcing connection is inbound, wait for the inbound delay applied by requester.\n+        sleep(NONPREF_PEER_TX_DELAY)\n+        peer.sync_with_ping()\n+        with p2p_lock:\n+            assert_equal(peer.tx_getdata_count, 0)\n+        peer.peer_disconnect()\n+        peer.wait_for_disconnect()\n+\n+    def test_unrequested_tx_ibd(self):\n+        self.log.info(\"Check that nodes don't process unrequested txn while still in IBD\")\n+\n+        unrequested_tx = CTransaction()\n+        unrequested_tx.vin.append(CTxIn())\n+\n+        unrequested_tx.vout.append(CTxOut())\n+        unrequested_tx.calc_sha256()\n+\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_tx(unrequested_tx))\n+        with self.nodes[0].assert_debug_log(expected_msgs=['unrequested transaction while in IBD from peer=2'], unexpected_msgs=['from peer=2 was not accepted: scriptpubkey']):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r540339858",
      "id" : 540339858,
      "in_reply_to_id" : 520454615,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDMzOTg1OA==",
      "original_commit_id" : "75b45eb0dab82bbc2e712946a36b46eefe81adf4",
      "original_line" : 67,
      "original_position" : 57,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_txrelay.py",
      "position" : null,
      "pull_request_review_id" : 549412435,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540339858",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks @jnewbery for review, sorry for delay and updated at 0cd6088.",
      "created_at" : "2020-12-10T17:04:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-742656254",
      "id" : 742656254,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjY1NjI1NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T17:04:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742656254",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "If you want the ci to run on this, you might have to rebase on current master.\r\n\r\nEdit: Or maybe not",
      "created_at" : "2020-12-10T18:13:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-742700125",
      "id" : 742700125,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjcwMDEyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T18:37:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742700125",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@MarcoFalke Ah should I rebase on master to clean out the time out about libfuzzer+valgrind or it's cirrus-ci's VM runtime ?",
      "created_at" : "2020-12-11T16:05:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-743280511",
      "id" : 743280511,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MzI4MDUxMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-11T16:05:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/743280511",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@ariard can you try rebasing?",
      "created_at" : "2020-12-15T13:19:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-745281723",
      "id" : 745281723,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NTI4MTcyMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-15T13:19:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/745281723",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased at d893b47.",
      "created_at" : "2020-12-16T16:42:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-746606050",
      "id" : 746606050,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NjYwNjA1MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-16T16:42:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/746606050",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2020-12-16T18:02:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-746739713",
      "id" : 746739713,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NjczOTcxMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-16T18:02:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/746739713",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Do you have any thoughts on my suggestion from before, about just always ignoring unrequested transactions? https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-721819763. \r\n\r\nIt's not really clear to me why we're more concerned about this behavior during IBD than outside of IBD.",
      "created_at" : "2020-12-16T19:41:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-746899339",
      "id" : 746899339,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0Njg5OTMzOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-16T19:41:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/746899339",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs rebase!",
      "created_at" : "2020-12-17T08:14:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-747284749",
      "id" : 747284749,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0NzI4NDc0OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-17T08:14:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/747284749",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sdaftuar To answer I didn't propose to stop processing of unrequested transactions even out-of-IBD because I was worried to break bitcoin clients which don't respect the canonical tx-request sequence and thus smashing out their txn broadcast ?\r\n\r\nIf we think such clients are non-existent, extending `TxRequestTracker` with a `bool ExpectedResponse()` should be possible.",
      "created_at" : "2020-12-29T23:09:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-752271517",
      "id" : 752271517,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MjI3MTUxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-29T23:09:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/752271517",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased at 886d05d.\r\n\r\nSee IRC discussion with concerns about potentially breaking bitcoin software if we go with Suhas suggestion: http://gnusha.org/bitcoin-core-dev/2020-12-29.log  (starting at 23:10)",
      "created_at" : "2020-12-29T23:52:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-752279425",
      "id" : 752279425,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MjI3OTQyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-29T23:53:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/752279425",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : ">See IRC discussion with concerns about potentially breaking bitcoin software if we go with Suhas suggestion: http://gnusha.org/bitcoin-core-dev/2020-12-29.log (starting at 23:10)\r\n\r\nFrom that IRC conversation:\r\n\r\n> 15:24 < phantomcircuit> im also not sure the core concept of ignoring those transactions makes a lot of sense\r\n15:25 < phantomcircuit> messages from peers are handled round robin so the worst an attacker can do is add latency and make one core run at 100%\r\n\r\nYes, an attacker can add latency -- a substantial amount, for free, by maintaining multiple inbound connections to a listening node and sending expensive to validate transactions that are not accepted to the mempool (eg for policy failures during script validation).  The last time I looked at this, it seemed like spending on the order of 1 second (on my modern workstation) to validate a transaction that would ultimately fail mempool acceptance was easily achievable; multiply that by the number of inbound connections we allow and you get a pretty bad state of affairs...\r\n\r\nBy requiring an INV/getdata sequence before processing, we would be able to deprioritize announcements from peers that are DoSing us in this way.  A first step to that is establishing that processing unrequested transactions is not a required or expected behavior on the network.\r\n\r\n> 15:42 < sipa> i'm not so much worried about such clients on the public network (we'd know, or at least be able to add monitoring for that to figure out), but there could be software communicating locally with bitcoin core (things like joinmarket, lightning clients, indexers, ...), for which we wouldn't really know\r\n15:43 < sipa> of course, perhaps one generally sets PF_RELAY for those or so\r\n\r\nAgreed that PF_RELAY could be used to bypass what I'm suggesting.\r\n",
      "created_at" : "2021-01-05T13:39:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-754642226",
      "id" : 754642226,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1NDY0MjIyNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-05T13:39:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/754642226",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-01-11T21:32:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-758238692",
      "id" : 758238692,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1ODIzODY5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-11T21:32:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/758238692",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r572935450"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572935450"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think light clients can set the flag on the server they connect to. So this will break any such clients that opted to send txs directly. I know that there is no BIP (for obvious reasons) that explains how transaction relay should work, but I'd be cautious breaking a relay mechanism that some software relies on because it has been working in the past. At the very least this breaking change should be communicated to the mailing list.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2021-02-09T14:36:04Z",
      "diff_hunk" : "@@ -61,6 +61,14 @@ Notable changes\n P2P and network changes\n -----------------------\n \n+- This release changes the behavior around processing of unrequested transactions.\n+  Previously, a transaction message was always submitted for processing, even if a\n+  getdata for this identifier have not been previously issued. Henceforth, such\n+  unrequested transaction will be rejected without any processing to mitigate about\n+  DoS risks. Bitcoin clients on the network relying on unannounced transaction broadcast\n+  should adapt their tx-relay to the compliant tx-request sequence. Peers might be\n+  authorized to bypass this check with the PF_RELAY permission. (#20277)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r572935450",
      "id" : 572935450,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjkzNTQ1MA==",
      "original_commit_id" : "94153eb67f1a10a7cefd06f9f0ad9f2692e54645",
      "original_line" : 70,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 586612123,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572935450",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r572999407"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572999407"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I agree on the mailing list communication. By the way, my concern about breaking tx-broadcast capabilities of such clients was one of the reason for all the back-and-forth on this PR. I expect those clients to be connected to at least few different peers and among them you can assume a subset will be prior versions still supporting processing of unrequested transactions. I would say deployment time give them a window of adaptation.\r\n\r\nThat said, do you think I should announce on the mailing list now, even before this PR gets merged or only after ?",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2021-02-09T15:46:22Z",
      "diff_hunk" : "@@ -61,6 +61,14 @@ Notable changes\n P2P and network changes\n -----------------------\n \n+- This release changes the behavior around processing of unrequested transactions.\n+  Previously, a transaction message was always submitted for processing, even if a\n+  getdata for this identifier have not been previously issued. Henceforth, such\n+  unrequested transaction will be rejected without any processing to mitigate about\n+  DoS risks. Bitcoin clients on the network relying on unannounced transaction broadcast\n+  should adapt their tx-relay to the compliant tx-request sequence. Peers might be\n+  authorized to bypass this check with the PF_RELAY permission. (#20277)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r572999407",
      "id" : 572999407,
      "in_reply_to_id" : 572935450,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3Mjk5OTQwNw==",
      "original_commit_id" : "94153eb67f1a10a7cefd06f9f0ad9f2692e54645",
      "original_line" : 70,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 586694040,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572999407",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r573001651"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573001651"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Thanks for taking the suggestion -- I think it would make sense to mention on the mailing list now that this is a proposed behavior change for Bitcoin Core, so that if others have feedback on whether this is breaking they can speak up.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2021-02-09T15:48:47Z",
      "diff_hunk" : "@@ -61,6 +61,14 @@ Notable changes\n P2P and network changes\n -----------------------\n \n+- This release changes the behavior around processing of unrequested transactions.\n+  Previously, a transaction message was always submitted for processing, even if a\n+  getdata for this identifier have not been previously issued. Henceforth, such\n+  unrequested transaction will be rejected without any processing to mitigate about\n+  DoS risks. Bitcoin clients on the network relying on unannounced transaction broadcast\n+  should adapt their tx-relay to the compliant tx-request sequence. Peers might be\n+  authorized to bypass this check with the PF_RELAY permission. (#20277)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r573001651",
      "id" : 573001651,
      "in_reply_to_id" : 572935450,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MzAwMTY1MQ==",
      "original_commit_id" : "94153eb67f1a10a7cefd06f9f0ad9f2692e54645",
      "original_line" : 70,
      "original_position" : 10,
      "original_start_line" : null,
      "path" : "doc/release-notes.md",
      "position" : null,
      "pull_request_review_id" : 586697048,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573001651",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "See mailing list thread, moving this PR as draft until I gather feedback on this proposal, or at least no one speaks up.",
      "created_at" : "2021-02-10T13:16:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-776698614",
      "id" : 776698614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3NjY5ODYxNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-10T13:16:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776698614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "As a minor procedural point, I think it would have been better to open a new PR for the current branch. This PR has now been through three significantly different iterations, and it's impossible to tell which versions the review comments/ACKs are referring to.",
      "created_at" : "2021-02-16T10:38:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-779749154",
      "id" : 779749154,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc3OTc0OTE1NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-16T10:38:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/779749154",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r577470350"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/577470350"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Seems that `assert_equal(len(self.nodes[0].getrawmempool()), 0)` isn't really doing anything since the tx being used is always invalid so we don't ever expect it to be accepted to the mempool.\r\n\r\nSuggest using a valid tx instead and then testing the changes to the mempool directly (count=0 if tx msg is received before being requested and count=1 if tx msg is received after tx is requested) instead of doing an implicit check via the logs using `assert_debug_log`.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2021-02-17T09:51:55Z",
      "diff_hunk" : "@@ -241,6 +244,35 @@ def test_spurious_notfound(self):\n         self.log.info('Check that spurious notfound is ignored')\n         self.nodes[0].p2ps[0].send_message(msg_notfound(vec=[CInv(MSG_TX, 1)]))\n \n+    def test_unrequested_tx(self):\n+        self.log.info(\"Check that nodes don't process unrequested txn\")\n+        self.restart_node(0)\n+\n+        unrequested_tx = CTransaction()\n+        unrequested_tx.vin.append(CTxIn())\n+\n+        unrequested_tx.vout.append(CTxOut())\n+        unrequested_tx.calc_sha256()\n+\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_tx(unrequested_tx))\n+        with self.nodes[0].assert_debug_log(expected_msgs=['unrequested transaction from peer=0']):\n+            peer.sync_with_ping()\n+            assert_equal(len(self.nodes[0].getrawmempool()), 0)\n+        peer.peer_disconnect()\n+        peer.wait_for_disconnect()\n+\n+        self.log.info(\"Check that nodes process unrequested txn with relay permission \")\n+        self.restart_node(0, extra_args=['-whitelist=relay@127.0.0.1'])\n+\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_tx(unrequested_tx))\n+        with self.nodes[0].assert_debug_log(expected_msgs=['from peer=0 was not accepted: scriptpubkey']):\n+            peer.sync_with_ping()\n+            assert_equal(len(self.nodes[0].getrawmempool()), 0)\n+        peer.peer_disconnect()\n+        peer.wait_for_disconnect()\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r577470350",
      "id" : 577470350,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NzQ3MDM1MA==",
      "original_commit_id" : "b4622347ae4cd8f4739fd454b0bceb6146a0e02d",
      "original_line" : 275,
      "original_position" : 47,
      "original_start_line" : 247,
      "path" : "test/functional/p2p_tx_download.py",
      "position" : null,
      "pull_request_review_id" : 592013021,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/577470350",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25280249?v=4",
         "events_url" : "https://api.github.com/users/ellemouton/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ellemouton/followers",
         "following_url" : "https://api.github.com/users/ellemouton/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ellemouton/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ellemouton",
         "id" : 25280249,
         "login" : "ellemouton",
         "node_id" : "MDQ6VXNlcjI1MjgwMjQ5",
         "organizations_url" : "https://api.github.com/users/ellemouton/orgs",
         "received_events_url" : "https://api.github.com/users/ellemouton/received_events",
         "repos_url" : "https://api.github.com/users/ellemouton/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ellemouton/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ellemouton/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ellemouton"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jnewbery Agree, I've a new branch handling the parent-orphan fetching case and fixing all the tests. Going to open it soon and leave test coverage tx-requester extension here.\r\n",
      "created_at" : "2021-02-17T17:05:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-780704619",
      "id" : 780704619,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4MDcwNDYxOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-17T17:05:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/780704619",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This PR has been restrained to the lightweight test coverage extension. The halting of unrequested transaction processing has been moved in its own one. See #21224 ",
      "created_at" : "2021-02-18T14:17:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-781374389",
      "id" : 781374389,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc4MTM3NDM4OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-02-18T14:17:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/781374389",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r578454531"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/578454531"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Could speed this up? I think txrequest works with mocktime, too",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2021-02-18T14:20:01Z",
      "diff_hunk" : "@@ -22,7 +40,19 @@ def set_test_params(self):\n             [\"-minrelaytxfee={}\".format(NORMAL_FEE_FILTER)],\n         ]\n \n-    def run_test(self):\n+    def test_inv_ibd(self):\n+        self.log.info(\"Check that nodes don't request txn while still in IBD\")\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_inv([CInv(t=MSG_WTX, h=0xffaa)]))\n+        # As tx-announcing connection is inbound, wait for the inbound delay applied by requester.\n+        sleep(NONPREF_PEER_TX_DELAY)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r578454531",
      "id" : 578454531,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3ODQ1NDUzMQ==",
      "original_commit_id" : "8d7d5dc2953c5e09cb2af94e12cffb97ec22f3ad",
      "original_line" : 48,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_txrelay.py",
      "position" : null,
      "pull_request_review_id" : 593261873,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/578454531",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r578456847"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/578456847"
         }
      },
      "author_association" : "MEMBER",
      "body" : "That's a good suggestion. Initially I was using valid transactions to feed the node and changed it after this [comment](https://github.com/bitcoin/bitcoin/pull/20277#discussion_r517819829). I guess the `getrawmempool` is a leftover. Will remove it on #21224.\r\n\r\nI think it's still fine to use invalid transactions as the behavior under check is \"Does this transaction reach mempool acceptance ?\", which is probed through the `assert_debug_log`. \"Is this transaction mempool-valid ?\" is already a distinct checked behavior, of which we're not interested here ?",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2021-02-18T14:23:01Z",
      "diff_hunk" : "@@ -241,6 +244,35 @@ def test_spurious_notfound(self):\n         self.log.info('Check that spurious notfound is ignored')\n         self.nodes[0].p2ps[0].send_message(msg_notfound(vec=[CInv(MSG_TX, 1)]))\n \n+    def test_unrequested_tx(self):\n+        self.log.info(\"Check that nodes don't process unrequested txn\")\n+        self.restart_node(0)\n+\n+        unrequested_tx = CTransaction()\n+        unrequested_tx.vin.append(CTxIn())\n+\n+        unrequested_tx.vout.append(CTxOut())\n+        unrequested_tx.calc_sha256()\n+\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_tx(unrequested_tx))\n+        with self.nodes[0].assert_debug_log(expected_msgs=['unrequested transaction from peer=0']):\n+            peer.sync_with_ping()\n+            assert_equal(len(self.nodes[0].getrawmempool()), 0)\n+        peer.peer_disconnect()\n+        peer.wait_for_disconnect()\n+\n+        self.log.info(\"Check that nodes process unrequested txn with relay permission \")\n+        self.restart_node(0, extra_args=['-whitelist=relay@127.0.0.1'])\n+\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_tx(unrequested_tx))\n+        with self.nodes[0].assert_debug_log(expected_msgs=['from peer=0 was not accepted: scriptpubkey']):\n+            peer.sync_with_ping()\n+            assert_equal(len(self.nodes[0].getrawmempool()), 0)\n+        peer.peer_disconnect()\n+        peer.wait_for_disconnect()\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r578456847",
      "id" : 578456847,
      "in_reply_to_id" : 577470350,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3ODQ1Njg0Nw==",
      "original_commit_id" : "b4622347ae4cd8f4739fd454b0bceb6146a0e02d",
      "original_line" : 275,
      "original_position" : 47,
      "original_start_line" : 247,
      "path" : "test/functional/p2p_tx_download.py",
      "position" : null,
      "pull_request_review_id" : 593265094,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-02-23T15:16:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/578456847",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r581124518"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581124518"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Yes I can confirm txrequests works with mocktime. Updated with your suggestion.",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2021-02-23T15:17:07Z",
      "diff_hunk" : "@@ -22,7 +40,19 @@ def set_test_params(self):\n             [\"-minrelaytxfee={}\".format(NORMAL_FEE_FILTER)],\n         ]\n \n-    def run_test(self):\n+    def test_inv_ibd(self):\n+        self.log.info(\"Check that nodes don't request txn while still in IBD\")\n+        peer = self.nodes[0].add_p2p_connection(P2PInterface())\n+        peer.send_message(msg_inv([CInv(t=MSG_WTX, h=0xffaa)]))\n+        # As tx-announcing connection is inbound, wait for the inbound delay applied by requester.\n+        sleep(NONPREF_PEER_TX_DELAY)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r581124518",
      "id" : 581124518,
      "in_reply_to_id" : 578454531,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTEyNDUxOA==",
      "original_commit_id" : "8d7d5dc2953c5e09cb2af94e12cffb97ec22f3ad",
      "original_line" : 48,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_txrelay.py",
      "position" : null,
      "pull_request_review_id" : 596450772,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-23T15:17:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/581124518",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23310655?v=4",
         "events_url" : "https://api.github.com/users/ariard/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ariard/followers",
         "following_url" : "https://api.github.com/users/ariard/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ariard/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ariard",
         "id" : 23310655,
         "login" : "ariard",
         "node_id" : "MDQ6VXNlcjIzMzEwNjU1",
         "organizations_url" : "https://api.github.com/users/ariard/orgs",
         "received_events_url" : "https://api.github.com/users/ariard/received_events",
         "repos_url" : "https://api.github.com/users/ariard/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ariard/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ariard/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ariard"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK ec04fa50c703e726f2315195892d22c4486bf31a\r\n\r\nThe test makes sense. I'd say it's gonna be easier to get this merged if you open a separate clean PR. As someone who looked at it for the first time, I found it distracting going through all irrelevant legacy comments.",
      "created_at" : "2021-09-28T08:27:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-928971722",
      "id" : 928971722,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "IC_kwDOABII5843XvvK",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-28T08:27:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/928971722",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7975071?v=4",
         "events_url" : "https://api.github.com/users/naumenkogs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/naumenkogs/followers",
         "following_url" : "https://api.github.com/users/naumenkogs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/naumenkogs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/naumenkogs",
         "id" : 7975071,
         "login" : "naumenkogs",
         "node_id" : "MDQ6VXNlcjc5NzUwNzE=",
         "organizations_url" : "https://api.github.com/users/naumenkogs/orgs",
         "received_events_url" : "https://api.github.com/users/naumenkogs/received_events",
         "repos_url" : "https://api.github.com/users/naumenkogs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/naumenkogs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/naumenkogs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/naumenkogs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r717626252"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717626252"
         }
      },
      "author_association" : "MEMBER",
      "body" : "5b2ab873f7c793ea8ce871260b35 With this change can remove these lines?\r\n```diff\r\n--- a/test/functional/p2p_tx_download.py\r\n+++ b/test/functional/p2p_tx_download.py\r\n@@ -117,9 +117,6 @@ class TxDownloadTest(BitcoinTestFramework):\r\n \r\n         p = self.nodes[0].p2ps[0]\r\n \r\n-        with p2p_lock:\r\n-            p.tx_getdata_count = 0\r\n-\r\n         mock_time = int(time.time() + 1)\r\n```\r\n",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2021-09-28T14:17:24Z",
      "diff_hunk" : "@@ -324,6 +327,9 @@ def __init__(self, support_addrv2=False, wtxidrelay=True):\n         # If the peer supports wtxid-relay\n         self.wtxidrelay = wtxidrelay\n \n+        # Getdata counter for tx-relay related tests\n+        self.tx_getdata_count = 0",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r717626252",
      "id" : 717626252,
      "line" : 331,
      "node_id" : "PRRC_kwDOABII584qxhuM",
      "original_commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "original_line" : 331,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "test/functional/test_framework/p2p.py",
      "position" : 15,
      "pull_request_review_id" : 765513489,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-28T14:37:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717626252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r717644017"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717644017"
         }
      },
      "author_association" : "MEMBER",
      "body" : "- Would it make sense for this new test to be in `p2p_tx_download.py` where we have similar testing?\r\n- Perhaps also test that `tx_getdata_count` is/can be greater than zero once out of IBD?\r\n\r\nA few PEP8 suggestions and (maybe, IIUC) a clarifying constant:\r\n```diff\r\n--- a/test/functional/p2p_ibd_txrelay.py\r\n+++ b/test/functional/p2p_ibd_txrelay.py\r\n@@ -8,6 +8,7 @@\r\n \"\"\" \r\n from decimal import Decimal\r\n+import time\r\n \r\n@@ -25,10 +26,10 @@ from test_framework.util import (\r\n-import time\r\n \r\n MAX_FEE_FILTER = Decimal(9170997) / COIN\r\n NORMAL_FEE_FILTER = Decimal(100) / COIN\r\n+WTXID = 0xffaa\r\n \r\n@@ -43,7 +44,7 @@ class P2PIBDTxRelayTest(BitcoinTestFramework):\r\n         peer = self.nodes[0].add_p2p_connection(P2PInterface())\r\n-        peer.send_message(msg_inv([CInv(t=MSG_WTX, h=0xffaa)]))\r\n+        peer.send_message(msg_inv([CInv(t=MSG_WTX, h=WTXID)]))\r\n\r\n@@ -73,5 +74,6 @@ class P2PIBDTxRelayTest(BitcoinTestFramework):\r\n         self.test_feefilter_ibd()\r\n \r\n+\r\n if __name__ == '__main__':\r\n```\r\n```diff\r\n--- a/test/functional/test_framework/p2p.py\r\n+++ b/test/functional/test_framework/p2p.py\r\n@@ -122,7 +122,7 @@ MAGIC_BYTES = {\r\n \r\n # Constants from net_processing\r\n NONPREF_PEER_TX_DELAY = 2  # seconds\r\n-TXID_RELAY_DELAY = 2 # seconds\r\n+TXID_RELAY_DELAY = 2  # seconds\r\n```\r\n",
      "commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "created_at" : "2021-09-28T14:33:47Z",
      "diff_hunk" : "@@ -37,6 +69,9 @@ def run_test(self):\n             assert not node.getblockchaininfo()['initialblockdownload']\n             self.wait_until(lambda: all(peer['minfeefilter'] == NORMAL_FEE_FILTER for peer in node.getpeerinfo()))\n \n+    def run_test(self):\n+        self.test_inv_ibd()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#discussion_r717644017",
      "id" : 717644017,
      "line" : 73,
      "node_id" : "PRRC_kwDOABII584qxmDx",
      "original_commit_id" : "ec04fa50c703e726f2315195892d22c4486bf31a",
      "original_line" : 73,
      "original_position" : 61,
      "original_start_line" : null,
      "path" : "test/functional/p2p_ibd_txrelay.py",
      "position" : 61,
      "pull_request_review_id" : 765513489,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20277",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-28T14:37:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/717644017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-11-30T19:32:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-982952698",
      "id" : 982952698,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "IC_kwDOABII5846lqr6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/982952698/reactions"
      },
      "updated_at" : "2021-11-30T19:32:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/982952698",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--13523179cfe9479db18ec6c5d236f789-->There hasn't been much activity lately and the patch still needs rebase. What is the status here?\n\n* Is it still relevant? â¡ï¸ Please solve the conflicts to make it ready for review and to ensure the CI passes.\n* Is it no longer relevant? â¡ï¸ Please close.\n* Did the author lose interest or time to work on this? â¡ï¸ Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\n",
      "created_at" : "2022-03-21T13:07:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-1073871788",
      "id" : 1073871788,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "IC_kwDOABII585AAfus",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1073871788/reactions"
      },
      "updated_at" : "2022-03-21T13:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1073871788",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@jnewbery @mzumsande @naumenkogs you might be interested in re-opening / following up with this change?",
      "created_at" : "2022-04-26T12:27:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20277#issuecomment-1109733848",
      "id" : 1109733848,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20277",
      "node_id" : "IC_kwDOABII585CJTHY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109733848/reactions"
      },
      "updated_at" : "2022-04-26T12:27:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1109733848",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
