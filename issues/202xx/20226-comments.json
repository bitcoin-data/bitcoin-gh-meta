[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r526998321"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/526998321"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should we consider returning inferred descriptors for older wallets?",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2020-11-19T15:55:22Z",
      "diff_hunk" : "@@ -1737,3 +1737,69 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a wallet.\",\n+        {},\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"Response is an array of descriptor objects\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\", {\n+                    {RPCResult::Type::STR, \"desc\", \"Descriptor string representation\"},\n+                    {RPCResult::Type::NUM, \"timestamp\", \"The creation time of the descriptor\"},\n+                    {RPCResult::Type::BOOL, \"active\", \"Activeness flag\"},\n+                    {RPCResult::Type::BOOL, \"internal\", true, \"Whether this is internal or external descriptor; defined only for active descriptors\"},\n+                    {RPCResult::Type::ARR_FIXED, \"range\", true, \"Defined only for ranged descriptors\", {\n+                        {RPCResult::Type::NUM, \"\", \"Range start inclusive\"},\n+                        {RPCResult::Type::NUM, \"\", \"Range end inclusive\"},\n+                    }},\n+                    {RPCResult::Type::NUM, \"next\", true, \"The next index to generate addresses from; defined only for ranged descriptors\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"listdescriptors\", \"\") + HelpExampleRpc(\"listdescriptors\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    if (!wallet) return NullUniValue;\n+\n+    if (!wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"listdescriptors is not available for non-descriptor wallets\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r526998321",
      "id" : 526998321,
      "line" : 1775,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjk5ODMyMQ==",
      "original_commit_id" : "ac17caba76f3e62f1a8c82e88b49a0057c513754",
      "original_line" : 1775,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 36,
      "pull_request_review_id" : 534591829,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/526998321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r526998777"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/526998777"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Probably should check the opposite and throw, rather than ignore?\r\n\r\n(Brings the indentation level down in the normal scenario too)",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2020-11-19T15:55:52Z",
      "diff_hunk" : "@@ -1737,3 +1737,69 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a wallet.\",\n+        {},\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"Response is an array of descriptor objects\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\", {\n+                    {RPCResult::Type::STR, \"desc\", \"Descriptor string representation\"},\n+                    {RPCResult::Type::NUM, \"timestamp\", \"The creation time of the descriptor\"},\n+                    {RPCResult::Type::BOOL, \"active\", \"Activeness flag\"},\n+                    {RPCResult::Type::BOOL, \"internal\", true, \"Whether this is internal or external descriptor; defined only for active descriptors\"},\n+                    {RPCResult::Type::ARR_FIXED, \"range\", true, \"Defined only for ranged descriptors\", {\n+                        {RPCResult::Type::NUM, \"\", \"Range start inclusive\"},\n+                        {RPCResult::Type::NUM, \"\", \"Range end inclusive\"},\n+                    }},\n+                    {RPCResult::Type::NUM, \"next\", true, \"The next index to generate addresses from; defined only for ranged descriptors\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"listdescriptors\", \"\") + HelpExampleRpc(\"listdescriptors\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    if (!wallet) return NullUniValue;\n+\n+    if (!wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"listdescriptors is not available for non-descriptor wallets\");\n+    }\n+\n+    UniValue response(UniValue::VARR);\n+    auto active_spk_mans = wallet->GetActiveScriptPubKeyMans();\n+    for (const auto &spk_man : wallet->GetAllScriptPubKeyMans()) {\n+        auto desc_spk_man = dynamic_cast<DescriptorScriptPubKeyMan*>(spk_man);\n+        if (desc_spk_man) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r526998777",
      "id" : 526998777,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjk5ODc3Nw==",
      "original_commit_id" : "ac17caba76f3e62f1a8c82e88b49a0057c513754",
      "original_line" : 1779,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 534591829,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/526998777",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r526999333"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/526999333"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should document whatever behaviour we end up with for non-descriptor wallets.",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2020-11-19T15:56:35Z",
      "diff_hunk" : "@@ -1737,3 +1737,69 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a wallet.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r526999333",
      "id" : 526999333,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjk5OTMzMw==",
      "original_commit_id" : "ac17caba76f3e62f1a8c82e88b49a0057c513754",
      "original_line" : 1745,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 534591829,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/526999333",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #20892 (tests: Run both descriptor and legacy tests within a single test invocation by achow101)\n* #20012 (rpc: Remove duplicate name and argNames from CRPCCommand by MarcoFalke)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-11-19T18:31:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-730558681",
      "id" : 730558681,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDczMDU1ODY4MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-26T04:46:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/730558681",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r535044306"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/535044306"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks for suggestion. Updated",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2020-12-03T10:06:48Z",
      "diff_hunk" : "@@ -1737,3 +1737,69 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a wallet.\",\n+        {},\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"Response is an array of descriptor objects\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\", {\n+                    {RPCResult::Type::STR, \"desc\", \"Descriptor string representation\"},\n+                    {RPCResult::Type::NUM, \"timestamp\", \"The creation time of the descriptor\"},\n+                    {RPCResult::Type::BOOL, \"active\", \"Activeness flag\"},\n+                    {RPCResult::Type::BOOL, \"internal\", true, \"Whether this is internal or external descriptor; defined only for active descriptors\"},\n+                    {RPCResult::Type::ARR_FIXED, \"range\", true, \"Defined only for ranged descriptors\", {\n+                        {RPCResult::Type::NUM, \"\", \"Range start inclusive\"},\n+                        {RPCResult::Type::NUM, \"\", \"Range end inclusive\"},\n+                    }},\n+                    {RPCResult::Type::NUM, \"next\", true, \"The next index to generate addresses from; defined only for ranged descriptors\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"listdescriptors\", \"\") + HelpExampleRpc(\"listdescriptors\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    if (!wallet) return NullUniValue;\n+\n+    if (!wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"listdescriptors is not available for non-descriptor wallets\");\n+    }\n+\n+    UniValue response(UniValue::VARR);\n+    auto active_spk_mans = wallet->GetActiveScriptPubKeyMans();\n+    for (const auto &spk_man : wallet->GetAllScriptPubKeyMans()) {\n+        auto desc_spk_man = dynamic_cast<DescriptorScriptPubKeyMan*>(spk_man);\n+        if (desc_spk_man) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r535044306",
      "id" : 535044306,
      "in_reply_to_id" : 526998777,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTA0NDMwNg==",
      "original_commit_id" : "ac17caba76f3e62f1a8c82e88b49a0057c513754",
      "original_line" : 1779,
      "original_position" : 43,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 543793483,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/535044306",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r535050621"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/535050621"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it's better UX if we keep descriptors RPC separate and don't do any magic under the hood which could confuse user. From what I see the current approach is to allow users manually and explicitly convert their wallet to descriptors with separate command/rpc call.\r\n\r\nEdit: I looked at `migratewallet` rpc and it's complicated to infer a descriptor for legacy wallets. Another reason to not do it here.",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2020-12-03T10:12:45Z",
      "diff_hunk" : "@@ -1737,3 +1737,69 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a wallet.\",\n+        {},\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"Response is an array of descriptor objects\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\", {\n+                    {RPCResult::Type::STR, \"desc\", \"Descriptor string representation\"},\n+                    {RPCResult::Type::NUM, \"timestamp\", \"The creation time of the descriptor\"},\n+                    {RPCResult::Type::BOOL, \"active\", \"Activeness flag\"},\n+                    {RPCResult::Type::BOOL, \"internal\", true, \"Whether this is internal or external descriptor; defined only for active descriptors\"},\n+                    {RPCResult::Type::ARR_FIXED, \"range\", true, \"Defined only for ranged descriptors\", {\n+                        {RPCResult::Type::NUM, \"\", \"Range start inclusive\"},\n+                        {RPCResult::Type::NUM, \"\", \"Range end inclusive\"},\n+                    }},\n+                    {RPCResult::Type::NUM, \"next\", true, \"The next index to generate addresses from; defined only for ranged descriptors\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"listdescriptors\", \"\") + HelpExampleRpc(\"listdescriptors\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    if (!wallet) return NullUniValue;\n+\n+    if (!wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"listdescriptors is not available for non-descriptor wallets\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r535050621",
      "id" : 535050621,
      "in_reply_to_id" : 526998321,
      "line" : 1775,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTA1MDYyMQ==",
      "original_commit_id" : "ac17caba76f3e62f1a8c82e88b49a0057c513754",
      "original_line" : 1775,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 36,
      "pull_request_review_id" : 543798576,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/535050621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r535051443"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/535051443"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "For me it's kind of obvious and the error is clear. What do others think?",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2020-12-03T10:13:33Z",
      "diff_hunk" : "@@ -1737,3 +1737,69 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a wallet.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r535051443",
      "id" : 535051443,
      "in_reply_to_id" : 526999333,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTA1MTQ0Mw==",
      "original_commit_id" : "ac17caba76f3e62f1a8c82e88b49a0057c513754",
      "original_line" : 1745,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 543799242,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/535051443",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r536817183"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/536817183"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I also think it's fine as it is although it doesn't hurt to add it. Or you could phrase like `List descriptors imported into a descriptor enabled wallet.`.",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2020-12-05T16:22:17Z",
      "diff_hunk" : "@@ -1737,3 +1737,69 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a wallet.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r536817183",
      "id" : 536817183,
      "in_reply_to_id" : 526999333,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjgxNzE4Mw==",
      "original_commit_id" : "ac17caba76f3e62f1a8c82e88b49a0057c513754",
      "original_line" : 1745,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 545598764,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/536817183",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r540151613"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540151613"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Thanks. I've taken your suggestion and updated the description.",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2020-12-10T13:03:43Z",
      "diff_hunk" : "@@ -1737,3 +1737,69 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a wallet.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r540151613",
      "id" : 540151613,
      "in_reply_to_id" : 526999333,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDE1MTYxMw==",
      "original_commit_id" : "ac17caba76f3e62f1a8c82e88b49a0057c513754",
      "original_line" : 1745,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 549174032,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/540151613",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@promag For now I updated the code to acquire `cs_wallet` which seems reasonable and I don't see better alternatives anyway.",
      "created_at" : "2020-12-10T13:09:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-742510959",
      "id" : 742510959,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc0MjUxMDk1OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-10T13:09:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/742510959",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Locking `cs_wallet` should be sufficient.\r\n\r\nConcept ACK.\r\n\r\nCan you add some tests for this?",
      "created_at" : "2020-12-24T18:37:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-750942829",
      "id" : 750942829,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MDk0MjgyOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-12-24T18:37:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/750942829",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r548693504"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/548693504"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree that this should only be available for descriptor wallets.",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2020-12-24T18:46:00Z",
      "diff_hunk" : "@@ -1737,3 +1737,69 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a wallet.\",\n+        {},\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"Response is an array of descriptor objects\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\", {\n+                    {RPCResult::Type::STR, \"desc\", \"Descriptor string representation\"},\n+                    {RPCResult::Type::NUM, \"timestamp\", \"The creation time of the descriptor\"},\n+                    {RPCResult::Type::BOOL, \"active\", \"Activeness flag\"},\n+                    {RPCResult::Type::BOOL, \"internal\", true, \"Whether this is internal or external descriptor; defined only for active descriptors\"},\n+                    {RPCResult::Type::ARR_FIXED, \"range\", true, \"Defined only for ranged descriptors\", {\n+                        {RPCResult::Type::NUM, \"\", \"Range start inclusive\"},\n+                        {RPCResult::Type::NUM, \"\", \"Range end inclusive\"},\n+                    }},\n+                    {RPCResult::Type::NUM, \"next\", true, \"The next index to generate addresses from; defined only for ranged descriptors\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"listdescriptors\", \"\") + HelpExampleRpc(\"listdescriptors\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    if (!wallet) return NullUniValue;\n+\n+    if (!wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"listdescriptors is not available for non-descriptor wallets\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r548693504",
      "id" : 548693504,
      "in_reply_to_id" : 526998321,
      "line" : 1775,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODY5MzUwNA==",
      "original_commit_id" : "ac17caba76f3e62f1a8c82e88b49a0057c513754",
      "original_line" : 1775,
      "original_position" : 36,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 36,
      "pull_request_review_id" : 558701919,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/548693504",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2021-01-01T15:37:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-753330422",
      "id" : 753330422,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc1MzMzMDQyMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-01T15:37:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/753330422",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2021-01-15T19:08:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-761131088",
      "id" : 761131088,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2MTEzMTA4OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-15T19:08:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/761131088",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Added functional test",
      "created_at" : "2021-01-21T09:06:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-764490033",
      "id" : 764490033,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2NDQ5MDAzMw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-21T09:06:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/764490033",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r562207841"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562207841"
         }
      },
      "author_association" : "MEMBER",
      "body" : "linter isn't liking this:\r\n`test/functional/wallet_listdescriptors.py:47:20: F632 use ==/!= to compare constant literals (str, bytes, int, float, tuple)`",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2021-01-21T21:27:04Z",
      "diff_hunk" : "@@ -0,0 +1,66 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the listdescriptors RPC.\"\"\"\n+\n+from test_framework.descriptors import (\n+    descsum_create\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+\n+\n+class ReceivedByTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    # do not create any wallet by default\n+    def init_wallet(self, i):\n+        return\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        assert_raises_rpc_error(-18, 'No wallet is loaded.', node.listdescriptors)\n+\n+        self.log.info('Test that the command is not available for legacy wallets.')\n+        node.createwallet(wallet_name='w1', descriptors=False)\n+        assert_raises_rpc_error(-4, 'listdescriptors is not available for non-descriptor wallets', node.listdescriptors)\n+\n+        self.log.info('Test the command for empty descriptors wallet.')\n+        node.createwallet(wallet_name='w2', blank=True)\n+        assert_equal(0, len(node.get_wallet_rpc('w2').listdescriptors()))\n+\n+        self.log.info('Test the command for a default descriptors wallet.')\n+        node.createwallet(wallet_name='w3')\n+        result = node.get_wallet_rpc('w3').listdescriptors()\n+        assert_equal(6, len(result))\n+        assert_equal(6, len([d for d in result if d['active']]))\n+        assert_equal(3, len([d for d in result if d['internal']]))\n+        for item in result:\n+            assert item['desc'] is not ''",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r562207841",
      "id" : 562207841,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MjIwNzg0MQ==",
      "original_commit_id" : "425403c430618efdd57019396ef0a05ab0e09387",
      "original_line" : 47,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listdescriptors.py",
      "position" : null,
      "pull_request_review_id" : 573749592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/562207841",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/755825?v=4",
         "events_url" : "https://api.github.com/users/adamjonas/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adamjonas/followers",
         "following_url" : "https://api.github.com/users/adamjonas/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adamjonas/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adamjonas",
         "id" : 755825,
         "login" : "adamjonas",
         "node_id" : "MDQ6VXNlcjc1NTgyNQ==",
         "organizations_url" : "https://api.github.com/users/adamjonas/orgs",
         "received_events_url" : "https://api.github.com/users/adamjonas/received_events",
         "repos_url" : "https://api.github.com/users/adamjonas/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adamjonas/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adamjonas/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adamjonas"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r563549842"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563549842"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "fixed",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2021-01-25T08:51:03Z",
      "diff_hunk" : "@@ -0,0 +1,66 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the listdescriptors RPC.\"\"\"\n+\n+from test_framework.descriptors import (\n+    descsum_create\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+\n+\n+class ReceivedByTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()\n+\n+    # do not create any wallet by default\n+    def init_wallet(self, i):\n+        return\n+\n+    def run_test(self):\n+        node = self.nodes[0]\n+        assert_raises_rpc_error(-18, 'No wallet is loaded.', node.listdescriptors)\n+\n+        self.log.info('Test that the command is not available for legacy wallets.')\n+        node.createwallet(wallet_name='w1', descriptors=False)\n+        assert_raises_rpc_error(-4, 'listdescriptors is not available for non-descriptor wallets', node.listdescriptors)\n+\n+        self.log.info('Test the command for empty descriptors wallet.')\n+        node.createwallet(wallet_name='w2', blank=True)\n+        assert_equal(0, len(node.get_wallet_rpc('w2').listdescriptors()))\n+\n+        self.log.info('Test the command for a default descriptors wallet.')\n+        node.createwallet(wallet_name='w3')\n+        result = node.get_wallet_rpc('w3').listdescriptors()\n+        assert_equal(6, len(result))\n+        assert_equal(6, len([d for d in result if d['active']]))\n+        assert_equal(3, len([d for d in result if d['internal']]))\n+        for item in result:\n+            assert item['desc'] is not ''",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r563549842",
      "id" : 563549842,
      "in_reply_to_id" : 562207841,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MzU0OTg0Mg==",
      "original_commit_id" : "425403c430618efdd57019396ef0a05ab0e09387",
      "original_line" : 47,
      "original_position" : 47,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listdescriptors.py",
      "position" : null,
      "pull_request_review_id" : 575174391,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/563549842",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@luke-jr interesting point, thanks. I took a different approach which is more consistent with other descriptor specific tests. I made the test work regardless of whether `--descriptors` is set.\r\n\r\n@achow101 There are two more tests so far that run only with `--descriptors` flag:\r\n```\r\nwallet_descriptor\r\nwallet_importdescriptors\r\n```\r\n\r\nI tested and both of them would work without the flag set. I suggest that we remove that flag from `test_runner.py` for those tests since it doesn't affect the behaviour. What do you think?",
      "created_at" : "2021-01-27T08:51:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-768134063",
      "id" : 768134063,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODEzNDA2Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T08:51:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768134063",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @luke-jr interesting point, thanks. I took a different approach which is more consistent with other descriptor specific tests. I made the test work regardless of whether --descriptors is set.\r\n\r\nBut as-is, the test FAILS without --descriptors set...?",
      "created_at" : "2021-01-27T16:08:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-768392164",
      "id" : 768392164,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODM5MjE2NA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T16:08:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768392164",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I tested and both of them would work without the flag set. I suggest that we remove that flag from `test_runner.py` for those tests since it doesn't affect the behaviour. What do you think?\r\n\r\nI have planned improvements for that, namely to not make tests dependent on `--descriptors`.\r\n\r\n> But as-is, the test FAILS without --descriptors set...?\r\n\r\nIt does not fail without `--descriptors`. It basically just ignores `--descriptors` and `--legacy-wallet` as a couple of tests already do.\r\n\r\nIn the interest of getting this merged, I think it is fine to leave the test as is and resolve the `--descriptors` problem with the similar tests together.",
      "created_at" : "2021-01-27T17:34:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-768451009",
      "id" : 768451009,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODQ1MTAwOQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T17:34:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768451009",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK bbb34e91ffcaebd8c657ee961279c568eb6dd6d5",
      "created_at" : "2021-01-27T17:34:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-768451206",
      "id" : 768451206,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODQ1MTIwNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T17:34:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768451206",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565537789"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565537789"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\n        \"\\nList descriptors imported into a descriptor-enabled wallet.\",\r\n```",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2021-01-27T18:27:54Z",
      "diff_hunk" : "@@ -1740,3 +1740,72 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a descriptor enabled wallet.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565537789",
      "id" : 565537789,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTUzNzc4OQ==",
      "original_commit_id" : "bbb34e91ffcaebd8c657ee961279c568eb6dd6d5",
      "original_line" : 1748,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 577636893,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565537789",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565541206"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565541206"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit, could name this class `ListDescriptorsTest`",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2021-01-27T18:33:14Z",
      "diff_hunk" : "@@ -0,0 +1,67 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the listdescriptors RPC.\"\"\"\n+\n+from test_framework.descriptors import (\n+    descsum_create\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+\n+\n+class ReceivedByTest(BitcoinTestFramework):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565541206",
      "id" : 565541206,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTU0MTIwNg==",
      "original_commit_id" : "bbb34e91ffcaebd8c657ee961279c568eb6dd6d5",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listdescriptors.py",
      "position" : null,
      "pull_request_review_id" : 577636893,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565541206",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565546126"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565546126"
         }
      },
      "author_association" : "MEMBER",
      "body" : "IIRC it's preferred for RPCs to return a JSON object rather than array nowadays.\r\n\r\nThis following can be done in a follow-up (if desired), can maybe return something like:\r\n```\r\n{\r\n  \"wallet_name\": \"str\",\r\n  \"descriptors\": [\r\n    {descriptor JSON objects}\r\n  ]\r\n  \"error\": (str, optional) error message, if any\r\n}\r\n```\r\nSee RPC upgradewallet help for an example.",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2021-01-27T18:41:02Z",
      "diff_hunk" : "@@ -1740,3 +1740,72 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a descriptor enabled wallet.\",\n+        {},\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"Response is an array of descriptor objects\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\", {\n+                    {RPCResult::Type::STR, \"desc\", \"Descriptor string representation\"},\n+                    {RPCResult::Type::NUM, \"timestamp\", \"The creation time of the descriptor\"},\n+                    {RPCResult::Type::BOOL, \"active\", \"Activeness flag\"},\n+                    {RPCResult::Type::BOOL, \"internal\", true, \"Whether this is internal or external descriptor; defined only for active descriptors\"},\n+                    {RPCResult::Type::ARR_FIXED, \"range\", true, \"Defined only for ranged descriptors\", {\n+                        {RPCResult::Type::NUM, \"\", \"Range start inclusive\"},\n+                        {RPCResult::Type::NUM, \"\", \"Range end inclusive\"},\n+                    }},\n+                    {RPCResult::Type::NUM, \"next\", true, \"The next index to generate addresses from; defined only for ranged descriptors\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"listdescriptors\", \"\") + HelpExampleRpc(\"listdescriptors\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    if (!wallet) return NullUniValue;\n+\n+    if (!wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"listdescriptors is not available for non-descriptor wallets\");\n+    }\n+\n+    LOCK(wallet->cs_wallet);\n+\n+    UniValue response(UniValue::VARR);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565546126",
      "id" : 565546126,
      "line" : 1780,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTU0NjEyNg==",
      "original_commit_id" : "bbb34e91ffcaebd8c657ee961279c568eb6dd6d5",
      "original_line" : 1780,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 41,
      "pull_request_review_id" : 577636893,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565546126",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565552805"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565552805"
         }
      },
      "author_association" : "MEMBER",
      "body" : "A few `const` and clang format suggestions\r\n```diff\r\n-    auto active_spk_mans = wallet->GetActiveScriptPubKeyMans();\r\n-    for (const auto &spk_man : wallet->GetAllScriptPubKeyMans()) {\r\n-        auto desc_spk_man = dynamic_cast<DescriptorScriptPubKeyMan*>(spk_man);\r\n+    const auto active_spk_mans = wallet->GetActiveScriptPubKeyMans();\r\n+    for (const auto& spk_man : wallet->GetAllScriptPubKeyMans()) {\r\n+        const auto desc_spk_man = dynamic_cast<DescriptorScriptPubKeyMan*>(spk_man);\r\n         if (!desc_spk_man) {\r\n             throw JSONRPCError(RPC_WALLET_ERROR, \"Unexpected ScriptPubKey manager type.\");\r\n         }\r\n         UniValue spk(UniValue::VOBJ);\r\n         LOCK(desc_spk_man->cs_desc_man);\r\n-        const auto &wallet_descriptor = desc_spk_man->GetWalletDescriptor();\r\n+        const auto& wallet_descriptor = desc_spk_man->GetWalletDescriptor();\r\n         spk.pushKV(\"desc\", wallet_descriptor.descriptor->ToString());\r\n         spk.pushKV(\"timestamp\", wallet_descriptor.creation_time);\r\n-        bool active = active_spk_mans.count(desc_spk_man) != 0;\r\n+        const bool active = (active_spk_mans.count(desc_spk_man) != 0);\r\n         spk.pushKV(\"active\", active);\r\n-        const auto &type = wallet_descriptor.descriptor->GetOutputType();\r\n+        const auto& type = wallet_descriptor.descriptor->GetOutputType();\r\n```\r\n",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2021-01-27T18:51:21Z",
      "diff_hunk" : "@@ -1740,3 +1740,72 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a descriptor enabled wallet.\",\n+        {},\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"Response is an array of descriptor objects\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\", {\n+                    {RPCResult::Type::STR, \"desc\", \"Descriptor string representation\"},\n+                    {RPCResult::Type::NUM, \"timestamp\", \"The creation time of the descriptor\"},\n+                    {RPCResult::Type::BOOL, \"active\", \"Activeness flag\"},\n+                    {RPCResult::Type::BOOL, \"internal\", true, \"Whether this is internal or external descriptor; defined only for active descriptors\"},\n+                    {RPCResult::Type::ARR_FIXED, \"range\", true, \"Defined only for ranged descriptors\", {\n+                        {RPCResult::Type::NUM, \"\", \"Range start inclusive\"},\n+                        {RPCResult::Type::NUM, \"\", \"Range end inclusive\"},\n+                    }},\n+                    {RPCResult::Type::NUM, \"next\", true, \"The next index to generate addresses from; defined only for ranged descriptors\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"listdescriptors\", \"\") + HelpExampleRpc(\"listdescriptors\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    if (!wallet) return NullUniValue;\n+\n+    if (!wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"listdescriptors is not available for non-descriptor wallets\");\n+    }\n+\n+    LOCK(wallet->cs_wallet);\n+\n+    UniValue response(UniValue::VARR);\n+    auto active_spk_mans = wallet->GetActiveScriptPubKeyMans();\n+    for (const auto &spk_man : wallet->GetAllScriptPubKeyMans()) {\n+        auto desc_spk_man = dynamic_cast<DescriptorScriptPubKeyMan*>(spk_man);\n+        if (!desc_spk_man) {\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Unexpected ScriptPubKey manager type.\");\n+        }\n+        UniValue spk(UniValue::VOBJ);\n+        LOCK(desc_spk_man->cs_desc_man);\n+        const auto &wallet_descriptor = desc_spk_man->GetWalletDescriptor();\n+        spk.pushKV(\"desc\", wallet_descriptor.descriptor->ToString());\n+        spk.pushKV(\"timestamp\", wallet_descriptor.creation_time);\n+        bool active = active_spk_mans.count(desc_spk_man) != 0;\n+        spk.pushKV(\"active\", active);\n+        const auto &type = wallet_descriptor.descriptor->GetOutputType();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565552805",
      "id" : 565552805,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTU1MjgwNQ==",
      "original_commit_id" : "bbb34e91ffcaebd8c657ee961279c568eb6dd6d5",
      "original_line" : 1794,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 577636893,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:22:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565552805",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565608524"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565608524"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2021-01-27T20:23:00Z",
      "diff_hunk" : "@@ -1740,3 +1740,72 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a descriptor enabled wallet.\",",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565608524",
      "id" : 565608524,
      "in_reply_to_id" : 565537789,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTYwODUyNA==",
      "original_commit_id" : "bbb34e91ffcaebd8c657ee961279c568eb6dd6d5",
      "original_line" : 1748,
      "original_position" : 9,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 577726658,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:23:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565608524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565608783"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565608783"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'll leave it for a follow-up",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2021-01-27T20:23:28Z",
      "diff_hunk" : "@@ -1740,3 +1740,72 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a descriptor enabled wallet.\",\n+        {},\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"Response is an array of descriptor objects\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\", {\n+                    {RPCResult::Type::STR, \"desc\", \"Descriptor string representation\"},\n+                    {RPCResult::Type::NUM, \"timestamp\", \"The creation time of the descriptor\"},\n+                    {RPCResult::Type::BOOL, \"active\", \"Activeness flag\"},\n+                    {RPCResult::Type::BOOL, \"internal\", true, \"Whether this is internal or external descriptor; defined only for active descriptors\"},\n+                    {RPCResult::Type::ARR_FIXED, \"range\", true, \"Defined only for ranged descriptors\", {\n+                        {RPCResult::Type::NUM, \"\", \"Range start inclusive\"},\n+                        {RPCResult::Type::NUM, \"\", \"Range end inclusive\"},\n+                    }},\n+                    {RPCResult::Type::NUM, \"next\", true, \"The next index to generate addresses from; defined only for ranged descriptors\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"listdescriptors\", \"\") + HelpExampleRpc(\"listdescriptors\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    if (!wallet) return NullUniValue;\n+\n+    if (!wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"listdescriptors is not available for non-descriptor wallets\");\n+    }\n+\n+    LOCK(wallet->cs_wallet);\n+\n+    UniValue response(UniValue::VARR);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565608783",
      "id" : 565608783,
      "in_reply_to_id" : 565546126,
      "line" : 1780,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTYwODc4Mw==",
      "original_commit_id" : "bbb34e91ffcaebd8c657ee961279c568eb6dd6d5",
      "original_line" : 1780,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 41,
      "pull_request_review_id" : 577727018,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:31:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565608783",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565608828"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565608828"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "done",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2021-01-27T20:23:33Z",
      "diff_hunk" : "@@ -1740,3 +1740,72 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a descriptor enabled wallet.\",\n+        {},\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"Response is an array of descriptor objects\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\", {\n+                    {RPCResult::Type::STR, \"desc\", \"Descriptor string representation\"},\n+                    {RPCResult::Type::NUM, \"timestamp\", \"The creation time of the descriptor\"},\n+                    {RPCResult::Type::BOOL, \"active\", \"Activeness flag\"},\n+                    {RPCResult::Type::BOOL, \"internal\", true, \"Whether this is internal or external descriptor; defined only for active descriptors\"},\n+                    {RPCResult::Type::ARR_FIXED, \"range\", true, \"Defined only for ranged descriptors\", {\n+                        {RPCResult::Type::NUM, \"\", \"Range start inclusive\"},\n+                        {RPCResult::Type::NUM, \"\", \"Range end inclusive\"},\n+                    }},\n+                    {RPCResult::Type::NUM, \"next\", true, \"The next index to generate addresses from; defined only for ranged descriptors\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"listdescriptors\", \"\") + HelpExampleRpc(\"listdescriptors\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    if (!wallet) return NullUniValue;\n+\n+    if (!wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"listdescriptors is not available for non-descriptor wallets\");\n+    }\n+\n+    LOCK(wallet->cs_wallet);\n+\n+    UniValue response(UniValue::VARR);\n+    auto active_spk_mans = wallet->GetActiveScriptPubKeyMans();\n+    for (const auto &spk_man : wallet->GetAllScriptPubKeyMans()) {\n+        auto desc_spk_man = dynamic_cast<DescriptorScriptPubKeyMan*>(spk_man);\n+        if (!desc_spk_man) {\n+            throw JSONRPCError(RPC_WALLET_ERROR, \"Unexpected ScriptPubKey manager type.\");\n+        }\n+        UniValue spk(UniValue::VOBJ);\n+        LOCK(desc_spk_man->cs_desc_man);\n+        const auto &wallet_descriptor = desc_spk_man->GetWalletDescriptor();\n+        spk.pushKV(\"desc\", wallet_descriptor.descriptor->ToString());\n+        spk.pushKV(\"timestamp\", wallet_descriptor.creation_time);\n+        bool active = active_spk_mans.count(desc_spk_man) != 0;\n+        spk.pushKV(\"active\", active);\n+        const auto &type = wallet_descriptor.descriptor->GetOutputType();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565608828",
      "id" : 565608828,
      "in_reply_to_id" : 565552805,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTYwODgyOA==",
      "original_commit_id" : "bbb34e91ffcaebd8c657ee961279c568eb6dd6d5",
      "original_line" : 1794,
      "original_position" : 55,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : null,
      "pull_request_review_id" : 577727085,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:23:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565608828",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565608987"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565608987"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nice catch, done",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2021-01-27T20:23:51Z",
      "diff_hunk" : "@@ -0,0 +1,67 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the listdescriptors RPC.\"\"\"\n+\n+from test_framework.descriptors import (\n+    descsum_create\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+\n+\n+class ReceivedByTest(BitcoinTestFramework):",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r565608987",
      "id" : 565608987,
      "in_reply_to_id" : 565541206,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NTYwODk4Nw==",
      "original_commit_id" : "bbb34e91ffcaebd8c657ee961279c568eb6dd6d5",
      "original_line" : 17,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "test/functional/wallet_listdescriptors.py",
      "position" : null,
      "pull_request_review_id" : 577727297,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-01-27T20:23:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/565608987",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 647b81b70938dc4dbcf32399c56f78be395c721a rebased to master, debug builds cleanly, reviewed diff since last review, tested with a descriptor wallet (and with a legacy wallet)\r\n\r\nhelp output\r\n```\r\nlistdescriptors\r\n\r\nList descriptors imported into a descriptor-enabled wallet.\r\nResult:\r\n[                               (json array) Response is an array of descriptor objects\r\n  {                             (json object)\r\n    \"desc\" : \"str\",             (string) Descriptor string representation\r\n    \"timestamp\" : n,            (numeric) The creation time of the descriptor\r\n    \"active\" : true|false,      (boolean) Activeness flag\r\n    \"internal\" : true|false,    (boolean, optional) Whether this is internal or external descriptor; defined only for active descriptors\r\n    \"range\" : [                 (json array, optional) Defined only for ranged descriptors\r\n      n,                        (numeric) Range start inclusive\r\n      n                         (numeric) Range end inclusive\r\n    ],\r\n    \"next\" : n                  (numeric, optional) The next index to generate addresses from; defined only for ranged descriptors\r\n  },\r\n  ...\r\n]\r\n\r\nExamples:\r\n> bitcoin-cli listdescriptors \r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"listdescriptors\", \"params\": []}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n```\r\n",
      "created_at" : "2021-01-27T20:55:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-768571073",
      "id" : 768571073,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODU3MTA3Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T20:55:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768571073",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-ACK 647b81b\r\n\r\nChanges since last just address the review comments.",
      "created_at" : "2021-01-27T22:32:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-768622625",
      "id" : 768622625,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODYyMjYyNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T22:32:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768622625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Needs a release note (can be done in a follow-up.)",
      "created_at" : "2021-01-27T23:29:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-768646315",
      "id" : 768646315,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODY0NjMxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-27T23:29:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768646315",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-utACK",
      "created_at" : "2021-01-28T00:40:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#issuecomment-768673677",
      "id" : 768673677,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/20226",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc2ODY3MzY3Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-01-28T00:40:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/768673677",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r568413397"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/568413397"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "#21063",
      "commit_id" : "647b81b70938dc4dbcf32399c56f78be395c721a",
      "created_at" : "2021-02-02T08:37:03Z",
      "diff_hunk" : "@@ -1740,3 +1740,72 @@ RPCHelpMan importdescriptors()\n },\n     };\n }\n+\n+RPCHelpMan listdescriptors()\n+{\n+    return RPCHelpMan{\n+        \"listdescriptors\",\n+        \"\\nList descriptors imported into a descriptor enabled wallet.\",\n+        {},\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"Response is an array of descriptor objects\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\", {\n+                    {RPCResult::Type::STR, \"desc\", \"Descriptor string representation\"},\n+                    {RPCResult::Type::NUM, \"timestamp\", \"The creation time of the descriptor\"},\n+                    {RPCResult::Type::BOOL, \"active\", \"Activeness flag\"},\n+                    {RPCResult::Type::BOOL, \"internal\", true, \"Whether this is internal or external descriptor; defined only for active descriptors\"},\n+                    {RPCResult::Type::ARR_FIXED, \"range\", true, \"Defined only for ranged descriptors\", {\n+                        {RPCResult::Type::NUM, \"\", \"Range start inclusive\"},\n+                        {RPCResult::Type::NUM, \"\", \"Range end inclusive\"},\n+                    }},\n+                    {RPCResult::Type::NUM, \"next\", true, \"The next index to generate addresses from; defined only for ranged descriptors\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"listdescriptors\", \"\") + HelpExampleRpc(\"listdescriptors\", \"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    std::shared_ptr<CWallet> const wallet = GetWalletForJSONRPCRequest(request);\n+    if (!wallet) return NullUniValue;\n+\n+    if (!wallet->IsWalletFlagSet(WALLET_FLAG_DESCRIPTORS)) {\n+        throw JSONRPCError(RPC_WALLET_ERROR, \"listdescriptors is not available for non-descriptor wallets\");\n+    }\n+\n+    LOCK(wallet->cs_wallet);\n+\n+    UniValue response(UniValue::VARR);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/20226#discussion_r568413397",
      "id" : 568413397,
      "in_reply_to_id" : 565546126,
      "line" : 1780,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2ODQxMzM5Nw==",
      "original_commit_id" : "bbb34e91ffcaebd8c657ee961279c568eb6dd6d5",
      "original_line" : 1780,
      "original_position" : 41,
      "original_start_line" : null,
      "path" : "src/wallet/rpcdump.cpp",
      "position" : 41,
      "pull_request_review_id" : 581096801,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/20226",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-02-02T08:37:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/568413397",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   }
]
