[
   {
      "author_association" : "MEMBER",
      "body" : "I dislike the fact that bitcoin-cli does have insight into specific commands and argument positions, etc.\r\n\r\nNevertheless I think this is an improvement.\r\n\r\nConcept ACK",
      "created_at" : "2019-02-04T22:30:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-460439290",
      "id" : 460439290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDQzOTI5MA==",
      "updated_at" : "2019-02-04T22:30:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460439290",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK\r\n\r\nIf we should do special handling for `encryptwallet`, I think something similar should be done with `walletpassphrase` and `walletpassphrasechange` as well. Especially `walletpassphrase`, which is most often used from these three.",
      "created_at" : "2019-02-04T22:36:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-460440969",
      "id" : 460440969,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDQ0MDk2OQ==",
      "updated_at" : "2019-02-04T22:36:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460440969",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Yes, I wanted to add the other commands once this one is accepted, in order to do one thing at a time.",
      "created_at" : "2019-02-05T06:28:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-460528150",
      "id" : 460528150,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDUyODE1MA==",
      "updated_at" : "2019-02-05T06:28:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460528150",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Yes, I wanted to add the other commands once this one is accepted, in order to do one thing at a time.\r\n\r\nI'd prefer to do this all at once, if we're going to do this.",
      "created_at" : "2019-02-05T17:27:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-460727481",
      "id" : 460727481,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDcyNzQ4MQ==",
      "updated_at" : "2019-02-05T17:27:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460727481",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I agree with @laanwj, less time spent on testing and code review.",
      "created_at" : "2019-02-05T17:42:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-460733288",
      "id" : 460733288,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDczMzI4OA==",
      "updated_at" : "2019-02-05T17:42:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460733288",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "One way to avoid client side knowledge of these commands is to support special arguments that are replaced after reading the stdin. For instance:\r\n```sh\r\n# before\r\nbitcoin-cli encryptwallet myawesomepass\r\n\r\n# after\r\nbitcoin-cli encryptwallet -p\r\nEnter password: *************\r\nVerify password: *************\r\n```\r\nWhen `-p` is detected it is replaced after double reading the password from stdin (ideally without echoing).",
      "created_at" : "2019-02-05T17:57:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-460738744",
      "id" : 460738744,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDczODc0NA==",
      "updated_at" : "2019-02-05T17:57:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460738744",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> One way to avoid client side knowledge of these commands is to support special arguments that are replaced after reading the stdin.\r\n\r\nProblem is these three RPCs differ - with `encryptwallet` you would expect being asked for password twice to verify they match, with `walletpassphrasechange` you expect to be asked first for the old password and then twice for the new password, with `walletpassphrase` you would expect being asked for a password just once.\r\n\r\nUsing `-p` as an universal replacement for any argument with meaning \"ask to enter value using password prompt\" also would not work, because it will not allow to use \"-p\" as a string in arguments, so will break compatibilty. And, as mentioned above, there are RPC arguments where you would expect being asked for password just once, and others where you are expected to being asked twice.\r\n\r\nSo, I don't see how we can work around special handling for these three there (ok, without introducing some obscure syntax that no one would use, like \"-passarg=3,2\" before arguments = ask for a third argument with a password prompt, requiring entering it twice).\r\n\r\nBut `-p` (or some other name, other `bitcoin-cli` arguments are long ones, not single letter) as an flag to do special handling for these three commands looks ok to me, examples could be:\r\n```\r\n$ bitcoin-cli -p encryptwallet\r\nEnter password: ***\r\nVerify password: ***\r\n$ bitcoin-cli -p walletpassphrasechange\r\nEnter current password: ***\r\nEnter new password: ***\r\nVerify new password: ***\r\n$ bitcoin-cli -p walletpassphrase 60\r\nEnter password: ***\r\n```\r\n\r\nI am also not a fan of special handling for some RPCs in client, but I think benefits are worth it here.",
      "created_at" : "2019-02-05T21:59:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-460820379",
      "id" : 460820379,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDgyMDM3OQ==",
      "updated_at" : "2019-02-05T21:59:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460820379",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15346#discussion_r254217234"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/254217234"
         }
      },
      "author_association" : "NONE",
      "body" : "perhaps document about the additional throws so user can expect this new behaviour.",
      "commit_id" : "00b422bef179eb9b6b764a2d2a00f0d4fcc2a851",
      "created_at" : "2019-02-06T10:39:02Z",
      "diff_hunk" : "@@ -441,6 +441,19 @@ static int CommandLineRPC(int argc, char *argv[])\n             method = args[0];\n             args.erase(args.begin()); // Remove trailing method name from arguments vector\n         }\n+        // Get wallet encryption password from command line\n+        if (method == \"encryptwallet\" && !args.size()) {\n+            std::string password, verification;\n+            fprintf(stdout, \"Enter password to encrypt the wallet : \");\n+            if(!std::getline(std::cin, password)) {\n+                throw std::runtime_error(\"Failed to read password\");\n+            }\n+            fprintf(stdout, \"Re-enter password : \");\n+            if(!std::getline(std::cin, verification) || password != verification) {\n+                throw std::runtime_error(\"Passwords do not match\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#discussion_r254217234",
      "id" : 254217234,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NDIxNzIzNA==",
      "original_commit_id" : "20816de7edbd23c0913881199a77f3dc83958a58",
      "original_position" : 13,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 200508069,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15346",
      "updated_at" : "2019-02-13T12:22:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/254217234",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/30120428?v=4",
         "events_url" : "https://api.github.com/users/shahzadlone/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shahzadlone/followers",
         "following_url" : "https://api.github.com/users/shahzadlone/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shahzadlone/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shahzadlone",
         "id" : 30120428,
         "login" : "shahzadlone",
         "node_id" : "MDQ6VXNlcjMwMTIwNDI4",
         "organizations_url" : "https://api.github.com/users/shahzadlone/orgs",
         "received_events_url" : "https://api.github.com/users/shahzadlone/received_events",
         "repos_url" : "https://api.github.com/users/shahzadlone/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shahzadlone/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shahzadlone/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shahzadlone"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15346#discussion_r254229533"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/254229533"
         }
      },
      "author_association" : "NONE",
      "body" : "This is classic behaviour of enter-then-reenter password, where sould I document ?",
      "commit_id" : "00b422bef179eb9b6b764a2d2a00f0d4fcc2a851",
      "created_at" : "2019-02-06T11:16:19Z",
      "diff_hunk" : "@@ -441,6 +441,19 @@ static int CommandLineRPC(int argc, char *argv[])\n             method = args[0];\n             args.erase(args.begin()); // Remove trailing method name from arguments vector\n         }\n+        // Get wallet encryption password from command line\n+        if (method == \"encryptwallet\" && !args.size()) {\n+            std::string password, verification;\n+            fprintf(stdout, \"Enter password to encrypt the wallet : \");\n+            if(!std::getline(std::cin, password)) {\n+                throw std::runtime_error(\"Failed to read password\");\n+            }\n+            fprintf(stdout, \"Re-enter password : \");\n+            if(!std::getline(std::cin, verification) || password != verification) {\n+                throw std::runtime_error(\"Passwords do not match\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#discussion_r254229533",
      "id" : 254229533,
      "in_reply_to_id" : 254217234,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NDIyOTUzMw==",
      "original_commit_id" : "20816de7edbd23c0913881199a77f3dc83958a58",
      "original_position" : 13,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 200523134,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15346",
      "updated_at" : "2019-02-13T12:22:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/254229533",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> > Yes, I wanted to add the other commands once this one is accepted, in order to do one thing at a time.\r\n> \r\n> I'd prefer to do this all at once, if we're going to do this.\r\n\r\nOk, I'll commit changes for the other commands.\r\n\r\n\r\n\r\n> One way to avoid client side knowledge of these commands is to support special arguments that are replaced after reading the stdin. For instance:\r\n> \r\n> ```shell\r\n> # before\r\n> bitcoin-cli encryptwallet myawesomepass\r\n> \r\n> # after\r\n> bitcoin-cli encryptwallet -p\r\n> Enter password: *************\r\n> Verify password: *************\r\n> ```\r\n> \r\n> When `-p` is detected it is replaced after double reading the password from stdin (ideally without echoing).\r\n\r\nThis is similar to using `-stdin`, as it would requires to add an argument. What I propose is to use stdin for passwords in `bitcoin-cli` as a default : I have seen some people \"securising their wallet\" by using `encryptwallet` the default way just because they didn't know about `-stdin`, nor they bother to search, and I could retrieve their pass from the bash_history.\r\n\r\nAbout the echoing, I have not found a clean and not too verbose way to achieve it. Maybe now that 3 commands will be covered it worth adding a function (kind of `getpass` instead of `getline`) that would not echo the password.",
      "created_at" : "2019-02-06T11:24:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-460989650",
      "id" : 460989650,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDk4OTY1MA==",
      "updated_at" : "2019-02-06T11:25:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460989650",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Have you seen #13716?",
      "created_at" : "2019-02-06T20:47:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-461181126",
      "id" : 461181126,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MTE4MTEyNg==",
      "updated_at" : "2019-02-06T20:47:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/461181126",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Have you seen #13716?\r\n\r\nYes I have, and I still think it is more convenient for the user to change the behavior of the existing commands instead of adding another.\r\nHowever the two PR are not incompatible and not echoing the password would be nice.",
      "created_at" : "2019-02-06T22:05:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-461206666",
      "id" : 461206666,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MTIwNjY2Ng==",
      "updated_at" : "2019-02-08T11:09:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/461206666",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I added a commit to change the behavior of `walletpassphrase` and `walletpassphrasechange` too.\r\n```\r\n./src/bitcoin-cli encryptwallet\r\nEnter passphrase to encrypt the wallet : test\r\nRe-enter passphrase : test\r\n\r\n./src/bitcoin-cli walletpassphrasechange\r\nEnter current passphrase : test\r\nEnter new passphrase : testt\r\nRepeat new passphrase : testt\r\n\r\n./src/bitcoin-cli walletpassphrase 100\r\nEnter passphrase to unlock the wallet : testt\r\n```",
      "created_at" : "2019-02-06T22:10:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-461208163",
      "id" : 461208163,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MTIwODE2Mw==",
      "updated_at" : "2019-02-07T07:49:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/461208163",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested this and #13716 and I like this approach better, apart from no-echo password part from by @kallewoof, which would be cool have here too.",
      "created_at" : "2019-02-11T00:27:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-462196047",
      "id" : 462196047,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MjE5NjA0Nw==",
      "updated_at" : "2019-02-11T00:27:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/462196047",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/4500994?v=4",
         "events_url" : "https://api.github.com/users/kristapsk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/kristapsk/followers",
         "following_url" : "https://api.github.com/users/kristapsk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/kristapsk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/kristapsk",
         "id" : 4500994,
         "login" : "kristapsk",
         "node_id" : "MDQ6VXNlcjQ1MDA5OTQ=",
         "organizations_url" : "https://api.github.com/users/kristapsk/orgs",
         "received_events_url" : "https://api.github.com/users/kristapsk/received_events",
         "repos_url" : "https://api.github.com/users/kristapsk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/kristapsk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/kristapsk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/kristapsk"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15346#discussion_r255679721"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/255679721"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Nit: `args.empty()` is more idiomatic?",
      "commit_id" : "00b422bef179eb9b6b764a2d2a00f0d4fcc2a851",
      "created_at" : "2019-02-11T20:27:11Z",
      "diff_hunk" : "@@ -441,6 +441,45 @@ static int CommandLineRPC(int argc, char *argv[])\n             method = args[0];\n             args.erase(args.begin()); // Remove trailing method name from arguments vector\n         }\n+        // Get wallet encryption passphrases from command line\n+        if (method == \"encryptwallet\" && !args.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#discussion_r255679721",
      "id" : 255679721,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NTY3OTcyMQ==",
      "original_commit_id" : "799c543778ba1fdd475ba1215affcc783724dea7",
      "original_position" : 5,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 202320903,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15346",
      "updated_at" : "2019-02-13T12:22:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/255679721",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15346#discussion_r255679823"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/255679823"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Same here.",
      "commit_id" : "00b422bef179eb9b6b764a2d2a00f0d4fcc2a851",
      "created_at" : "2019-02-11T20:27:31Z",
      "diff_hunk" : "@@ -441,6 +441,45 @@ static int CommandLineRPC(int argc, char *argv[])\n             method = args[0];\n             args.erase(args.begin()); // Remove trailing method name from arguments vector\n         }\n+        // Get wallet encryption passphrases from command line\n+        if (method == \"encryptwallet\" && !args.size()) {\n+            std::string passphrase, verification;\n+            fprintf(stdout, \"Enter passphrase to encrypt the wallet : \");\n+            if(!std::getline(std::cin, passphrase)) {\n+                throw std::runtime_error(\"Failed to read passphrase\");\n+            }\n+            fprintf(stdout, \"Re-enter passphrase : \");\n+            if(!std::getline(std::cin, verification) || passphrase != verification) {\n+                throw std::runtime_error(\"Passphrases do not match\");\n+            }\n+            args.push_back(passphrase);\n+        }\n+        else if (method == \"walletpassphrase\" && args.size() == 1) {\n+            std::string passphrase;\n+            fprintf(stderr, \"Enter passphrase to unlock the wallet : \");\n+            fflush(stderr);\n+            if(!std::getline(std::cin, passphrase)) {\n+                throw std::runtime_error(\"Failed to read the passphrase\");\n+            }\n+            args.insert(args.begin(), passphrase); // Second parameter is timeout\n+        }\n+        else if (method == \"walletpassphrasechange\" && !args.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#discussion_r255679823",
      "id" : 255679823,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NTY3OTgyMw==",
      "original_commit_id" : "799c543778ba1fdd475ba1215affcc783724dea7",
      "original_position" : 26,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 202321025,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15346",
      "updated_at" : "2019-02-13T12:22:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/255679823",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15346#discussion_r255723664"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/255723664"
         }
      },
      "author_association" : "NONE",
      "body" : "Fixed.",
      "commit_id" : "00b422bef179eb9b6b764a2d2a00f0d4fcc2a851",
      "created_at" : "2019-02-11T22:38:14Z",
      "diff_hunk" : "@@ -441,6 +441,45 @@ static int CommandLineRPC(int argc, char *argv[])\n             method = args[0];\n             args.erase(args.begin()); // Remove trailing method name from arguments vector\n         }\n+        // Get wallet encryption passphrases from command line\n+        if (method == \"encryptwallet\" && !args.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#discussion_r255723664",
      "id" : 255723664,
      "in_reply_to_id" : 255679721,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NTcyMzY2NA==",
      "original_commit_id" : "799c543778ba1fdd475ba1215affcc783724dea7",
      "original_position" : 5,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 202376133,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15346",
      "updated_at" : "2019-02-13T12:22:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/255723664",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/15346#discussion_r255723712"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15346"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/255723712"
         }
      },
      "author_association" : "NONE",
      "body" : "Fixed.",
      "commit_id" : "00b422bef179eb9b6b764a2d2a00f0d4fcc2a851",
      "created_at" : "2019-02-11T22:38:24Z",
      "diff_hunk" : "@@ -441,6 +441,45 @@ static int CommandLineRPC(int argc, char *argv[])\n             method = args[0];\n             args.erase(args.begin()); // Remove trailing method name from arguments vector\n         }\n+        // Get wallet encryption passphrases from command line\n+        if (method == \"encryptwallet\" && !args.size()) {\n+            std::string passphrase, verification;\n+            fprintf(stdout, \"Enter passphrase to encrypt the wallet : \");\n+            if(!std::getline(std::cin, passphrase)) {\n+                throw std::runtime_error(\"Failed to read passphrase\");\n+            }\n+            fprintf(stdout, \"Re-enter passphrase : \");\n+            if(!std::getline(std::cin, verification) || passphrase != verification) {\n+                throw std::runtime_error(\"Passphrases do not match\");\n+            }\n+            args.push_back(passphrase);\n+        }\n+        else if (method == \"walletpassphrase\" && args.size() == 1) {\n+            std::string passphrase;\n+            fprintf(stderr, \"Enter passphrase to unlock the wallet : \");\n+            fflush(stderr);\n+            if(!std::getline(std::cin, passphrase)) {\n+                throw std::runtime_error(\"Failed to read the passphrase\");\n+            }\n+            args.insert(args.begin(), passphrase); // Second parameter is timeout\n+        }\n+        else if (method == \"walletpassphrasechange\" && !args.size()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#discussion_r255723712",
      "id" : 255723712,
      "in_reply_to_id" : 255679823,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI1NTcyMzcxMg==",
      "original_commit_id" : "799c543778ba1fdd475ba1215affcc783724dea7",
      "original_position" : 26,
      "path" : "src/bitcoin-cli.cpp",
      "position" : null,
      "pull_request_review_id" : 202376188,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/15346",
      "updated_at" : "2019-02-13T12:22:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/255723712",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Closing in favor of https://github.com/bitcoin/bitcoin/pull/13716",
      "created_at" : "2019-10-10T09:15:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/15346#issuecomment-540478428",
      "id" : 540478428,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15346",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MDQ3ODQyOA==",
      "updated_at" : "2019-10-10T09:15:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540478428",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/22457751?v=4",
         "events_url" : "https://api.github.com/users/darosior/events{/privacy}",
         "followers_url" : "https://api.github.com/users/darosior/followers",
         "following_url" : "https://api.github.com/users/darosior/following{/other_user}",
         "gists_url" : "https://api.github.com/users/darosior/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/darosior",
         "id" : 22457751,
         "login" : "darosior",
         "node_id" : "MDQ6VXNlcjIyNDU3NzUx",
         "organizations_url" : "https://api.github.com/users/darosior/orgs",
         "received_events_url" : "https://api.github.com/users/darosior/received_events",
         "repos_url" : "https://api.github.com/users/darosior/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/darosior/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/darosior/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/darosior"
      }
   }
]
