[
   {
      "author_association" : "MEMBER",
      "body" : "It's expected to be *somewhat* slower due to the process creation overhead, this overhead counts in tests that do a lot of RPC calls.\r\nBut agree even then 5ÃÂ is much slower than expected.",
      "created_at" : "2019-02-01T09:31:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15309#issuecomment-459661394",
      "id" : 459661394,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15309",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1OTY2MTM5NA==",
      "updated_at" : "2019-02-01T09:31:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/459661394",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This happens because there is a 30 second overhead to exit the http event loop:\r\n\r\n```\r\n node0 ...:09.423988Z Flushed wallet.dat 0ms \r\n node0 ...:37.123147Z Exited http event loop \r\n",
      "created_at" : "2019-02-01T16:14:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15309#issuecomment-459776317",
      "id" : 459776317,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15309",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1OTc3NjMxNw==",
      "updated_at" : "2019-02-01T16:14:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/459776317",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Is this related to #14670?",
      "created_at" : "2019-02-01T16:53:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15309#issuecomment-459789419",
      "id" : 459789419,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15309",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1OTc4OTQxOQ==",
      "updated_at" : "2019-02-01T16:53:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/459789419",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "From IRC, it might be related to #14993:\r\n\r\n> [00:53:49] \\<aj> i'd seen it in december, as at cb52cee2 fwiw\r\n",
      "created_at" : "2019-02-01T16:57:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15309#issuecomment-459790784",
      "id" : 459790784,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15309",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ1OTc5MDc4NA==",
      "updated_at" : "2019-02-01T16:57:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/459790784",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "PR #14670 seems to have slowed down tests considerably, particularly when using --usecli.\r\n\r\nI bisected this and commit e98a9eede2fb48ff33a020acc888cbcd83e24bbf is the first one I see that consistently slows down performance (I was running `test/functional/wallet_multiwallet.py --usecli`, and prior that commit it consistently takes 20 seconds on my machine, while after that commit it takes more than 40 seconds).   The following commit 8d3f46ec3938e2ba17654fecacd1d2629f9915fd slows things down considerably more -- that same test takes over 5 minutes after that commit.\r\n\r\nI'm not familiar with the changes in #14670 so perhaps the reviewers from that PR can comment further?\r\n\r\nping @promag\r\n\r\n",
      "created_at" : "2019-02-05T17:58:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15309#issuecomment-460738805",
      "id" : 460738805,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15309",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDczODgwNQ==",
      "updated_at" : "2019-02-05T17:58:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460738805",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/7463573?v=4",
         "events_url" : "https://api.github.com/users/sdaftuar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sdaftuar/followers",
         "following_url" : "https://api.github.com/users/sdaftuar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sdaftuar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sdaftuar",
         "id" : 7463573,
         "login" : "sdaftuar",
         "node_id" : "MDQ6VXNlcjc0NjM1NzM=",
         "organizations_url" : "https://api.github.com/users/sdaftuar/orgs",
         "received_events_url" : "https://api.github.com/users/sdaftuar/received_events",
         "repos_url" : "https://api.github.com/users/sdaftuar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sdaftuar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sdaftuar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sdaftuar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@sdaftuar thanks, looks like the client is not closing the connection and the server is allowing the connection to persist, this leads to the connection timeout (by default ~~60sec~~ 30sec).\r\n\r\nDo you observe slow down only with `--usecli`?. It's strange because bitcoin-cli sends `Connection: close` header and libevent should close the connection after it - unless there are other events in the event base.\r\n\r\nI'll revisit this along with #14993.",
      "created_at" : "2019-02-05T18:14:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15309#issuecomment-460744628",
      "id" : 460744628,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15309",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQ2MDc0NDYyOA==",
      "updated_at" : "2019-02-05T23:05:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/460744628",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Going to close this, as I am no longer seeing any significant difference, i.e only 1-2s on applicable tests, with or without `--usecli`. Using master at 89a1f7a250ef70ff2d65701564f1e24bb9280d90.",
      "created_at" : "2019-11-25T19:14:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/15309#issuecomment-558299345",
      "id" : 558299345,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15309",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1ODI5OTM0NQ==",
      "updated_at" : "2019-11-25T19:14:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558299345",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
