[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hebasto](https://github.com/bitcoin/bitcoin/pull/27556#pullrequestreview-1428676304), [achow101](https://github.com/bitcoin/bitcoin/pull/27556#issuecomment-1553197160) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27286](https://github.com/bitcoin/bitcoin/pull/27286) (wallet: Keep track of the wallet's own transaction outputs in memory by achow101)\n* [#24914](https://github.com/bitcoin/bitcoin/pull/24914) (wallet: Load database records in a particular order by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2023-05-02T18:09:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#issuecomment-1531926322",
      "id" : 1531926322,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27556",
      "node_id" : "IC_kwDOABII585bT1cy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531926322/reactions"
      },
      "updated_at" : "2023-05-18T15:01:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1531926322",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK d3419f4108669d37a4ccecab77750e70c2f6237c",
      "created_at" : "2023-05-03T15:34:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#issuecomment-1533259027",
      "id" : 1533259027,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27556",
      "node_id" : "IC_kwDOABII585bY60T",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1533259027/reactions"
      },
      "updated_at" : "2023-05-03T15:34:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1533259027",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Backport shouldn't be required as I don't think there's any user action that can trigger the deadlock.",
      "created_at" : "2023-05-03T15:35:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#issuecomment-1533261116",
      "id" : 1533261116,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27556",
      "node_id" : "IC_kwDOABII585bY7U8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1533261116/reactions"
      },
      "updated_at" : "2023-05-03T15:35:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1533261116",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27556#discussion_r1183870974"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27556"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183870974"
         }
      },
      "author_association" : "MEMBER",
      "body" : "We should just make the `batch` argument required to avoid this kind of issue in the future.",
      "commit_id" : "de202f860b3f79774d5235dec59a140fa5c82fa7",
      "created_at" : "2023-05-03T15:43:42Z",
      "diff_hunk" : "@@ -713,7 +713,7 @@ BerkeleyCursor::~BerkeleyCursor()\n std::unique_ptr<DatabaseCursor> BerkeleyBatch::GetNewCursor()\n {\n     if (!pdb) return nullptr;\n-    return std::make_unique<BerkeleyCursor>(m_database);\n+    return std::make_unique<BerkeleyCursor>(m_database, this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#discussion_r1183870974",
      "id" : 1183870974,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GkG_-",
      "original_commit_id" : "d3419f4108669d37a4ccecab77750e70c2f6237c",
      "original_line" : 716,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/bdb.cpp",
      "position" : null,
      "pull_request_review_id" : 1411203169,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27556",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183870974/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T15:43:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183870974",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27556#discussion_r1183886841"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27556"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183886841"
         }
      },
      "author_association" : "MEMBER",
      "body" : "sure",
      "commit_id" : "de202f860b3f79774d5235dec59a140fa5c82fa7",
      "created_at" : "2023-05-03T15:54:18Z",
      "diff_hunk" : "@@ -713,7 +713,7 @@ BerkeleyCursor::~BerkeleyCursor()\n std::unique_ptr<DatabaseCursor> BerkeleyBatch::GetNewCursor()\n {\n     if (!pdb) return nullptr;\n-    return std::make_unique<BerkeleyCursor>(m_database);\n+    return std::make_unique<BerkeleyCursor>(m_database, this);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#discussion_r1183886841",
      "id" : 1183886841,
      "in_reply_to_id" : 1183870974,
      "line" : null,
      "node_id" : "PRRC_kwDOABII585GkK35",
      "original_commit_id" : "d3419f4108669d37a4ccecab77750e70c2f6237c",
      "original_line" : 716,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/bdb.cpp",
      "position" : null,
      "pull_request_review_id" : 1411225742,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27556",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183886841/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-03T15:54:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1183886841",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Updated per feedback. Thanks achow101.\r\n\r\nOnly diff is `BerkeleyCursor` requiring a `WalletBatch` ref instead of a pointer.",
      "created_at" : "2023-05-03T16:09:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#issuecomment-1533320863",
      "id" : 1533320863,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27556",
      "node_id" : "IC_kwDOABII585bZJ6f",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1533320863/reactions"
      },
      "updated_at" : "2023-05-03T16:09:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1533320863",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK de202f860b3f79774d5235dec59a140fa5c82fa7",
      "created_at" : "2023-05-03T17:55:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#issuecomment-1533474401",
      "id" : 1533474401,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27556",
      "node_id" : "IC_kwDOABII585bZvZh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1533474401/reactions"
      },
      "updated_at" : "2023-05-03T17:55:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1533474401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2023-05-11T16:15:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#issuecomment-1544286558",
      "id" : 1544286558,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27556",
      "node_id" : "IC_kwDOABII585cC_Fe",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1544286558/reactions"
      },
      "updated_at" : "2023-05-11T16:15:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1544286558",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27556#discussion_r1191433122"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27556"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191433122"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Does this comment remain true?",
      "commit_id" : "de202f860b3f79774d5235dec59a140fa5c82fa7",
      "created_at" : "2023-05-11T16:30:25Z",
      "diff_hunk" : "@@ -668,14 +668,14 @@ void BerkeleyDatabase::ReloadDbEnv()\n     env->ReloadDbEnv();\n }\n \n-BerkeleyCursor::BerkeleyCursor(BerkeleyDatabase& database, BerkeleyBatch* batch)\n+BerkeleyCursor::BerkeleyCursor(BerkeleyDatabase& database, const BerkeleyBatch& batch)\n {\n     if (!database.m_db.get()) {\n         throw std::runtime_error(STR_INTERNAL_BUG(\"BerkeleyDatabase does not exist\"));\n     }\n     // Transaction argument to cursor is only needed when using the cursor to\n     // write to the database. Read-only cursors do not need a txn pointer.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#discussion_r1191433122",
      "id" : 1191433122,
      "line" : 677,
      "node_id" : "PRRC_kwDOABII585HA9Oi",
      "original_commit_id" : "de202f860b3f79774d5235dec59a140fa5c82fa7",
      "original_line" : 677,
      "original_position" : 11,
      "original_start_line" : 676,
      "path" : "src/wallet/bdb.cpp",
      "position" : 11,
      "pull_request_review_id" : 1423013816,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27556",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191433122/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 676,
      "start_side" : "RIGHT",
      "subject_type" : "line",
      "updated_at" : "2023-05-11T16:30:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191433122",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/27556#discussion_r1191456854"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27556"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191456854"
         }
      },
      "author_association" : "MEMBER",
      "body" : "A note for myself: Seems unfortunate to `reset` a `std::unique_ptr` instance explicitly instead of using its RAII capabilities.",
      "commit_id" : "de202f860b3f79774d5235dec59a140fa5c82fa7",
      "created_at" : "2023-05-11T16:53:35Z",
      "diff_hunk" : "@@ -1144,15 +1147,16 @@ bool WalletBatch::EraseRecords(const std::unordered_set<std::string>& types)\n     }\n \n     // Iterate the DB and look for any records that have the type prefixes\n-    while (true)\n-    {\n+    while (true) {\n         // Read next record\n         DataStream key{};\n         DataStream value{};\n         DatabaseCursor::Status status = cursor->Next(key, value);\n         if (status == DatabaseCursor::Status::DONE) {\n             break;\n         } else if (status == DatabaseCursor::Status::FAIL) {\n+            cursor.reset(nullptr);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#discussion_r1191456854",
      "id" : 1191456854,
      "line" : 1158,
      "node_id" : "PRRC_kwDOABII585HBDBW",
      "original_commit_id" : "de202f860b3f79774d5235dec59a140fa5c82fa7",
      "original_line" : 1158,
      "original_position" : 24,
      "original_start_line" : null,
      "path" : "src/wallet/walletdb.cpp",
      "position" : 24,
      "pull_request_review_id" : 1423050433,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27556",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191456854/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "subject_type" : "line",
      "updated_at" : "2023-05-11T16:53:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1191456854",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Does this PR makes https://github.com/bitcoin/bitcoin/blob/137a98c5a22e058ed7a7997a0a4dbd75301de51e/test/sanitizer_suppressions/tsan#L28 outdated?",
      "created_at" : "2023-05-11T17:26:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#issuecomment-1544400131",
      "id" : 1544400131,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27556",
      "node_id" : "IC_kwDOABII585cDa0D",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1544400131/reactions"
      },
      "updated_at" : "2023-05-11T17:26:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1544400131",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Does this PR makes\r\n> \r\n> https://github.com/bitcoin/bitcoin/blob/137a98c5a22e058ed7a7997a0a4dbd75301de51e/test/sanitizer_suppressions/tsan#L28\r\n> \r\n> outdated?\r\n\r\n@hebasto hmm, interesting. It seems to be outdated in master. Just ran the test suite there, without the suppression, and it passed.",
      "created_at" : "2023-05-12T12:50:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#issuecomment-1545695358",
      "id" : 1545695358,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27556",
      "node_id" : "IC_kwDOABII585cIXB-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1545695358/reactions"
      },
      "updated_at" : "2023-05-12T13:16:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1545695358",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "rebased, conflicts solved.",
      "created_at" : "2023-05-15T16:37:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#issuecomment-1548189712",
      "id" : 1548189712,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27556",
      "node_id" : "IC_kwDOABII585cR4AQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1548189712/reactions"
      },
      "updated_at" : "2023-05-15T16:37:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1548189712",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 69d43905b7f1d4849dfaea1b5744ee473ccc8744",
      "created_at" : "2023-05-18T15:01:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27556#issuecomment-1553197160",
      "id" : 1553197160,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27556",
      "node_id" : "IC_kwDOABII585ck-ho",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1553197160/reactions"
      },
      "updated_at" : "2023-05-18T15:01:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1553197160",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   }
]
