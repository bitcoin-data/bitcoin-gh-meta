{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : "**This is based on #27302.** The non-base commits are:\r\n\r\n- [`ae5fc323b24` bitcoin-wallet: make bitcoin-wallet tool load config file](https://github.com/bitcoin/bitcoin/pull/27409/commits/ae5fc323b2441bc45c38737f1ffb40d777b134d8)\r\n- [`b091d9b0762` init: Allow bitcoin default datadir to point at an external datadir](https://github.com/bitcoin/bitcoin/pull/27409/commits/b091d9b076204f69cc814353139d5bf0df412bae)\r\n- [`5855150efae` Make GUI and CLI tools use the same datadir](https://github.com/bitcoin/bitcoin/pull/27409/commits/5855150efae74d10e0eaf3bd08b06e8655a0f1ba)\r\n\r\n---\r\n\r\nCurrently if your choose a non-default datadir in the GUI intro screen, the datadir is ignored by CLI tools.\r\n\r\nThis PR makes GUI and CLI tools the same datadir setting by default. It is followup to https://github.com/bitcoin-core/gui/pull/602 which made GUI and CLI tools use the same settings as long as they loaded the same datadir.\r\n\r\nThe reason GUI and CLI tools use inconsistent datadirs is that GUI stores the datadir path in a `strDataDir` field in `.config/Bitcoin/Bitcoin-Qt.conf`[^1] which CLI tools ignore. This PR changes the GUI to instead store the datadir path at the default datadir location `~/.bitcoin`[^2] as a symlink that CLI tools will already follow, or as a text file if the filesystem does not support symlinks.\r\n\r\nIf upgrading from a previous version of the GUI and there is only a GUI datadir, the `strDataDir` setting will be automatically migrated to a symlink so CLI tools will start using it as well.\r\n\r\nIf upgrading and GUI and CLI tools are using different datadirs, the GUI will show a prompt allowing either of the datadirs to be loaded on startup, with an option to set one as the default going forward.\r\n\r\n[^1]: `strDataDir` value is stored in `.config/Bitcoin/Bitcoin-Qt.conf` on linux, in property list files on macos, and in registry keys on windows.\r\n[^2]: The default datadir location is `~/.bitcoin` on linux, `~/Library/Application Support/Bitcoin` on macos, and `%APPDATA%\\Bitcoin` on windows",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 3,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27409/comments",
   "created_at" : "2023-04-03T16:21:47Z",
   "draft" : true,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27409/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/27409",
   "id" : 1652385998,
   "labels" : [],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27409/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII585NgcIE",
   "number" : 27409,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/27409.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/27409",
      "merged_at" : null,
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/27409.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/27409"
   },
   "reactions" : {
      "+1" : 1,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 1,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 2,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27409/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "state_reason" : null,
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27409/timeline",
   "title" : "Make GUI and CLI tools use the same datadir",
   "updated_at" : "2023-04-15T11:21:28Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/27409",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
      "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
      "followers_url" : "https://api.github.com/users/ryanofsky/followers",
      "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
      "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/ryanofsky",
      "id" : 7133040,
      "login" : "ryanofsky",
      "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
      "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
      "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
      "repos_url" : "https://api.github.com/users/ryanofsky/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/ryanofsky"
   }
}
