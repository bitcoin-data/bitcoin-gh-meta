[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [aureleoules](https://github.com/bitcoin/bitcoin/pull/26661#pullrequestreview-1227709332), [ishaanam](https://github.com/bitcoin/bitcoin/pull/26661#issuecomment-1363607752), [theStack](https://github.com/bitcoin/bitcoin/pull/26661#pullrequestreview-1230814521), [achow101](https://github.com/bitcoin/bitcoin/pull/26661#issuecomment-1370334784) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26720](https://github.com/bitcoin/bitcoin/pull/26720) (wallet: coin selection, don't return results that exceed the max allowed weight by furszy)\n* [#26593](https://github.com/bitcoin/bitcoin/pull/26593) (tracing: Only prepare tracepoint arguments when actually tracing by 0xB10C)\n* [#23829](https://github.com/bitcoin/bitcoin/pull/23829) (refactor: use braced init for integer literals instead of c style casts by PastaPastaPasta)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-12-08T14:13:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#issuecomment-1342800155",
      "id" : 1342800155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26661",
      "node_id" : "IC_kwDOABII585QCYEb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1342800155/reactions"
      },
      "updated_at" : "2023-01-03T23:42:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1342800155",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "https://github.com/bitcoin/bitcoin/pull/26661/checks?check_run_id=9969494686:\r\n```bash\r\n2022-12-08T14:16:39.658085Z [test] [wallet/wallet.h:832] [WalletLogPrintf] [default wallet] Setting spkMan to active: id = cc3df596507261fb5c2d5dd4fec08d1b067902e56730e5887a030a95d2a63d29, type = bech32m, internal = true\r\n2022-12-08T14:16:40.589188Z [test] [wallet/coinselection.cpp:331] [KnapsackSolver] [selectcoins] Coin selection best subset: 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 0.033 total 49.50\r\nwallet/test/coinselector_tests.cpp(999): ï¿½[1;31;49merror: in \"coinselector_tests/check_max_weight\": check result has failedï¿½[0;39;49m\r\ntest_bitcoin: ./util/result.h:52: const T& util::Result<T>::value() const [with T = wallet::SelectionResult]: Assertion `has_value()' failed.\r\nAborted (core dumped)\r\nmake[3]: *** [Makefile:21461: wallet/test/coinselector_tests.cpp.test] Error 1\r\n```",
      "created_at" : "2022-12-08T16:42:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#issuecomment-1342999679",
      "id" : 1342999679,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26661",
      "node_id" : "IC_kwDOABII585QDIx_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1342999679/reactions"
      },
      "updated_at" : "2022-12-08T16:42:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1342999679",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "all good now, thanks @fanquake ðð¼.",
      "created_at" : "2022-12-08T20:06:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#issuecomment-1343292891",
      "id" : 1343292891,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26661",
      "node_id" : "IC_kwDOABII585QEQXb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1343292891/reactions"
      },
      "updated_at" : "2022-12-08T20:06:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1343292891",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046242148"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046242148"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In 8f897377b4d9661b4d6b46122cd24319e5af99e7 \"wallet: return accurate error messages from Coin Selection\"\r\n\r\nThis seems to be equivalent to returning early in the loop.",
      "commit_id" : "8b8088d2c2a36abf06fe9014013d30ea9d47ff6c",
      "created_at" : "2022-12-12T18:45:24Z",
      "diff_hunk" : "@@ -679,13 +686,23 @@ util::Result<SelectionResult> AutomaticCoinSelection(const CWallet& wallet, Coin\n             }\n         }\n \n-        // Walk-through the filters until the solution gets found\n+        // Walk-through the filters until the solution gets found.\n+        // If no solution is found, return the first detailed error (if any).\n+        // future: add \"error level\" so the worst one can be picked instead.\n+        std::vector<util::Result<SelectionResult>> res_detailed_errors;\n         for (const auto& select_filter : ordered_filters) {\n             if (auto res{AttemptSelection(wallet, value_to_select, select_filter.filter, available_coins,\n-                                          coin_selection_params, select_filter.allow_mixed_output_types)}) return res;\n+                                          coin_selection_params, select_filter.allow_mixed_output_types)}) {\n+                return res; // result found\n+            } else {\n+                // If any specific error message appears here, then something particularly wrong might have happened.\n+                // Save the error and continue the selection process. So if no solutions gets found, we can return\n+                // the detailed error to the upper layers.\n+                if (HasErrorMsg(res)) res_detailed_errors.emplace_back(res);\n+            }\n         }\n         // Coin Selection failed.\n-        return util::Result<SelectionResult>(util::Error());\n+        return res_detailed_errors.empty() ? util::Result<SelectionResult>(util::Error()) : res_detailed_errors.front();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046242148",
      "id" : 1046242148,
      "line" : 719,
      "node_id" : "PRRC_kwDOABII584-XGNk",
      "original_commit_id" : "8f897377b4d9661b4d6b46122cd24319e5af99e7",
      "original_line" : 719,
      "original_position" : 80,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 253,
      "pull_request_review_id" : 1214133013,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046242148/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T18:57:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046242148",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046245950"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046245950"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In e7a94dd2e32f3f0beb0f172ee741e00c674e380b \"wallet: change SelectionResult::Merge assert to error\"\r\n\r\nI'm not sure that `Assume` here is useful. Even for our tests, getting back an expected error is still sufficient to fail tests, we don't need to kill the program.",
      "commit_id" : "8b8088d2c2a36abf06fe9014013d30ea9d47ff6c",
      "created_at" : "2022-12-12T18:49:41Z",
      "diff_hunk" : "@@ -301,6 +304,18 @@ struct SelectionResult\n     /** Total weight of the selected inputs */\n     int m_weight{0};\n \n+    template<typename T>\n+    util::Result<bool> InsertInputs(const T& inputs)\n+    {\n+        // Store sum of combined input sets to check that the results have no shared UTXOs\n+        const size_t expected_count = m_selected_inputs.size() + inputs.size();\n+        util::insert(m_selected_inputs, inputs);\n+        if (!Assume(m_selected_inputs.size() == expected_count)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046245950",
      "id" : 1046245950,
      "line" : 314,
      "node_id" : "PRRC_kwDOABII584-XHI-",
      "original_commit_id" : "e7a94dd2e32f3f0beb0f172ee741e00c674e380b",
      "original_line" : 314,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 33,
      "pull_request_review_id" : 1214133013,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046245950/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T18:57:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046245950",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046252152"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046252152"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In f9986bc3ff8f9dc597b5e8b14fceb1df3d473f6e \"wallet: CoinEligibilityFilter, set default value for every member\"\r\n\r\nIs this commit necessary? I don't think we ever create `CoinEligibilityFilter` without using the constructors which initialize these. If the concern is that we might accidentally create a `CoinEligibilityFilter` without using one of those constructors, I would rather that we delete the default constructor rather than setting potentially dangerous default values.",
      "commit_id" : "8b8088d2c2a36abf06fe9014013d30ea9d47ff6c",
      "created_at" : "2022-12-12T18:57:04Z",
      "diff_hunk" : "@@ -176,13 +176,13 @@ struct CoinEligibilityFilter\n {\n     /** Minimum number of confirmations for outputs that we sent to ourselves.\n      * We may use unconfirmed UTXOs sent from ourselves, e.g. change outputs. */\n-    const int conf_mine;\n+    const int conf_mine{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046252152",
      "id" : 1046252152,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-XIp4",
      "original_commit_id" : "f9986bc3ff8f9dc597b5e8b14fceb1df3d473f6e",
      "original_line" : 179,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 1214133013,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046252152/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T18:57:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046252152",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046386355"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046386355"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I initially thought it in that way but it is not what we want (this is why I mention there that, probably in a follow-up, we should add a \"severity level\" to the errors that are returned from coin selection).\r\n\r\nSo, the rationale is the following one:\r\nThe loop takes an expanded coins eligibility filter on each round; if we return early, then we will not perform some selection rounds that include more coins which could make us find a solution for the target.\r\n\r\nE.g. let's say that we have 1515 UTXO of 0,033 BTC (all of them with depth > 6) and 1 received UTXO of 50 BTC with depth=1. Now, let's say that the user want to spend 49.5 BTC:\r\nThe 1515 low value UTXOs will be included in the first round of the loop (because of their depth) while the 50 BTC UTXO will not (because of its depth and the fact that we received it). So, the first `AttemptSelection` round will fail due a selection result size exceeding the maximum allowed weight, so returning early in the loop would avoid us from finding the good selection result. Which in this case, it can only be found on the second round of the loop.",
      "commit_id" : "4086040f7ada5acfb5b0e84acfece24afbc6b3a5",
      "created_at" : "2022-12-12T21:01:46Z",
      "diff_hunk" : "@@ -679,13 +686,23 @@ util::Result<SelectionResult> AutomaticCoinSelection(const CWallet& wallet, Coin\n             }\n         }\n \n-        // Walk-through the filters until the solution gets found\n+        // Walk-through the filters until the solution gets found.\n+        // If no solution is found, return the first detailed error (if any).\n+        // future: add \"error level\" so the worst one can be picked instead.\n+        std::vector<util::Result<SelectionResult>> res_detailed_errors;\n         for (const auto& select_filter : ordered_filters) {\n             if (auto res{AttemptSelection(wallet, value_to_select, select_filter.filter, available_coins,\n-                                          coin_selection_params, select_filter.allow_mixed_output_types)}) return res;\n+                                          coin_selection_params, select_filter.allow_mixed_output_types)}) {\n+                return res; // result found\n+            } else {\n+                // If any specific error message appears here, then something particularly wrong might have happened.\n+                // Save the error and continue the selection process. So if no solutions gets found, we can return\n+                // the detailed error to the upper layers.\n+                if (HasErrorMsg(res)) res_detailed_errors.emplace_back(res);\n+            }\n         }\n         // Coin Selection failed.\n-        return util::Result<SelectionResult>(util::Error());\n+        return res_detailed_errors.empty() ? util::Result<SelectionResult>(util::Error()) : res_detailed_errors.front();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046386355",
      "id" : 1046386355,
      "in_reply_to_id" : 1046242148,
      "line" : 720,
      "node_id" : "PRRC_kwDOABII584-Xpaz",
      "original_commit_id" : "8f897377b4d9661b4d6b46122cd24319e5af99e7",
      "original_line" : 720,
      "original_position" : 80,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 253,
      "pull_request_review_id" : 1214337226,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046386355/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-13T12:36:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046386355",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046400175"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046400175"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point and catch. Fixed.\r\nThe only fields that could not be set in the constructors are `max_descendants` and `m_include_partial_groups`. So could add default values for those (my concern was having those fields with garbage), plus remove the default constructor.",
      "commit_id" : "8b8088d2c2a36abf06fe9014013d30ea9d47ff6c",
      "created_at" : "2022-12-12T21:18:25Z",
      "diff_hunk" : "@@ -176,13 +176,13 @@ struct CoinEligibilityFilter\n {\n     /** Minimum number of confirmations for outputs that we sent to ourselves.\n      * We may use unconfirmed UTXOs sent from ourselves, e.g. change outputs. */\n-    const int conf_mine;\n+    const int conf_mine{0};",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046400175",
      "id" : 1046400175,
      "in_reply_to_id" : 1046252152,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-Xsyv",
      "original_commit_id" : "f9986bc3ff8f9dc597b5e8b14fceb1df3d473f6e",
      "original_line" : 179,
      "original_position" : 5,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 1214356201,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046400175/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T21:37:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046400175",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046413649"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046413649"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I added it because atm we are simply not supporting the shared UTXOs merge, so this shouldn't happen in our tests neither (we shouldn't be able to trigger this error using the regular transaction creation process, and if we do, then it's a bad bug that should be fixed).\r\n\r\nbut could remove it too. I'm not having a strong preference for it neither.",
      "commit_id" : "8b8088d2c2a36abf06fe9014013d30ea9d47ff6c",
      "created_at" : "2022-12-12T21:35:59Z",
      "diff_hunk" : "@@ -301,6 +304,18 @@ struct SelectionResult\n     /** Total weight of the selected inputs */\n     int m_weight{0};\n \n+    template<typename T>\n+    util::Result<bool> InsertInputs(const T& inputs)\n+    {\n+        // Store sum of combined input sets to check that the results have no shared UTXOs\n+        const size_t expected_count = m_selected_inputs.size() + inputs.size();\n+        util::insert(m_selected_inputs, inputs);\n+        if (!Assume(m_selected_inputs.size() == expected_count)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046413649",
      "id" : 1046413649,
      "in_reply_to_id" : 1046245950,
      "line" : 314,
      "node_id" : "PRRC_kwDOABII584-XwFR",
      "original_commit_id" : "e7a94dd2e32f3f0beb0f172ee741e00c674e380b",
      "original_line" : 314,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 33,
      "pull_request_review_id" : 1214375242,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046413649/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T21:36:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1046413649",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1048166486"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1048166486"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I have a noob cpp question. Can we somehow enforce that returned error is not ignored by the calling code?",
      "commit_id" : "4086040f7ada5acfb5b0e84acfece24afbc6b3a5",
      "created_at" : "2022-12-14T08:46:07Z",
      "diff_hunk" : "@@ -301,6 +304,18 @@ struct SelectionResult\n     /** Total weight of the selected inputs */\n     int m_weight{0};\n \n+    template<typename T>\n+    util::Result<bool> InsertInputs(const T& inputs)\n+    {\n+        // Store sum of combined input sets to check that the results have no shared UTXOs\n+        const size_t expected_count = m_selected_inputs.size() + inputs.size();\n+        util::insert(m_selected_inputs, inputs);\n+        if (!Assume(m_selected_inputs.size() == expected_count)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1048166486",
      "id" : 1048166486,
      "in_reply_to_id" : 1046245950,
      "line" : 314,
      "node_id" : "PRRC_kwDOABII584-ecBW",
      "original_commit_id" : "e7a94dd2e32f3f0beb0f172ee741e00c674e380b",
      "original_line" : 314,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 33,
      "pull_request_review_id" : 1217013828,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1048166486/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-14T08:46:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1048166486",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1048468172"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1048468172"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> I have a noob cpp question. Can we somehow enforce that returned error is not ignored by the calling code?\r\n\r\nyes, by throwing an exception instead of returning a result error message. Which might not be bad. In this case, could be a `runtime_error`.",
      "commit_id" : "4086040f7ada5acfb5b0e84acfece24afbc6b3a5",
      "created_at" : "2022-12-14T13:26:55Z",
      "diff_hunk" : "@@ -301,6 +304,18 @@ struct SelectionResult\n     /** Total weight of the selected inputs */\n     int m_weight{0};\n \n+    template<typename T>\n+    util::Result<bool> InsertInputs(const T& inputs)\n+    {\n+        // Store sum of combined input sets to check that the results have no shared UTXOs\n+        const size_t expected_count = m_selected_inputs.size() + inputs.size();\n+        util::insert(m_selected_inputs, inputs);\n+        if (!Assume(m_selected_inputs.size() == expected_count)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1048468172",
      "id" : 1048468172,
      "in_reply_to_id" : 1046245950,
      "line" : 314,
      "node_id" : "PRRC_kwDOABII584-flrM",
      "original_commit_id" : "e7a94dd2e32f3f0beb0f172ee741e00c674e380b",
      "original_line" : 314,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/wallet/coinselection.h",
      "position" : 33,
      "pull_request_review_id" : 1217457446,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1048468172/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-14T13:26:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1048468172",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 4086040f7ada5acfb5b0e84acfece24afbc6b3a5",
      "created_at" : "2022-12-14T18:50:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#issuecomment-1351974822",
      "id" : 1351974822,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26661",
      "node_id" : "IC_kwDOABII585QlX-m",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1351974822/reactions"
      },
      "updated_at" : "2022-12-14T18:50:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1351974822",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2022-12-14T22:42:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#issuecomment-1352318284",
      "id" : 1352318284,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26661",
      "node_id" : "IC_kwDOABII585Qmr1M",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352318284/reactions"
      },
      "updated_at" : "2022-12-14T22:42:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352318284",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Rebased, conflicts solved.\r\n\r\nPlus, tackled https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1048468172.\r\n\r\nNow instead of returning an error message for the duplicated inputs selection error, \r\nwe will throw a `runtime_error`.\r\n\r\nRationale:\r\nThis is a Coin Selection library restriction (at least for the time being), and no\r\nprocess should be able to trigger this issue using the transaction creation\r\nprocess, so it makes more sense to throw a `runtime_error` if happens, so\r\nthe error severity level is clearly stated, and we tell users/devs to report the\r\nbug if happens.\r\n\r\nSecond point:\r\nI think that it's better for the library structure to return `util::Result` error\r\nmessages for stuff that the user can solve (e.g. a transaction exceeding the\r\nmaximum weight or a lack of pre-selected inputs) and exceptions/runtime_errors\r\nfor unexpected/bad stuff that the user cannot solve alone and should report.",
      "created_at" : "2022-12-15T13:41:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#issuecomment-1353087751",
      "id" : 1353087751,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26661",
      "node_id" : "IC_kwDOABII585QpnsH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1353087751/reactions"
      },
      "updated_at" : "2022-12-16T19:22:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1353087751",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : " > Second point: I think that it's better for the library structure to return `util::Result` error messages for stuff that the user can solve (e.g. a transaction exceeding the maximum weight or a lack of pre-selected inputs) and exceptions/runtime_errors for unexpected/bad stuff that the user cannot solve alone and should report.\r\n\r\nI like this distinction for when to use errors vs exceptions. If we have an agreement amount wallet devs, we could even document it as a dev guideline for wallet.\r\n\r\n",
      "created_at" : "2022-12-15T18:48:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#issuecomment-1353552952",
      "id" : 1353552952,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26661",
      "node_id" : "IC_kwDOABII585QrZQ4",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1353552952/reactions"
      },
      "updated_at" : "2022-12-15T18:48:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1353552952",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1466284?v=4",
         "events_url" : "https://api.github.com/users/S3RK/events{/privacy}",
         "followers_url" : "https://api.github.com/users/S3RK/followers",
         "following_url" : "https://api.github.com/users/S3RK/following{/other_user}",
         "gists_url" : "https://api.github.com/users/S3RK/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/S3RK",
         "id" : 1466284,
         "login" : "S3RK",
         "node_id" : "MDQ6VXNlcjE0NjYyODQ=",
         "organizations_url" : "https://api.github.com/users/S3RK/orgs",
         "received_events_url" : "https://api.github.com/users/S3RK/received_events",
         "repos_url" : "https://api.github.com/users/S3RK/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/S3RK/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/S3RK/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/S3RK"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > Second point: I think that it's better for the library structure to return `util::Result` error messages for stuff that the user can solve (e.g. a transaction exceeding the maximum weight or a lack of pre-selected inputs) and exceptions/runtime_errors for unexpected/bad stuff that the user cannot solve alone and should report.\r\n> \r\n> I like this distinction for when to use errors vs exceptions. If we have an agreement amount wallet devs, we could even document it as a dev guideline for wallet.\r\n\r\nAbsolutely. Let's see If we are all aligned, can follow-up this work with a doc PR.",
      "created_at" : "2022-12-16T14:35:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#issuecomment-1354949100",
      "id" : 1354949100,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26661",
      "node_id" : "IC_kwDOABII585QwuHs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1354949100/reactions"
      },
      "updated_at" : "2022-12-16T14:35:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1354949100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1054860489"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054860489"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "In 87e018b36a0f342411b9a70835d278a26181b484 \"wallet: CoinEligibilityFilter, remove default constructor\"\r\n\r\nRe https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1046400175\r\n> The only fields that could not be set in the constructors are max_descendants and m_include_partial_groups\r\n\r\nIt appears that `max_descendants` is set in all of the constructors, so does it still make sense for it to have a default value?",
      "commit_id" : "f258394eb2b5c57a71ca0cf81f89f53b20104539",
      "created_at" : "2022-12-21T21:44:13Z",
      "diff_hunk" : "@@ -182,10 +182,11 @@ struct CoinEligibilityFilter\n     /** Maximum number of unconfirmed ancestors aggregated across all UTXOs in an OutputGroup. */\n     const uint64_t max_ancestors;\n     /** Maximum number of descendants that a single UTXO in the OutputGroup may have. */\n-    const uint64_t max_descendants;\n+    const uint64_t max_descendants{0};\n     /** When avoid_reuse=true and there are full groups (OUTPUT_GROUP_MAX_ENTRIES), whether or not to use any partial groups.*/\n     const bool m_include_partial_groups{false};\n \n+    CoinEligibilityFilter() = delete;\n     CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_ancestors) {}\n     CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors, uint64_t max_descendants) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_descendants) {}\n     CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors, uint64_t max_descendants, bool include_partial) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_descendants), m_include_partial_groups(include_partial) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1054860489",
      "id" : 1054860489,
      "line" : 195,
      "node_id" : "PRRC_kwDOABII584-3-TJ",
      "original_commit_id" : "87e018b36a0f342411b9a70835d278a26181b484",
      "original_line" : 192,
      "original_position" : 12,
      "original_start_line" : 185,
      "path" : "src/wallet/coinselection.h",
      "position" : 12,
      "pull_request_review_id" : 1226785097,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054860489/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 185,
      "start_side" : "LEFT",
      "updated_at" : "2022-12-21T22:13:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1054860489",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1055020436"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055020436"
         }
      },
      "author_association" : "MEMBER",
      "body" : "yeah true, fixed.\r\nSquashed changes inside the first commit e5e147fe.",
      "commit_id" : "76dc547ee7b05864e7b1b6c55fc0301d47aa3a15",
      "created_at" : "2022-12-22T02:17:48Z",
      "diff_hunk" : "@@ -182,10 +182,11 @@ struct CoinEligibilityFilter\n     /** Maximum number of unconfirmed ancestors aggregated across all UTXOs in an OutputGroup. */\n     const uint64_t max_ancestors;\n     /** Maximum number of descendants that a single UTXO in the OutputGroup may have. */\n-    const uint64_t max_descendants;\n+    const uint64_t max_descendants{0};\n     /** When avoid_reuse=true and there are full groups (OUTPUT_GROUP_MAX_ENTRIES), whether or not to use any partial groups.*/\n     const bool m_include_partial_groups{false};\n \n+    CoinEligibilityFilter() = delete;\n     CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_ancestors) {}\n     CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors, uint64_t max_descendants) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_descendants) {}\n     CoinEligibilityFilter(int conf_mine, int conf_theirs, uint64_t max_ancestors, uint64_t max_descendants, bool include_partial) : conf_mine(conf_mine), conf_theirs(conf_theirs), max_ancestors(max_ancestors), max_descendants(max_descendants), m_include_partial_groups(include_partial) {}",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1055020436",
      "id" : 1055020436,
      "in_reply_to_id" : 1054860489,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584-4lWU",
      "original_commit_id" : "87e018b36a0f342411b9a70835d278a26181b484",
      "original_line" : 194,
      "original_position" : 12,
      "original_start_line" : 185,
      "path" : "src/wallet/coinselection.h",
      "position" : null,
      "pull_request_review_id" : 1227018569,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055020436/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "LEFT",
      "updated_at" : "2022-12-22T02:17:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1055020436",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "crACK 76dc547ee7b05864e7b1b6c55fc0301d47aa3a15",
      "created_at" : "2022-12-23T04:35:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#issuecomment-1363607752",
      "id" : 1363607752,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26661",
      "node_id" : "IC_kwDOABII585RRwDI",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1363607752/reactions"
      },
      "updated_at" : "2022-12-23T04:35:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1363607752",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/75942586?v=4",
         "events_url" : "https://api.github.com/users/ishaanam/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ishaanam/followers",
         "following_url" : "https://api.github.com/users/ishaanam/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ishaanam/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ishaanam",
         "id" : 75942586,
         "login" : "ishaanam",
         "node_id" : "MDQ6VXNlcjc1OTQyNTg2",
         "organizations_url" : "https://api.github.com/users/ishaanam/orgs",
         "received_events_url" : "https://api.github.com/users/ishaanam/received_events",
         "repos_url" : "https://api.github.com/users/ishaanam/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ishaanam/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ishaanam/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ishaanam"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1056802447"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056802447"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit:\r\n```suggestion\r\n                ordered_filters.push_back({CoinEligibilityFilter(/*conf_mine=*/0, /*conf_theirs=*/0, max_ancestors-1, max_descendants-1, /*include_partial=*/true)});\r\n```",
      "commit_id" : "76dc547ee7b05864e7b1b6c55fc0301d47aa3a15",
      "created_at" : "2022-12-24T11:39:01Z",
      "diff_hunk" : "@@ -644,51 +649,43 @@ std::optional<SelectionResult> AutomaticCoinSelection(const CWallet& wallet, Coi\n     // transaction at a target feerate. If an attempt fails, more attempts may be made using a more\n     // permissive CoinEligibilityFilter.\n     std::optional<SelectionResult> res = [&] {\n-        // If possible, fund the transaction with confirmed UTXOs only. Prefer at least six\n-        // confirmations on outputs received from other wallets and only spend confirmed change.\n-        if (auto r1{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(1, 6, 0), available_coins, coin_selection_params, /*allow_mixed_output_types=*/false)}) return r1;\n-        // Allow mixing only if no solution from any single output type can be found\n-        if (auto r2{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(1, 1, 0), available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) return r2;\n-\n+        // Place coins eligibility filters on a scope increasing order.\n+        std::vector<SelectionFilter> ordered_filters{\n+                // If possible, fund the transaction with confirmed UTXOs only. Prefer at least six\n+                // confirmations on outputs received from other wallets and only spend confirmed change.\n+                {CoinEligibilityFilter(1, 6, 0), /*allow_mixed_output_types=*/false},\n+                {CoinEligibilityFilter(1, 1, 0)},\n+        };\n         // Fall back to using zero confirmation change (but with as few ancestors in the mempool as\n         // possible) if we cannot fund the transaction otherwise.\n         if (wallet.m_spend_zero_conf_change) {\n-            if (auto r3{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(0, 1, 2), available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) return r3;\n-            if (auto r4{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(0, 1, std::min((size_t)4, max_ancestors/3), std::min((size_t)4, max_descendants/3)),\n-                                   available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                return r4;\n-            }\n-            if (auto r5{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(0, 1, max_ancestors/2, max_descendants/2),\n-                                   available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                return r5;\n-            }\n+            ordered_filters.push_back({CoinEligibilityFilter(0, 1, 2)});\n+            ordered_filters.push_back({CoinEligibilityFilter(0, 1, std::min((size_t)4, max_ancestors/3), std::min((size_t)4, max_descendants/3))});\n+            ordered_filters.push_back({CoinEligibilityFilter(0, 1, max_ancestors/2, max_descendants/2)});\n             // If partial groups are allowed, relax the requirement of spending OutputGroups (groups\n             // of UTXOs sent to the same address, which are obviously controlled by a single wallet)\n             // in their entirety.\n-            if (auto r6{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(0, 1, max_ancestors-1, max_descendants-1, /*include_partial=*/true),\n-                                   available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                return r6;\n-            }\n+            ordered_filters.push_back({CoinEligibilityFilter(0, 1, max_ancestors-1, max_descendants-1, /*include_partial=*/true)});\n             // Try with unsafe inputs if they are allowed. This may spend unconfirmed outputs\n             // received from other wallets.\n             if (coin_control.m_include_unsafe_inputs) {\n-                if (auto r7{AttemptSelection(wallet, value_to_select,\n-                    CoinEligibilityFilter(/*conf_mine=*/0, /*conf_theirs=*/0, max_ancestors-1, max_descendants-1, /*include_partial=*/true),\n-                    available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                    return r7;\n-                }\n+                ordered_filters.push_back({CoinEligibilityFilter(/*conf_mine=*/0, /*conf_theirs*/0, max_ancestors-1, max_descendants-1, /*include_partial=*/true)});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1056802447",
      "id" : 1056802447,
      "line" : 679,
      "node_id" : "PRRC_kwDOABII584-_YaP",
      "original_commit_id" : "e5e147fe97f706e82bc51358f8bdc355f355be57",
      "original_line" : 672,
      "original_position" : 60,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 60,
      "pull_request_review_id" : 1229609280,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056802447/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-24T11:40:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056802447",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1056835778"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056835778"
         }
      },
      "author_association" : "MEMBER",
      "body" : "will do if have to re-touch ðð¼ ",
      "commit_id" : "76dc547ee7b05864e7b1b6c55fc0301d47aa3a15",
      "created_at" : "2022-12-24T14:53:01Z",
      "diff_hunk" : "@@ -644,51 +649,43 @@ std::optional<SelectionResult> AutomaticCoinSelection(const CWallet& wallet, Coi\n     // transaction at a target feerate. If an attempt fails, more attempts may be made using a more\n     // permissive CoinEligibilityFilter.\n     std::optional<SelectionResult> res = [&] {\n-        // If possible, fund the transaction with confirmed UTXOs only. Prefer at least six\n-        // confirmations on outputs received from other wallets and only spend confirmed change.\n-        if (auto r1{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(1, 6, 0), available_coins, coin_selection_params, /*allow_mixed_output_types=*/false)}) return r1;\n-        // Allow mixing only if no solution from any single output type can be found\n-        if (auto r2{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(1, 1, 0), available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) return r2;\n-\n+        // Place coins eligibility filters on a scope increasing order.\n+        std::vector<SelectionFilter> ordered_filters{\n+                // If possible, fund the transaction with confirmed UTXOs only. Prefer at least six\n+                // confirmations on outputs received from other wallets and only spend confirmed change.\n+                {CoinEligibilityFilter(1, 6, 0), /*allow_mixed_output_types=*/false},\n+                {CoinEligibilityFilter(1, 1, 0)},\n+        };\n         // Fall back to using zero confirmation change (but with as few ancestors in the mempool as\n         // possible) if we cannot fund the transaction otherwise.\n         if (wallet.m_spend_zero_conf_change) {\n-            if (auto r3{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(0, 1, 2), available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) return r3;\n-            if (auto r4{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(0, 1, std::min((size_t)4, max_ancestors/3), std::min((size_t)4, max_descendants/3)),\n-                                   available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                return r4;\n-            }\n-            if (auto r5{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(0, 1, max_ancestors/2, max_descendants/2),\n-                                   available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                return r5;\n-            }\n+            ordered_filters.push_back({CoinEligibilityFilter(0, 1, 2)});\n+            ordered_filters.push_back({CoinEligibilityFilter(0, 1, std::min((size_t)4, max_ancestors/3), std::min((size_t)4, max_descendants/3))});\n+            ordered_filters.push_back({CoinEligibilityFilter(0, 1, max_ancestors/2, max_descendants/2)});\n             // If partial groups are allowed, relax the requirement of spending OutputGroups (groups\n             // of UTXOs sent to the same address, which are obviously controlled by a single wallet)\n             // in their entirety.\n-            if (auto r6{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(0, 1, max_ancestors-1, max_descendants-1, /*include_partial=*/true),\n-                                   available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                return r6;\n-            }\n+            ordered_filters.push_back({CoinEligibilityFilter(0, 1, max_ancestors-1, max_descendants-1, /*include_partial=*/true)});\n             // Try with unsafe inputs if they are allowed. This may spend unconfirmed outputs\n             // received from other wallets.\n             if (coin_control.m_include_unsafe_inputs) {\n-                if (auto r7{AttemptSelection(wallet, value_to_select,\n-                    CoinEligibilityFilter(/*conf_mine=*/0, /*conf_theirs=*/0, max_ancestors-1, max_descendants-1, /*include_partial=*/true),\n-                    available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                    return r7;\n-                }\n+                ordered_filters.push_back({CoinEligibilityFilter(/*conf_mine=*/0, /*conf_theirs*/0, max_ancestors-1, max_descendants-1, /*include_partial=*/true)});",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1056835778",
      "id" : 1056835778,
      "in_reply_to_id" : 1056802447,
      "line" : 679,
      "node_id" : "PRRC_kwDOABII584-_gjC",
      "original_commit_id" : "e5e147fe97f706e82bc51358f8bdc355f355be57",
      "original_line" : 672,
      "original_position" : 60,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 60,
      "pull_request_review_id" : 1229654444,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056835778/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-24T14:53:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1056835778",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5377650?v=4",
         "events_url" : "https://api.github.com/users/furszy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/furszy/followers",
         "following_url" : "https://api.github.com/users/furszy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/furszy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/furszy",
         "id" : 5377650,
         "login" : "furszy",
         "node_id" : "MDQ6VXNlcjUzNzc2NTA=",
         "organizations_url" : "https://api.github.com/users/furszy/orgs",
         "received_events_url" : "https://api.github.com/users/furszy/received_events",
         "repos_url" : "https://api.github.com/users/furszy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/furszy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/furszy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/furszy"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 76dc547ee7b05864e7b1b6c55fc0301d47aa3a15",
      "created_at" : "2023-01-03T23:42:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#issuecomment-1370334784",
      "id" : 1370334784,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/26661",
      "node_id" : "IC_kwDOABII585RraZA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1370334784/reactions"
      },
      "updated_at" : "2023-01-03T23:42:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1370334784",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1103836760"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1103836760"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The local variable `res` in here shadows another one: https://github.com/bitcoin/bitcoin/blob/76dc547ee7b05864e7b1b6c55fc0301d47aa3a15/src/wallet/spend.cpp#L658\r\n\r\nFixed in #27087.",
      "commit_id" : "76dc547ee7b05864e7b1b6c55fc0301d47aa3a15",
      "created_at" : "2023-02-12T16:57:16Z",
      "diff_hunk" : "@@ -643,54 +655,56 @@ std::optional<SelectionResult> AutomaticCoinSelection(const CWallet& wallet, Coi\n     // Coin Selection attempts to select inputs from a pool of eligible UTXOs to fund the\n     // transaction at a target feerate. If an attempt fails, more attempts may be made using a more\n     // permissive CoinEligibilityFilter.\n-    std::optional<SelectionResult> res = [&] {\n-        // If possible, fund the transaction with confirmed UTXOs only. Prefer at least six\n-        // confirmations on outputs received from other wallets and only spend confirmed change.\n-        if (auto r1{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(1, 6, 0), available_coins, coin_selection_params, /*allow_mixed_output_types=*/false)}) return r1;\n-        // Allow mixing only if no solution from any single output type can be found\n-        if (auto r2{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(1, 1, 0), available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) return r2;\n-\n+    util::Result<SelectionResult> res = [&] {\n+        // Place coins eligibility filters on a scope increasing order.\n+        std::vector<SelectionFilter> ordered_filters{\n+                // If possible, fund the transaction with confirmed UTXOs only. Prefer at least six\n+                // confirmations on outputs received from other wallets and only spend confirmed change.\n+                {CoinEligibilityFilter(1, 6, 0), /*allow_mixed_output_types=*/false},\n+                {CoinEligibilityFilter(1, 1, 0)},\n+        };\n         // Fall back to using zero confirmation change (but with as few ancestors in the mempool as\n         // possible) if we cannot fund the transaction otherwise.\n         if (wallet.m_spend_zero_conf_change) {\n-            if (auto r3{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(0, 1, 2), available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) return r3;\n-            if (auto r4{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(0, 1, std::min((size_t)4, max_ancestors/3), std::min((size_t)4, max_descendants/3)),\n-                                   available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                return r4;\n-            }\n-            if (auto r5{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(0, 1, max_ancestors/2, max_descendants/2),\n-                                   available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                return r5;\n-            }\n+            ordered_filters.push_back({CoinEligibilityFilter(0, 1, 2)});\n+            ordered_filters.push_back({CoinEligibilityFilter(0, 1, std::min((size_t)4, max_ancestors/3), std::min((size_t)4, max_descendants/3))});\n+            ordered_filters.push_back({CoinEligibilityFilter(0, 1, max_ancestors/2, max_descendants/2)});\n             // If partial groups are allowed, relax the requirement of spending OutputGroups (groups\n             // of UTXOs sent to the same address, which are obviously controlled by a single wallet)\n             // in their entirety.\n-            if (auto r6{AttemptSelection(wallet, value_to_select, CoinEligibilityFilter(0, 1, max_ancestors-1, max_descendants-1, /*include_partial=*/true),\n-                                   available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                return r6;\n-            }\n+            ordered_filters.push_back({CoinEligibilityFilter(0, 1, max_ancestors-1, max_descendants-1, /*include_partial=*/true)});\n             // Try with unsafe inputs if they are allowed. This may spend unconfirmed outputs\n             // received from other wallets.\n             if (coin_control.m_include_unsafe_inputs) {\n-                if (auto r7{AttemptSelection(wallet, value_to_select,\n-                    CoinEligibilityFilter(/*conf_mine=*/0, /*conf_theirs=*/0, max_ancestors-1, max_descendants-1, /*include_partial=*/true),\n-                    available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                    return r7;\n-                }\n+                ordered_filters.push_back({CoinEligibilityFilter(/*conf_mine=*/0, /*conf_theirs*/0, max_ancestors-1, max_descendants-1, /*include_partial=*/true)});\n             }\n             // Try with unlimited ancestors/descendants. The transaction will still need to meet\n             // mempool ancestor/descendant policy to be accepted to mempool and broadcasted, but\n             // OutputGroups use heuristics that may overestimate ancestor/descendant counts.\n             if (!fRejectLongChains) {\n-                if (auto r8{AttemptSelection(wallet, value_to_select,\n-                                      CoinEligibilityFilter(0, 1, std::numeric_limits<uint64_t>::max(), std::numeric_limits<uint64_t>::max(), /*include_partial=*/true),\n-                                      available_coins, coin_selection_params, /*allow_mixed_output_types=*/true)}) {\n-                    return r8;\n-                }\n+                ordered_filters.push_back({CoinEligibilityFilter(0, 1, std::numeric_limits<uint64_t>::max(),\n+                                                                   std::numeric_limits<uint64_t>::max(),\n+                                                                   /*include_partial=*/true)});\n+            }\n+        }\n+\n+        // Walk-through the filters until the solution gets found.\n+        // If no solution is found, return the first detailed error (if any).\n+        // future: add \"error level\" so the worst one can be picked instead.\n+        std::vector<util::Result<SelectionResult>> res_detailed_errors;\n+        for (const auto& select_filter : ordered_filters) {\n+            if (auto res{AttemptSelection(wallet, value_to_select, select_filter.filter, available_coins,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/26661#discussion_r1103836760",
      "id" : 1103836760,
      "line" : 696,
      "node_id" : "PRRC_kwDOABII585ByzZY",
      "original_commit_id" : "76dc547ee7b05864e7b1b6c55fc0301d47aa3a15",
      "original_line" : 696,
      "original_position" : 182,
      "original_start_line" : null,
      "path" : "src/wallet/spend.cpp",
      "position" : 182,
      "pull_request_review_id" : 1294744886,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/26661",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1103836760/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-12T16:57:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1103836760",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
