{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "CONTRIBUTOR",
   "body" : " Add sendall RPC nÃ©e sweep\r\n\r\n_Motivation_\r\nCurrently, the wallet uses a fSubtractFeeAmount (SFFO) flag on the\r\nrecipients objects for all forms of sending calls. According to the\r\ncommit discussion, this flag was chiefly introduced to permit sweeping\r\nwithout manually calculating the fees of transactions. However, the flag\r\nleads to unintuitive behavior and makes it more complicated to test\r\nmany wallet RPCs exhaustively. We proposed to introduce a dedicated\r\n`sendall` RPC with the intention to cover this functionality.\r\n\r\nSince the proposal, it was discovered in further discussion that our\r\nproposed `sendall` rpc and SFFO have subtly different scopes of\r\noperation.\r\nâ¢ sendall:\r\n  Use _given UTXOs_ to pay a destination the remainder after fees.\r\nâ¢ SFFO:\r\n  Use a _given budget_ to pay an address the remainder after fees.\r\n\r\nWhile `sendall` will simplify cases of spending a given set of\r\nUTXOs such as paying the value from one or more specific UTXOs, emptying\r\na wallet, or burning dust, we realized that there are some cases in\r\nwhich SFFO is used to pay other parties from a limited budget,\r\nwhich can often lead to the creation of change outputs. This cannot be\r\neasily replicated using `sendall` as it would require manual\r\ncomputation of the appropriate change amount.\r\n\r\nAs such, sendall cannot replace all uses of SFFO, but it still has a\r\ndifferent use case and will aid in simplifying some wallet calls and\r\nnumerous wallet tests.\r\n\r\n_Sendall call details_\r\nThe proposed sendall call builds a transaction from a specific\r\nsubset of the wallet's UTXO pool (by default all of them) and assigns\r\nthe funds to one or more receivers. Receivers can either be specified\r\nwith a given amount or receive an equal share of the remaining\r\nunassigned funds. At least one recipient must be provided without\r\nassigned amount to collect the remainder. The `sendall` call will\r\nnever create change. The call has a `send_max` option that changes the\r\ndefault behavior of spending all UTXOs (\"no UTXO left behind\"), to\r\nmaximizing the output amount of the transaction by skipping uneconomic\r\nUTXOs. The `send_max` option is incompatible with providing a specific\r\nset of inputs.\r\n\r\n---\r\nEdit: Replaced OP with latest commit message to reflect my updated motivation of the proposal.",
   "closed_at" : "2022-03-30T13:04:46Z",
   "closed_by" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 48,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24118/comments",
   "created_at" : "2022-01-20T22:20:52Z",
   "draft" : false,
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24118/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/pull/24118",
   "id" : 1109821278,
   "labels" : [
      {
         "color" : "08a781",
         "default" : false,
         "description" : null,
         "id" : 149424,
         "name" : "Wallet",
         "node_id" : "MDU6TGFiZWwxNDk0MjQ=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet"
      },
      {
         "color" : "0052cc",
         "default" : false,
         "description" : null,
         "id" : 98279177,
         "name" : "RPC/REST/ZMQ",
         "node_id" : "MDU6TGFiZWw5ODI3OTE3Nw==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ"
      },
      {
         "color" : "0052cc",
         "default" : false,
         "description" : "",
         "id" : 1648013533,
         "name" : "Review club",
         "node_id" : "MDU6TGFiZWwxNjQ4MDEzNTMz",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Review%20club"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24118/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "PR_kwDOABII584xWeD7",
   "number" : 24118,
   "performed_via_github_app" : null,
   "pull_request" : {
      "diff_url" : "https://github.com/bitcoin/bitcoin/pull/24118.diff",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24118",
      "merged_at" : "2022-03-30T13:04:46Z",
      "patch_url" : "https://github.com/bitcoin/bitcoin/pull/24118.patch",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24118"
   },
   "reactions" : {
      "+1" : 4,
      "-1" : 0,
      "confused" : 0,
      "eyes" : 0,
      "heart" : 0,
      "hooray" : 0,
      "laugh" : 0,
      "rocket" : 0,
      "total_count" : 4,
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24118/reactions"
   },
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "timeline_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24118/timeline",
   "title" : "Add 'sendall' RPC nÃ©e sweep",
   "updated_at" : "2022-03-30T13:54:16Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24118",
   "user" : {
      "avatar_url" : "https://avatars.githubusercontent.com/u/4060799?v=4",
      "events_url" : "https://api.github.com/users/Xekyo/events{/privacy}",
      "followers_url" : "https://api.github.com/users/Xekyo/followers",
      "following_url" : "https://api.github.com/users/Xekyo/following{/other_user}",
      "gists_url" : "https://api.github.com/users/Xekyo/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/Xekyo",
      "id" : 4060799,
      "login" : "Xekyo",
      "node_id" : "MDQ6VXNlcjQwNjA3OTk=",
      "organizations_url" : "https://api.github.com/users/Xekyo/orgs",
      "received_events_url" : "https://api.github.com/users/Xekyo/received_events",
      "repos_url" : "https://api.github.com/users/Xekyo/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/Xekyo/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/Xekyo/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/Xekyo"
   }
}
