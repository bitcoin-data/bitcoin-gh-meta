[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26593](https://github.com/bitcoin/bitcoin/pull/26593) (tracing: Only prepare tracepoint arguments when actually tracing by 0xB10C)\n* [#26569](https://github.com/bitcoin/bitcoin/pull/26569) (p2p: Ensure transaction announcements are only queued for fully connected peers by dergoegge)\n* [#26283](https://github.com/bitcoin/bitcoin/pull/26283) (p2p: Fill reconciliation sets and request reconciliation (Erlay) by naumenkogs)\n* [#26140](https://github.com/bitcoin/bitcoin/pull/26140) (refactor: Move CNodeState members guarded by g_msgproc_mutex to Peer by dergoegge)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2022-01-22T08:17:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1019096955",
      "id" : 1019096955,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII5848vi97",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019096955/reactions"
      },
      "updated_at" : "2022-12-01T11:30:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019096955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24125#discussion_r790130527"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790130527"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "**nit:**\r\n\r\n```suggestion\r\n```",
      "commit_id" : "d097e5dc3356c1e2d9d4030af14ccc0ac058d6e0",
      "created_at" : "2022-01-22T10:57:29Z",
      "diff_hunk" : "@@ -3844,6 +3845,7 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n     }\n \n     if (msg_type == NetMsgType::MEMPOOL) {\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#discussion_r790130527",
      "id" : 790130527,
      "line" : 3848,
      "node_id" : "PRRC_kwDOABII584vGG9f",
      "original_commit_id" : "d097e5dc3356c1e2d9d4030af14ccc0ac058d6e0",
      "original_line" : 3848,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 48,
      "pull_request_review_id" : 860195052,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790130527/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-22T10:58:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790130527",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/85434418?v=4",
         "events_url" : "https://api.github.com/users/shaavan/events{/privacy}",
         "followers_url" : "https://api.github.com/users/shaavan/followers",
         "following_url" : "https://api.github.com/users/shaavan/following{/other_user}",
         "gists_url" : "https://api.github.com/users/shaavan/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/shaavan",
         "id" : 85434418,
         "login" : "shaavan",
         "node_id" : "MDQ6VXNlcjg1NDM0NDE4",
         "organizations_url" : "https://api.github.com/users/shaavan/orgs",
         "received_events_url" : "https://api.github.com/users/shaavan/received_events",
         "repos_url" : "https://api.github.com/users/shaavan/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/shaavan/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/shaavan/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/shaavan"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24125#discussion_r790143195"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790143195"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done. Thanks.",
      "commit_id" : "f10db767bc1beebf632fe930a6b675a043e501d4",
      "created_at" : "2022-01-22T13:33:29Z",
      "diff_hunk" : "@@ -3844,6 +3845,7 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n     }\n \n     if (msg_type == NetMsgType::MEMPOOL) {\n+",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#discussion_r790143195",
      "id" : 790143195,
      "in_reply_to_id" : 790130527,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vGKDb",
      "original_commit_id" : "d097e5dc3356c1e2d9d4030af14ccc0ac058d6e0",
      "original_line" : 3848,
      "original_position" : 48,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : null,
      "pull_request_review_id" : 860206642,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790143195/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-22T13:33:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790143195",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.\r\n\r\nBut reviewing changes in `PeerManagerImpl::SendMessages()` is not trivial because of a huge critical section size. Also there are concerns about external synchronizing (similar to https://github.com/bitcoin/bitcoin/pull/24122#pullrequestreview-861076744).",
      "created_at" : "2022-01-24T17:12:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1020338646",
      "id" : 1020338646,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII58480SHW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020338646/reactions"
      },
      "updated_at" : "2022-01-24T17:12:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020338646",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "To address the external synchronizing, the code snippets below should be encapsulated as `CNode::TxRelay` methods?\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/bd482b3ffebc68130f8a18dabf08ed1aff7ea159/src/net_processing.cpp#L2038-L2041\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/bd482b3ffebc68130f8a18dabf08ed1aff7ea159/src/net_processing.cpp#L1904-L1910\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/bd482b3ffebc68130f8a18dabf08ed1aff7ea159/src/net_processing.cpp#L4807-L4935",
      "created_at" : "2022-01-25T13:49:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1021200795",
      "id" : 1021200795,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII58483kmb",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1021200795/reactions"
      },
      "updated_at" : "2022-01-25T13:49:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1021200795",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> To address the external synchronizing, the code snippets below should be encapsulated as `CNode::TxRelay` methods?\r\n\r\nThat is my guess. Of course, it would be nice to hear other devs opinion.",
      "created_at" : "2022-01-25T13:53:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1021204889",
      "id" : 1021204889,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII58483lmZ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1021204889/reactions"
      },
      "updated_at" : "2022-01-25T13:53:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1021204889",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The new commit addresses most of https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1020338646.\r\n\r\nAll code snippets protected by `cs_tx_inventory\\m_tx_inventory_mutex` (except for the one in `PeerManagerImpl::SendMessages(CNode* pto)`) were encapsulated in `struct CNode::TxRelay`.\r\n\r\nAnnotations that use negative capabilities were also added.\r\n\r\nIt doesn't seem trivial to bring the code in `PeerManagerImpl::SendMessages(CNode* pto)` into `net.cpp`, as it uses a significant amount of `net_processing` objects and references. I will try to find a way to do this.",
      "created_at" : "2022-02-12T02:32:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1036952931",
      "id" : 1036952931,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII5849zqVj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036952931/reactions"
      },
      "updated_at" : "2022-02-12T02:32:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036952931",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2022-03-25T17:16:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1079235939",
      "id" : 1079235939,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII585AU9Vj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1079235939/reactions"
      },
      "updated_at" : "2022-03-25T17:16:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1079235939",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@w0xlt \r\n\r\nStill working on this?",
      "created_at" : "2022-05-16T20:28:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1128104485",
      "id" : 1128104485,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII585DPYIl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128104485/reactions"
      },
      "updated_at" : "2022-05-16T20:28:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1128104485",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> It doesn't seem trivial to bring the code in PeerManagerImpl::SendMessages(CNode* pto) into net.cpp, as it uses a significant amount of net_processing objects and references. I will try to find a way to do this.\r\n\r\n@hebasto I hadn't seen the message before. I will try to solve the issue described in the comment above.",
      "created_at" : "2022-06-24T13:33:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1165580926",
      "id" : 1165580926,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII585FeVp-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1165580926/reactions"
      },
      "updated_at" : "2022-06-24T13:33:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1165580926",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> It doesn't seem trivial to bring the code in PeerManagerImpl::SendMessages(CNode* pto) into net.cpp, as it uses a significant amount of net_processing objects and references. I will try to find a way to do this.\r\n\r\n@hebasto 88777c4 does the trick, apparently with no change in behavior..\r\nHowever, I'm not sure it's an elegant solution due to the amount of parameters.\r\nI'm pushing it anyway so that reviewers can eventually suggest some improvement.\r\n\r\nThis commit also makes it easier to change `RecursiveMutex m_bloom_filter_mutex` to `Mutex`",
      "created_at" : "2022-06-24T20:10:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1165900709",
      "id" : 1165900709,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII585Ffjul",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1165900709/reactions"
      },
      "updated_at" : "2022-06-25T11:03:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1165900709",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Are you still working on this?",
      "created_at" : "2022-10-12T18:57:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1276603783",
      "id" : 1276603783,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII585MF22H",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276603783/reactions"
      },
      "updated_at" : "2022-10-12T18:57:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276603783",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "After 1066d10f71e6800c78012d789ff6ae19df0243fe, the PR title and description should be updated, no?",
      "created_at" : "2022-10-17T19:20:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1281359416",
      "id" : 1281359416,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII585MX_44",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281359416/reactions"
      },
      "updated_at" : "2022-10-17T19:20:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281359416",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Are you still working on this?\r\n\r\nThe PR is ready for reviews.\r\n\r\n> PR title and description should be updated\r\n\r\nDone.",
      "created_at" : "2022-10-17T20:14:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1281434897",
      "id" : 1281434897,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII585MYSUR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281434897/reactions"
      },
      "updated_at" : "2022-10-18T13:26:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1281434897",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24125#discussion_r997772410"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/997772410"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I haven't reviewed this pull request, but this would be the first time that a net processing logic is put in the peers struct, instead of the net processing implementation.",
      "commit_id" : "60519a8797fa0e2cfb5b77ef8fd5b058578c687d",
      "created_at" : "2022-10-18T06:35:16Z",
      "diff_hunk" : "@@ -281,6 +303,180 @@ struct Peer {\n \n         /** Minimum fee rate with which to filter transaction announcements to this node. See BIP133. */\n         std::atomic<CAmount> m_fee_filter_received{0};\n+\n+        void AddKnownTx(const uint256& hash) EXCLUSIVE_LOCKS_REQUIRED(!m_tx_inventory_mutex)\n+        {\n+            AssertLockNotHeld(m_tx_inventory_mutex);\n+\n+            LOCK(m_tx_inventory_mutex);\n+            m_tx_inventory_known_filter.insert(hash);\n+        }\n+\n+        void RelayTransaction(const uint256& hash) EXCLUSIVE_LOCKS_REQUIRED(!m_tx_inventory_mutex)\n+        {\n+            AssertLockNotHeld(m_tx_inventory_mutex);\n+            LOCK(m_tx_inventory_mutex);\n+            if (!m_tx_inventory_known_filter.contains(hash)) {\n+                m_tx_inventory_to_send.insert(hash);\n+            }\n+        }\n+\n+        bool VerifyUnconfirmedParent(const uint256& parent_txid) EXCLUSIVE_LOCKS_REQUIRED(!m_tx_inventory_mutex)\n+        {\n+            AssertLockNotHeld(m_tx_inventory_mutex);\n+            return WITH_LOCK(m_tx_inventory_mutex, return !m_tx_inventory_known_filter.contains(parent_txid));\n+        }\n+\n+        void SetSendMempool(bool value) EXCLUSIVE_LOCKS_REQUIRED(!m_tx_inventory_mutex)\n+        {\n+            AssertLockNotHeld(m_tx_inventory_mutex);\n+            LOCK(m_tx_inventory_mutex);\n+            m_send_mempool = value;\n+        }\n+\n+        void Relay(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#discussion_r997772410",
      "id" : 997772410,
      "line" : 337,
      "node_id" : "PRRC_kwDOABII5847eMx6",
      "original_commit_id" : "60519a8797fa0e2cfb5b77ef8fd5b058578c687d",
      "original_line" : 337,
      "original_position" : 73,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 73,
      "pull_request_review_id" : 1145166480,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/997772410/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-18T06:35:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/997772410",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24125#discussion_r998302086"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/998302086"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "The idea is to prevent external synchronizing (acquiring `m_tx_inventory_mutex` from outside of the `CNode::TxRelay` instance).\r\nPerhaps this requires a more complex refactoring.",
      "commit_id" : "60519a8797fa0e2cfb5b77ef8fd5b058578c687d",
      "created_at" : "2022-10-18T14:20:59Z",
      "diff_hunk" : "@@ -281,6 +303,180 @@ struct Peer {\n \n         /** Minimum fee rate with which to filter transaction announcements to this node. See BIP133. */\n         std::atomic<CAmount> m_fee_filter_received{0};\n+\n+        void AddKnownTx(const uint256& hash) EXCLUSIVE_LOCKS_REQUIRED(!m_tx_inventory_mutex)\n+        {\n+            AssertLockNotHeld(m_tx_inventory_mutex);\n+\n+            LOCK(m_tx_inventory_mutex);\n+            m_tx_inventory_known_filter.insert(hash);\n+        }\n+\n+        void RelayTransaction(const uint256& hash) EXCLUSIVE_LOCKS_REQUIRED(!m_tx_inventory_mutex)\n+        {\n+            AssertLockNotHeld(m_tx_inventory_mutex);\n+            LOCK(m_tx_inventory_mutex);\n+            if (!m_tx_inventory_known_filter.contains(hash)) {\n+                m_tx_inventory_to_send.insert(hash);\n+            }\n+        }\n+\n+        bool VerifyUnconfirmedParent(const uint256& parent_txid) EXCLUSIVE_LOCKS_REQUIRED(!m_tx_inventory_mutex)\n+        {\n+            AssertLockNotHeld(m_tx_inventory_mutex);\n+            return WITH_LOCK(m_tx_inventory_mutex, return !m_tx_inventory_known_filter.contains(parent_txid));\n+        }\n+\n+        void SetSendMempool(bool value) EXCLUSIVE_LOCKS_REQUIRED(!m_tx_inventory_mutex)\n+        {\n+            AssertLockNotHeld(m_tx_inventory_mutex);\n+            LOCK(m_tx_inventory_mutex);\n+            m_send_mempool = value;\n+        }\n+\n+        void Relay(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#discussion_r998302086",
      "id" : 998302086,
      "in_reply_to_id" : 997772410,
      "line" : 337,
      "node_id" : "PRRC_kwDOABII5847gOGG",
      "original_commit_id" : "60519a8797fa0e2cfb5b77ef8fd5b058578c687d",
      "original_line" : 337,
      "original_position" : 73,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 73,
      "pull_request_review_id" : 1145925869,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/998302086/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-10-18T14:20:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/998302086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2022-12-02T16:29:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#issuecomment-1335505616",
      "id" : 1335505616,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24125",
      "node_id" : "IC_kwDOABII585PmjLQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1335505616/reactions"
      },
      "updated_at" : "2022-12-02T16:29:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1335505616",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24125#discussion_r1097584697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24125"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1097584697"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@dergoegge you might have thoughts here?",
      "commit_id" : "60519a8797fa0e2cfb5b77ef8fd5b058578c687d",
      "created_at" : "2023-02-06T15:59:19Z",
      "diff_hunk" : "@@ -281,6 +303,180 @@ struct Peer {\n \n         /** Minimum fee rate with which to filter transaction announcements to this node. See BIP133. */\n         std::atomic<CAmount> m_fee_filter_received{0};\n+\n+        void AddKnownTx(const uint256& hash) EXCLUSIVE_LOCKS_REQUIRED(!m_tx_inventory_mutex)\n+        {\n+            AssertLockNotHeld(m_tx_inventory_mutex);\n+\n+            LOCK(m_tx_inventory_mutex);\n+            m_tx_inventory_known_filter.insert(hash);\n+        }\n+\n+        void RelayTransaction(const uint256& hash) EXCLUSIVE_LOCKS_REQUIRED(!m_tx_inventory_mutex)\n+        {\n+            AssertLockNotHeld(m_tx_inventory_mutex);\n+            LOCK(m_tx_inventory_mutex);\n+            if (!m_tx_inventory_known_filter.contains(hash)) {\n+                m_tx_inventory_to_send.insert(hash);\n+            }\n+        }\n+\n+        bool VerifyUnconfirmedParent(const uint256& parent_txid) EXCLUSIVE_LOCKS_REQUIRED(!m_tx_inventory_mutex)\n+        {\n+            AssertLockNotHeld(m_tx_inventory_mutex);\n+            return WITH_LOCK(m_tx_inventory_mutex, return !m_tx_inventory_known_filter.contains(parent_txid));\n+        }\n+\n+        void SetSendMempool(bool value) EXCLUSIVE_LOCKS_REQUIRED(!m_tx_inventory_mutex)\n+        {\n+            AssertLockNotHeld(m_tx_inventory_mutex);\n+            LOCK(m_tx_inventory_mutex);\n+            m_send_mempool = value;\n+        }\n+\n+        void Relay(",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24125#discussion_r1097584697",
      "id" : 1097584697,
      "in_reply_to_id" : 997772410,
      "line" : 337,
      "node_id" : "PRRC_kwDOABII585Ba9A5",
      "original_commit_id" : "60519a8797fa0e2cfb5b77ef8fd5b058578c687d",
      "original_line" : 337,
      "original_position" : 73,
      "original_start_line" : null,
      "path" : "src/net_processing.cpp",
      "position" : 73,
      "pull_request_review_id" : 1285505026,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24125",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1097584697/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2023-02-06T15:59:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1097584697",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
