[
   {
      "author_association" : "MEMBER",
      "body" : "light code review ACK 2902780\r\n\r\nPerhaps someone with more historical insight should look at this as well. I can't find a reason for `vTxHashes` to not be cleared. It looks like it was introduced this way in 811902649d6aaddd886cb39b83aa69adf7b441bd.",
      "created_at" : "2022-01-25T11:05:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24145#issuecomment-1021072524",
      "id" : 1021072524,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24145",
      "node_id" : "IC_kwDOABII58483FSM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1021072524/reactions"
      },
      "updated_at" : "2022-01-25T11:05:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1021072524",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It might be better to remove the whole function instead. See #20030 and then #19909",
      "created_at" : "2022-01-26T15:10:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24145#issuecomment-1022290258",
      "id" : 1022290258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24145",
      "node_id" : "IC_kwDOABII58487ulS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022290258/reactions"
      },
      "updated_at" : "2022-01-26T15:10:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022290258",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> It might be better to remove the whole function instead. See #20030 and then #19909\r\n\r\nOh, agree. Is #19909 up for grabs?",
      "created_at" : "2022-01-26T16:01:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24145#issuecomment-1022343414",
      "id" : 1022343414,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24145",
      "node_id" : "IC_kwDOABII584877j2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022343414/reactions"
      },
      "updated_at" : "2022-01-26T16:01:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022343414",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/25183001?v=4",
         "events_url" : "https://api.github.com/users/glozow/events{/privacy}",
         "followers_url" : "https://api.github.com/users/glozow/followers",
         "following_url" : "https://api.github.com/users/glozow/following{/other_user}",
         "gists_url" : "https://api.github.com/users/glozow/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/glozow",
         "id" : 25183001,
         "login" : "glozow",
         "node_id" : "MDQ6VXNlcjI1MTgzMDAx",
         "organizations_url" : "https://api.github.com/users/glozow/orgs",
         "received_events_url" : "https://api.github.com/users/glozow/received_events",
         "repos_url" : "https://api.github.com/users/glozow/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/glozow/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/glozow/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/glozow"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "#19909 is the trivial part, #20030 is the tougher one to review even though it only changes on line. I can reopen it later today.",
      "created_at" : "2022-01-26T16:04:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24145#issuecomment-1022346290",
      "id" : 1022346290,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24145",
      "node_id" : "IC_kwDOABII584878Qy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022346290/reactions"
      },
      "updated_at" : "2022-01-26T16:04:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022346290",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Regardless of removing the whole function later, this seems to be a good idea and should be reviewed/merged for backport benefit.",
      "created_at" : "2022-01-29T22:54:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24145#issuecomment-1025001958",
      "id" : 1025001958,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24145",
      "node_id" : "IC_kwDOABII5849GEnm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025001958/reactions"
      },
      "updated_at" : "2022-01-29T22:54:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025001958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24145#discussion_r795101771"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795101771"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Just for the sake of not having invalid iterators even temporarily, I prefer this before mapTx is cleared.",
      "commit_id" : "29027800934ea9693352234ece0d6dda018407de",
      "created_at" : "2022-01-29T22:54:57Z",
      "diff_hunk" : "@@ -705,6 +705,7 @@ void CTxMemPool::removeForBlock(const std::vector<CTransactionRef>& vtx, unsigne\n void CTxMemPool::_clear()\n {\n     mapTx.clear();\n+    vTxHashes.clear();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24145#discussion_r795101771",
      "id" : 795101771,
      "line" : 708,
      "node_id" : "PRRC_kwDOABII584vZEpL",
      "original_commit_id" : "29027800934ea9693352234ece0d6dda018407de",
      "original_line" : 708,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 4,
      "pull_request_review_id" : 867016418,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24145",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795101771/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-29T22:55:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795101771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24145#discussion_r795411658"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24145"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795411658"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Updated to move vTxHashes clear before mapTx clear.",
      "commit_id" : "9d65ad365c539557e969a35d22723d92e0b422fe",
      "created_at" : "2022-01-31T07:53:53Z",
      "diff_hunk" : "@@ -705,6 +705,7 @@ void CTxMemPool::removeForBlock(const std::vector<CTransactionRef>& vtx, unsigne\n void CTxMemPool::_clear()\n {\n     mapTx.clear();\n+    vTxHashes.clear();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24145#discussion_r795411658",
      "id" : 795411658,
      "in_reply_to_id" : 795101771,
      "line" : 707,
      "node_id" : "PRRC_kwDOABII584vaQTK",
      "original_commit_id" : "29027800934ea9693352234ece0d6dda018407de",
      "original_line" : 707,
      "original_position" : 4,
      "original_start_line" : null,
      "path" : "src/txmempool.cpp",
      "position" : 4,
      "pull_request_review_id" : 867478905,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24145",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795411658/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-31T07:53:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/795411658",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/5293433?v=4",
         "events_url" : "https://api.github.com/users/Bushstar/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Bushstar/followers",
         "following_url" : "https://api.github.com/users/Bushstar/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Bushstar/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Bushstar",
         "id" : 5293433,
         "login" : "Bushstar",
         "node_id" : "MDQ6VXNlcjUyOTM0MzM=",
         "organizations_url" : "https://api.github.com/users/Bushstar/orgs",
         "received_events_url" : "https://api.github.com/users/Bushstar/received_events",
         "repos_url" : "https://api.github.com/users/Bushstar/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Bushstar/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Bushstar/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Bushstar"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK 9d65ad365c539557e969a35d22723d92e0b422fe\r\nThis makes sense for consistency. As long as there is a clear function it makes sense to clear everything and not forget this. Also agree on the long-run goal of removing it in favor of safer approaches.",
      "created_at" : "2022-04-06T12:00:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24145#issuecomment-1090187321",
      "id" : 1090187321,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24145",
      "node_id" : "IC_kwDOABII585A-vA5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1090187321/reactions"
      },
      "updated_at" : "2022-04-06T12:00:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1090187321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
