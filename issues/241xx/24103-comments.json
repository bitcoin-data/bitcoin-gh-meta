[
   {
      "author_association" : "MEMBER",
      "body" : ">  So apparently there is no recursion involved, so the m_cs_chainstate can be a non-recursive mutex.\r\n\r\nWhat guarantees that in the future no such recursion is introduced (in a rare code-path)?",
      "created_at" : "2022-01-19T20:06:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24103#issuecomment-1016826099",
      "id" : 1016826099,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24103",
      "node_id" : "IC_kwDOABII5848m4jz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1016826099/reactions"
      },
      "updated_at" : "2022-01-19T20:06:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1016826099",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > So apparently there is no recursion involved, so the m_cs_chainstate can be a non-recursive mutex.\r\n> \r\n> What guarantees that in the future no such recursion is introduced (in a rare code-path)?\r\n\r\nNegative TS annotations could help.",
      "created_at" : "2022-01-19T21:05:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24103#issuecomment-1016867975",
      "id" : 1016867975,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24103",
      "node_id" : "IC_kwDOABII5848nCyH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1016867975/reactions"
      },
      "updated_at" : "2022-01-19T21:05:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1016867975",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > So apparently there is no recursion involved, so the m_cs_chainstate can be a non-recursive mutex.\r\n> \r\n> What guarantees that in the future no such recursion is introduced (in a rare code-path)?\r\n\r\n```diff\r\n$ git diff\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\nindex 7c0654c2c..bc69bc423 100644\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -2821,6 +2821,8 @@ static void LimitValidationInterfaceQueue() LOCKS_EXCLUDED(cs_main) {\r\n \r\n bool CChainState::ActivateBestChain(BlockValidationState& state, std::shared_ptr<const CBlock> pblock)\r\n {\r\n+    AssertLockNotHeld(m_chainstate_mutex);\r\n+\r\n     // Note that while we're often called here from ProcessNewBlock, this is\r\n     // far from a guarantee. Things in the P2P/RPC will often end up calling\r\n     // us in the middle of ProcessNewBlock - do not assume pblock is set\r\n@@ -2950,6 +2952,8 @@ bool CChainState::PreciousBlock(BlockValidationState& state, CBlockIndex* pindex\r\n \r\n bool CChainState::InvalidateBlock(BlockValidationState& state, CBlockIndex* pindex)\r\n {\r\n+    AssertLockNotHeld(m_chainstate_mutex);\r\n+\r\n     // Genesis block can't be invalidated\r\n     assert(pindex);\r\n     if (pindex->nHeight == 0) return false;\r\ndiff --git a/src/validation.h b/src/validation.h\r\nindex 299dc66e4..21b8f9579 100644\r\n--- a/src/validation.h\r\n+++ b/src/validation.h\r\n@@ -701,7 +701,7 @@ public:\r\n      */\r\n     bool ActivateBestChain(\r\n         BlockValidationState& state,\r\n-        std::shared_ptr<const CBlock> pblock = nullptr) LOCKS_EXCLUDED(cs_main);\r\n+        std::shared_ptr<const CBlock> pblock = nullptr) LOCKS_EXCLUDED(m_chainstate_mutex, cs_main);\r\n \r\n     bool AcceptBlock(const std::shared_ptr<const CBlock>& pblock, BlockValidationState& state, CBlockIndex** ppindex, bool fRequested, const FlatFilePos* dbp, bool* fNewBlock) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\r\n \r\n@@ -721,7 +721,7 @@ public:\r\n      */\r\n     bool PreciousBlock(BlockValidationState& state, CBlockIndex* pindex) LOCKS_EXCLUDED(cs_main);\r\n     /** Mark a block as invalid. */\r\n-    bool InvalidateBlock(BlockValidationState& state, CBlockIndex* pindex) LOCKS_EXCLUDED(cs_main);\r\n+    bool InvalidateBlock(BlockValidationState& state, CBlockIndex* pindex) LOCKS_EXCLUDED(m_chainstate_mutex, cs_main);\r\n     /** Remove invalidity status from a block and its descendants. */\r\n     void ResetBlockFailureFlags(CBlockIndex* pindex) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\r\n \r\n```",
      "created_at" : "2022-01-19T21:10:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24103#issuecomment-1016871499",
      "id" : 1016871499,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24103",
      "node_id" : "IC_kwDOABII5848nDpL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1016871499/reactions"
      },
      "updated_at" : "2022-01-19T21:10:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1016871499",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > So apparently there is no recursion involved, so the m_cs_chainstate can be a non-recursive mutex.\r\n> \r\n> What guarantees that in the future no such recursion is introduced (in a rare code-path)?\r\n\r\nBtw, we have a nice 95975dd08d8fdaaeaf28e0d06b861ce2748c17b6 by @vasild which works with `DEBUG_LOCKORDER`.",
      "created_at" : "2022-01-20T21:50:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24103#issuecomment-1017958246",
      "id" : 1017958246,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24103",
      "node_id" : "IC_kwDOABII5848rM9m",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017958246/reactions"
      },
      "updated_at" : "2022-01-20T21:50:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017958246",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@w0xlt \r\n\r\nMay I ask you to reorder last two commits for the same reason as https://github.com/bitcoin/bitcoin/pull/24108#pullrequestreview-858412054?",
      "created_at" : "2022-01-24T14:12:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24103#issuecomment-1020142319",
      "id" : 1020142319,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24103",
      "node_id" : "IC_kwDOABII5848ziLv",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020142319/reactions"
      },
      "updated_at" : "2022-01-24T14:12:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020142319",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Done. Commits reordered.",
      "created_at" : "2022-01-24T19:04:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24103#issuecomment-1020442136",
      "id" : 1020442136,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24103",
      "node_id" : "IC_kwDOABII58480rYY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020442136/reactions"
      },
      "updated_at" : "2022-01-24T19:04:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020442136",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24103#discussion_r791076089"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24103"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791076089"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit (please ignore)\r\n\r\nWith new annotations some parts of the comment look redundant:\r\n```suggestion\r\n     * A lock that must be held when modifying this ChainState\r\n```",
      "commit_id" : "020acea99b605c9b5ee7939a6acef131db84ad4a",
      "created_at" : "2022-01-24T19:18:05Z",
      "diff_hunk" : "@@ -533,10 +533,11 @@ class CChainState\n     arith_uint256 nLastPreciousChainwork = 0;\n \n     /**\n-     * the ChainState CriticalSection\n-     * A lock that must be held when modifying this ChainState - held in ActivateBestChain()\n+     * The ChainState Mutex\n+     * A lock that must be held when modifying this ChainState - held in ActivateBestChain() and\n+     * InvalidateBlock()",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24103#discussion_r791076089",
      "id" : 791076089,
      "line" : 538,
      "node_id" : "PRRC_kwDOABII584vJtz5",
      "original_commit_id" : "020acea99b605c9b5ee7939a6acef131db84ad4a",
      "original_line" : 538,
      "original_position" : 8,
      "original_start_line" : 537,
      "path" : "src/validation.h",
      "position" : 8,
      "pull_request_review_id" : 861413098,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24103",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791076089/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 537,
      "start_side" : "RIGHT",
      "updated_at" : "2022-01-24T19:18:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791076089",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@vasild \r\n> Is the added annotation `LOCKS_EXCLUDED(m_chainstate_mutex)` doing exactly that?\r\n\r\nYou might want `EXCLUSIVE_LOCKS_REQUIRED(!m_chainstate_mutex)`.",
      "created_at" : "2022-01-31T11:48:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24103#issuecomment-1025656285",
      "id" : 1025656285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24103",
      "node_id" : "IC_kwDOABII5849IkXd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025656285/reactions"
      },
      "updated_at" : "2022-01-31T11:48:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025656285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@hebasto, yeah, that provides a stronger guarantee as per https://clang.llvm.org/docs/ThreadSafetyAnalysis.html#negative, but if both are missing then we may still get recursion that is not detected at compile time. I guess that, in order to be sure, one has to manually check no recursion is happening which is tedious and error prone.",
      "created_at" : "2022-01-31T12:42:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24103#issuecomment-1025700817",
      "id" : 1025700817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24103",
      "node_id" : "IC_kwDOABII5849IvPR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025700817/reactions"
      },
      "updated_at" : "2022-01-31T12:42:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1025700817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I was under the assumption that the strong annotations had been added here. Maybe this should be reverted for now?",
      "created_at" : "2022-02-02T07:50:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24103#issuecomment-1027669328",
      "id" : 1027669328,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24103",
      "node_id" : "IC_kwDOABII5849QP1Q",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1027669328/reactions"
      },
      "updated_at" : "2022-02-02T07:50:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1027669328",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I think it is ok, no need to revert it. After all, other code also uses the weaker `LOCKS_EXCLUDED()` and it is better than no annotations at all.\r\n\r\nHere is a followup that changes to the stronger `EXCLUSIVE_LOCKS_REQUIRED(!...)`: https://github.com/bitcoin/bitcoin/pull/24235. It caused some avalanche effect, requiring some extra annotations which I think is good.",
      "created_at" : "2022-02-02T10:46:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24103#issuecomment-1027807339",
      "id" : 1027807339,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24103",
      "node_id" : "IC_kwDOABII5849Qxhr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1027807339/reactions"
      },
      "updated_at" : "2022-02-02T10:46:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1027807339",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I think it is ok, no need to revert it. After all, other code also uses the weaker `LOCKS_EXCLUDED()` and it is better than no annotations at all.\r\n\r\nAgree.",
      "created_at" : "2022-02-02T12:10:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24103#issuecomment-1027875530",
      "id" : 1027875530,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24103",
      "node_id" : "IC_kwDOABII5849RCLK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1027875530/reactions"
      },
      "updated_at" : "2022-02-02T12:10:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1027875530",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
