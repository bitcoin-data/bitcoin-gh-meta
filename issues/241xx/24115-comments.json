[
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK!\r\n\r\n> detection when the feature can be used\r\n\r\nOn Linux (the only system we care about for ARM, i guess), the following would be the way to do detection:\r\n```c++\r\n#include <sys/auxv.h>\r\n#include <asm/hwcap.h>\r\nâ¦\r\n#ifdef __arm__\r\n/* ARM 32 bit */\r\nif (getauxval(AT_HWCAP2) & HWCAP2_SHA2) {\r\n    have_arm_shani = true;\r\n}\r\n#endif\r\n#ifdef __aarch64__\r\n/* ARM 64 bit */\r\nif (getauxval(AT_HWCAP) & HWCAP_SHA2) {\r\n    have_arm_shani = true;\r\n}\r\n#endif\r\n```\r\nNote that the capability bit is on a different HWCAP word on 32 and 64 bit (dunno if you even want to support 32 bit here).\r\n",
      "created_at" : "2022-01-20T18:55:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1017819167",
      "id" : 1017819167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848qrAf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017819167/reactions"
      },
      "updated_at" : "2022-01-20T19:00:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017819167",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> the following would be the way to do detection:\r\n\r\nAdded in f7dd1ef",
      "created_at" : "2022-01-20T19:26:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1017847752",
      "id" : 1017847752,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848qx_I",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017847752/reactions"
      },
      "updated_at" : "2022-01-20T19:57:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017847752",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "On commit f7dd1efae715593f5c9ff8186d518d25d1c9023c\r\n\r\nOn a Linux aarch64 Cortex-A53 system with:\r\n\r\n```\r\n$ cat /proc/cpuinfo \r\nprocessor       : 0\r\nBogoMIPS        : 200.00\r\nFeatures        : fp asimd evtstrm aes pmull sha1 sha2 crc32 cpuid\r\nCPU implementer : 0x41\r\nCPU architecture: 8\r\nCPU variant     : 0x0\r\nCPU part        : 0xd03\r\nCPU revision    : 4\r\n```\r\n\r\nwhich I presume means it has the necessary SHA2 extensions.\r\n\r\nThe GCC 9.3.0 compiler used supports the extensions (crypto/libbitcoin_crypto_arm_shani.a is being built):\r\n\r\n```\r\nchecking for x86 SHA-NI intrinsics... no\r\nchecking whether C++ compiler accepts -march=armv8-a+crc+crypto... yes\r\nchecking whether C++ compiler accepts -march=armv8-a+crc+crypto... (cached) yes\r\nchecking for AArch64 CRC32 intrinsics... yes\r\nchecking for AArch64 SHA-NI intrinsics... yes\r\n```\r\n\r\nStill, the extension doesn't seem to be detected. debug.log says:\r\n\r\n```\r\n2022-01-20T20:37:05Z Using the 'standard' SHA256 implementation\r\n```\r\n",
      "created_at" : "2022-01-20T20:43:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1017911640",
      "id" : 1017911640,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848rBlY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017911640/reactions"
      },
      "updated_at" : "2022-01-20T20:55:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017911640",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa should be fixed in c0849fc4fd9aa7e70973445a1b962a9270fd859c",
      "created_at" : "2022-01-20T21:42:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1017953150",
      "id" : 1017953150,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848rLt-",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017953150/reactions"
      },
      "updated_at" : "2022-01-20T21:42:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017953150",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "On c0849fc4fd9aa7e70973445a1b962a9270fd859c:\r\n\r\n```\r\n2022-01-20T22:15:44Z Using the 'arm_shani(1way)' SHA256 implementation\r\n```",
      "created_at" : "2022-01-20T22:16:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1017974870",
      "id" : 1017974870,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848rRBW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017974870/reactions"
      },
      "updated_at" : "2022-01-20T22:16:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1017974870",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This PR (c0849fc4fd9aa7e70973445a1b962a9270fd859c):\r\n\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|                2.56 |      390,886,099.70 |    0.9% |      0.03 | `SHA256`\r\n|               10.27 |       97,329,584.86 |    0.0% |      0.01 | `SHA256D64_1024`\r\n|               14.60 |       68,478,670.64 |    0.4% |      0.01 | `SHA256_32b`\r\n\r\nOn master (e3ce019667fba2ec50a59814a26566fb67fa9125):\r\n\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               15.69 |       63,715,155.54 |    0.0% |      0.17 | `SHA256`\r\n|               43.42 |       23,029,615.98 |    0.5% |      0.03 | `SHA256D64_1024`\r\n|               41.67 |       23,995,549.21 |    0.1% |      0.01 | `SHA256_32b`\r\n",
      "created_at" : "2022-01-20T23:01:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1018001885",
      "id" : 1018001885,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848rXnd",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 2,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 2,
         "total_count" : 4,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018001885/reactions"
      },
      "updated_at" : "2022-01-20T23:01:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018001885",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> On Linux (the only system we care about for ARM, i guess)\r\n\r\nM1 macs would like a word with you.",
      "created_at" : "2022-01-21T05:08:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1018185286",
      "id" : 1018185286,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848sEZG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018185286/reactions"
      },
      "updated_at" : "2022-01-22T06:04:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018185286",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Speaking of m1, I was able to compile this locally on my m1 pro 10 core, ./configure realized that SHA2 intrinsics could be used. See benchmarks below. \r\n\r\non https://github.com/bitcoin/bitcoin/commit/c0849fc4fd9aa7e70973445a1b962a9270fd859c\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|                0.47 |    2,148,996,364.97 |    0.3% |      0.01 | `SHA256`\r\n|                1.48 |      676,354,727.08 |    0.3% |      0.01 | `SHA256D64_1024`\r\n|                1.15 |      873,060,380.08 |    0.1% |      0.01 | `SHA256_32b`\r\n\r\non master\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|                3.10 |      322,550,263.01 |    1.3% |      0.03 | `SHA256`\r\n|                9.26 |      107,941,088.30 |    0.7% |      0.01 | `SHA256D64_1024`\r\n|                6.22 |      160,743,377.26 |    1.6% |      0.01 | `SHA256_32b`\r\n",
      "created_at" : "2022-01-21T05:31:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1018195343",
      "id" : 1018195343,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848sG2P",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018195343/reactions"
      },
      "updated_at" : "2022-01-21T05:31:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018195343",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Speaking of m1, I was able to compile this locally on my m1 pro 10 core, ./configure realized that SHA2 intrinsics could be used. See benchmarks below.\r\n\r\nYes, support for Apple Silicon is included in this PR.",
      "created_at" : "2022-01-21T10:22:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1018373574",
      "id" : 1018373574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848syXG",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018373574/reactions"
      },
      "updated_at" : "2022-01-21T10:22:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018373574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r789869130"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/789869130"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'm a bit concerned this is not well-defined. We can't guarantee that chunk has an alignment that is compatible with the `uint8x16_t` type, and even if it is, whether such a reinterpretation is permitted would be highly architecture-specific (of course, this is already architecture-specific code). Do you know of documentation that specifically permits this?\r\n\r\nIf not, I'd use this patch:\r\n\r\n```diff\r\ndiff --git a/src/crypto/sha256_arm_shani.cpp b/src/crypto/sha256_arm_shani.cpp\r\nindex c051d87042..a783be9068 100644\r\n--- a/src/crypto/sha256_arm_shani.cpp\r\n+++ b/src/crypto/sha256_arm_shani.cpp\r\n@@ -47,8 +47,6 @@ void Transform(uint32_t* s, const unsigned char* chunk, size_t blocks)\r\n     STATE0 = vld1q_u32(&s[0]);\r\n     STATE1 = vld1q_u32(&s[4]);\r\n \r\n-    const uint8x16_t* input32 = reinterpret_cast<const uint8x16_t*>(chunk);\r\n-\r\n     while (blocks--)\r\n     {\r\n         // Save state\r\n@@ -56,10 +54,14 @@ void Transform(uint32_t* s, const unsigned char* chunk, size_t blocks)\r\n         CDGH_SAVE = STATE1;\r\n \r\n         // Load and convert input chunk to Big Endian\r\n-        MSG0 = vreinterpretq_u32_u8(vrev32q_u8(*input32++));\r\n-        MSG1 = vreinterpretq_u32_u8(vrev32q_u8(*input32++));\r\n-        MSG2 = vreinterpretq_u32_u8(vrev32q_u8(*input32++));\r\n-        MSG3 = vreinterpretq_u32_u8(vrev32q_u8(*input32++));\r\n+        MSG0 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 0)));\r\n+        MSG1 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 16)));\r\n+        MSG2 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 32)));\r\n+        MSG3 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 48)));\r\n+        chunk += 64;\r\n \r\n         // Original implemenation preloaded message and constant addition which was 1-3% slower.\r\n         // Now included as first step in quad round code saving one Q Neon register\r\n```\r\n",
      "commit_id" : "f06f46cd5e2d732669e70fbfeacd7bf9b9ac8815",
      "created_at" : "2022-01-21T17:38:17Z",
      "diff_hunk" : "@@ -0,0 +1,199 @@\n+// Copyright (c) 2018-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+//\n+// Based on https://github.com/noloader/SHA-Intrinsics/blob/master/sha256-arm.c,\n+// Written and placed in public domain by Jeffrey Walton.\n+// Based on code from ARM, and by Johannes Schneiders, Skip Hovsmith and\n+// Barry O'Rourke for the mbedTLS project.\n+\n+#ifdef ENABLE_ARM_SHANI\n+\n+#include <cstdint>\n+#include <cstddef>\n+#include <arm_acle.h>\n+#include <arm_neon.h>\n+\n+namespace {\n+static const uint32_t K[] =\n+{\n+    0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5,\n+    0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5,\n+    0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3,\n+    0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174,\n+    0xE49B69C1, 0xEFBE4786, 0x0FC19DC6, 0x240CA1CC,\n+    0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA,\n+    0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7,\n+    0xC6E00BF3, 0xD5A79147, 0x06CA6351, 0x14292967,\n+    0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13,\n+    0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85,\n+    0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3,\n+    0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070,\n+    0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5,\n+    0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3,\n+    0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208,\n+    0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2,\n+};\n+}\n+\n+namespace sha256_arm_shani {\n+void Transform(uint32_t* s, const unsigned char* chunk, size_t blocks)\n+{\n+    uint32x4_t STATE0, STATE1, ABEF_SAVE, CDGH_SAVE;\n+    uint32x4_t MSG0, MSG1, MSG2, MSG3;\n+    uint32x4_t TMP0, TMP2;\n+\n+    // Load state\n+    STATE0 = vld1q_u32(&s[0]);\n+    STATE1 = vld1q_u32(&s[4]);\n+\n+    const uint8x16_t* input32 = reinterpret_cast<const uint8x16_t*>(chunk);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r789869130",
      "id" : 789869130,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vFHJK",
      "original_commit_id" : "d47c5fb566e17334a9ec0dd3cfe4d9947817fbf5",
      "original_line" : 50,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/crypto/sha256_arm_shani.cpp",
      "position" : null,
      "pull_request_review_id" : 859848710,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/789869130/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-21T17:38:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/789869130",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r789889185"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/789889185"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Better safe than sorry - applied in f06f46c\r\n\r\nI do not see any performance hit with this change.",
      "commit_id" : "f06f46cd5e2d732669e70fbfeacd7bf9b9ac8815",
      "created_at" : "2022-01-21T18:08:41Z",
      "diff_hunk" : "@@ -0,0 +1,199 @@\n+// Copyright (c) 2018-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+//\n+// Based on https://github.com/noloader/SHA-Intrinsics/blob/master/sha256-arm.c,\n+// Written and placed in public domain by Jeffrey Walton.\n+// Based on code from ARM, and by Johannes Schneiders, Skip Hovsmith and\n+// Barry O'Rourke for the mbedTLS project.\n+\n+#ifdef ENABLE_ARM_SHANI\n+\n+#include <cstdint>\n+#include <cstddef>\n+#include <arm_acle.h>\n+#include <arm_neon.h>\n+\n+namespace {\n+static const uint32_t K[] =\n+{\n+    0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5,\n+    0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5,\n+    0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3,\n+    0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174,\n+    0xE49B69C1, 0xEFBE4786, 0x0FC19DC6, 0x240CA1CC,\n+    0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA,\n+    0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7,\n+    0xC6E00BF3, 0xD5A79147, 0x06CA6351, 0x14292967,\n+    0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13,\n+    0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85,\n+    0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3,\n+    0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070,\n+    0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5,\n+    0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3,\n+    0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208,\n+    0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2,\n+};\n+}\n+\n+namespace sha256_arm_shani {\n+void Transform(uint32_t* s, const unsigned char* chunk, size_t blocks)\n+{\n+    uint32x4_t STATE0, STATE1, ABEF_SAVE, CDGH_SAVE;\n+    uint32x4_t MSG0, MSG1, MSG2, MSG3;\n+    uint32x4_t TMP0, TMP2;\n+\n+    // Load state\n+    STATE0 = vld1q_u32(&s[0]);\n+    STATE1 = vld1q_u32(&s[4]);\n+\n+    const uint8x16_t* input32 = reinterpret_cast<const uint8x16_t*>(chunk);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r789889185",
      "id" : 789889185,
      "in_reply_to_id" : 789869130,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vFMCh",
      "original_commit_id" : "d47c5fb566e17334a9ec0dd3cfe4d9947817fbf5",
      "original_line" : 50,
      "original_position" : 50,
      "original_start_line" : null,
      "path" : "src/crypto/sha256_arm_shani.cpp",
      "position" : null,
      "pull_request_review_id" : 859877409,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/789889185/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-21T18:09:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/789889185",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested c0849fc4fd9aa7e70973445a1b962a9270fd859c on Mac mini (M1, 2020):\r\n```\r\n% time ./src/bitcoind -datadir=/Users/hebasto/SHANI -assumevalid=0 -stopatheight=719700 -prune=550\r\n2022-01-21T07:44:20Z Bitcoin Core version v22.99.0-c0849fc4fd9a (release build)\r\n2022-01-21T07:44:20Z Validating signatures for all blocks.\r\n2022-01-21T07:44:20Z Setting nMinimumChainWork=00000000000000000000000000000000000000001fa4663bbbe19f82de910280\r\n2022-01-21T07:44:20Z Prune configured to target 550 MiB on disk for block and undo files.\r\n2022-01-21T07:44:20Z Using the 'arm_shani(1way)' SHA256 implementation\r\n...\r\n2022-01-21T22:38:17Z Shutdown: done\r\n./src/bitcoind -datadir=/Users/hebasto/SHANI -assumevalid=0  -prune=550  149587.28s user 11456.17s system 300% cpu 14:53:56.52 total\r\n```\r\n\r\n---\r\n\r\nUPDATE. The same for the master branch (e3ce019667fba2ec50a59814a26566fb67fa9125):\r\n\r\n```\r\n% time ./src/bitcoind -datadir=/Users/hebasto/MASTER -assumevalid=0 -stopatheight=719700 -prune=550\r\n2022-01-21T22:49:25Z Bitcoin Core version v22.99.0-e3ce019667fb (release build)\r\n2022-01-21T22:49:25Z Validating signatures for all blocks.\r\n2022-01-21T22:49:25Z Setting nMinimumChainWork=00000000000000000000000000000000000000001fa4663bbbe19f82de910280\r\n2022-01-21T22:49:25Z Prune configured to target 550 MiB on disk for block and undo files.\r\n2022-01-21T22:49:25Z Using the 'standard' SHA256 implementation\r\n...\r\n2022-01-22T14:37:08Z Shutdown: done\r\n./src/bitcoind -datadir=/Users/hebasto/MASTER -assumevalid=0  -prune=550  174110.07s user 11526.30s system 326% cpu 15:47:43.83 total\r\n```\r\n\r\n51 min or 6% faster IBD.",
      "created_at" : "2022-01-21T22:45:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1018918711",
      "id" : 1018918711,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848u3c3",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018918711/reactions"
      },
      "updated_at" : "2022-01-22T14:44:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018918711",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "See https://github.com/sipa/bitcoin/commits/pr24115, which adds a 2-way 64-byte optimized variant. On my Cortex-A53 It's roughly a 2x speedup for the SHA256D64_1024 benchmark (relevant for Merkle root computation) compared to this PR. For more modern architectures I could imagine it's more:\r\n\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|                2.60 |      384,105,263.28 |    0.3% |      0.03 | `SHA256`\r\n|                5.35 |      187,019,153.94 |    0.1% |      0.01 | `SHA256D64_1024`\r\n|               14.61 |       68,437,280.69 |    0.0% |      0.01 | `SHA256_32b`\r\n\r\nFor reference, master again:\r\n\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               15.69 |       63,715,155.54 |    0.0% |      0.17 | `SHA256`\r\n|               43.42 |       23,029,615.98 |    0.5% |      0.03 | `SHA256D64_1024`\r\n|               41.67 |       23,995,549.21 |    0.1% |      0.01 | `SHA256_32b`\r\n\r\n",
      "created_at" : "2022-01-21T23:50:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1018973816",
      "id" : 1018973816,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848vE54",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018973816/reactions"
      },
      "updated_at" : "2022-01-21T23:58:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018973816",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa's branch on m1:\r\n\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|                0.46 |    2,174,603,243.64 |    0.6% |      0.01 | `SHA256`\r\n|                0.95 |    1,053,985,898.82 |    0.8% |      0.01 | `SHA256D64_1024`\r\n|                1.15 |      871,857,965.44 |    0.4% |      0.01 | `SHA256_32b`\r\n\r\nprevious results on c0849 \r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|                0.47 |    2,148,996,364.97 |    0.3% |      0.01 | `SHA256`\r\n|                1.48 |      676,354,727.08 |    0.3% |      0.01 | `SHA256D64_1024`\r\n|                1.15 |      873,060,380.08 |    0.1% |      0.01 | `SHA256_32b`\r\n\r\n",
      "created_at" : "2022-01-22T05:04:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1019055086",
      "id" : 1019055086,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848vYvu",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019055086/reactions"
      },
      "updated_at" : "2022-01-22T05:04:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019055086",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790108893"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790108893"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm not sure if bitcoin core has a preference documented somewhere, but I prefer documenting what the endif is associated with such as\r\n```suggestion\r\n#endif // __arm__\r\n```",
      "commit_id" : "f06f46cd5e2d732669e70fbfeacd7bf9b9ac8815",
      "created_at" : "2022-01-22T06:10:17Z",
      "diff_hunk" : "@@ -623,6 +633,34 @@ std::string SHA256AutoDetect()\n #endif\n #endif\n \n+#if defined(ENABLE_ARM_SHANI) && !defined(BUILD_BITCOIN_INTERNAL)\n+    bool have_arm_shani = false;\n+\n+#ifdef __linux__\n+#ifdef __arm__ // 32-bit\n+    if (getauxval(AT_HWCAP2) & HWCAP2_SHA2) {\n+        have_arm_shani = true;\n+    }\n+#endif",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790108893",
      "id" : 790108893,
      "line" : 644,
      "node_id" : "PRRC_kwDOABII584vGBrd",
      "original_commit_id" : "f06f46cd5e2d732669e70fbfeacd7bf9b9ac8815",
      "original_line" : 644,
      "original_position" : 85,
      "original_start_line" : null,
      "path" : "src/crypto/sha256.cpp",
      "position" : 85,
      "pull_request_review_id" : 860173429,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790108893/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-22T06:10:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790108893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790120301"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790120301"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I checked all the other files in `src/crypto` and we use the endif comments only for the include guards.",
      "commit_id" : "f06f46cd5e2d732669e70fbfeacd7bf9b9ac8815",
      "created_at" : "2022-01-22T08:44:36Z",
      "diff_hunk" : "@@ -623,6 +633,34 @@ std::string SHA256AutoDetect()\n #endif\n #endif\n \n+#if defined(ENABLE_ARM_SHANI) && !defined(BUILD_BITCOIN_INTERNAL)\n+    bool have_arm_shani = false;\n+\n+#ifdef __linux__\n+#ifdef __arm__ // 32-bit\n+    if (getauxval(AT_HWCAP2) & HWCAP2_SHA2) {\n+        have_arm_shani = true;\n+    }\n+#endif",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790120301",
      "id" : 790120301,
      "in_reply_to_id" : 790108893,
      "line" : 644,
      "node_id" : "PRRC_kwDOABII584vGEdt",
      "original_commit_id" : "f06f46cd5e2d732669e70fbfeacd7bf9b9ac8815",
      "original_line" : 644,
      "original_position" : 85,
      "original_start_line" : null,
      "path" : "src/crypto/sha256.cpp",
      "position" : 85,
      "pull_request_review_id" : 860185590,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790120301/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-22T08:44:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790120301",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I confirm the numbers on M1:\r\n\r\nbefore @sipa's improvements (f06f46cd5e2d732669e70fbfeacd7bf9b9ac8815):\r\n\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|                0.45 |    2,198,307,083.71 |    0.3% |      0.01 | `SHA256`\r\n|                1.49 |      671,303,457.11 |    0.3% |      0.01 | `SHA256D64_1024`\r\n|                1.15 |      866,670,334.07 |    0.2% |      0.01 | `SHA256_32b`\r\n\r\nafter @sipa's improvements (0e7299508af17014a906a951ad9b4ecfcc891bb1):\r\n\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|                0.46 |    2,197,198,571.82 |    0.3% |      0.01 | `SHA256`\r\n|                0.94 |    1,059,405,097.65 |    0.3% |      0.01 | `SHA256D64_1024`\r\n|                1.17 |      857,291,152.82 |    0.5% |      0.01 | `SHA256_32b`\r\n",
      "created_at" : "2022-01-22T11:55:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1019213285",
      "id" : 1019213285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848v_Xl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019213285/reactions"
      },
      "updated_at" : "2022-01-22T11:55:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019213285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I confirm the numbers on M1:\r\n\r\nI merged @sipa's improvements into this branch => 0e7299508af17014a906a951ad9b4ecfcc891bb1 â¤ï¸ ",
      "created_at" : "2022-01-22T11:56:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1019213855",
      "id" : 1019213855,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848v_gf",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019213855/reactions"
      },
      "updated_at" : "2022-01-22T12:05:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019213855",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm not able to build this branch on m1 at the moment\r\n```\r\nconfig.status: creating libbitcoinconsensus.pc\r\nconfig.status: creating Makefile\r\nconfig.status: creating src/Makefile\r\nconfig.status: creating doc/man/Makefile\r\nconfig.status: creating share/setup.nsi\r\nconfig.status: creating share/qt/Info.plist\r\nconfig.status: creating test/config.ini\r\nconfig.status: creating contrib/devtools/split-debug.sh\r\nconfig.status: creating src/config/bitcoin-config.h\r\nconfig.status: src/config/bitcoin-config.h is unchanged\r\nconfig.status: executing depfiles commands\r\nconfig.status: executing libtool commands\r\n cd . && /bin/sh /Users/pasta/workspace/bitcoin/build-aux/missing automake-1.16 --foreign\r\n/bin/sh: /Users/pasta/workspace/bitcoin/build-aux/missing: No such file or directory\r\nmake: *** [Makefile.in] Error 1\r\n```\r\n\r\nI just checked out sipa's branch here: https://github.com/sipa/bitcoin/commit/0e7299508af17014a906a951ad9b4ecfcc891bb1 and compilation worked trivially",
      "created_at" : "2022-01-22T14:11:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1019277578",
      "id" : 1019277578,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848wPEK",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019277578/reactions"
      },
      "updated_at" : "2022-01-22T14:13:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019277578",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@prusnak @PastaPastaPasta Perhaps you want to also benchmark with the two last commits removed (so at \"Optimization: precompute a few 3rd transform intermediaries\"). Whether the last two help may be very architecture-dependent. For me they contribute a ~30% speedup, but maytbe on M1 that is not the case.",
      "created_at" : "2022-01-22T14:30:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1019281491",
      "id" : 1019281491,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848wQBT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019281491/reactions"
      },
      "updated_at" : "2022-01-22T14:31:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019281491",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa benchmark of 38ed75f8b9fdb60ab45d07f3d4069a9c9cb636d4 `Optimization: precompute a few 3rd transform intermediaries` on M1:\r\n\r\n|             ns/byte |              byte/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|                0.46 |    2,163,137,327.85 |    0.0% |      0.01 | `SHA256`\r\n|                1.28 |      780,225,941.01 |    0.3% |      0.01 | `SHA256D64_1024`\r\n|                1.18 |      850,467,547.93 |    0.2% |      0.01 | `SHA256_32b`\r\n\r\nThe improvement of using 0e72995 is there also for M1.",
      "created_at" : "2022-01-22T15:04:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1019287739",
      "id" : 1019287739,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848wRi7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019287739/reactions"
      },
      "updated_at" : "2022-01-22T15:10:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019287739",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Looks like the 2-way version is a clear win on M1 as well, thanks!",
      "created_at" : "2022-01-22T15:06:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1019288079",
      "id" : 1019288079,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848wRoP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019288079/reactions"
      },
      "updated_at" : "2022-01-22T15:06:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019288079",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> It seems commits need some cleanup (reorder? squash?) for the nice commit history, no?\r\n\r\nI will squash when @sipa confirms he's satisfied with the result and won't be doing any further changes. @sipa are you OK with me doing the rebase/squash?",
      "created_at" : "2022-01-23T09:38:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1019447431",
      "id" : 1019447431,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848w4iH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019447431/reactions"
      },
      "updated_at" : "2022-01-23T09:41:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019447431",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Feel free to squash/rebase wherever you feel it is useful.",
      "created_at" : "2022-01-23T14:17:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1019495016",
      "id" : 1019495016,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848xEJo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019495016/reactions"
      },
      "updated_at" : "2022-01-23T14:17:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019495016",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Feel free to squash/rebase wherever you feel it is useful.\r\n\r\nThanks! Squashed and rebased => 1f140783e1fbf818d4a6045464db3903af426bd0",
      "created_at" : "2022-01-23T14:23:43Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1019496235",
      "id" : 1019496235,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848xEcr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019496235/reactions"
      },
      "updated_at" : "2022-01-23T14:23:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019496235",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790298023"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790298023"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "was this moved from somewhere? Otherwise it should probably be updated",
      "commit_id" : "1f140783e1fbf818d4a6045464db3903af426bd0",
      "created_at" : "2022-01-23T16:14:39Z",
      "diff_hunk" : "@@ -0,0 +1,898 @@\n+// Copyright (c) 2018-2020 The Bitcoin Core developers",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790298023",
      "id" : 790298023,
      "line" : 1,
      "node_id" : "PRRC_kwDOABII584vGv2n",
      "original_commit_id" : "1f140783e1fbf818d4a6045464db3903af426bd0",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/crypto/sha256_arm_shani.cpp",
      "position" : 1,
      "pull_request_review_id" : 860342823,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790298023/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-23T16:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790298023",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790298261"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790298261"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I'd prefer this being a constexpr std::array",
      "commit_id" : "1f140783e1fbf818d4a6045464db3903af426bd0",
      "created_at" : "2022-01-23T16:16:17Z",
      "diff_hunk" : "@@ -0,0 +1,898 @@\n+// Copyright (c) 2018-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+//\n+// Based on https://github.com/noloader/SHA-Intrinsics/blob/master/sha256-arm.c,\n+// Written and placed in public domain by Jeffrey Walton.\n+// Based on code from ARM, and by Johannes Schneiders, Skip Hovsmith and\n+// Barry O'Rourke for the mbedTLS project.\n+// Variant specialized for 64-byte inputs added by Pieter Wuille.\n+\n+#ifdef ENABLE_ARM_SHANI\n+\n+#include <cstdint>\n+#include <cstddef>\n+#include <arm_acle.h>\n+#include <arm_neon.h>\n+\n+namespace {\n+static const uint32_t K[64] =",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790298261",
      "id" : 790298261,
      "line" : 19,
      "node_id" : "PRRC_kwDOABII584vGv6V",
      "original_commit_id" : "1f140783e1fbf818d4a6045464db3903af426bd0",
      "original_line" : 19,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/crypto/sha256_arm_shani.cpp",
      "position" : 19,
      "pull_request_review_id" : 860342823,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790298261/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-23T16:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790298261",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790298514"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790298514"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: same, constexpr std::array, and below",
      "commit_id" : "1f140783e1fbf818d4a6045464db3903af426bd0",
      "created_at" : "2022-01-23T16:18:02Z",
      "diff_hunk" : "@@ -0,0 +1,898 @@\n+// Copyright (c) 2018-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+//\n+// Based on https://github.com/noloader/SHA-Intrinsics/blob/master/sha256-arm.c,\n+// Written and placed in public domain by Jeffrey Walton.\n+// Based on code from ARM, and by Johannes Schneiders, Skip Hovsmith and\n+// Barry O'Rourke for the mbedTLS project.\n+// Variant specialized for 64-byte inputs added by Pieter Wuille.\n+\n+#ifdef ENABLE_ARM_SHANI\n+\n+#include <cstdint>\n+#include <cstddef>\n+#include <arm_acle.h>\n+#include <arm_neon.h>\n+\n+namespace {\n+static const uint32_t K[64] =\n+{\n+    0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5,\n+    0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5,\n+    0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3,\n+    0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174,\n+    0xE49B69C1, 0xEFBE4786, 0x0FC19DC6, 0x240CA1CC,\n+    0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA,\n+    0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7,\n+    0xC6E00BF3, 0xD5A79147, 0x06CA6351, 0x14292967,\n+    0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13,\n+    0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85,\n+    0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3,\n+    0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070,\n+    0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5,\n+    0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3,\n+    0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208,\n+    0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2,\n+};\n+}\n+\n+namespace sha256_arm_shani {\n+void Transform(uint32_t* s, const unsigned char* chunk, size_t blocks)\n+{\n+    uint32x4_t STATE0, STATE1, ABEF_SAVE, CDGH_SAVE;\n+    uint32x4_t MSG0, MSG1, MSG2, MSG3;\n+    uint32x4_t TMP0, TMP2;\n+\n+    // Load state\n+    STATE0 = vld1q_u32(&s[0]);\n+    STATE1 = vld1q_u32(&s[4]);\n+\n+    while (blocks--)\n+    {\n+        // Save state\n+        ABEF_SAVE = STATE0;\n+        CDGH_SAVE = STATE1;\n+\n+        // Load and convert input chunk to Big Endian\n+        MSG0 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 0)));\n+        MSG1 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 16)));\n+        MSG2 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 32)));\n+        MSG3 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 48)));\n+        chunk += 64;\n+\n+        // Original implemenation preloaded message and constant addition which was 1-3% slower.\n+        // Now included as first step in quad round code saving one Q Neon register\n+        // \"TMP0 = vaddq_u32(MSG0, vld1q_u32(&K[0]));\"\n+\n+        // Rounds 1-4\n+        TMP0 = vaddq_u32(MSG0, vld1q_u32(&K[0]));\n+        TMP2 = STATE0;\n+        MSG0 = vsha256su0q_u32(MSG0, MSG1);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG0 = vsha256su1q_u32(MSG0, MSG2, MSG3);\n+\n+        // Rounds 5-8\n+        TMP0 = vaddq_u32(MSG1, vld1q_u32(&K[4]));\n+        TMP2 = STATE0;\n+        MSG1 = vsha256su0q_u32(MSG1, MSG2);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG1 = vsha256su1q_u32(MSG1, MSG3, MSG0);\n+\n+        // Rounds 9-12\n+        TMP0 = vaddq_u32(MSG2, vld1q_u32(&K[8]));\n+        TMP2 = STATE0;\n+        MSG2 = vsha256su0q_u32(MSG2, MSG3);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG2 = vsha256su1q_u32(MSG2, MSG0, MSG1);\n+\n+        // Rounds 13-16\n+        TMP0 = vaddq_u32(MSG3, vld1q_u32(&K[12]));\n+        TMP2 = STATE0;\n+        MSG3 = vsha256su0q_u32(MSG3, MSG0);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG3 = vsha256su1q_u32(MSG3, MSG1, MSG2);\n+\n+        // Rounds 17-20\n+        TMP0 = vaddq_u32(MSG0, vld1q_u32(&K[16]));\n+        TMP2 = STATE0;\n+        MSG0 = vsha256su0q_u32(MSG0, MSG1);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG0 = vsha256su1q_u32(MSG0, MSG2, MSG3);\n+\n+        // Rounds 21-24\n+        TMP0 = vaddq_u32(MSG1, vld1q_u32(&K[20]));\n+        TMP2 = STATE0;\n+        MSG1 = vsha256su0q_u32(MSG1, MSG2);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG1 = vsha256su1q_u32(MSG1, MSG3, MSG0);\n+\n+        // Rounds 25-28\n+        TMP0 = vaddq_u32(MSG2, vld1q_u32(&K[24]));\n+        TMP2 = STATE0;\n+        MSG2 = vsha256su0q_u32(MSG2, MSG3);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG2 = vsha256su1q_u32(MSG2, MSG0, MSG1);\n+\n+        // Rounds 29-32\n+        TMP0 = vaddq_u32(MSG3, vld1q_u32(&K[28]));\n+        TMP2 = STATE0;\n+        MSG3 = vsha256su0q_u32(MSG3, MSG0);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG3 = vsha256su1q_u32(MSG3, MSG1, MSG2);\n+\n+        // Rounds 33-36\n+        TMP0 = vaddq_u32(MSG0, vld1q_u32(&K[32]));\n+        TMP2 = STATE0;\n+        MSG0 = vsha256su0q_u32(MSG0, MSG1);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG0 = vsha256su1q_u32(MSG0, MSG2, MSG3);\n+\n+        // Rounds 37-40\n+        TMP0 = vaddq_u32(MSG1, vld1q_u32(&K[36]));\n+        TMP2 = STATE0;\n+        MSG1 = vsha256su0q_u32(MSG1, MSG2);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG1 = vsha256su1q_u32(MSG1, MSG3, MSG0);\n+\n+        // Rounds 41-44\n+        TMP0 = vaddq_u32(MSG2, vld1q_u32(&K[40]));\n+        TMP2 = STATE0;\n+        MSG2 = vsha256su0q_u32(MSG2, MSG3);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG2 = vsha256su1q_u32(MSG2, MSG0, MSG1);\n+\n+        // Rounds 45-48\n+        TMP0 = vaddq_u32(MSG3, vld1q_u32(&K[44]));\n+        TMP2 = STATE0;\n+        MSG3 = vsha256su0q_u32(MSG3, MSG0);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG3 = vsha256su1q_u32(MSG3, MSG1, MSG2);\n+\n+        // Rounds 49-52\n+        TMP0 = vaddq_u32(MSG0, vld1q_u32(&K[48]));\n+        TMP2 = STATE0;\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+\n+        // Rounds 53-56\n+        TMP0 = vaddq_u32(MSG1, vld1q_u32(&K[52]));\n+        TMP2 = STATE0;\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+\n+        // Rounds 57-60\n+        TMP0 = vaddq_u32(MSG2, vld1q_u32(&K[56]));\n+        TMP2 = STATE0;\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+\n+        // Rounds 61-64\n+        TMP0 = vaddq_u32(MSG3, vld1q_u32(&K[60]));\n+        TMP2 = STATE0;\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+\n+        // Update state\n+        STATE0 = vaddq_u32(STATE0, ABEF_SAVE);\n+        STATE1 = vaddq_u32(STATE1, CDGH_SAVE);\n+    }\n+\n+    // Save final state\n+    vst1q_u32(&s[0], STATE0);\n+    vst1q_u32(&s[4], STATE1);\n+}\n+}\n+\n+namespace sha256d64_arm_shani {\n+void Transform_2way(unsigned char* output, const unsigned char* input)\n+{\n+    /* Initial state. */\n+    static const uint32_t INIT[8] = {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790298514",
      "id" : 790298514,
      "line" : 203,
      "node_id" : "PRRC_kwDOABII584vGv-S",
      "original_commit_id" : "1f140783e1fbf818d4a6045464db3903af426bd0",
      "original_line" : 203,
      "original_position" : 203,
      "original_start_line" : null,
      "path" : "src/crypto/sha256_arm_shani.cpp",
      "position" : 203,
      "pull_request_review_id" : 860342823,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790298514/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-23T16:19:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790298514",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790303625"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790303625"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addresssed in the latest rebase",
      "commit_id" : "5202c6dd7695f66325638e15861468999ec834c1",
      "created_at" : "2022-01-23T17:01:11Z",
      "diff_hunk" : "@@ -0,0 +1,898 @@\n+// Copyright (c) 2018-2020 The Bitcoin Core developers",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790303625",
      "id" : 790303625,
      "in_reply_to_id" : 790298023,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vGxOJ",
      "original_commit_id" : "1f140783e1fbf818d4a6045464db3903af426bd0",
      "original_line" : 1,
      "original_position" : 1,
      "original_start_line" : null,
      "path" : "src/crypto/sha256_arm_shani.cpp",
      "position" : null,
      "pull_request_review_id" : 860347967,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790303625/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-23T17:01:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790303625",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790303634"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790303634"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addresssed in the latest rebase",
      "commit_id" : "5202c6dd7695f66325638e15861468999ec834c1",
      "created_at" : "2022-01-23T17:01:16Z",
      "diff_hunk" : "@@ -0,0 +1,898 @@\n+// Copyright (c) 2018-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+//\n+// Based on https://github.com/noloader/SHA-Intrinsics/blob/master/sha256-arm.c,\n+// Written and placed in public domain by Jeffrey Walton.\n+// Based on code from ARM, and by Johannes Schneiders, Skip Hovsmith and\n+// Barry O'Rourke for the mbedTLS project.\n+// Variant specialized for 64-byte inputs added by Pieter Wuille.\n+\n+#ifdef ENABLE_ARM_SHANI\n+\n+#include <cstdint>\n+#include <cstddef>\n+#include <arm_acle.h>\n+#include <arm_neon.h>\n+\n+namespace {\n+static const uint32_t K[64] =",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790303634",
      "id" : 790303634,
      "in_reply_to_id" : 790298261,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vGxOS",
      "original_commit_id" : "1f140783e1fbf818d4a6045464db3903af426bd0",
      "original_line" : 19,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/crypto/sha256_arm_shani.cpp",
      "position" : null,
      "pull_request_review_id" : 860347978,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790303634/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-23T17:01:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790303634",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790303644"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790303644"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addresssed in the latest rebase",
      "commit_id" : "5202c6dd7695f66325638e15861468999ec834c1",
      "created_at" : "2022-01-23T17:01:20Z",
      "diff_hunk" : "@@ -0,0 +1,898 @@\n+// Copyright (c) 2018-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+//\n+// Based on https://github.com/noloader/SHA-Intrinsics/blob/master/sha256-arm.c,\n+// Written and placed in public domain by Jeffrey Walton.\n+// Based on code from ARM, and by Johannes Schneiders, Skip Hovsmith and\n+// Barry O'Rourke for the mbedTLS project.\n+// Variant specialized for 64-byte inputs added by Pieter Wuille.\n+\n+#ifdef ENABLE_ARM_SHANI\n+\n+#include <cstdint>\n+#include <cstddef>\n+#include <arm_acle.h>\n+#include <arm_neon.h>\n+\n+namespace {\n+static const uint32_t K[64] =\n+{\n+    0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5,\n+    0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5,\n+    0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3,\n+    0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174,\n+    0xE49B69C1, 0xEFBE4786, 0x0FC19DC6, 0x240CA1CC,\n+    0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA,\n+    0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7,\n+    0xC6E00BF3, 0xD5A79147, 0x06CA6351, 0x14292967,\n+    0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13,\n+    0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85,\n+    0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3,\n+    0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070,\n+    0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5,\n+    0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3,\n+    0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208,\n+    0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2,\n+};\n+}\n+\n+namespace sha256_arm_shani {\n+void Transform(uint32_t* s, const unsigned char* chunk, size_t blocks)\n+{\n+    uint32x4_t STATE0, STATE1, ABEF_SAVE, CDGH_SAVE;\n+    uint32x4_t MSG0, MSG1, MSG2, MSG3;\n+    uint32x4_t TMP0, TMP2;\n+\n+    // Load state\n+    STATE0 = vld1q_u32(&s[0]);\n+    STATE1 = vld1q_u32(&s[4]);\n+\n+    while (blocks--)\n+    {\n+        // Save state\n+        ABEF_SAVE = STATE0;\n+        CDGH_SAVE = STATE1;\n+\n+        // Load and convert input chunk to Big Endian\n+        MSG0 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 0)));\n+        MSG1 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 16)));\n+        MSG2 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 32)));\n+        MSG3 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 48)));\n+        chunk += 64;\n+\n+        // Original implemenation preloaded message and constant addition which was 1-3% slower.\n+        // Now included as first step in quad round code saving one Q Neon register\n+        // \"TMP0 = vaddq_u32(MSG0, vld1q_u32(&K[0]));\"\n+\n+        // Rounds 1-4\n+        TMP0 = vaddq_u32(MSG0, vld1q_u32(&K[0]));\n+        TMP2 = STATE0;\n+        MSG0 = vsha256su0q_u32(MSG0, MSG1);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG0 = vsha256su1q_u32(MSG0, MSG2, MSG3);\n+\n+        // Rounds 5-8\n+        TMP0 = vaddq_u32(MSG1, vld1q_u32(&K[4]));\n+        TMP2 = STATE0;\n+        MSG1 = vsha256su0q_u32(MSG1, MSG2);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG1 = vsha256su1q_u32(MSG1, MSG3, MSG0);\n+\n+        // Rounds 9-12\n+        TMP0 = vaddq_u32(MSG2, vld1q_u32(&K[8]));\n+        TMP2 = STATE0;\n+        MSG2 = vsha256su0q_u32(MSG2, MSG3);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG2 = vsha256su1q_u32(MSG2, MSG0, MSG1);\n+\n+        // Rounds 13-16\n+        TMP0 = vaddq_u32(MSG3, vld1q_u32(&K[12]));\n+        TMP2 = STATE0;\n+        MSG3 = vsha256su0q_u32(MSG3, MSG0);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG3 = vsha256su1q_u32(MSG3, MSG1, MSG2);\n+\n+        // Rounds 17-20\n+        TMP0 = vaddq_u32(MSG0, vld1q_u32(&K[16]));\n+        TMP2 = STATE0;\n+        MSG0 = vsha256su0q_u32(MSG0, MSG1);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG0 = vsha256su1q_u32(MSG0, MSG2, MSG3);\n+\n+        // Rounds 21-24\n+        TMP0 = vaddq_u32(MSG1, vld1q_u32(&K[20]));\n+        TMP2 = STATE0;\n+        MSG1 = vsha256su0q_u32(MSG1, MSG2);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG1 = vsha256su1q_u32(MSG1, MSG3, MSG0);\n+\n+        // Rounds 25-28\n+        TMP0 = vaddq_u32(MSG2, vld1q_u32(&K[24]));\n+        TMP2 = STATE0;\n+        MSG2 = vsha256su0q_u32(MSG2, MSG3);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG2 = vsha256su1q_u32(MSG2, MSG0, MSG1);\n+\n+        // Rounds 29-32\n+        TMP0 = vaddq_u32(MSG3, vld1q_u32(&K[28]));\n+        TMP2 = STATE0;\n+        MSG3 = vsha256su0q_u32(MSG3, MSG0);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG3 = vsha256su1q_u32(MSG3, MSG1, MSG2);\n+\n+        // Rounds 33-36\n+        TMP0 = vaddq_u32(MSG0, vld1q_u32(&K[32]));\n+        TMP2 = STATE0;\n+        MSG0 = vsha256su0q_u32(MSG0, MSG1);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG0 = vsha256su1q_u32(MSG0, MSG2, MSG3);\n+\n+        // Rounds 37-40\n+        TMP0 = vaddq_u32(MSG1, vld1q_u32(&K[36]));\n+        TMP2 = STATE0;\n+        MSG1 = vsha256su0q_u32(MSG1, MSG2);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG1 = vsha256su1q_u32(MSG1, MSG3, MSG0);\n+\n+        // Rounds 41-44\n+        TMP0 = vaddq_u32(MSG2, vld1q_u32(&K[40]));\n+        TMP2 = STATE0;\n+        MSG2 = vsha256su0q_u32(MSG2, MSG3);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG2 = vsha256su1q_u32(MSG2, MSG0, MSG1);\n+\n+        // Rounds 45-48\n+        TMP0 = vaddq_u32(MSG3, vld1q_u32(&K[44]));\n+        TMP2 = STATE0;\n+        MSG3 = vsha256su0q_u32(MSG3, MSG0);\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+        MSG3 = vsha256su1q_u32(MSG3, MSG1, MSG2);\n+\n+        // Rounds 49-52\n+        TMP0 = vaddq_u32(MSG0, vld1q_u32(&K[48]));\n+        TMP2 = STATE0;\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+\n+        // Rounds 53-56\n+        TMP0 = vaddq_u32(MSG1, vld1q_u32(&K[52]));\n+        TMP2 = STATE0;\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+\n+        // Rounds 57-60\n+        TMP0 = vaddq_u32(MSG2, vld1q_u32(&K[56]));\n+        TMP2 = STATE0;\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+\n+        // Rounds 61-64\n+        TMP0 = vaddq_u32(MSG3, vld1q_u32(&K[60]));\n+        TMP2 = STATE0;\n+        STATE0 = vsha256hq_u32(STATE0, STATE1, TMP0);\n+        STATE1 = vsha256h2q_u32(STATE1, TMP2, TMP0);\n+\n+        // Update state\n+        STATE0 = vaddq_u32(STATE0, ABEF_SAVE);\n+        STATE1 = vaddq_u32(STATE1, CDGH_SAVE);\n+    }\n+\n+    // Save final state\n+    vst1q_u32(&s[0], STATE0);\n+    vst1q_u32(&s[4], STATE1);\n+}\n+}\n+\n+namespace sha256d64_arm_shani {\n+void Transform_2way(unsigned char* output, const unsigned char* input)\n+{\n+    /* Initial state. */\n+    static const uint32_t INIT[8] = {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790303644",
      "id" : 790303644,
      "in_reply_to_id" : 790298514,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vGxOc",
      "original_commit_id" : "1f140783e1fbf818d4a6045464db3903af426bd0",
      "original_line" : 203,
      "original_position" : 203,
      "original_start_line" : null,
      "path" : "src/crypto/sha256_arm_shani.cpp",
      "position" : null,
      "pull_request_review_id" : 860347992,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790303644/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-23T17:01:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790303644",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790310062"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790310062"
         }
      },
      "author_association" : "MEMBER",
      "body" : "a6ae9ef1626c73253aa8e6c8e406f3ee18b8017f\r\n\r\nstyle nit: `#ifdef __linux__` vs `#ifdef __aarch64__` vs `#if defined(__APPLE__)` looks inconsistent. Mind choosing one style for new code?",
      "commit_id" : "5202c6dd7695f66325638e15861468999ec834c1",
      "created_at" : "2022-01-23T17:57:37Z",
      "diff_hunk" : "@@ -623,6 +638,35 @@ std::string SHA256AutoDetect()\n #endif\n #endif\n \n+#if defined(ENABLE_ARM_SHANI) && !defined(BUILD_BITCOIN_INTERNAL)\n+    bool have_arm_shani = false;\n+\n+#ifdef __linux__\n+#ifdef __arm__ // 32-bit\n+    if (getauxval(AT_HWCAP2) & HWCAP2_SHA2) {\n+        have_arm_shani = true;\n+    }\n+#endif\n+#ifdef __aarch64__ // 64-bit\n+    if (getauxval(AT_HWCAP) & HWCAP_SHA2) {\n+        have_arm_shani = true;\n+    }\n+#endif\n+#endif\n+\n+#if defined(__APPLE__)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790310062",
      "id" : 790310062,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vGyyu",
      "original_commit_id" : "68dbb6775ccc1767385e95c7cb7b2b7e9eacdf38",
      "original_line" : 657,
      "original_position" : 102,
      "original_start_line" : 644,
      "path" : "src/crypto/sha256.cpp",
      "position" : null,
      "pull_request_review_id" : 860353687,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790310062/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-01-23T17:59:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790310062",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790311274"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790311274"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed in 9560981b0dda342b79e25067132dcb37e8d9e27b",
      "commit_id" : "5202c6dd7695f66325638e15861468999ec834c1",
      "created_at" : "2022-01-23T18:09:06Z",
      "diff_hunk" : "@@ -623,6 +638,35 @@ std::string SHA256AutoDetect()\n #endif\n #endif\n \n+#if defined(ENABLE_ARM_SHANI) && !defined(BUILD_BITCOIN_INTERNAL)\n+    bool have_arm_shani = false;\n+\n+#ifdef __linux__\n+#ifdef __arm__ // 32-bit\n+    if (getauxval(AT_HWCAP2) & HWCAP2_SHA2) {\n+        have_arm_shani = true;\n+    }\n+#endif\n+#ifdef __aarch64__ // 64-bit\n+    if (getauxval(AT_HWCAP) & HWCAP_SHA2) {\n+        have_arm_shani = true;\n+    }\n+#endif\n+#endif\n+\n+#if defined(__APPLE__)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790311274",
      "id" : 790311274,
      "in_reply_to_id" : 790310062,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vGzFq",
      "original_commit_id" : "68dbb6775ccc1767385e95c7cb7b2b7e9eacdf38",
      "original_line" : 657,
      "original_position" : 102,
      "original_start_line" : 644,
      "path" : "src/crypto/sha256.cpp",
      "position" : null,
      "pull_request_review_id" : 860354812,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790311274/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-01-23T18:09:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790311274",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790333674"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790333674"
         }
      },
      "author_association" : "MEMBER",
      "body" : "May want to put an `alignas(uint32x4_t)` on this and other constants that are read using `vld1q_u32` (better alignment may matter on some platforms).",
      "commit_id" : "195eb2fbe3754efe2ba31fbadb0fa77e801ce8bf",
      "created_at" : "2022-01-23T21:33:07Z",
      "diff_hunk" : "@@ -0,0 +1,899 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+//\n+// Based on https://github.com/noloader/SHA-Intrinsics/blob/master/sha256-arm.c,\n+// Written and placed in public domain by Jeffrey Walton.\n+// Based on code from ARM, and by Johannes Schneiders, Skip Hovsmith and\n+// Barry O'Rourke for the mbedTLS project.\n+// Variant specialized for 64-byte inputs added by Pieter Wuille.\n+\n+#ifdef ENABLE_ARM_SHANI\n+\n+#include <array>\n+#include <cstdint>\n+#include <cstddef>\n+#include <arm_acle.h>\n+#include <arm_neon.h>\n+\n+namespace {\n+static constexpr std::array<uint32_t, 64> K =",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790333674",
      "id" : 790333674,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vG4jq",
      "original_commit_id" : "5202c6dd7695f66325638e15861468999ec834c1",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/crypto/sha256_arm_shani.cpp",
      "position" : null,
      "pull_request_review_id" : 860374398,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790333674/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-23T21:33:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790333674",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790340102"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790340102"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed in fe180d53c9035dfcec4211182ac954bd95ccaa60 + 195eb2fbe3754efe2ba31fbadb0fa77e801ce8bf",
      "commit_id" : "195eb2fbe3754efe2ba31fbadb0fa77e801ce8bf",
      "created_at" : "2022-01-23T22:32:53Z",
      "diff_hunk" : "@@ -0,0 +1,899 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+//\n+// Based on https://github.com/noloader/SHA-Intrinsics/blob/master/sha256-arm.c,\n+// Written and placed in public domain by Jeffrey Walton.\n+// Based on code from ARM, and by Johannes Schneiders, Skip Hovsmith and\n+// Barry O'Rourke for the mbedTLS project.\n+// Variant specialized for 64-byte inputs added by Pieter Wuille.\n+\n+#ifdef ENABLE_ARM_SHANI\n+\n+#include <array>\n+#include <cstdint>\n+#include <cstddef>\n+#include <arm_acle.h>\n+#include <arm_neon.h>\n+\n+namespace {\n+static constexpr std::array<uint32_t, 64> K =",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r790340102",
      "id" : 790340102,
      "in_reply_to_id" : 790333674,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vG6IG",
      "original_commit_id" : "5202c6dd7695f66325638e15861468999ec834c1",
      "original_line" : 20,
      "original_position" : 20,
      "original_start_line" : null,
      "path" : "src/crypto/sha256_arm_shani.cpp",
      "position" : null,
      "pull_request_review_id" : 860380632,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790340102/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-23T22:32:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/790340102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Tested 5202c6dd7695f66325638e15861468999ec834c1 on Mac mini (M1, 2020):\r\n```\r\n% time ./src/bitcoind -datadir=/Users/hebasto/SHANI-2 -assumevalid=0 -stopatheight=719700 -prune=550\r\n2022-01-23T18:25:19Z Bitcoin Core version v22.99.0-5202c6dd7695 (release build)\r\n2022-01-23T18:25:19Z Validating signatures for all blocks.\r\n2022-01-23T18:25:19Z Setting nMinimumChainWork=00000000000000000000000000000000000000001fa4663bbbe19f82de910280\r\n2022-01-23T18:25:19Z Prune configured to target 550 MiB on disk for block and undo files.\r\n2022-01-23T18:25:19Z Using the 'arm_shani(1way,2way)' SHA256 implementation\r\n...\r\n2022-01-24T08:16:46Z Shutdown: done\r\n./src/bitcoind -datadir=/Users/hebasto/SHANI-2 -assumevalid=0  -prune=550  147477.18s user 11980.05s system 319% cpu 13:51:28.21 total\r\n```\r\n\r\n117 min or 12% faster IBD than the master branch. Also see https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1018918711.",
      "created_at" : "2022-01-24T10:45:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1019960691",
      "id" : 1019960691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848y11z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019960691/reactions"
      },
      "updated_at" : "2022-01-24T10:45:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019960691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r791429278"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791429278"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Can you use `MAC_OSX` here to match our other macOS defines.",
      "commit_id" : "853b4c97995720e56500c292b7d8516f04064f67",
      "created_at" : "2022-01-25T07:36:48Z",
      "diff_hunk" : "@@ -623,6 +638,35 @@ std::string SHA256AutoDetect()\n #endif\n #endif\n \n+#if defined(ENABLE_ARM_SHANI) && !defined(BUILD_BITCOIN_INTERNAL)\n+    bool have_arm_shani = false;\n+\n+#if defined(__linux__)\n+#if defined(__arm__) // 32-bit\n+    if (getauxval(AT_HWCAP2) & HWCAP2_SHA2) {\n+        have_arm_shani = true;\n+    }\n+#endif\n+#if defined(__aarch64__) // 64-bit\n+    if (getauxval(AT_HWCAP) & HWCAP_SHA2) {\n+        have_arm_shani = true;\n+    }\n+#endif\n+#endif\n+\n+#if defined(__APPLE__)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r791429278",
      "id" : 791429278,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vLECe",
      "original_commit_id" : "195eb2fbe3754efe2ba31fbadb0fa77e801ce8bf",
      "original_line" : 657,
      "original_position" : 102,
      "original_start_line" : null,
      "path" : "src/crypto/sha256.cpp",
      "position" : null,
      "pull_request_review_id" : 861885002,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791429278/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-25T07:36:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791429278",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r791487494"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791487494"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed in 3af2f3f5024a43bacceff4aabfd108a8cd971d1f",
      "commit_id" : "aaa1d03d3acebeb44fdd40a302f086aad3d329ce",
      "created_at" : "2022-01-25T08:56:12Z",
      "diff_hunk" : "@@ -623,6 +638,35 @@ std::string SHA256AutoDetect()\n #endif\n #endif\n \n+#if defined(ENABLE_ARM_SHANI) && !defined(BUILD_BITCOIN_INTERNAL)\n+    bool have_arm_shani = false;\n+\n+#if defined(__linux__)\n+#if defined(__arm__) // 32-bit\n+    if (getauxval(AT_HWCAP2) & HWCAP2_SHA2) {\n+        have_arm_shani = true;\n+    }\n+#endif\n+#if defined(__aarch64__) // 64-bit\n+    if (getauxval(AT_HWCAP) & HWCAP_SHA2) {\n+        have_arm_shani = true;\n+    }\n+#endif\n+#endif\n+\n+#if defined(__APPLE__)",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r791487494",
      "id" : 791487494,
      "in_reply_to_id" : 791429278,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584vLSQG",
      "original_commit_id" : "195eb2fbe3754efe2ba31fbadb0fa77e801ce8bf",
      "original_line" : 657,
      "original_position" : 102,
      "original_start_line" : null,
      "path" : "src/crypto/sha256.cpp",
      "position" : null,
      "pull_request_review_id" : 861966010,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791487494/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-01-25T11:25:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/791487494",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Compiled and benchmarked on two aarch64 SBC:\r\n\r\nRock Pi 4 (RK3399, Dual Cortex-A72 and Quad Cortex-A53):\r\n\r\nmaster [bd482b3](https://github.com/bitcoin/bitcoin/commit/bd482b3ffebc68130f8a18dabf08ed1aff7ea159)\r\n\r\n|             ns/byte |              byte/s |    err% |        ins/byte |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------:|:----------\r\n|                6.64 |      150,596,444.75 |    0.0% |           30.02 |      0.07 | `SHA256`\r\n|               18.89 |       52,942,682.86 |    0.0% |           82.25 |      0.01 | `SHA256D64_1024`\r\n|               15.95 |       62,706,213.16 |    0.0% |           70.72 |      0.01 | `SHA256_32b`\r\n\r\n[4abca94](https://github.com/bitcoin/bitcoin/commit/4abca94b1e12792e821c2169ff7bee05f35ca284)\r\n\r\n|             ns/byte |              byte/s |    err% |        ins/byte |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------:|:----------\r\n|                1.56 |      642,517,847.54 |    0.9% |            1.75 |      0.02 | `SHA256`\r\n|                2.70 |      370,040,371.53 |    0.0% |            4.38 |      0.01 | `SHA256D64_1024`\r\n|                5.13 |      194,811,160.90 |    1.2% |           13.59 |      0.01 | `SHA256_32b`\r\n\r\nFirefly RK3566-ROC-PC (Quad-core Cortex-A55)\r\n\r\nmaster [bd482b3](https://github.com/bitcoin/bitcoin/commit/bd482b3ffebc68130f8a18dabf08ed1aff7ea159)\r\n\r\n|             ns/byte |              byte/s |    err% |        ins/byte |       bra/byte |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|---------------:|--------:|----------:|:----------\r\n|                9.06 |      110,429,040.01 |    0.1% |           30.02 |           0.02 |    0.1% |      0.10 | `SHA256`\r\n|               24.94 |       40,094,485.36 |    0.9% |           82.25 |           0.05 |    0.3% |      0.02 | `SHA256D64_1024`\r\n|               22.83 |       43,792,465.97 |    0.1% |           70.72 |           1.09 |    0.0% |      0.01 | `SHA256_32b`\r\n\r\n[4abca94](https://github.com/bitcoin/bitcoin/commit/4abca94b1e12792e821c2169ff7bee05f35ca284)\r\n\r\n|             ns/byte |              byte/s |    err% |        ins/byte |       bra/byte |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|---------------:|--------:|----------:|:----------\r\n|                1.49 |      672,648,756.27 |    0.5% |            1.75 |           0.02 |    0.1% |      0.02 | `SHA256`\r\n|                3.10 |      322,551,749.73 |    1.1% |            4.38 |           0.02 |    0.2% |      0.01 | `SHA256D64_1024`\r\n|                7.53 |      132,832,412.14 |    0.0% |           13.59 |           1.09 |    0.0% |      0.01 | `SHA256_32b`\r\n\r\nACK",
      "created_at" : "2022-01-25T14:44:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1021255396",
      "id" : 1021255396,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII58483x7k",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 2,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 2,
         "total_count" : 4,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1021255396/reactions"
      },
      "updated_at" : "2022-01-26T11:30:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1021255396",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/56344102?v=4",
         "events_url" : "https://api.github.com/users/mutatrum/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mutatrum/followers",
         "following_url" : "https://api.github.com/users/mutatrum/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mutatrum/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mutatrum",
         "id" : 56344102,
         "login" : "mutatrum",
         "node_id" : "MDQ6VXNlcjU2MzQ0MTAy",
         "organizations_url" : "https://api.github.com/users/mutatrum/orgs",
         "received_events_url" : "https://api.github.com/users/mutatrum/received_events",
         "repos_url" : "https://api.github.com/users/mutatrum/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mutatrum/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mutatrum/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mutatrum"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "May I propose this to be added to [23.0 Milestone](https://github.com/bitcoin/bitcoin/milestone/52)?",
      "created_at" : "2022-01-26T19:17:52Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1022516701",
      "id" : 1022516701,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII58488l3d",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 2,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022516701/reactions"
      },
      "updated_at" : "2022-01-26T19:17:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022516701",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Two questions: the machine that builds the aarch64 binaries, does that have these extensions? Or in other words, if this is merged, will the aarch64 binaries have this included?\r\n\r\nAnd has someone tested the case of running this build on a device without the crypto extensions, f.e. a Raspberry Pi?",
      "created_at" : "2022-01-27T09:31:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1023013155",
      "id" : 1023013155,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5848-fEj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023013155/reactions"
      },
      "updated_at" : "2022-01-27T09:31:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023013155",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/56344102?v=4",
         "events_url" : "https://api.github.com/users/mutatrum/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mutatrum/followers",
         "following_url" : "https://api.github.com/users/mutatrum/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mutatrum/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mutatrum",
         "id" : 56344102,
         "login" : "mutatrum",
         "node_id" : "MDQ6VXNlcjU2MzQ0MTAy",
         "organizations_url" : "https://api.github.com/users/mutatrum/orgs",
         "received_events_url" : "https://api.github.com/users/mutatrum/received_events",
         "repos_url" : "https://api.github.com/users/mutatrum/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mutatrum/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mutatrum/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mutatrum"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 3abdb593618e62d2c0f0bcc29e19bbadbf31e84c. I have not reviewed whether the macOS feature detection works. Also, some of the code is my own.\r\n\r\nI did verify that the x86 SHA-NI keeps working (benchmark + debug.log on my Ryzen 5950X system indicate the SHA instructions are being used). I've also verified the instruction sequence, and reviewed the constants used cursorily. I conjecture that it is impossible to create anything resembling the SHA-2 transformation's flow using these instructions that passes unit tests in a non-trivial test set, but is still wrong in others. Simply because these instructions are so high-level, any modification would greatly affect the outcome of nearly every input.",
      "created_at" : "2022-01-28T00:04:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1023753472",
      "id" : 1023753472,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849BT0A",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023753472/reactions"
      },
      "updated_at" : "2022-01-28T00:04:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023753472",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@mutatrum I believe we use GCC 10 in the current guix build environment, so yes, the binaries would have these extensions. But let's trigger a build to verify. Good idea to check that things still keep working on RPi.",
      "created_at" : "2022-01-28T00:07:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1023755048",
      "id" : 1023755048,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849BUMo",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023755048/reactions"
      },
      "updated_at" : "2022-01-28T00:07:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023755048",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@prusnak Could you rebase this on master now that support for arm64 Darwin has been added to Guix (#21851)? Then we can get some Guix builds done, test the binaries etc.",
      "created_at" : "2022-01-28T06:40:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1023930496",
      "id" : 1023930496,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849B_CA",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023930496/reactions"
      },
      "updated_at" : "2022-01-28T06:40:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023930496",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@fanquake rebased on top of current master",
      "created_at" : "2022-01-28T08:45:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1024003972",
      "id" : 1024003972,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849CQ-E",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1024003972/reactions"
      },
      "updated_at" : "2022-01-28T08:45:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1024003972",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "#### Guix builds:\r\n```\r\n$ find guix-build-$(git rev-parse --short=12 HEAD)/output/ -type f -print0 | env LC_ALL=C sort -z | xargs -r0 sha256sum\r\n4a309ef27036065f787330a50659c85323f78f7b5d3c69a79e3eca232f4d3e55  guix-build-aaa1d03d3ace/output/aarch64-linux-gnu/SHA256SUMS.part\r\ncfedbd51f5bf65d57fe9200e22e56f3a38f44308eea565b201483811996d957b  guix-build-aaa1d03d3ace/output/aarch64-linux-gnu/bitcoin-aaa1d03d3ace-aarch64-linux-gnu-debug.tar.gz\r\n85c9195cf594fbbf3ce6c6b76370f746dd4342c793b54b8b5bdb650a53761eaf  guix-build-aaa1d03d3ace/output/aarch64-linux-gnu/bitcoin-aaa1d03d3ace-aarch64-linux-gnu.tar.gz\r\n280234b6a20bbcddb847e0bbaf27f35ac30d292ea5dd096f8c8096220f8ef29a  guix-build-aaa1d03d3ace/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n48c0fd0a6a4c1e86e942f6907804ed87527f329954e81e5bdc22beed83cbe6b3  guix-build-aaa1d03d3ace/output/arm-linux-gnueabihf/bitcoin-aaa1d03d3ace-arm-linux-gnueabihf-debug.tar.gz\r\nc435b7a53606f33f9d23f28e6c98ce3d55f50f61fd67bf2b4ebe65261fe68aba  guix-build-aaa1d03d3ace/output/arm-linux-gnueabihf/bitcoin-aaa1d03d3ace-arm-linux-gnueabihf.tar.gz\r\ne0d61af7b471ba5135a848be6d4d6cf0caa8042dab9d929f6578de17e47e40c2  guix-build-aaa1d03d3ace/output/arm64-apple-darwin/SHA256SUMS.part\r\ne9eda618bf90d5d1522005bd13bd296ae89aec9c3b0b2528b9c9f67e70178828  guix-build-aaa1d03d3ace/output/arm64-apple-darwin/bitcoin-aaa1d03d3ace-arm64-apple-darwin.tar.gz\r\na6540dcea7c2a2562edd0f2232f511da97339d388cdca686e084d03e381d6fa2  guix-build-aaa1d03d3ace/output/arm64-apple-darwin/bitcoin-aaa1d03d3ace-osx-unsigned.dmg\r\n6d970ae7c94b78c5f97e978718862e85c3375c48d3b8ade6fafce39e7c8e0f0e  guix-build-aaa1d03d3ace/output/arm64-apple-darwin/bitcoin-aaa1d03d3ace-osx-unsigned.tar.gz\r\ncdbc9eb5281b14ecbecc2956a5a41709fda93762115ce3cee9516a68874676b8  guix-build-aaa1d03d3ace/output/dist-archive/bitcoin-aaa1d03d3ace.tar.gz\r\nd063099449e40036d15ed5b023f602ba824edf303ecbe78bcd3f01feeabb535f  guix-build-aaa1d03d3ace/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n3e6da4026d466039cd361e48a492ea780021bc0efb8e67e948097871ce4226cc  guix-build-aaa1d03d3ace/output/powerpc64-linux-gnu/bitcoin-aaa1d03d3ace-powerpc64-linux-gnu-debug.tar.gz\r\n669291a4767509f053bdd8789f4631ff6d28cd4ad62156105bc98cdb7d3a295a  guix-build-aaa1d03d3ace/output/powerpc64-linux-gnu/bitcoin-aaa1d03d3ace-powerpc64-linux-gnu.tar.gz\r\n868cbe0f73cd786d91dd6d1990550e6c9c673ef3d874c545150b6e030951a24d  guix-build-aaa1d03d3ace/output/powerpc64le-linux-gnu/SHA256SUMS.part\r\n90157bdc29262abd421535e4d6921e72aff7f3d43ca5634bc76598d8daf3a1ec  guix-build-aaa1d03d3ace/output/powerpc64le-linux-gnu/bitcoin-aaa1d03d3ace-powerpc64le-linux-gnu-debug.tar.gz\r\n8275665e19f85193de4e7e5ee7b451d6a4f8e414a33586e7066575812e878eda  guix-build-aaa1d03d3ace/output/powerpc64le-linux-gnu/bitcoin-aaa1d03d3ace-powerpc64le-linux-gnu.tar.gz\r\n2723b48d06e8217adb41bcc640417cba3470b234cce7815104e878866d775046  guix-build-aaa1d03d3ace/output/riscv64-linux-gnu/SHA256SUMS.part\r\nf63822813587ec9e4bcc044c4b7918b1330d6b16be09f28bd95fedfd3dcdb147  guix-build-aaa1d03d3ace/output/riscv64-linux-gnu/bitcoin-aaa1d03d3ace-riscv64-linux-gnu-debug.tar.gz\r\n3ec47d6968e2e430e3ff1629f07243f8589bd30406c0de916c2bbc6d5d88e0e8  guix-build-aaa1d03d3ace/output/riscv64-linux-gnu/bitcoin-aaa1d03d3ace-riscv64-linux-gnu.tar.gz\r\n2120e8021edfe8170e318d82e44e405af68bb04c3fe3a3cd0407a17507cd74a0  guix-build-aaa1d03d3ace/output/x86_64-apple-darwin/SHA256SUMS.part\r\n11b173cbeff7b20c717fd880446904eec2d33b30076348c0e9698e876f5be4a4  guix-build-aaa1d03d3ace/output/x86_64-apple-darwin/bitcoin-aaa1d03d3ace-osx-unsigned.dmg\r\naf86643730d769ddf6635e9e240b50bd5b94aa576cf7450b4289d8ec1fc883ed  guix-build-aaa1d03d3ace/output/x86_64-apple-darwin/bitcoin-aaa1d03d3ace-osx-unsigned.tar.gz\r\n3c3591954aaf6b0557b74baf156f892b9b90ec63c35f3495889431afe0a17f93  guix-build-aaa1d03d3ace/output/x86_64-apple-darwin/bitcoin-aaa1d03d3ace-osx64.tar.gz\r\n553d227d7e32c72390e259a46f37e4fd98f5781bd4b6d7ed8d83c5a9ba04f65b  guix-build-aaa1d03d3ace/output/x86_64-linux-gnu/SHA256SUMS.part\r\n479f3597f1577a33dad6634b97515f4ceac0ff163d64e7fa00b8685793d36231  guix-build-aaa1d03d3ace/output/x86_64-linux-gnu/bitcoin-aaa1d03d3ace-x86_64-linux-gnu-debug.tar.gz\r\nc273a93458f2afa04c66d7e23346835dc6201f8e7b878ffbf661ae104c8746e7  guix-build-aaa1d03d3ace/output/x86_64-linux-gnu/bitcoin-aaa1d03d3ace-x86_64-linux-gnu.tar.gz\r\n```\r\n\r\nUPDATE: build artifacts are available in https://github.com/hebasto/artefacts/tree/master/pr24115/guix-build-aaa1d03d3ace/output",
      "created_at" : "2022-01-28T22:43:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1024719840",
      "id" : 1024719840,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849E_vg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1024719840/reactions"
      },
      "updated_at" : "2022-01-29T13:50:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1024719840",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Two questions: \r\n\r\nSystems used:\r\n\r\n* RPI4 - Raspberry Pi 4 system (which does not support ARMv8 SHA2 NI), Ubuntu 21.10\r\n* ALTRA - Ampere Altra system (which does support ARMv8 SHA2 NI), Ubuntu 20.4.3 LTS\r\n\r\nI performed the following tests:\r\n\r\n- [x] build aaa1d03 on RPI4\r\n  - [x] configure output says `checking for ARMv8 SHA-NI intrinsics... yes`\r\n  - [x] resulting binary contains ARMv8 SHA-NI code\r\n  - [x] bitcoind starts \r\n  - [x] bitcoind output says `Using the 'standard' SHA256 implementation` \r\n- [x] build aaa1d03 on ALTRA\r\n  - [x] configure output says `checking for ARMv8 SHA-NI intrinsics... yes`\r\n  - [x] resulting binary contains ARMv8 SHA-NI code\r\n  - [x] bitcoind starts \r\n  - [x] bitcoind output says `Using the 'arm_shani(1way,2way)' SHA256 implementation`\r\n\r\n----\r\n\r\n- [x] take binary built on ALTRA and run it on RPI4\r\n  - [x] bitcoind starts \r\n  - [x] bitcoind output says `Using the 'standard' SHA256 implementation` \r\n- [x] take binary built on RPI4 and run it on ALTRA\r\n  - [x] bitcoind starts \r\n  - [x] bitcoind output says `Using the 'arm_shani(1way,2way)' SHA256 implementation`\r\n\r\n----\r\n\r\n- [x] take [guix build binary from hebasto](https://github.com/hebasto/artefacts/blob/master/pr24115/guix-build-aaa1d03d3ace/output/aarch64-linux-gnu/bitcoin-aaa1d03d3ace-aarch64-linux-gnu.tar.gz) and run it on ALTRA:\r\n  - [x] bitcoind starts \r\n  - [x] bitcoind output says `Using the 'arm_shani(1way,2way)' SHA256 implementation`\r\n- [x] take [guix build binary from hebasto](https://github.com/hebasto/artefacts/blob/master/pr24115/guix-build-aaa1d03d3ace/output/aarch64-linux-gnu/bitcoin-aaa1d03d3ace-aarch64-linux-gnu.tar.gz) and run it on RPI4:\r\n  - [x] bitcoind starts \r\n  - [x] bitcoind output says `Using the 'standard' SHA256 implementation` \r\n\r\nI think this proves the build mechanism and the runtime detection works as intended.",
      "created_at" : "2022-01-29T14:18:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1024920594",
      "id" : 1024920594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849FwwS",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1024920594/reactions"
      },
      "updated_at" : "2022-01-29T14:21:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1024920594",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/42201?v=4",
         "events_url" : "https://api.github.com/users/prusnak/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prusnak/followers",
         "following_url" : "https://api.github.com/users/prusnak/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prusnak/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prusnak",
         "id" : 42201,
         "login" : "prusnak",
         "node_id" : "MDQ6VXNlcjQyMjAx",
         "organizations_url" : "https://api.github.com/users/prusnak/orgs",
         "received_events_url" : "https://api.github.com/users/prusnak/received_events",
         "repos_url" : "https://api.github.com/users/prusnak/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prusnak/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prusnak/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prusnak"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK. I find it near-impossible to follow what  `sha256d64_arm_shani` is doing, but that's mainly because our c++ `TransformD64` is undocumented (introduced in #13191). In particular I don't understand how the algorithm follows from a single sha256. I assume it's an optimization. Otherwise they seem similar enough, with `sha256d64_arm_shani ` splitting the input to take advantage of the 2-way instructions. And the tests pass :-)",
      "created_at" : "2022-01-31T20:04:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1026158761",
      "id" : 1026158761,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849KfCp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026158761/reactions"
      },
      "updated_at" : "2022-01-31T20:15:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026158761",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors That's quite possibly worth documenting in general (for all D64 code).\r\n\r\nWhat these functions do:\r\n* Take a pointer to an input `N*64` bytes buffer, and an output `N*32` bytes buffer (N=1 for 1-way ,N=2 for 2-way, etc).\r\n* Treat the input as the concatenation of N 64-byte inputs, compute `SHA256(SHA256(input))` for each, and concatenate those outputs in the output buffer.\r\n\r\nA bit about SHA256's structure. `SHA256(bytes)` is really the following algorithm:\r\n* Append padding to input (between 9 and 72 bytes); the result is always a multiple of 64 bytes.\r\n* Initialize the state (a 32-byte value, typically represented as 8 32-bit integers) to the initial state, a constant.\r\n* Then split the input into blocks of 64 bytes, and for each do `state = Transform(state, block)`, where Transform is the SHA256 transformation function at a high level.\r\n* The hash is equal to the final state.\r\n\r\nIn case of SHA256(SHA256(64 bytes)), there are 3 Transforms being invoked:\r\n* The first operates on the 64 bytes of input, starting with initial state.\r\n* The second continues on the resulting state, processing 64 bytes of padding. That padding is a constant (it's just a function of the length of the input).\r\n* The third operates on the 32 bytes of output produced by the second transform, followed by 32 bytes of padding, which is again constant, and starting with a new initial state.\r\n\r\nThere are 3 types of optimizations we can do in this case:\r\n* Start by inlining the 3 transforms into one function body, together with all the initializations. The intermediary conversion to bytes after the second transform and then back to integers for the 3rd transform can be bypassed (serializing & deserializing is a no-op).\r\n* Observing that lots of intermediary values now actually become known at compile time. In particular, lots of values occurring during the 2nd transform (whose input is 100% fixed). I did this by simply writing the code up to this point, adding printf statements on these intermediaries, then turning the printed values into constants in the code and skipping their computation.\r\n* Taking advantage of vectorization and/or instruction level parallellism. In the case of x86 and ARM SHA instructions, we literally just duplicate every line of code (after doing the operations above), alternating between working on variables relating to a first or a second 64-byte input. This works because these instructions have a long pipeline, and there are sufficient registers available in hardware to store (most) of the data relating to two instances at once. This improves the throughput.\r\n\r\nThe individual commits in https://github.com/sipa/bitcoin/commits/pr24115 show the process.\r\n\r\nNote that I don't think it's really required for verifying correctness to see these steps (otherwise I'd have argued for including them in this PR), but it may help understand how it came to be.",
      "created_at" : "2022-01-31T20:27:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1026178402",
      "id" : 1026178402,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849Kj1i",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026178402/reactions"
      },
      "updated_at" : "2022-01-31T20:31:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026178402",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I think this is the step that confuses me:\r\n\r\n> The second continues on the resulting state, processing 64 bytes of padding. That padding is a constant (it's just a function of the length of the input).\r\n\r\nIf the first transform is the equivalent of a single sha256(64 bytes) and the third is the equivalent of a second sha256() on the 32 byte result of the first, what is the second transform doing?\r\n\r\n> I did this by simply writing the code up to this point, adding printf statements on these intermediaries, then turning the printed values into constants in the code and skipping their computation.\r\n\r\nThis is definitely worth documenting (can be another PR). Even nicer if we can generate the values in a Python script (for manual comparison, not code generation).",
      "created_at" : "2022-02-01T09:29:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1026636729",
      "id" : 1026636729,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849MTu5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026636729/reactions"
      },
      "updated_at" : "2022-02-01T09:33:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026636729",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors\n\nThere are two SHA256 invocations:\n* H1 = SHA256(input)\n* H2 = SHA256(H1)\n\nInput is 64 bytes, which means it gets 64 bytes of padding (because the padding is always between 9 and 72 bytes long, and the result is always a multiple of 64).\n\nFor H2, SHA256(H1) just gets a 32-byte input, so it also only gets a 32-byte padding, and the result just needs one transform.\n\nSo we can write it this way:\n* H1 = Transform(Transform(Init(), input), Pad(64))\n* H2 = Transform(Init(), H1 + Pad(32))\n\nThe first transform is the inner one for H1, the second the outer one for H1. The third transform is the H2 one.",
      "created_at" : "2022-02-01T13:51:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1026865107",
      "id" : 1026865107,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849NLfT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026865107/reactions"
      },
      "updated_at" : "2022-02-01T13:51:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026865107",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ah that makes sense.\r\n\r\n> Input is 64 bytes, which means it gets 64 bytes of padding\r\n\r\nI naively assumed a 64 byte message wasn't padded, but it is: https://datatracker.ietf.org/doc/html/rfc6234#section-4.1",
      "created_at" : "2022-02-01T14:08:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1026882539",
      "id" : 1026882539,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849NPvr",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026882539/reactions"
      },
      "updated_at" : "2022-02-01T14:08:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026882539",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "IBD up to block 700000 on a Rock Pi 4a w/ NVMe SSD, assumevalid=0, dbcache=2000:\r\n\r\nmaster (bd482b3f): 68H52M\r\nshani (4abca94): 65H29M\r\n\r\nImprovement ~5%",
      "created_at" : "2022-02-01T15:28:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1026969684",
      "id" : 1026969684,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849NlBU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026969684/reactions"
      },
      "updated_at" : "2022-02-01T15:29:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026969684",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/56344102?v=4",
         "events_url" : "https://api.github.com/users/mutatrum/events{/privacy}",
         "followers_url" : "https://api.github.com/users/mutatrum/followers",
         "following_url" : "https://api.github.com/users/mutatrum/following{/other_user}",
         "gists_url" : "https://api.github.com/users/mutatrum/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/mutatrum",
         "id" : 56344102,
         "login" : "mutatrum",
         "node_id" : "MDQ6VXNlcjU2MzQ0MTAy",
         "organizations_url" : "https://api.github.com/users/mutatrum/orgs",
         "received_events_url" : "https://api.github.com/users/mutatrum/received_events",
         "repos_url" : "https://api.github.com/users/mutatrum/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/mutatrum/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/mutatrum/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/mutatrum"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors \r\n\r\n> I naively assumed a 64 byte message wasn't padded, but it is: https://datatracker.ietf.org/doc/html/rfc6234#section-4.1\r\n\r\nYes, it has to be. Otherwise you'd have a trivial 2nd preimage attack between hash(X) and hash(X || padding(len(X))), for non-multiple-of-64-bytes X.",
      "created_at" : "2022-02-01T15:30:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1026973176",
      "id" : 1026973176,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849Nl34",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026973176/reactions"
      },
      "updated_at" : "2022-02-01T16:20:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1026973176",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--9cd9c72976c961c55c7acef8f6ba82cd-->\n### Guix builds\n\n| File | commit 133f73e86bd7c3114263500be2fb5090dd76b4bc<br>(master) | commit 19a5c3f8cc5c75da931d491340c1de68867934a1<br>(master and this pull) |\n|--|--|--|\n| SHA256SUMS.part | [`4d29ebeb3309d60d...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/SHA256SUMS.part) | [`b7844e9c678b97f6...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/SHA256SUMS.part) |\n| *-aarch64-linux-gnu-debug.tar.gz | [`c29ba0d0426063e8...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-aarch64-linux-gnu-debug.tar.gz) | [`89ff765de2630eb7...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-aarch64-linux-gnu-debug.tar.gz) |\n| *-aarch64-linux-gnu.tar.gz | [`e52c846b1841b3eb...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-aarch64-linux-gnu.tar.gz) | [`d6ea7915e264d3be...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-aarch64-linux-gnu.tar.gz) |\n| *-arm-linux-gnueabihf-debug.tar.gz | [`5d3f9731cf88da5b...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-arm-linux-gnueabihf-debug.tar.gz) | [`d254cb4dc971d678...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-arm-linux-gnueabihf-debug.tar.gz) |\n| *-arm-linux-gnueabihf.tar.gz | [`282b33b13dd1f8a0...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-arm-linux-gnueabihf.tar.gz) | [`ea7a0cf5a93cb32a...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-arm-linux-gnueabihf.tar.gz) |\n| *-arm64-apple-darwin.tar.gz | [`3f0dba0a6549c410...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-arm64-apple-darwin.tar.gz) | [`3400772805824d22...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-arm64-apple-darwin.tar.gz) |\n| *-osx-unsigned.dmg | [`6692809452b6cb62...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-osx-unsigned.dmg) | [`25da88b4e7f96778...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-osx-unsigned.dmg) |\n| *-osx-unsigned.tar.gz | [`4366f453672f800d...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-osx-unsigned.tar.gz) | [`3ad587987969546b...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-osx-unsigned.tar.gz) |\n| *-osx64.tar.gz | [`5387d0cdc36be37a...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-osx64.tar.gz) | [`198a4d9b96a87a5f...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-osx64.tar.gz) |\n| *-powerpc64-linux-gnu-debug.tar.gz | [`1ed57908059941ef...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-powerpc64-linux-gnu-debug.tar.gz) | [`e3a27aa697de6985...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-powerpc64-linux-gnu-debug.tar.gz) |\n| *-powerpc64-linux-gnu.tar.gz | [`21079e1bae0f459b...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-powerpc64-linux-gnu.tar.gz) | [`7c91ce0fa9a40f23...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-powerpc64-linux-gnu.tar.gz) |\n| *-powerpc64le-linux-gnu-debug.tar.gz | [`6b441c519f2d3185...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-powerpc64le-linux-gnu-debug.tar.gz) | [`2bfee29cc7203662...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-powerpc64le-linux-gnu-debug.tar.gz) |\n| *-powerpc64le-linux-gnu.tar.gz | [`132f95573d0fd005...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-powerpc64le-linux-gnu.tar.gz) | [`48a553082d2d03b8...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-powerpc64le-linux-gnu.tar.gz) |\n| *-riscv64-linux-gnu-debug.tar.gz | [`3c5e1f8e3d9aa92a...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-riscv64-linux-gnu-debug.tar.gz) | [`64dc9f50e4993c2e...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-riscv64-linux-gnu-debug.tar.gz) |\n| *-riscv64-linux-gnu.tar.gz | [`b17efbca76425fc5...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-riscv64-linux-gnu.tar.gz) | [`78bba78a4dd894cb...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-riscv64-linux-gnu.tar.gz) |\n| *-x86_64-linux-gnu-debug.tar.gz | [`9f61cd7fca8d6425...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-x86_64-linux-gnu-debug.tar.gz) | [`edbfec791406e681...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-x86_64-linux-gnu-debug.tar.gz) |\n| *-x86_64-linux-gnu.tar.gz | [`323dc8d7d0aa8290...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7-x86_64-linux-gnu.tar.gz) | [`b38a112a72acb36a...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c-x86_64-linux-gnu.tar.gz) |\n| *.tar.gz | [`5887839fbd29cd1c...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/bitcoin-133f73e86bd7.tar.gz) | [`58afa778369cde02...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/bitcoin-19a5c3f8cc5c.tar.gz) |\n| guix_build.log | [`53868781dafe6675...`](https://drahtbot.space/guix/bitcoin/bitcoin/133f73e86bd7c3114263500be2fb5090dd76b4bc/guix_build.log) | [`8cae536cac2f270c...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/guix_build.log) |\n| guix_build.log.diff |  | [`a14b825c6610d5c4...`](https://drahtbot.space/guix/bitcoin/bitcoin/19a5c3f8cc5c75da931d491340c1de68867934a1/guix_build.log.diff) |\n\n",
      "created_at" : "2022-02-03T12:08:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1028925948",
      "id" : 1028925948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849VCn8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1028925948/reactions"
      },
      "updated_at" : "2022-02-03T12:08:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1028925948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24322](https://github.com/bitcoin/bitcoin/pull/24322) ([kernel 1/n] Introduce initial `libbitcoinkernel` by dongcarl)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-02-11T22:23:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1036685408",
      "id" : 1036685408,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII5849ypBg",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036685408/reactions"
      },
      "updated_at" : "2022-02-13T16:54:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036685408",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review and lightly tested ACK aaa1d03d3acebeb44fdd40a302f086aad3d329ce\r\nI have checked \r\n- that the code gets compiled (bitcoind contains the instructions)\r\n- on a old ARM64 device without the instruction set that it correctly doesn't enable the code.\r\n- on a recent ARM64 with the instruction set that it uses and enables the code\r\n",
      "created_at" : "2022-02-14T19:46:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#issuecomment-1039485455",
      "id" : 1039485455,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24115",
      "node_id" : "IC_kwDOABII58499UoP",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1039485455/reactions"
      },
      "updated_at" : "2022-02-14T19:48:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1039485455",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r807826958"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/807826958"
         }
      },
      "author_association" : "MEMBER",
      "body" : "typo: implemenation ==> implementation",
      "commit_id" : "aaa1d03d3acebeb44fdd40a302f086aad3d329ce",
      "created_at" : "2022-02-16T11:22:52Z",
      "diff_hunk" : "@@ -0,0 +1,899 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+//\n+// Based on https://github.com/noloader/SHA-Intrinsics/blob/master/sha256-arm.c,\n+// Written and placed in public domain by Jeffrey Walton.\n+// Based on code from ARM, and by Johannes Schneiders, Skip Hovsmith and\n+// Barry O'Rourke for the mbedTLS project.\n+// Variant specialized for 64-byte inputs added by Pieter Wuille.\n+\n+#ifdef ENABLE_ARM_SHANI\n+\n+#include <array>\n+#include <cstdint>\n+#include <cstddef>\n+#include <arm_acle.h>\n+#include <arm_neon.h>\n+\n+namespace {\n+alignas(uint32x4_t) static constexpr std::array<uint32_t, 64> K =\n+{\n+    0x428A2F98, 0x71374491, 0xB5C0FBCF, 0xE9B5DBA5,\n+    0x3956C25B, 0x59F111F1, 0x923F82A4, 0xAB1C5ED5,\n+    0xD807AA98, 0x12835B01, 0x243185BE, 0x550C7DC3,\n+    0x72BE5D74, 0x80DEB1FE, 0x9BDC06A7, 0xC19BF174,\n+    0xE49B69C1, 0xEFBE4786, 0x0FC19DC6, 0x240CA1CC,\n+    0x2DE92C6F, 0x4A7484AA, 0x5CB0A9DC, 0x76F988DA,\n+    0x983E5152, 0xA831C66D, 0xB00327C8, 0xBF597FC7,\n+    0xC6E00BF3, 0xD5A79147, 0x06CA6351, 0x14292967,\n+    0x27B70A85, 0x2E1B2138, 0x4D2C6DFC, 0x53380D13,\n+    0x650A7354, 0x766A0ABB, 0x81C2C92E, 0x92722C85,\n+    0xA2BFE8A1, 0xA81A664B, 0xC24B8B70, 0xC76C51A3,\n+    0xD192E819, 0xD6990624, 0xF40E3585, 0x106AA070,\n+    0x19A4C116, 0x1E376C08, 0x2748774C, 0x34B0BCB5,\n+    0x391C0CB3, 0x4ED8AA4A, 0x5B9CCA4F, 0x682E6FF3,\n+    0x748F82EE, 0x78A5636F, 0x84C87814, 0x8CC70208,\n+    0x90BEFFFA, 0xA4506CEB, 0xBEF9A3F7, 0xC67178F2,\n+};\n+}\n+\n+namespace sha256_arm_shani {\n+void Transform(uint32_t* s, const unsigned char* chunk, size_t blocks)\n+{\n+    uint32x4_t STATE0, STATE1, ABEF_SAVE, CDGH_SAVE;\n+    uint32x4_t MSG0, MSG1, MSG2, MSG3;\n+    uint32x4_t TMP0, TMP2;\n+\n+    // Load state\n+    STATE0 = vld1q_u32(&s[0]);\n+    STATE1 = vld1q_u32(&s[4]);\n+\n+    while (blocks--)\n+    {\n+        // Save state\n+        ABEF_SAVE = STATE0;\n+        CDGH_SAVE = STATE1;\n+\n+        // Load and convert input chunk to Big Endian\n+        MSG0 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 0)));\n+        MSG1 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 16)));\n+        MSG2 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 32)));\n+        MSG3 = vreinterpretq_u32_u8(vrev32q_u8(vld1q_u8(chunk + 48)));\n+        chunk += 64;\n+\n+        // Original implemenation preloaded message and constant addition which was 1-3% slower.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24115#discussion_r807826958",
      "id" : 807826958,
      "line" : 65,
      "node_id" : "PRRC_kwDOABII584wJnYO",
      "original_commit_id" : "aaa1d03d3acebeb44fdd40a302f086aad3d329ce",
      "original_line" : 65,
      "original_position" : 65,
      "original_start_line" : null,
      "path" : "src/crypto/sha256_arm_shani.cpp",
      "position" : 65,
      "pull_request_review_id" : 884388841,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24115",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/807826958/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-16T11:22:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/807826958",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
