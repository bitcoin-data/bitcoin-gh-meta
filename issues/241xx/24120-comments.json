[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@sipa would you be able to attempt to replicate this on your non-m1 arm machine?\r\n@prusnak would you be able to attempt to replicate this on your m1 machine?",
      "created_at" : "2022-01-22T12:43:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019240819",
      "id" : 1019240819,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wGFz",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019240819/reactions"
      },
      "updated_at" : "2022-01-22T12:43:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019240819",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Can you debug where the time is spent? There is certain \"anti virus\" software that slows down RPC connections.",
      "created_at" : "2022-01-22T12:52:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019245366",
      "id" : 1019245366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wHM2",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019245366/reactions"
      },
      "updated_at" : "2022-01-22T12:52:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019245366",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@PastaPastaPasta I'm afraid that any comparison will be difficult. The machine I have is a 24-core Cortex-A53 (an architecture designed in 2012) running at 1 GHz, with 4 GiB RAM. In terms of single-threaded performance, even a RPi 3 is faster.",
      "created_at" : "2022-01-22T13:52:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019273182",
      "id" : 1019273182,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wN_e",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019273182/reactions"
      },
      "updated_at" : "2022-01-22T13:52:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019273182",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Can you debug where the time is spent? There is certain \"anti virus\" software that slows down RPC connections.\r\n\r\n@MarcoFalke this is a brand new M1 install, so no custom AV or anything like that has been installed.\r\n\r\nSee attached screen shot for high level profiling. It seems like 80% of this thread (which is a rpc worker that did exclusively `getnewaddress`) was spent in wallet::DatabaseBatch::Write. The vast majority of this time ended up being spent in libsystem_kernel.dylib`__fcntl\r\n\r\nNotes for replication, start bitcoind --regtest and attach profiler to it. Then, repeatidely run `getnewaddress` I used a bash script\r\n```\r\nwhile True\r\ndo\r\n    time ./src/bitcoin-cli --regtest getnewaddress\r\n    sleep 0\r\ndone\r\n```\r\n\r\nI did this for about a minute.\r\n\r\n<img width=\"1568\" alt=\"image\" src=\"https://user-images.githubusercontent.com/6443210/150643045-f6cecb98-c223-4a30-b12e-05db26a49fe4.png\">\r\n",
      "created_at" : "2022-01-22T14:47:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019284395",
      "id" : 1019284395,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wQur",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019284395/reactions"
      },
      "updated_at" : "2022-01-22T16:04:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019284395",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Are you using an external hard drive? I presume RPCs that don't write to disk are faster/immediate?",
      "created_at" : "2022-01-22T14:48:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019284756",
      "id" : 1019284756,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wQ0U",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019284756/reactions"
      },
      "updated_at" : "2022-01-22T14:48:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019284756",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Nope, everything is on the internal ssd",
      "created_at" : "2022-01-22T14:49:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019284852",
      "id" : 1019284852,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wQ10",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019284852/reactions"
      },
      "updated_at" : "2022-01-22T14:49:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019284852",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Are you using an external hard drive? I presume RPCs that don't write to disk are faster/immediate?\r\n\r\nEven non-writing rpc calls are slightly slower than I'd expect. \r\n\r\n`getblockchaininfo` takes .002 seconds on my amd 1950x machine, ~0.01 seconds on m1, or about 5x slower (not sure if there's a difference between mac time and unix time commands)\r\n\r\n`listtransaction \"*\" 1000` in a wallet that generated 1310 blocks takes 0.055s on amd ~0.06s on m1\r\n\r\nIt seems like the issue is in disk / database involving rpc calls",
      "created_at" : "2022-01-22T15:29:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019292299",
      "id" : 1019292299,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wSqL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019292299/reactions"
      },
      "updated_at" : "2022-01-22T15:29:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019292299",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I have a Macbook Pro (16GB + Intel arch) and a Macbook Air M1, I will compare the results and post here.",
      "created_at" : "2022-01-22T22:13:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1019367321",
      "id" : 1019367321,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848wk-Z",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019367321/reactions"
      },
      "updated_at" : "2022-01-22T22:13:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1019367321",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Tested some functional tests here (`wallet_listtransactions` and `rpc_blockchain`) and both executes faster on M1. 60% faster.",
      "created_at" : "2022-01-24T11:30:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1020001100",
      "id" : 1020001100,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848y_tM",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020001100/reactions"
      },
      "updated_at" : "2022-01-24T11:30:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020001100",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19480819?v=4",
         "events_url" : "https://api.github.com/users/brunoerg/events{/privacy}",
         "followers_url" : "https://api.github.com/users/brunoerg/followers",
         "following_url" : "https://api.github.com/users/brunoerg/following{/other_user}",
         "gists_url" : "https://api.github.com/users/brunoerg/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/brunoerg",
         "id" : 19480819,
         "login" : "brunoerg",
         "node_id" : "MDQ6VXNlcjE5NDgwODE5",
         "organizations_url" : "https://api.github.com/users/brunoerg/orgs",
         "received_events_url" : "https://api.github.com/users/brunoerg/received_events",
         "repos_url" : "https://api.github.com/users/brunoerg/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/brunoerg/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/brunoerg/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/brunoerg"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@PastaPastaPasta It might be worth to check your ssd for defects and performance",
      "created_at" : "2022-01-24T11:38:20Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1020007217",
      "id" : 1020007217,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848zBMx",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020007217/reactions"
      },
      "updated_at" : "2022-01-24T11:38:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020007217",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@brunoerg \r\n\r\n> Tested some functional tests here (`wallet_listtransactions` and `rpc_blockchain`) and both executes faster on M1. 60% faster.\r\n\r\nDid you try anything involving wallet? `getnewaddress` or `loadwallet` or `generatetoaddress`?\r\n\r\nThese are where the slowdowns are\r\n\r\nEDIT: I see know your just talking about the functional tests, I've added a comment below with my speeds on both. I will investigate potential ssd issues",
      "created_at" : "2022-01-24T13:19:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1020092636",
      "id" : 1020092636,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848zWDc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020092636/reactions"
      },
      "updated_at" : "2022-01-24T13:26:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020092636",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "On m1 wallet_listtransactions took 31.126 seconds, rpc_blockchain took 9.715 seconds\r\n\r\non ubuntu amd 1900x wallet_listtransactions took 23.176 seconds, rpc_blockchain took 6.880s\r\n\r\nEDIT:\r\nIn regards to SSD defects, S.M.A.R.T. Status according to System Information is \"Verified\"",
      "created_at" : "2022-01-24T13:25:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1020098691",
      "id" : 1020098691,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII5848zXiD",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020098691/reactions"
      },
      "updated_at" : "2022-01-24T15:19:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020098691",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@MarcoFalke I tried to benchmark the disk. Using Blackmagic Disk Speed Test makes me think there is no raw ssd issue\r\n<img width=\"677\" alt=\"image\" src=\"https://user-images.githubusercontent.com/6443210/150936061-80233d18-0ef8-4e2d-9354-61dd6c7f3508.png\">\r\n",
      "created_at" : "2022-01-25T08:03:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1020907589",
      "id" : 1020907589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII58482dBF",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020907589/reactions"
      },
      "updated_at" : "2022-01-25T08:03:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1020907589",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Tested some functional tests here (`wallet_listtransactions` and `rpc_blockchain`) and both executes faster on M1. 60% faster.\r\n\r\n@brunoerg \r\n~Could you try feature_block.py?~",
      "created_at" : "2022-01-26T09:18:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1022009633",
      "id" : 1022009633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII58486qEh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022009633/reactions"
      },
      "updated_at" : "2022-01-26T15:41:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022009633",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I have used a second MacBookPro to validate this issue (courtesy of @Munkybooty), as well as a 2017 macbook air\r\n\r\nWe found the brand new macbook pro to be **131% slower** than the 5 year old entry level mac book air. \r\n\r\nWe compared two systems.\r\n\r\nMachine | 2021 Macbook Pro 14\"\r\n-- | --\r\nOS | MacOS Monterey\r\nCPU | 8/14 Core M1 Pro\r\nMemory | 32GB\r\n\r\n\r\nMachine | 2017 Macbook Air\r\n-- | --\r\nOS | MacOS Monterey\r\nCPU | 1.8GHz Dual core i5\r\nMemory | 8GB\r\n\r\n\r\nWe ran test_runner.py single threaded on each machine. The macbook air took 2206 seconds. **The m1 took 5107 seconds**. Over 80 minutes!\r\n\r\nYou can view the raw data here: https://docs.google.com/spreadsheets/d/1uIcgoIg0SVF5DMz0htVwOEsqTcZPleBxiWYg1iMi-Rw/edit#gid=1443924285\r\n\r\nAs you can see, some of the tests run substantially faster on m1, however others run exponentially slower on M1, as of note mempool_package_onemore.py takes 3400% longer on m1 compared to a macbook air.\r\n\r\n@brunoerg Please try running mempool_package_onemore.py.\r\n \r\nI think it is clear that there is obviously a massive issue with certain functional tests on m1 based platforms.\r\n\r\nThese problematic tests are\r\n1. mempool_package_onemore.py\r\n2. mempool_packages.py\r\n3. mempool_updatefromblock.py\r\n4. mining_prioritisetransaction.py\r\n5. wallet_startup.py\r\n6. wallet_taproot.py\r\n\r\nEach of which take 3x (or more) as long on m1 compared to a 2017 macbook air\r\n\r\n",
      "created_at" : "2022-01-26T15:41:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1022322657",
      "id" : 1022322657,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII584872fh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 1,
         "total_count" : 1,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022322657/reactions"
      },
      "updated_at" : "2022-01-26T15:41:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022322657",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Indeed, result comparison looks interesting (medians of 3 runs):\r\n\r\n- a VirtualBox VM (2 cores) on an **_Intel_** host, macOS Monterey 12.2 (21D48):\r\n```\r\n% time ./test/functional/mempool_package_onemore.py\r\n2022-01-26T19:53:31.410000Z TestFramework (INFO): Initializing test directory /var/folders/9n/wb_bl1vs509d0dy850m7l9_m0000gn/T/bitcoin_func_test_8mxxh75y\r\n2022-01-26T19:53:52.802000Z TestFramework (INFO): Stopping nodes\r\n2022-01-26T19:53:53.016000Z TestFramework (INFO): Cleaning up /var/folders/9n/wb_bl1vs509d0dy850m7l9_m0000gn/T/bitcoin_func_test_8mxxh75y on exit\r\n2022-01-26T19:53:53.016000Z TestFramework (INFO): Tests successful\r\n./test/functional/mempool_package_onemore.py  1.74s user 2.30s system 18% cpu 21.838 total\r\n```\r\n\r\n- Mac mini (**_M1_** 2020) + macOS Monterey 12.1 (21C52):\r\n```\r\n% time ./test/functional/mempool_package_onemore.py\r\n2022-01-26T19:42:07.867000Z TestFramework (INFO): Initializing test directory /var/folders/4f/xd_qxxhx35569jp258s803_w0000gn/T/bitcoin_func_test_l99ehi5l\r\n2022-01-26T19:43:14.092000Z TestFramework (INFO): Stopping nodes\r\n2022-01-26T19:43:14.476000Z TestFramework (INFO): Cleaning up /var/folders/4f/xd_qxxhx35569jp258s803_w0000gn/T/bitcoin_func_test_l99ehi5l on exit\r\n2022-01-26T19:43:14.476000Z TestFramework (INFO): Tests successful\r\n./test/functional/mempool_package_onemore.py  2.03s user 0.80s system 4% cpu 1:06.73 total\r\n```",
      "created_at" : "2022-01-26T20:03:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1022555725",
      "id" : 1022555725,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII58488vZN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022555725/reactions"
      },
      "updated_at" : "2022-01-26T20:03:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022555725",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "The numbers we've gotten were from running them through `test_runner.py` thankfully the results are replicable via single test runs\r\n\r\n- 2017 Macbook Air, _Intel_ macOS Monterey 12.0.1:\r\n\r\n```\r\n% time ./test/functional/mempool_package_onemore.py \r\n2022-01-26T22:28:58.175000Z TestFramework (INFO): Initializing test directory /var/folders/pq/dx302qc9017285xl75wyp64m0000gn/T/bitcoin_func_test__6g3bi1h\r\n2022-01-26T22:29:00.028000Z TestFramework (INFO): Stopping nodes\r\n2022-01-26T22:29:00.239000Z TestFramework (INFO): Cleaning up /var/folders/pq/dx302qc9017285xl75wyp64m0000gn/T/bitcoin_func_test__6g3bi1h on exit\r\n2022-01-26T22:29:00.239000Z TestFramework (INFO): Tests successful\r\n./test/functional/mempool_package_onemore.py  1.33s user 0.61s system 59% cpu 3.263 total\r\n```\r\n\r\n- 2021 Macbook Pro 14\", _M1 Pro_ macOS Monterey 12.1:\r\n\r\n```\r\ntime ./test/functional/mempool_package_onemore.py\r\n2022-01-26T22:33:18.019000Z TestFramework (INFO): Initializing test directory /var/folders/82/2fk9xtkn1k3b5kbhvv937p0h0000gn/T/bitcoin_func_test_5i4zs9d_\r\n2022-01-26T22:34:25.599000Z TestFramework (INFO): Stopping nodes\r\n2022-01-26T22:34:26.209000Z TestFramework (INFO): Cleaning up /var/folders/82/2fk9xtkn1k3b5kbhvv937p0h0000gn/T/bitcoin_func_test_5i4zs9d_ on exit\r\n2022-01-26T22:34:26.209000Z TestFramework (INFO): Tests successful\r\n./test/functional/mempool_package_onemore.py  1.46s user 1.24s system 3% cpu 1:08.59 total\r\n```\r\n",
      "created_at" : "2022-01-26T22:43:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1022671092",
      "id" : 1022671092,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII58489Lj0",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022671092/reactions"
      },
      "updated_at" : "2022-01-26T22:44:52Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1022671092",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/52090345?v=4",
         "events_url" : "https://api.github.com/users/Munkybooty/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Munkybooty/followers",
         "following_url" : "https://api.github.com/users/Munkybooty/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Munkybooty/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Munkybooty",
         "id" : 52090345,
         "login" : "Munkybooty",
         "node_id" : "MDQ6VXNlcjUyMDkwMzQ1",
         "organizations_url" : "https://api.github.com/users/Munkybooty/orgs",
         "received_events_url" : "https://api.github.com/users/Munkybooty/received_events",
         "repos_url" : "https://api.github.com/users/Munkybooty/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Munkybooty/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Munkybooty/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Munkybooty"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I have found that doing `./configure --without-bdb --with-sqlite` resolves the performance issues, for anyone else that may want to run functional tests on m1 @hebasto @brunoerg ",
      "created_at" : "2022-03-07T16:11:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1060861393",
      "id" : 1060861393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII584_O3XR",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060861393/reactions"
      },
      "updated_at" : "2022-03-07T16:11:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1060861393",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> Generating 100 blocks took 23 seconds on m1, and 2.4 seconds on x86.\r\n\r\nI might have hit a similar problem on Intel.\r\n\r\nI am experiencing x10 slower integration tests (on the regtest) for my project with v23 vs v22. I also mine the initial 101 blocks on each of my tests on the regtest. This can be reproduced using the binaries distributed at bitcoincore.org.\r\n\r\nI described the [issue on stack exchange](https://bitcoin.stackexchange.com/questions/113898/bitcoin-v23-is-10-times-slower-than-v22-on-macos-for-basic-regtest-tests).\r\n\r\n> I have found that doing ./configure --without-bdb --with-sqlite resolves the performance issues, for anyone else that may want to run functional tests on m1 @hebasto @brunoerg\r\n\r\nAfter reading your post, I compiled with:\r\n```\r\n./configure --enable-hardening --with-gui=no  --without-bdb --with-sqlite\r\n```\r\n, but that did not solve the performance issues in my case.\r\n\r\nI am using macos Monterey on Intel. I also tested on BigSur and it was the same. So it was not OS-version specific either.\r\n\r\nI cannot run comparisons in Linux, though, but it should be pretty easy to replicate by anyone:\r\n\r\n```\r\nrm -rf /tmp/regtest1/bitcoind\r\nmkdir -p /tmp/regtest1/bitcoind\r\n\r\nbitcoind_v22_vs_v23 \\\r\n  -datadir=/tmp/regtest1/bitcoind \\\r\n  -regtest \\\r\n  -server \\\r\n  -txindex \\\r\n  -fallbackfee=0.0002 \\\r\n  -zmqpubhashtx=tcp://127.0.0.1:30001 \\\r\n  -zmqpubhashblock=tcp://127.0.0.1:30001\r\n\r\nbitcoin-cli -regtest -datadir=/tmp/regtest1/bitcoind createwallet performance_tests\r\nGEN_ADDRESS=$(bitcoin-cli -regtest -datadir=/tmp/regtest1/bitcoind getnewaddress)\r\nbitcoin-cli -regtest -datadir=/tmp/regtest1/bitcoind generatetoaddress 101 $GEN_ADDRESS\r\n```\r\n\r\nThis takes less than 2 secs on an average Intel Mac computer (f.ex.: macbook pro mid 2015) using [this binary](https://bitcoincore.org/bin/bitcoin-core-22.0/bitcoin-22.0-osx-signed.dmg). But it takes 17 secs when compiling v23 (or using [this binary](https://bitcoincore.org/bin/bitcoin-core-23.0/bitcoin-23.0-x86_64-apple-darwin.dmg)).",
      "created_at" : "2022-05-28T10:16:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1140229076",
      "id" : 1140229076,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585D9oPU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140229076/reactions"
      },
      "updated_at" : "2022-05-28T10:46:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1140229076",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4365458?v=4",
         "events_url" : "https://api.github.com/users/landabaso/events{/privacy}",
         "followers_url" : "https://api.github.com/users/landabaso/followers",
         "following_url" : "https://api.github.com/users/landabaso/following{/other_user}",
         "gists_url" : "https://api.github.com/users/landabaso/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/landabaso",
         "id" : 4365458,
         "login" : "landabaso",
         "node_id" : "MDQ6VXNlcjQzNjU0NTg=",
         "organizations_url" : "https://api.github.com/users/landabaso/orgs",
         "received_events_url" : "https://api.github.com/users/landabaso/received_events",
         "repos_url" : "https://api.github.com/users/landabaso/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/landabaso/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/landabaso/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/landabaso"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "> I have found that doing `./configure --without-bdb --with-sqlite` resolves the performance issues, for anyone else that may want to run functional tests on m1 @hebasto @brunoerg\r\n\r\n@PastaPastaPasta I'm trying with your configuration and it seems to work when running:\r\n\r\n```\r\n$ ./test/functional/test_runner.py\r\n```\r\n\r\nI'm testing with the `--extended` option and the same configuration, there appears to be some flaky tests.  When running independently they pass.\r\n\r\n\r\n\r\n```\r\n$ ./test/functional/test_runner.py --extended\r\n\r\n...\r\n\r\nfeature_index_prune.py                                 | â Failed  | 209 s\r\np2p_eviction.py                                        | â Failed  | 0 s\r\np2p_leak_tx.py                                         | â Failed  | 0 s\r\nrpc_signmessagewithprivkey.py                          | â Failed  | 0 s\r\nwallet_signmessagewithaddress.py                       | â Failed  | 0 s\r\n\r\nALL                                                    | â Failed  | 13299 s (accumulated)\r\nRuntime: 5049 s\r\n```\r\n\r\nRunning only `feature_index_prune.py`\r\n```\r\n./test/functional/feature_index_prune.py\r\n2022-08-10T18:10:59.423000Z TestFramework (INFO): Initializing test directory /var/folders/sk/74ql9fy11fx_q0y09x6bld9r0000gn/T/bitcoin_func_test_ry9rnzgx\r\n2022-08-10T18:11:02.010000Z TestFramework (INFO): check if we can access blockfilters and coinstats when pruning is enabled but no blocks are actually pruned\r\n2022-08-10T18:11:07.239000Z TestFramework (INFO): prune some blocks\r\n2022-08-10T18:11:07.380000Z TestFramework (INFO): check if we can access the tips blockfilter and coinstats when we have pruned some blocks\r\n2022-08-10T18:11:07.507000Z TestFramework (INFO): check if we can access the blockfilter and coinstats of a pruned block\r\n2022-08-10T18:11:11.365000Z TestFramework (INFO): make sure trying to access the indices throws errors\r\n2022-08-10T18:11:15.786000Z TestFramework (INFO): prune exactly up to the indices best blocks while the indices are disabled\r\n2022-08-10T18:11:18.310000Z TestFramework (INFO): make sure that we can continue with the partially synced indices after having pruned up to the index height\r\n2022-08-10T18:11:22.160000Z TestFramework (INFO): prune further than the indices best blocks while the indices are disabled\r\n2022-08-10T18:11:32.704000Z TestFramework (INFO): make sure we get an init error when starting the nodes again with the indices\r\n2022-08-10T18:11:34.274000Z TestFramework (INFO): make sure the nodes start again with the indices and an additional -reindex arg\r\n2022-08-10T18:11:55.329000Z TestFramework (INFO): ensure that prune locks don't prevent indices from failing in a reorg scenario\r\n2022-08-10T18:11:56.519000Z TestFramework (INFO): Stopping nodes\r\n2022-08-10T18:11:57.241000Z TestFramework (INFO): Cleaning up /var/folders/sk/74ql9fy11fx_q0y09x6bld9r0000gn/T/bitcoin_func_test_ry9rnzgx on exit\r\n2022-08-10T18:11:57.241000Z TestFramework (INFO): Tests successful\r\n```",
      "created_at" : "2022-08-10T18:15:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1211083041",
      "id" : 1211083041,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585IL6kh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1211083041/reactions"
      },
      "updated_at" : "2022-08-10T18:15:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1211083041",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/749118?v=4",
         "events_url" : "https://api.github.com/users/adam2k/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adam2k/followers",
         "following_url" : "https://api.github.com/users/adam2k/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adam2k/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adam2k",
         "id" : 749118,
         "login" : "adam2k",
         "node_id" : "MDQ6VXNlcjc0OTExOA==",
         "organizations_url" : "https://api.github.com/users/adam2k/orgs",
         "received_events_url" : "https://api.github.com/users/adam2k/received_events",
         "repos_url" : "https://api.github.com/users/adam2k/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adam2k/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adam2k/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adam2k"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is it related to (or the same as) #25724?",
      "created_at" : "2022-09-23T08:04:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1255910102",
      "id" : 1255910102,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585K26rW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1255910102/reactions"
      },
      "updated_at" : "2022-09-23T08:04:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1255910102",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "@hebasto yes, this issue appears to be related/the same as https://github.com/bitcoin/bitcoin/issues/25724.  I think it's safe to close this issue when https://github.com/bitcoin/bitcoin/issues/25724 is closed and we can come back and confirm this is no longer an issue.",
      "created_at" : "2022-09-23T18:05:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1256519243",
      "id" : 1256519243,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585K5PZL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256519243/reactions"
      },
      "updated_at" : "2022-09-23T18:05:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256519243",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/749118?v=4",
         "events_url" : "https://api.github.com/users/adam2k/events{/privacy}",
         "followers_url" : "https://api.github.com/users/adam2k/followers",
         "following_url" : "https://api.github.com/users/adam2k/following{/other_user}",
         "gists_url" : "https://api.github.com/users/adam2k/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/adam2k",
         "id" : 749118,
         "login" : "adam2k",
         "node_id" : "MDQ6VXNlcjc0OTExOA==",
         "organizations_url" : "https://api.github.com/users/adam2k/orgs",
         "received_events_url" : "https://api.github.com/users/adam2k/received_events",
         "repos_url" : "https://api.github.com/users/adam2k/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/adam2k/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/adam2k/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/adam2k"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing this as a duplicate of #25724.",
      "created_at" : "2022-09-24T13:39:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1256971614",
      "id" : 1256971614,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585K691e",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256971614/reactions"
      },
      "updated_at" : "2022-09-24T13:39:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256971614",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I'm not currently convinced that this is a duplicate, however, I don't care too much if this is closed. In the testing that I and others I talked with performed, this issue was purely an arm vs x86 issue. When compiling with default compilation configuration (which does not use sqlite), there were significant performance differences in certain rpcs. However, when enabling sqlite, the arm systems were much faster than x86. ",
      "created_at" : "2022-09-24T14:10:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1256977621",
      "id" : 1256977621,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585K6_TV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256977621/reactions"
      },
      "updated_at" : "2022-09-24T14:10:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256977621",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> When compiling with default compilation configuration (which does not use sqlite),\r\n\r\nSqlite will be used automatically if it's available (which is always the case on macOS), it doesn't need to be enabled specifically.",
      "created_at" : "2022-09-24T14:13:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1256978178",
      "id" : 1256978178,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585K6_cC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256978178/reactions"
      },
      "updated_at" : "2022-09-24T14:13:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256978178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Hmm, that is news to me, but it still doesn't fully make sense to me.. \r\n\r\n(on arm ~linux~ Mac)\r\nwithout `--enable-sqlite` lead to slow performance\r\nwith `--enable-sqlite` lead to fast performance\r\n\r\ncan you help me understand that? when based on what you said there should be no difference between the two right?",
      "created_at" : "2022-09-24T14:16:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1256978823",
      "id" : 1256978823,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585K6_mH",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256978823/reactions"
      },
      "updated_at" : "2022-09-27T15:01:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256978823",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> can you help me understand that? \r\n\r\nNot without more information. What branch are you building. Where are the config.logs etc.\r\n\r\n> there should be no difference between the two right?\r\n\r\nCorrect. On a system that has a sqlite lib available, `./configure` & `./configure --enable-sqlite`, you will get the same result.",
      "created_at" : "2022-09-24T14:23:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1256981117",
      "id" : 1256981117,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585K7AJ9",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256981117/reactions"
      },
      "updated_at" : "2022-09-24T14:23:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1256981117",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Okay, so I reproduced this on latest master\r\n`./configure` leads to slow behavior (mempool_packages.py took 1min) config.log https://gist.github.com/PastaPastaPasta/048279264b94a542e9b29bf6f9fea436\r\n`./configure --enable-sqlite --without-bdb` leads to fast behavior (7 seconds ^) config.log https://gist.github.com/PastaPastaPasta/dcabff2fbbc2ccfbc62c46aeea836384\r\n\r\nDoes this still sound like the other issue to you? I'm not sure myself",
      "created_at" : "2022-09-27T15:13:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1259655490",
      "id" : 1259655490,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585LFNFC",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259655490/reactions"
      },
      "updated_at" : "2022-09-27T15:13:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259655490",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@PastaPastaPasta \r\n\r\n> Okay, so I reproduced this on latest master `./configure` leads to slow behavior (mempool_packages.py took 1min) config.log https://gist.github.com/PastaPastaPasta/048279264b94a542e9b29bf6f9fea436 `./configure --enable-sqlite --without-bdb` leads to fast behavior (7 seconds ^) config.log https://gist.github.com/PastaPastaPasta/dcabff2fbbc2ccfbc62c46aeea836384\r\n> \r\n> Does this still sound like the other issue to you? I'm not sure myself\r\n\r\nWhich commit or tag you compiled?",
      "created_at" : "2022-09-27T16:08:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1259725298",
      "id" : 1259725298,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585LFeHy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259725298/reactions"
      },
      "updated_at" : "2022-09-27T16:08:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259725298",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Does this still sound like the other issue to you? I'm not sure myself\r\n\r\n`--enable-sqlite` makes no difference here. Only `--without-bdb` changes anything in the `config.log`.\r\n\r\nThe test framework defaults to running with bdb wallets, if support for both wallet types is compiled, and no option (`--descriptors` or `--legacy-wallet`) is given when running the test.\r\n\r\nSo the performance difference you're seeing when configuring with `--without-bdb` is the test framework defaulting to using descriptor wallets, vs using bdb.\r\n\r\nYou should see the same difference if you (after building with ./configure and having sqlite and bdb support compiled) run `./test/functional/mempool_packages.py --descriptors` and `./test/functional/mempool_packages.py --legacy-wallet`.",
      "created_at" : "2022-09-27T17:08:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1259804261",
      "id" : 1259804261,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585LFxZl",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259804261/reactions"
      },
      "updated_at" : "2022-09-27T17:08:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1259804261",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> @PastaPastaPasta\r\n> \r\n> > Okay, so I reproduced this on latest master `./configure` leads to slow behavior (mempool_packages.py took 1min) config.log https://gist.github.com/PastaPastaPasta/048279264b94a542e9b29bf6f9fea436 `./configure --enable-sqlite --without-bdb` leads to fast behavior (7 seconds ^) config.log https://gist.github.com/PastaPastaPasta/dcabff2fbbc2ccfbc62c46aeea836384\r\n> > Does this still sound like the other issue to you? I'm not sure myself\r\n> \r\n> Which commit or tag you compiled?\r\n\r\n9fcdb9f3a044330d3d7515fa35709102c98534d2",
      "created_at" : "2022-09-29T18:45:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1262677981",
      "id" : 1262677981,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585LQu_d",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1262677981/reactions"
      },
      "updated_at" : "2022-09-29T18:45:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1262677981",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6443210?v=4",
         "events_url" : "https://api.github.com/users/PastaPastaPasta/events{/privacy}",
         "followers_url" : "https://api.github.com/users/PastaPastaPasta/followers",
         "following_url" : "https://api.github.com/users/PastaPastaPasta/following{/other_user}",
         "gists_url" : "https://api.github.com/users/PastaPastaPasta/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/PastaPastaPasta",
         "id" : 6443210,
         "login" : "PastaPastaPasta",
         "node_id" : "MDQ6VXNlcjY0NDMyMTA=",
         "organizations_url" : "https://api.github.com/users/PastaPastaPasta/orgs",
         "received_events_url" : "https://api.github.com/users/PastaPastaPasta/received_events",
         "repos_url" : "https://api.github.com/users/PastaPastaPasta/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/PastaPastaPasta/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/PastaPastaPasta/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/PastaPastaPasta"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@PastaPastaPasta \r\n\r\n> > Which commit or tag you compiled?\r\n> \r\n> [9fcdb9f](https://github.com/bitcoin/bitcoin/commit/9fcdb9f3a044330d3d7515fa35709102c98534d2)\r\n\r\nTested on macOS 12.6 (21G115, M1):\r\n```\r\n% git checkout 9fcdb9f3a044330d3d7515fa35709102c98534d2\r\n% ./autogen.sh\r\n% ./configure --enable-sqlite --without-bdb\r\n% make clean\r\n% make\r\n% time ./test/functional/mempool_packages.py                                                                          \r\n2022-10-04T09:06:33.875000Z TestFramework (INFO): Initializing test directory /var/folders/4f/xd_qxxhx35569jp258s803_w0000gn/T/bitcoin_func_test_4ut0063u\r\n2022-10-04T09:06:38.756000Z TestFramework (INFO): Stopping nodes\r\n2022-10-04T09:06:39.035000Z TestFramework (INFO): Cleaning up /var/folders/4f/xd_qxxhx35569jp258s803_w0000gn/T/bitcoin_func_test_4ut0063u on exit\r\n2022-10-04T09:06:39.035000Z TestFramework (INFO): Tests successful\r\n./test/functional/mempool_packages.py  0.97s user 0.31s system 24% cpu 5.319 total\r\n```\r\n```\r\n% ./configure --enable-sqlite --with-bdb\r\n% make clean\r\n% make\r\n% time ./test/functional/mempool_packages.py                                                                       \r\n2022-10-04T09:08:26.434000Z TestFramework (INFO): Initializing test directory /var/folders/4f/xd_qxxhx35569jp258s803_w0000gn/T/bitcoin_func_test_68lfhida\r\n2022-10-04T09:09:22.387000Z TestFramework (INFO): Stopping nodes\r\n2022-10-04T09:09:23.098000Z TestFramework (INFO): Cleaning up /var/folders/4f/xd_qxxhx35569jp258s803_w0000gn/T/bitcoin_func_test_68lfhida on exit\r\n2022-10-04T09:09:23.098000Z TestFramework (INFO): Tests successful\r\n./test/functional/mempool_packages.py  2.91s user 1.00s system 6% cpu 56.819 total\r\n% time ./test/functional/mempool_packages.py --descriptors\r\n2022-10-04T09:09:45.151000Z TestFramework (INFO): Initializing test directory /var/folders/4f/xd_qxxhx35569jp258s803_w0000gn/T/bitcoin_func_test_myxq01wj\r\n2022-10-04T09:09:49.752000Z TestFramework (INFO): Stopping nodes\r\n2022-10-04T09:09:50.140000Z TestFramework (INFO): Cleaning up /var/folders/4f/xd_qxxhx35569jp258s803_w0000gn/T/bitcoin_func_test_myxq01wj on exit\r\n2022-10-04T09:09:50.140000Z TestFramework (INFO): Tests successful\r\n./test/functional/mempool_packages.py --descriptors  0.98s user 0.28s system 24% cpu 5.113 total\r\n% time ./test/functional/mempool_packages.py --legacy-wallet\r\n2022-10-04T09:10:33.537000Z TestFramework (INFO): Initializing test directory /var/folders/4f/xd_qxxhx35569jp258s803_w0000gn/T/bitcoin_func_test_89kgc1sw\r\n2022-10-04T09:11:28.517000Z TestFramework (INFO): Stopping nodes\r\n2022-10-04T09:11:29.279000Z TestFramework (INFO): Cleaning up /var/folders/4f/xd_qxxhx35569jp258s803_w0000gn/T/bitcoin_func_test_89kgc1sw on exit\r\n2022-10-04T09:11:29.279000Z TestFramework (INFO): Tests successful\r\n./test/functional/mempool_packages.py --legacy-wallet  2.81s user 0.89s system 6% cpu 55.865 total\r\n```\r\n\r\nConfirming @fanquake's [comment](https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1259804261).",
      "created_at" : "2022-10-04T09:12:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/24120#issuecomment-1266642108",
      "id" : 1266642108,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24120",
      "node_id" : "IC_kwDOABII585Lf2y8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1266642108/reactions"
      },
      "updated_at" : "2022-10-04T09:12:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1266642108",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   }
]
