[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r797623074"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/797623074"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Is it feasible\r\n```suggestion\r\n    uint64_t GetMaxOutboundTarget() const EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\r\n```\r\nhere and after?\r\n\r\nFor context and example see #24235?",
      "commit_id" : "6cb0fab33010f7b9f3732cfc365dd2fad44da713",
      "created_at" : "2022-02-02T13:48:01Z",
      "diff_hunk" : "@@ -910,24 +911,22 @@ class CConnman\n     //! that peer during `net_processing.cpp:PushNodeVersion()`.\n     ServiceFlags GetLocalServices() const;\n \n-    uint64_t GetMaxOutboundTarget() const;\n+    uint64_t GetMaxOutboundTarget() const LOCKS_EXCLUDED(m_total_bytes_sent_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r797623074",
      "id" : 797623074,
      "line" : 914,
      "node_id" : "PRRC_kwDOABII584visMi",
      "original_commit_id" : "6cb0fab33010f7b9f3732cfc365dd2fad44da713",
      "original_line" : 914,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 15,
      "pull_request_review_id" : 870563402,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/797623074/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-02T13:48:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/797623074",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r797645684"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/797645684"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "I think yes.",
      "commit_id" : "6cb0fab33010f7b9f3732cfc365dd2fad44da713",
      "created_at" : "2022-02-02T14:12:45Z",
      "diff_hunk" : "@@ -910,24 +911,22 @@ class CConnman\n     //! that peer during `net_processing.cpp:PushNodeVersion()`.\n     ServiceFlags GetLocalServices() const;\n \n-    uint64_t GetMaxOutboundTarget() const;\n+    uint64_t GetMaxOutboundTarget() const LOCKS_EXCLUDED(m_total_bytes_sent_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r797645684",
      "id" : 797645684,
      "in_reply_to_id" : 797623074,
      "line" : 914,
      "node_id" : "PRRC_kwDOABII584vixt0",
      "original_commit_id" : "6cb0fab33010f7b9f3732cfc365dd2fad44da713",
      "original_line" : 914,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 15,
      "pull_request_review_id" : 870596565,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/797645684/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-02T14:12:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/797645684",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r803776017"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/803776017"
         }
      },
      "author_association" : "MEMBER",
      "body" : "And in other places?",
      "commit_id" : "378facf66bd6c96d90b6ebd30580b677d843a119",
      "created_at" : "2022-02-10T15:09:43Z",
      "diff_hunk" : "@@ -910,24 +911,22 @@ class CConnman\n     //! that peer during `net_processing.cpp:PushNodeVersion()`.\n     ServiceFlags GetLocalServices() const;\n \n-    uint64_t GetMaxOutboundTarget() const;\n+    uint64_t GetMaxOutboundTarget() const LOCKS_EXCLUDED(m_total_bytes_sent_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r803776017",
      "id" : 803776017,
      "in_reply_to_id" : 797623074,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584v6KYR",
      "original_commit_id" : "6cb0fab33010f7b9f3732cfc365dd2fad44da713",
      "original_line" : 914,
      "original_position" : 15,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 878983521,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/803776017/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-10T15:09:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/803776017",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Addressed @hebasto suggestion.\r\n\r\nAll functions changed in the second commit use  `EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex)` instead of `LOCKS_EXCLUDED(m_total_bytes_sent_mutex)`.\r\n\r\nThe only exception is `void RecordBytesSent(uint64_t bytes)` which displayed the error below when using `EXCLUSIVE_LOCKS_REQUIRED`.\r\n\r\nNot sure about the reason for this error.\r\n\r\n```c++\r\nnet.cpp:1655:29: error: calling function 'RecordBytesSent' requires negative capability '!m_total_bytes_sent_mutex' [-Werror,-Wthread-safety-analysis]\r\n            if (bytes_sent) RecordBytesSent(bytes_sent);\r\n                            ^\r\nnet.cpp:3077:21: error: calling function 'RecordBytesSent' requires negative capability '!m_total_bytes_sent_mutex' [-Werror,-Wthread-safety-analysis]\r\n    if (nBytesSent) RecordBytesSent(nBytesSent);\r\n\r\n```",
      "created_at" : "2022-02-10T18:57:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#issuecomment-1035342167",
      "id" : 1035342167,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24157",
      "node_id" : "IC_kwDOABII5849thFX",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1035342167/reactions"
      },
      "updated_at" : "2022-02-10T18:57:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1035342167",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@w0xlt \r\n> Not sure about the reason for this error.\r\n\r\nMaybe:\r\n```diff\r\n--- a/src/net.h\r\n+++ b/src/net.h\r\n@@ -829,7 +829,8 @@ public:\r\n \r\n     bool ForNode(NodeId id, std::function<bool(CNode* pnode)> func);\r\n \r\n-    void PushMessage(CNode* pnode, CSerializedNetMsg&& msg);\r\n+    void PushMessage(CNode* pnode, CSerializedNetMsg&& msg)\r\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\r\n \r\n     using NodeFn = std::function<void(CNode*)>;\r\n     void ForEachNode(const NodeFn& func)\r\n@@ -1024,7 +1025,8 @@ private:\r\n     /**\r\n      * Check connected and listening sockets for IO readiness and process them accordingly.\r\n      */\r\n-    void SocketHandler();\r\n+    void SocketHandler()\r\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\r\n \r\n     /**\r\n      * Do the read/write for connected sockets that are ready for IO.\r\n@@ -1037,7 +1039,8 @@ private:\r\n     void SocketHandlerConnected(const std::vector<CNode*>& nodes,\r\n                                 const std::set<SOCKET>& recv_set,\r\n                                 const std::set<SOCKET>& send_set,\r\n-                                const std::set<SOCKET>& error_set);\r\n+                                const std::set<SOCKET>& error_set)\r\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\r\n \r\n     /**\r\n      * Accept incoming connections, one from each read-ready listening socket.\r\n@@ -1045,7 +1048,8 @@ private:\r\n      */\r\n     void SocketHandlerListening(const std::set<SOCKET>& recv_set);\r\n \r\n-    void ThreadSocketHandler();\r\n+    void ThreadSocketHandler()\r\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\r\n     void ThreadDNSAddressSeed();\r\n \r\n     uint64_t CalculateKeyedNetGroup(const CAddress& ad) const;\r\n@@ -1074,7 +1078,8 @@ private:\r\n \r\n     // Network stats\r\n     void RecordBytesRecv(uint64_t bytes);\r\n-    void RecordBytesSent(uint64_t bytes) LOCKS_EXCLUDED(m_total_bytes_sent_mutex);\r\n+    void RecordBytesSent(uint64_t bytes)\r\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\r\n \r\n     /**\r\n      * Return vector of current BLOCK_RELAY peers.\r\n```\r\n?\r\n",
      "created_at" : "2022-02-10T19:51:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#issuecomment-1035421771",
      "id" : 1035421771,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24157",
      "node_id" : "IC_kwDOABII5849t0hL",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1035421771/reactions"
      },
      "updated_at" : "2022-02-10T19:51:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1035421771",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@hebasto Thanks. This worked.\r\n\r\nVery interesting. So, using ` EXCLUSIVE_LOCKS_REQUIRED(!mutex)` requires that all functions that call the annotated function also have the same annotation.  It is a cascading effect.",
      "created_at" : "2022-02-10T22:45:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#issuecomment-1035609084",
      "id" : 1035609084,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24157",
      "node_id" : "IC_kwDOABII5849uiP8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1035609084/reactions"
      },
      "updated_at" : "2022-02-10T22:45:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1035609084",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @hebasto Thanks. This worked.\r\n> \r\n> Very interesting. So, using ` EXCLUSIVE_LOCKS_REQUIRED(!mutex)` requires that all functions that call the annotated function also have the same annotation. It is a cascading effect.\r\n\r\nThat is why [negative capabilities](https://clang.llvm.org/docs/ThreadSafetyAnalysis.html#negative) provide a stronger safety guarantee.\r\n\r\n---\r\n\r\nI don't see any reason of splitting changes between second and third commits. Maybe squash them?",
      "created_at" : "2022-02-11T12:30:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#issuecomment-1036164957",
      "id" : 1036164957,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24157",
      "node_id" : "IC_kwDOABII5849wp9d",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036164957/reactions"
      },
      "updated_at" : "2022-02-11T12:30:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036164957",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : ">Maybe squash them?\r\n\r\nSure. Done.",
      "created_at" : "2022-02-11T19:37:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#issuecomment-1036551097",
      "id" : 1036551097,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24157",
      "node_id" : "IC_kwDOABII5849yIO5",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036551097/reactions"
      },
      "updated_at" : "2022-02-11T19:37:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1036551097",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r805198879"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805198879"
         }
      },
      "author_association" : "MEMBER",
      "body" : "A spare semicolon? :smile: ",
      "commit_id" : "0b6c5da9304af71dedb262bca9a0493c8616985b",
      "created_at" : "2022-02-12T20:02:45Z",
      "diff_hunk" : "@@ -1034,15 +1037,17 @@ class CConnman\n     void SocketHandlerConnected(const std::vector<CNode*>& nodes,\n                                 const std::set<SOCKET>& recv_set,\n                                 const std::set<SOCKET>& send_set,\n-                                const std::set<SOCKET>& error_set);\n+                                const std::set<SOCKET>& error_set)\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n+;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r805198879",
      "id" : 805198879,
      "line" : 1042,
      "node_id" : "PRRC_kwDOABII584v_lwf",
      "original_commit_id" : "0b6c5da9304af71dedb262bca9a0493c8616985b",
      "original_line" : 1042,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 76,
      "pull_request_review_id" : 880886712,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805198879/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-12T20:05:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805198879",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#24931](https://github.com/bitcoin/bitcoin/pull/24931) (Strengthen thread safety assertions by ajtowns)\n* [#24356](https://github.com/bitcoin/bitcoin/pull/24356) (refactor: replace CConnman::SocketEvents() with mockable Sock::WaitMany() by vasild)\n* [#21878](https://github.com/bitcoin/bitcoin/pull/21878) (Make all networking code mockable by vasild)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2022-02-13T14:19:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#issuecomment-1038150689",
      "id" : 1038150689,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24157",
      "node_id" : "IC_kwDOABII58494Owh",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1038150689/reactions"
      },
      "updated_at" : "2022-04-20T23:06:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1038150689",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r805406910"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805406910"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Oops. Fixed.",
      "commit_id" : "f04ffdd2a79a77ea70d892be972de7821c1b876c",
      "created_at" : "2022-02-13T19:53:24Z",
      "diff_hunk" : "@@ -1034,15 +1037,17 @@ class CConnman\n     void SocketHandlerConnected(const std::vector<CNode*>& nodes,\n                                 const std::set<SOCKET>& recv_set,\n                                 const std::set<SOCKET>& send_set,\n-                                const std::set<SOCKET>& error_set);\n+                                const std::set<SOCKET>& error_set)\n+        EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\n+;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r805406910",
      "id" : 805406910,
      "in_reply_to_id" : 805198879,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wAYi-",
      "original_commit_id" : "0b6c5da9304af71dedb262bca9a0493c8616985b",
      "original_line" : 1042,
      "original_position" : 76,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 881036736,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805406910/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-13T19:53:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805406910",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r805841193"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805841193"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: I think that the unwritten convention is to put the underscore at the end, like e.g. `AddrManImpl::Good_()`. Or maybe I am mistaken, is there any other place in the code that uses prefix `_`?",
      "commit_id" : "f04ffdd2a79a77ea70d892be972de7821c1b876c",
      "created_at" : "2022-02-14T13:29:28Z",
      "diff_hunk" : "@@ -2927,7 +2929,15 @@ std::chrono::seconds CConnman::GetMaxOutboundTimeframe() const\n \n std::chrono::seconds CConnman::GetMaxOutboundTimeLeftInCycle() const\n {\n-    LOCK(cs_totalBytesSent);\n+    AssertLockNotHeld(m_total_bytes_sent_mutex);\n+    LOCK(m_total_bytes_sent_mutex);\n+    return _GetMaxOutboundTimeLeftInCycle();\n+}\n+\n+std::chrono::seconds CConnman::_GetMaxOutboundTimeLeftInCycle() const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r805841193",
      "id" : 805841193,
      "line" : 2937,
      "node_id" : "PRRC_kwDOABII584wCCkp",
      "original_commit_id" : "f04ffdd2a79a77ea70d892be972de7821c1b876c",
      "original_line" : 2937,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : 30,
      "pull_request_review_id" : 881627733,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805841193/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-14T13:47:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805841193",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r805844401"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805844401"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "This is not the beginning of a function. `AssertLockNotHeld()` does not belong here - it should be put in the beginning of functions.",
      "commit_id" : "f04ffdd2a79a77ea70d892be972de7821c1b876c",
      "created_at" : "2022-02-14T13:33:12Z",
      "diff_hunk" : "@@ -796,7 +796,8 @@ class CConnman\n         nReceiveFloodSize = connOptions.nReceiveFloodSize;\n         m_peer_connect_timeout = std::chrono::seconds{connOptions.m_peer_connect_timeout};\n         {\n-            LOCK(cs_totalBytesSent);\n+            AssertLockNotHeld(m_total_bytes_sent_mutex);\n+            LOCK(m_total_bytes_sent_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r805844401",
      "id" : 805844401,
      "line" : 800,
      "node_id" : "PRRC_kwDOABII584wCDWx",
      "original_commit_id" : "f04ffdd2a79a77ea70d892be972de7821c1b876c",
      "original_line" : 800,
      "original_position" : 6,
      "original_start_line" : 797,
      "path" : "src/net.h",
      "position" : 6,
      "pull_request_review_id" : 881627733,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805844401/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 797,
      "start_side" : "RIGHT",
      "updated_at" : "2022-02-14T13:47:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805844401",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r805849304"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805849304"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why not add `AssertLockNotHeld(m_total_bytes_sent_mutex)` in the beginning of `PushMessage()`, `SocketHandler()`, `SocketHandlerConnected()` and `ThreadSocketHandler()`?",
      "commit_id" : "f04ffdd2a79a77ea70d892be972de7821c1b876c",
      "created_at" : "2022-02-14T13:38:38Z",
      "diff_hunk" : "@@ -828,7 +829,7 @@ class CConnman\n \n     bool ForNode(NodeId id, std::function<bool(CNode* pnode)> func);\n \n-    void PushMessage(CNode* pnode, CSerializedNetMsg&& msg);\n+    void PushMessage(CNode* pnode, CSerializedNetMsg&& msg) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r805849304",
      "id" : 805849304,
      "line" : 832,
      "node_id" : "PRRC_kwDOABII584wCEjY",
      "original_commit_id" : "f04ffdd2a79a77ea70d892be972de7821c1b876c",
      "original_line" : 832,
      "original_position" : 15,
      "original_start_line" : 831,
      "path" : "src/net.h",
      "position" : 15,
      "pull_request_review_id" : 881627733,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805849304/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 831,
      "start_side" : "LEFT",
      "updated_at" : "2022-02-14T13:47:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/805849304",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r806160110"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806160110"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Changed the underscore to the end. I think only in `AddrManImpl` this is used.",
      "commit_id" : "eef2c7b8c2d3c35da027429bf89ebb792e55f739",
      "created_at" : "2022-02-14T19:13:14Z",
      "diff_hunk" : "@@ -2927,7 +2929,15 @@ std::chrono::seconds CConnman::GetMaxOutboundTimeframe() const\n \n std::chrono::seconds CConnman::GetMaxOutboundTimeLeftInCycle() const\n {\n-    LOCK(cs_totalBytesSent);\n+    AssertLockNotHeld(m_total_bytes_sent_mutex);\n+    LOCK(m_total_bytes_sent_mutex);\n+    return _GetMaxOutboundTimeLeftInCycle();\n+}\n+\n+std::chrono::seconds CConnman::_GetMaxOutboundTimeLeftInCycle() const",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r806160110",
      "id" : 806160110,
      "in_reply_to_id" : 805841193,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wDQbu",
      "original_commit_id" : "f04ffdd2a79a77ea70d892be972de7821c1b876c",
      "original_line" : 2937,
      "original_position" : 30,
      "original_start_line" : null,
      "path" : "src/net.cpp",
      "position" : null,
      "pull_request_review_id" : 882077979,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806160110/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-02-14T19:13:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806160110",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r806160259"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806160259"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Fixed. Thanks.",
      "commit_id" : "eef2c7b8c2d3c35da027429bf89ebb792e55f739",
      "created_at" : "2022-02-14T19:13:27Z",
      "diff_hunk" : "@@ -796,7 +796,8 @@ class CConnman\n         nReceiveFloodSize = connOptions.nReceiveFloodSize;\n         m_peer_connect_timeout = std::chrono::seconds{connOptions.m_peer_connect_timeout};\n         {\n-            LOCK(cs_totalBytesSent);\n+            AssertLockNotHeld(m_total_bytes_sent_mutex);\n+            LOCK(m_total_bytes_sent_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r806160259",
      "id" : 806160259,
      "in_reply_to_id" : 805844401,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584wDQeD",
      "original_commit_id" : "f04ffdd2a79a77ea70d892be972de7821c1b876c",
      "original_line" : 801,
      "original_position" : 6,
      "original_start_line" : 797,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 882078187,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806160259/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2022-02-14T19:13:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806160259",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r806160459"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806160459"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good catch. Done. Thanks.",
      "commit_id" : "eef2c7b8c2d3c35da027429bf89ebb792e55f739",
      "created_at" : "2022-02-14T19:13:44Z",
      "diff_hunk" : "@@ -828,7 +829,7 @@ class CConnman\n \n     bool ForNode(NodeId id, std::function<bool(CNode* pnode)> func);\n \n-    void PushMessage(CNode* pnode, CSerializedNetMsg&& msg);\n+    void PushMessage(CNode* pnode, CSerializedNetMsg&& msg) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r806160459",
      "id" : 806160459,
      "in_reply_to_id" : 805849304,
      "line" : 833,
      "node_id" : "PRRC_kwDOABII584wDQhL",
      "original_commit_id" : "f04ffdd2a79a77ea70d892be972de7821c1b876c",
      "original_line" : 833,
      "original_position" : 15,
      "original_start_line" : 831,
      "path" : "src/net.h",
      "position" : 23,
      "pull_request_review_id" : 882078469,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806160459/reactions"
      },
      "side" : "RIGHT",
      "start_line" : 831,
      "start_side" : "LEFT",
      "updated_at" : "2022-02-14T19:13:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/806160459",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "d370938 addresses @vasild suggestions.",
      "created_at" : "2022-02-14T19:15:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#issuecomment-1039457555",
      "id" : 1039457555,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24157",
      "node_id" : "IC_kwDOABII58499N0T",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1039457555/reactions"
      },
      "updated_at" : "2022-02-14T19:15:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1039457555",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Is any further action needed in this PR?",
      "created_at" : "2022-04-12T17:59:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#issuecomment-1097027551",
      "id" : 1097027551,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24157",
      "node_id" : "IC_kwDOABII585BY0_f",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1097027551/reactions"
      },
      "updated_at" : "2022-04-12T17:59:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1097027551",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r849698742"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849698742"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Missing `EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex)`",
      "commit_id" : "eef2c7b8c2d3c35da027429bf89ebb792e55f739",
      "created_at" : "2022-04-13T16:52:06Z",
      "diff_hunk" : "@@ -781,6 +781,8 @@ class CConnman\n     };\n \n     void Init(const Options& connOptions) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r849698742",
      "id" : 849698742,
      "line" : 783,
      "node_id" : "PRRC_kwDOABII584ypV-2",
      "original_commit_id" : "eef2c7b8c2d3c35da027429bf89ebb792e55f739",
      "original_line" : 783,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 3,
      "pull_request_review_id" : 941279808,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849698742/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-13T16:57:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849698742",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r849775212"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849775212"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Agree. I've verified this PR rebased on top of the current master (f60a63cc5f16b738d9d2ada3f10b27cf999df323):\r\n```\r\n$ ./configure CC=clang CXX=clang++ CXXFLAGS='-Wthread-safety -Wthread-safety-negative'\r\n$ make clean\r\n$ make 2>&1 | grep m_total_bytes_sent_mutex\r\n```\r\nends with warnings\r\n```\r\n./net.h:781:13: warning: acquiring mutex 'm_total_bytes_sent_mutex' requires negative capability '!m_total_bytes_sent_mutex' [-Wthread-safety-negative]\r\n            LOCK(m_total_bytes_sent_mutex);\r\n```\r\n\r\nTo silent all of them, the following patch works:\r\n```diff\r\n--- a/src/net.h\r\n+++ b/src/net.h\r\n@@ -760,7 +760,8 @@ public:\r\n         bool m_i2p_accept_incoming;\r\n     };\r\n \r\n-    void Init(const Options& connOptions) {\r\n+    void Init(const Options& connOptions) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex)\r\n+    {\r\n         AssertLockNotHeld(m_total_bytes_sent_mutex);\r\n \r\n         nLocalServices = connOptions.nLocalServices;\r\n@@ -791,7 +792,7 @@ public:\r\n \r\n     CConnman(uint64_t seed0, uint64_t seed1, AddrMan& addrman, bool network_active = true);\r\n     ~CConnman();\r\n-    bool Start(CScheduler& scheduler, const Options& options);\r\n+    bool Start(CScheduler& scheduler, const Options& options) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);\r\n \r\n     void StopThreads();\r\n     void StopNodes();\r\n```",
      "commit_id" : "eef2c7b8c2d3c35da027429bf89ebb792e55f739",
      "created_at" : "2022-04-13T18:25:27Z",
      "diff_hunk" : "@@ -781,6 +781,8 @@ class CConnman\n     };\n \n     void Init(const Options& connOptions) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r849775212",
      "id" : 849775212,
      "in_reply_to_id" : 849698742,
      "line" : 783,
      "node_id" : "PRRC_kwDOABII584ypops",
      "original_commit_id" : "eef2c7b8c2d3c35da027429bf89ebb792e55f739",
      "original_line" : 783,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 3,
      "pull_request_review_id" : 941385093,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849775212/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-13T18:25:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/849775212",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r851222308"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851222308"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Reproduced the issue and confirm that this patch works (nice catch!)",
      "commit_id" : "eef2c7b8c2d3c35da027429bf89ebb792e55f739",
      "created_at" : "2022-04-15T11:29:40Z",
      "diff_hunk" : "@@ -781,6 +781,8 @@ class CConnman\n     };\n \n     void Init(const Options& connOptions) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r851222308",
      "id" : 851222308,
      "in_reply_to_id" : 849698742,
      "line" : 783,
      "node_id" : "PRRC_kwDOABII584yvJ8k",
      "original_commit_id" : "eef2c7b8c2d3c35da027429bf89ebb792e55f739",
      "original_line" : 783,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 3,
      "pull_request_review_id" : 943355592,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 1,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 1,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 2,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851222308/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-15T11:34:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/851222308",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK modulo the missing annotation\r\n\r\nVerified the methods updated here have both an annotation in the declaration and a corresponding assertion in the definition:\r\n```\r\nGetMaxOutboundTarget\r\nGetMaxOutboundTimeLeftInCycle\r\nGetMaxOutboundTimeLeftInCycle_\r\nGetOutboundTargetBytesLeft\r\nGetTotalBytesSent\r\nOutboundTargetReached\r\nPushMessage\r\nRecordBytesSent\r\nSocketHandler\r\nSocketHandlerConnected\r\nThreadSocketHandler\r\n```",
      "created_at" : "2022-04-15T11:47:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#issuecomment-1100059366",
      "id" : 1100059366,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24157",
      "node_id" : "IC_kwDOABII585BkZLm",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100059366/reactions"
      },
      "updated_at" : "2022-04-15T11:47:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1100059366",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r852236517"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852236517"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done. Thanks for the reviews and suggestions.",
      "commit_id" : "eff791863da5dd1fcda7bddc7d729a63d772659d",
      "created_at" : "2022-04-18T16:25:05Z",
      "diff_hunk" : "@@ -781,6 +781,8 @@ class CConnman\n     };\n \n     void Init(const Options& connOptions) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r852236517",
      "id" : 852236517,
      "in_reply_to_id" : 849698742,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584yzBjl",
      "original_commit_id" : "eef2c7b8c2d3c35da027429bf89ebb792e55f739",
      "original_line" : 783,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 944574471,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852236517/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T16:25:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852236517",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r852269547"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852269547"
         }
      },
      "author_association" : "MEMBER",
      "body" : "e59472f8af0a1962fa5c331e41fa22a4f8602db8 missing assertion in the corresponding definition in `src/net.cpp`\r\n```diff\r\n bool CConnman::Start(CScheduler& scheduler, const Options& connOptions)\r\n {\r\n+    AssertLockNotHeld(m_total_bytes_sent_mutex);\r\n     Init(connOptions);\r\n```\r\n",
      "commit_id" : "eff791863da5dd1fcda7bddc7d729a63d772659d",
      "created_at" : "2022-04-18T17:16:36Z",
      "diff_hunk" : "@@ -789,7 +792,7 @@ class CConnman\n \n     CConnman(uint64_t seed0, uint64_t seed1, AddrMan& addrman, bool network_active = true);\n     ~CConnman();\n-    bool Start(CScheduler& scheduler, const Options& options);\n+    bool Start(CScheduler& scheduler, const Options& options) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r852269547",
      "id" : 852269547,
      "line" : 795,
      "node_id" : "PRRC_kwDOABII584yzJnr",
      "original_commit_id" : "eff791863da5dd1fcda7bddc7d729a63d772659d",
      "original_line" : 795,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 26,
      "pull_request_review_id" : 944621406,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852269547/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-18T18:06:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/852269547",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r853929222"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853929222"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "#24931 may be of interest",
      "commit_id" : "eff791863da5dd1fcda7bddc7d729a63d772659d",
      "created_at" : "2022-04-20T09:31:31Z",
      "diff_hunk" : "@@ -781,6 +781,8 @@ class CConnman\n     };\n \n     void Init(const Options& connOptions) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r853929222",
      "id" : 853929222,
      "in_reply_to_id" : 849698742,
      "line" : null,
      "node_id" : "PRRC_kwDOABII584y5e0G",
      "original_commit_id" : "eef2c7b8c2d3c35da027429bf89ebb792e55f739",
      "original_line" : 783,
      "original_position" : 3,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : null,
      "pull_request_review_id" : 946867796,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853929222/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-20T09:31:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/853929222",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/127186?v=4",
         "events_url" : "https://api.github.com/users/ajtowns/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ajtowns/followers",
         "following_url" : "https://api.github.com/users/ajtowns/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ajtowns/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ajtowns",
         "id" : 127186,
         "login" : "ajtowns",
         "node_id" : "MDQ6VXNlcjEyNzE4Ng==",
         "organizations_url" : "https://api.github.com/users/ajtowns/orgs",
         "received_events_url" : "https://api.github.com/users/ajtowns/received_events",
         "repos_url" : "https://api.github.com/users/ajtowns/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ajtowns/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ajtowns/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ajtowns"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r855938635"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855938635"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Done. Thanks.",
      "commit_id" : "709af67add93f6674fb80e3ae8e3f175653a62f0",
      "created_at" : "2022-04-22T08:44:23Z",
      "diff_hunk" : "@@ -789,7 +792,7 @@ class CConnman\n \n     CConnman(uint64_t seed0, uint64_t seed1, AddrMan& addrman, bool network_active = true);\n     ~CConnman();\n-    bool Start(CScheduler& scheduler, const Options& options);\n+    bool Start(CScheduler& scheduler, const Options& options) EXCLUSIVE_LOCKS_REQUIRED(!m_total_bytes_sent_mutex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#discussion_r855938635",
      "id" : 855938635,
      "in_reply_to_id" : 852269547,
      "line" : 795,
      "node_id" : "PRRC_kwDOABII584zBJZL",
      "original_commit_id" : "eff791863da5dd1fcda7bddc7d729a63d772659d",
      "original_line" : 795,
      "original_position" : 26,
      "original_start_line" : null,
      "path" : "src/net.h",
      "position" : 26,
      "pull_request_review_id" : 949677021,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/24157",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855938635/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-04-22T08:44:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/855938635",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Added the suggestion https://github.com/bitcoin/bitcoin/pull/24157#discussion_r852269547",
      "created_at" : "2022-04-22T08:46:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#issuecomment-1106201404",
      "id" : 1106201404,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24157",
      "node_id" : "IC_kwDOABII585B70s8",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1106201404/reactions"
      },
      "updated_at" : "2022-04-22T08:46:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1106201404",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/94266259?v=4",
         "events_url" : "https://api.github.com/users/w0xlt/events{/privacy}",
         "followers_url" : "https://api.github.com/users/w0xlt/followers",
         "following_url" : "https://api.github.com/users/w0xlt/following{/other_user}",
         "gists_url" : "https://api.github.com/users/w0xlt/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/w0xlt",
         "id" : 94266259,
         "login" : "w0xlt",
         "node_id" : "U_kgDOBZ5jkw",
         "organizations_url" : "https://api.github.com/users/w0xlt/orgs",
         "received_events_url" : "https://api.github.com/users/w0xlt/received_events",
         "repos_url" : "https://api.github.com/users/w0xlt/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/w0xlt/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/w0xlt/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/w0xlt"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK 709af67add93f6674fb80e3ae8e3f175653a62f0 per `git range-diff 7a4ac71 eff7918 709af67`, rebase to master, clang 15 debug build, and build with -Wthread-safety-negative",
      "created_at" : "2022-04-22T10:11:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/24157#issuecomment-1106333197",
      "id" : 1106333197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/24157",
      "node_id" : "IC_kwDOABII585B8U4N",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1106333197/reactions"
      },
      "updated_at" : "2022-04-22T10:11:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1106333197",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   }
]
