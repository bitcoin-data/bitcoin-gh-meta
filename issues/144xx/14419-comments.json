[
   {
      "author_association" : "MEMBER",
      "body" : "utACK 42a995a.",
      "created_at" : "2018-10-07T00:38:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14419#issuecomment-427616427",
      "id" : 427616427,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzYxNjQyNw==",
      "updated_at" : "2018-10-07T00:38:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427616427",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 42a995ae4819ea472b211eb5088727a422fcbeb8",
      "created_at" : "2018-10-07T01:10:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14419#issuecomment-427617586",
      "id" : 427617586,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzYxNzU4Ng==",
      "updated_at" : "2018-10-07T01:10:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427617586",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->Reviewers, this pull request conflicts with the following ones:\n\n* #14220 (Transaction relay privacy bugfix by sdaftuar)\n* #14060 (ZMQ: add options to configure outbound message high water mark, aka SNDHWM by mruddy)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2018-10-07T02:05:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14419#issuecomment-427619656",
      "id" : 427619656,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzYxOTY1Ng==",
      "updated_at" : "2018-10-07T02:05:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427619656",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Why is the race not a bug that should be fixed?",
      "created_at" : "2018-10-07T07:30:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14419#issuecomment-427632317",
      "id" : 427632317,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzYzMjMxNw==",
      "updated_at" : "2018-10-07T07:30:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427632317",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "utACK 42a995ae4819ea472b211eb5088727a422fcbeb8\r\n\r\nLet's get rid of the racy test now and have it re-added as soon as a raciness has been fixed",
      "created_at" : "2018-10-07T11:53:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14419#issuecomment-427647370",
      "id" : 427647370,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzY0NzM3MA==",
      "updated_at" : "2018-10-07T11:53:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427647370",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Let's get rid of the racy test now and have it re-added as soon as a raciness has been fixed\r\n\r\nI can't follow this logic. \r\n\r\nAs far as I can tell the operative test is added to the interfaces, so there would be nothing to restore.\r\n\r\nMoving the test to another file seems reasonable (and faster!).\r\n\r\nI'm not clear on why this test is racy.",
      "created_at" : "2018-10-07T16:16:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14419#issuecomment-427665505",
      "id" : 427665505,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzY2NTUwNQ==",
      "updated_at" : "2018-10-07T16:33:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427665505",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/858454?v=4",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "node_id" : "MDQ6VXNlcjg1ODQ1NA==",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gmaxwell Sorry, my logic was incorrect :-)  I incorrectly assumed that some racy subset of the test was being temporarily removed. I now understand that's not the case. A brainfart on my part :-)",
      "created_at" : "2018-10-07T16:47:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14419#issuecomment-427667791",
      "id" : 427667791,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzY2Nzc5MQ==",
      "updated_at" : "2018-10-07T16:47:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427667791",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I'm not clear on why this test is racy.\r\n\r\nHere's a possibility, although can't demonstrate without the log files:\r\n\r\n- bitcoind is started in rpc_zmq.py L30\r\n- the rpc server starts in init.cpp L1232 (`AppInitServers()`)\r\n- there's then a race between:\r\n    a) the test framework calling `getzmqnotifications` (rpc_zmq.py L31)\r\n    b) the ZMQNotificationInterface being initialized in ` CZMQNotificationInterface::Create()` (init.cpp L1339)\r\n\r\nIf (a) wins, then `getzmqnotifications` will return an empty object. See zmqrpc.cpp L36:\r\n\r\n```\r\n    if (g_zmq_notification_interface != nullptr) {\r\n    ...\r\n    }\r\n```\r\n\r\n> Why is the race not a bug that should be fixed?\r\n\r\nNot a bug. Just the test trying calling `getzmqnotifications` before the interface has been initialized.",
      "created_at" : "2018-10-08T00:18:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14419#issuecomment-427699250",
      "id" : 427699250,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzY5OTI1MA==",
      "updated_at" : "2018-10-08T00:18:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427699250",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Not a bug. Just the test trying calling getzmqnotifications before the interface has been initialized.\r\n\r\nHow is this not a bug. The call should block and wait until the interface has been initialized? Similarly on how we block the wallet on calls until it has caught up with the chainstate, this call should block until all notifications have been activated/deactivated immediately prior to this call.",
      "created_at" : "2018-10-08T01:59:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14419#issuecomment-427706239",
      "id" : 427706239,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzcwNjIzOQ==",
      "updated_at" : "2018-10-08T01:59:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427706239",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> How is this not a bug.\r\n\r\nThe help text for `getzmqnotifications` says \"Returns information about the active ZeroMQ notifications.\" If you call the RPC before the interface is active, then it (correctly) returns an empty object since no notifications are active.\r\n\r\nThis is a little bit pedantic though. This is a tiny window condition which as far as I'm aware can only be hit in Travis which has weird scheduling and delays. I don't think this can cause any problems for end-users actually using the zmq interface.\r\n\r\nI opened this PR to unblock #14336, which I think is a far more important goal than making sure that the zmq interface gets initialized before `getzmqnotifications` returns. If you want to fix that, by all means go ahead, but I don't think doing so should block #14336.",
      "created_at" : "2018-10-08T02:43:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/14419#issuecomment-427709831",
      "id" : 427709831,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/14419",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDQyNzcwOTgzMQ==",
      "updated_at" : "2018-10-08T02:43:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/427709831",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   }
]
