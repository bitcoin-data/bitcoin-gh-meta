[
   {
      "body" : "I like this idea... I'm also wondering if perhaps some of the code from the SPV-hybrid PR I saw recently could be used to optionally allow the user to fill in the blind spots either as SPV (open to abuse) or from a trusted/whitelisted node (e.g. I run a pruned node and a full-node, and I suspect I may not alone with this setup).",
      "created_at" : "2016-12-23T12:42:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9409#issuecomment-268984513",
      "id" : 268984513,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9409",
      "updated_at" : "2016-12-23T12:42:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268984513",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1530283?v=3",
         "events_url" : "https://api.github.com/users/rebroad/events{/privacy}",
         "followers_url" : "https://api.github.com/users/rebroad/followers",
         "following_url" : "https://api.github.com/users/rebroad/following{/other_user}",
         "gists_url" : "https://api.github.com/users/rebroad/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/rebroad",
         "id" : 1530283,
         "login" : "rebroad",
         "organizations_url" : "https://api.github.com/users/rebroad/orgs",
         "received_events_url" : "https://api.github.com/users/rebroad/received_events",
         "repos_url" : "https://api.github.com/users/rebroad/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/rebroad/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/rebroad/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/rebroad"
      }
   },
   {
      "body" : "From my issue (made in error without noticing this issue).  I think that this is a very useful idea.\r\n\r\n(an proposed api):\r\n\r\n(in brackets optional arguments)\r\n\r\nPrune Wallet:\r\n- [**integer**: start block height] - _Start Range (inclusive)_\r\n- [**integer**: end block height] - _End Range - (exclusive)_\r\n- (**boolean**: test run, default: true) - Return transactions that would be removed, but don't execute.\r\n- (**boolean**: keep unspent, default: true) - If transaction has unspent output, exclude from removal.\r\n- (**list of txid**: excluded transactions) - List of transactions that should be not removed.\r\n- (**boolean**: error if excluded txid not found, default: true) - If excluded txid not found, don't continue.",
      "created_at" : "2016-12-26T14:43:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9409#issuecomment-269217068",
      "id" : 269217068,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9409",
      "updated_at" : "2016-12-26T14:43:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269217068",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/691439?v=3",
         "events_url" : "https://api.github.com/users/da2ce7/events{/privacy}",
         "followers_url" : "https://api.github.com/users/da2ce7/followers",
         "following_url" : "https://api.github.com/users/da2ce7/following{/other_user}",
         "gists_url" : "https://api.github.com/users/da2ce7/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/da2ce7",
         "id" : 691439,
         "login" : "da2ce7",
         "organizations_url" : "https://api.github.com/users/da2ce7/orgs",
         "received_events_url" : "https://api.github.com/users/da2ce7/received_events",
         "repos_url" : "https://api.github.com/users/da2ce7/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/da2ce7/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/da2ce7/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/da2ce7"
      }
   },
   {
      "body" : "Here is a proposed data structure that can handle working on utxo set data and works well with ryanofsky's hybrid full/spv mode:\r\n[https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-April/014230.html](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-April/014230.html)\r\n\r\nTo keep the historical data pruned, prune ranges would need to be stored in the wallet meta data as da2ce7 proposed.",
      "created_at" : "2017-04-24T13:48:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9409#issuecomment-296673878",
      "id" : 296673878,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9409",
      "updated_at" : "2017-04-24T13:48:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/296673878",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/25991988?v=3",
         "events_url" : "https://api.github.com/users/praxeology-guy/events{/privacy}",
         "followers_url" : "https://api.github.com/users/praxeology-guy/followers",
         "following_url" : "https://api.github.com/users/praxeology-guy/following{/other_user}",
         "gists_url" : "https://api.github.com/users/praxeology-guy/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/praxeology-guy",
         "id" : 25991988,
         "login" : "praxeology-guy",
         "organizations_url" : "https://api.github.com/users/praxeology-guy/orgs",
         "received_events_url" : "https://api.github.com/users/praxeology-guy/received_events",
         "repos_url" : "https://api.github.com/users/praxeology-guy/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/praxeology-guy/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/praxeology-guy/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/praxeology-guy"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "After a rescan, is the wallet meta data updated with the last scanned block?  This way the next time that same wallet is imported, it can continue the scan from that block, rather than from the beginning?\r\nSorry if I am misunderstanding how scans work.",
      "created_at" : "2017-12-15T13:09:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9409#issuecomment-352001876",
      "id" : 352001876,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9409",
      "updated_at" : "2017-12-15T13:09:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/352001876",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/898430?v=4",
         "events_url" : "https://api.github.com/users/frankforte/events{/privacy}",
         "followers_url" : "https://api.github.com/users/frankforte/followers",
         "following_url" : "https://api.github.com/users/frankforte/following{/other_user}",
         "gists_url" : "https://api.github.com/users/frankforte/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/frankforte",
         "id" : 898430,
         "login" : "frankforte",
         "organizations_url" : "https://api.github.com/users/frankforte/orgs",
         "received_events_url" : "https://api.github.com/users/frankforte/received_events",
         "repos_url" : "https://api.github.com/users/frankforte/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/frankforte/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/frankforte/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/frankforte"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> After a rescan, is the wallet meta data updated with the last scanned block?\r\n\r\nYes, wallet saves the location of the last block it has data from (see https://github.com/bitcoin/bitcoin/blob/df7181952436a90a7f300f2b673321e2ac92ef56/src/wallet/walletdb.cpp#L116).\r\n\r\nWhen the wallet is running it will continually receive blocks from the network, and scan them for thansactions and update the last block. If it gets shut down and restarted it will automatically rescan starting from the last block.",
      "created_at" : "2017-12-15T13:39:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/9409#issuecomment-352008028",
      "id" : 352008028,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/9409",
      "updated_at" : "2017-12-15T13:39:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/352008028",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   }
]
