{
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "<!-- This issue tracker is only for technical issues related to Bitcoin Core.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the Bitcoin StackExchange at https://bitcoin.stackexchange.com.\r\n\r\nFor reporting security issues, please read instructions at https://bitcoincore.org/en/contact/.\r\n\r\nIf the node is \"stuck\" during sync or giving \"block checksum mismatch\" errors, please ensure your hardware is stable by running memtest and observe CPU temperature with a load-test tool such as linpack before creating an issue! -->\r\n\r\n<!-- Describe the issue -->\r\n#### Desription\r\nAfter running bitcoind for a while, the program terminated with segmentation fault.\r\n\r\n#### Console Output\r\n```\r\ntrickle -s -u 150 ./bitcoind -datadir=/btc-data/bitcoin/data\r\n\r\n...\r\n\r\n19-02-06T16:24:35Z' progress=0.974263 cache=10.4MiB(78248txo)\r\n2019-03-27T03:19:33Z UpdateTip: new best=0000000000000000001c1d06f652792455f24b63ca66c16e2ba1cc12940af93f height=561832 version=0x20000000 log2_work=90.318593 tx=380346564 date='2019-02-06T16:27:37Z' progress=0.974264 cache=11.1MiB(84392txo)\r\n2019-03-27T03:19:36Z UpdateTip: new best=00000000000000000002371a6adffdcf79ca3a4c99a10d11d8dc9c28355b176c height=561833 version=0x20000000 log2_work=90.318616 tx=380349444 date='2019-02-06T16:37:25Z' progress=0.974268 cache=11.7MiB(89201txo)\r\n2019-03-27T03:19:42Z UpdateTip: new best=000000000000000000077cbc0d1845b47a0a1f4e8d269e469496bbbb03239439 height=561834 version=0x20c00000 log2_work=90.318639 tx=380350543 date='2019-02-06T16:38:29Z' progress=0.974268 cache=12.4MiB(94784txo)\r\n2019-03-27T03:20:48Z Pre-allocating up to position 0x7000000 in blk01519.dat\r\n2019-03-27T03:21:52Z UpdateTip: new best=0000000000000000000d4b0b3bd61bf105a06f0e5c9f06f4a4c85af8e7da200e height=561835 version=0x20000000 log2_work=90.318663 tx=380353291 date='2019-02-06T16:46:25Z' progress=0.974270 cache=13.0MiB(99572txo)\r\n2019-03-27T03:24:11Z Pre-allocating up to position 0xa00000 in rev01519.dat\r\n2019-03-27T03:24:11Z UpdateTip: new best=0000000000000000000e61f02e2aab67704eecb035e02460c78b7aa212bc66c2 height=561836 version=0x20000000 log2_work=90.318686 tx=380354077 date='2019-02-06T16:47:27Z' progress=0.974270 cache=13.8MiB(106454txo)\r\nSegmentation fault (core dumped)\r\n```\r\n<!--- What behavior did you expect? -->\r\n\r\n<!--- What was the actual behavior (provide screenshots if the issue is GUI-related)? -->\r\n\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\n#### Reproduce the Issue\r\nSystem: Ubuntu 16.04LTS, AWS Instance\r\nSteps: Just run it with `sudo trickle -s -u 150 ./bitcoind -datadir=/btc-data/bitcoin/data` and wait\r\nVersion: bitcoin-0.17.0, downloaded form the official website\r\nDisk Type: SSD, 1T\r\n\r\n#### Core Dump Analysis\r\n\r\n```\r\n\r\nsudo gdb ./bitcoind core\r\nGNU gdb (Ubuntu 7.11.1-0ubuntu1~16.5) 7.11.1\r\nCopyright (C) 2016 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\r\nand \"show warranty\" for details.\r\nThis GDB was configured as \"x86_64-linux-gnu\".\r\nType \"show configuration\" for configuration details.\r\nFor bug reporting instructions, please see:\r\n<http://www.gnu.org/software/gdb/bugs/>.\r\nFind the GDB manual and other documentation resources online at:\r\n<http://www.gnu.org/software/gdb/documentation/>.\r\nFor help, type \"help\".\r\nType \"apropos word\" to search for commands related to \"word\"...\r\nReading symbols from ./bitcoind...(no debugging symbols found)...done.\r\n[New LWP 2756]\r\n[New LWP 2715]\r\n[New LWP 2714]\r\n[New LWP 2716]\r\n[New LWP 2711]\r\n[New LWP 2727]\r\n[New LWP 2712]\r\n[New LWP 2713]\r\n[New LWP 2717]\r\n[New LWP 2718]\r\n[New LWP 2755]\r\n[New LWP 2760]\r\n[New LWP 2719]\r\n[New LWP 2758]\r\n[New LWP 2720]\r\n[New LWP 2759]\r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\nCore was generated by `./bitcoind -datadir=/btc-data/bitcoin/data'.\r\nProgram terminated with signal SIGSEGV, Segmentation fault.\r\n#0  _int_malloc (av=av@entry=0x7f215c000020, bytes=bytes@entry=288) at malloc.c:3516\r\n3516\tmalloc.c: No such file or directory.\r\n[Current thread is 1 (Thread 0x7f2163569700 (LWP 2756))]\r\n(gdb) list\r\n3511\tin malloc.c\r\n(gdb) bt\r\n#0  _int_malloc (av=av@entry=0x7f215c000020, bytes=bytes@entry=288) at malloc.c:3516\r\n#1  0x00007f21fa707184 in __GI___libc_malloc (bytes=288) at malloc.c:2913\r\n#2  0x000055f69179b3b8 in ?? ()\r\n#3  0x000055f691185d41 in ?? ()\r\n#4  0x000055f691195c4d in ?? ()\r\n#5  0x000055f69115b567 in ?? ()\r\n#6  0x000055f69119b4cb in ?? ()\r\n#7  0x000055f6917d6b3f in ?? ()\r\n#8  0x00007f21fb17b6ba in start_thread (arg=0x7f2163569700) at pthread_create.c:333\r\n#9  0x00007f21fa78a41d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\r\n(gdb)\r\n#0  _int_malloc (av=av@entry=0x7f215c000020, bytes=bytes@entry=288) at malloc.c:3516\r\n#1  0x00007f21fa707184 in __GI___libc_malloc (bytes=288) at malloc.c:2913\r\n#2  0x000055f69179b3b8 in ?? ()\r\n#3  0x000055f691185d41 in ?? ()\r\n#4  0x000055f691195c4d in ?? ()\r\n#5  0x000055f69115b567 in ?? ()\r\n#6  0x000055f69119b4cb in ?? ()\r\n#7  0x000055f6917d6b3f in ?? ()\r\n#8  0x00007f21fb17b6ba in start_thread (arg=0x7f2163569700) at pthread_create.c:333\r\n#9  0x00007f21fa78a41d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:109\r\n(gdb) exit\r\nUndefined command: \"exit\".  Try \"help\".\r\n(gdb) quit\r\n```",
   "closed_at" : "2020-04-27T00:57:51Z",
   "closed_by" : {
      "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
      "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
      "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
      "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
      "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/MarcoFalke",
      "id" : 6399679,
      "login" : "MarcoFalke",
      "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
      "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
      "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
      "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/MarcoFalke"
   },
   "comments" : 7,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15674/comments",
   "created_at" : "2019-03-27T04:03:22Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15674/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/15674",
   "id" : 425753578,
   "labels" : [
      {
         "color" : "770000",
         "default" : false,
         "description" : null,
         "id" : 234878,
         "name" : "Linux/Unix",
         "node_id" : "MDU6TGFiZWwyMzQ4Nzg=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Linux/Unix"
      },
      {
         "color" : "bfd4f2",
         "default" : false,
         "description" : null,
         "id" : 159815356,
         "name" : "Upstream",
         "node_id" : "MDU6TGFiZWwxNTk4MTUzNTY=",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Upstream"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15674/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU0MjU3NTM1Nzg=",
   "number" : 15674,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "closed",
   "title" : "Segmentation fault on Ubuntu Linux with trickle",
   "updated_at" : "2020-04-27T00:57:51Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/15674",
   "user" : {
      "avatar_url" : "https://avatars3.githubusercontent.com/u/9475863?v=4",
      "events_url" : "https://api.github.com/users/lxjhk/events{/privacy}",
      "followers_url" : "https://api.github.com/users/lxjhk/followers",
      "following_url" : "https://api.github.com/users/lxjhk/following{/other_user}",
      "gists_url" : "https://api.github.com/users/lxjhk/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/lxjhk",
      "id" : 9475863,
      "login" : "lxjhk",
      "node_id" : "MDQ6VXNlcjk0NzU4NjM=",
      "organizations_url" : "https://api.github.com/users/lxjhk/orgs",
      "received_events_url" : "https://api.github.com/users/lxjhk/received_events",
      "repos_url" : "https://api.github.com/users/lxjhk/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/lxjhk/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/lxjhk/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/lxjhk"
   }
}
