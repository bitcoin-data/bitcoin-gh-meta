{
   "active_lock_reason" : null,
   "assignee" : null,
   "assignees" : [],
   "author_association" : "NONE",
   "body" : "<!-- Describe the issue -->\r\nCrash while running Bitcoin Core-Qt with watch-only wallet, v0.20.0\r\n\r\n<!--- What behavior did you expect? -->\r\nNo crash\r\n\r\n<!--- What was the actual behavior (provide screenshots if the issue is GUI-related)? -->\r\nWindow disappeared completely\r\n\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\nOpen Bitcoin Core and let it run for days\r\nDo nothing\r\nWindow suddenly disappeared after hours/days of uptime\r\n\r\n**System information**\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\nbitcoin-qt v0.20.0 binary downloaded from website, sha256sum bitcoin-qt \r\nfd6c2aa5904325083d40edbc0af4668b24a2cf2dbe256a6319648b579de36d2d (I verified it by downloading bitcoin-0.20.0-x86_64-linux-gnu.tar.gz again on another computer, binary sha256sum matches)\r\n\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\nOS: Debian GNU/Linux 10 (buster) x86_64\r\nKernel: 5.6.0-0.bpo.2-amd64\r\nCPU: AMD Ryzen 7 1700 (16) @ 3.000GHz\r\nHDD: mdadm RAID1 consisting of 2x 2TB drives, very good throughput\r\n\r\n<!-- GUI-related issue? What is your operating system and its version? If Linux, what is your desktop environment and graphical shell? -->\r\nDE: MATE\r\nWM: Metacity (Marco)\r\nWM Theme: Menta\r\nShell: bash 5.0.3\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\nGUI dissapeared completely, so no traces there\r\ndmesg says:\r\n`[Thu Jul 23 08:06:35 2020] traps: b-httpworker.2[2027] general protection fault ip:55c5648aa040 sp:7f36f9ff9190 error:0 in bitcoin-qt[55c564488000+1dee000]`\r\ndebug.log says nothing, look at timestamps comparing to dmesg:\r\n```\r\n2020-07-23T06:43:59Z Socks5() connect to vibsdpohu3atcimw.onion:8333 failed: host unreachable\r\n2020-07-23T06:48:47Z UpdateTip: new best=00000000000000000002452497d3a72f18778c843af3a05c994b08b9f534621f height=640383 version=0x20000000 log2_work=92.138711 tx=551189631 date='2020-07-23T06:48:37Z' progress=1.000000 cache=116.7MiB(838970txo) warning='62 of last 100 blocks have unexpected version.'\r\n2020-07-23T06:51:30Z Pre-allocating up to position 0xd00000 in rev02163.dat\r\n2020-07-23T06:51:31Z UpdateTip: new best=0000000000000000000ee02285dafe68a0fc329a495fc853b0f325fead22f8cd height=640384 version=0x20800000 log2_work=92.138731 tx=551191584 date='2020-07-23T06:51:15Z' progress=1.000000 cache=116.8MiB(839933txo) warning='62 of last 100 blocks have unexpected version.'\r\n2020-07-23T06:52:19Z [default wallet] Submitting wtx (edited for privacy) to mempool for relay\r\n2020-07-23T06:52:19Z [default wallet] ResendWalletTransactions: resubmit 1 unconfirmed transactions\r\n2020-07-23T06:55:39Z UpdateTip: new best=0000000000000000000680fcdd48c25550fe0f1110bb58d2f521e1f415d3407a height=640385 version=0x20c00000 log2_work=92.138751 tx=551193516 date='2020-07-23T06:55:03Z' progress=1.000000 cache=117.1MiB(842826txo) warning='62 of last 100 blocks have unexpected version.'\r\n2020-07-23T06:59:26Z [default wallet] Submitting wtx (edited for privacy) to mempool for relay\r\n2020-07-23T06:59:26Z [default wallet] ResendWalletTransactions: resubmit 1 unconfirmed transactions\r\n\r\n\r\n[crash happened here on 2020-07-23T07:06:35Z)\r\nBitcoin Core started again:\r\n\r\n2020-07-23T07:27:49Z Bitcoin Core version v0.20.0 (release build)\r\n2020-07-23T07:27:49Z InitParameterInteraction: parameter interaction: -proxy set -> setting -upnp=0\r\n2020-07-23T07:27:49Z InitParameterInteraction: parameter interaction: -proxy set -> setting -discover=0\r\n2020-07-23T07:27:49Z Qt 5.9.8 (static), plugin=xcb (static)\r\n2020-07-23T07:27:49Z System: Debian GNU/Linux 10 (buster), x86_64-little_endian-lp64\r\n2020-07-23T07:27:49Z Screen: default 1280x1024, pixel ratio=1.0\r\n2020-07-23T07:27:49Z Assuming ancestors of block 0000000000000000000f2adce67e49b0b6bdeb9de8b7c3d7e93b21e7fc1e819d have valid signatures.\r\n2020-07-23T07:27:49Z Setting nMinimumChainWork=00000000000000000000000000000000000000000e1ab5ec9348e9f4b8eb8154\r\n2020-07-23T07:27:49Z Using the 'shani(1way,2way)' SHA256 implementation\r\n2020-07-23T07:27:49Z Using RdSeed as additional entropy source\r\n2020-07-23T07:27:49Z Using RdRand as an additional entropy source\r\n2020-07-23T07:27:49Z Default data directory /home/(edited for privacy)/.bitcoin\r\n2020-07-23T07:27:49Z Using data directory /home/(edited for privacy)/BitcoinCore/Blockchain\r\n2020-07-23T07:27:49Z Config file: /home/(edited for privacy)/BitcoinCore/Blockchain/bitcoin.conf\r\n2020-07-23T07:27:49Z Config file arg: addresstype=\"p2sh-segwit\"\r\n2020-07-23T07:27:49Z Config file arg: alertnotify=\"curl -sI --connect-timeout 1 http://localhost:62602/alertnotify?%s\"\r\n2020-07-23T07:27:49Z Config file arg: bind=\"127.0.0.1\"\r\n2020-07-23T07:27:49Z Config file arg: dbcache=\"8192\"\r\n2020-07-23T07:27:49Z Config file arg: deprecatedrpc=\"signrawtransaction\"\r\n2020-07-23T07:27:49Z Config file arg: disablewallet=\"0\"\r\n2020-07-23T07:27:49Z Config file arg: listen=\"1\"\r\n2020-07-23T07:27:49Z Config file arg: maxmempool=\"1024\"\r\n2020-07-23T07:27:49Z Config file arg: maxorphantx=\"1000\"\r\n2020-07-23T07:27:49Z Config file arg: maxuploadtarget=\"25313\"\r\n2020-07-23T07:27:49Z Config file arg: mempoolexpiry=\"744\"\r\n2020-07-23T07:27:49Z Config file arg: onlynet=\"onion\"\r\n2020-07-23T07:27:49Z Config file arg: par=\"16\"\r\n2020-07-23T07:27:49Z Config file arg: proxy=\"127.0.0.1:9050\"\r\n2020-07-23T07:27:49Z Config file arg: rpcpassword=****\r\n2020-07-23T07:27:49Z Config file arg: rpcuser=****\r\n2020-07-23T07:27:49Z Config file arg: rpcworkqueue=\"32\"\r\n2020-07-23T07:27:49Z Config file arg: server=\"1\"\r\n2020-07-23T07:27:49Z Config file arg: testnet=\"0\"\r\n2020-07-23T07:27:49Z Config file arg: torpassword=****\r\n2020-07-23T07:27:49Z Config file arg: txindex=\"1\"\r\n2020-07-23T07:27:49Z Config file arg: walletnotify=\"curl -sI --connect-timeout 1 http://localhost:62602/walletnotify?%s\"\r\n2020-07-23T07:27:49Z Config file arg: zmqpubrawblock=\"tcp://127.0.0.1:29000\"\r\n2020-07-23T07:27:49Z Config file arg: zmqpubrawtx=\"tcp://127.0.0.1:29000\"\r\n2020-07-23T07:27:49Z Command-line arg: datadir=\"/home/(edited for privacy)/BitcoinCore/Blockchain\"\r\n2020-07-23T07:27:49Z Using at most 125 automatic connections (1024 file descriptors available)\r\n2020-07-23T07:27:49Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements\r\n2020-07-23T07:27:49Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements\r\n2020-07-23T07:27:49Z Script verification uses 15 additional threads\r\n2020-07-23T07:27:49Z scheduler thread start\r\n2020-07-23T07:27:49Z HTTP: creating work queue of depth 32\r\n2020-07-23T07:27:49Z Config options rpcuser and rpcpassword will soon be deprecated. Locally-run instances may remove rpcuser to use cookie-based auth, or may be replaced with rpcauth. Please see share/rpcauth for rpcauth auth generation.\r\n2020-07-23T07:27:49Z HTTP: starting 4 worker threads\r\n2020-07-23T07:27:49Z Using wallet directory /home/(edited for privacy)/BitcoinCore/Blockchain\r\n2020-07-23T07:27:49Z init message: Verifying wallet(s) ...\r\n2020-07-23T07:27:49Z Using BerkeleyDB version Berkeley DB 4.8.30: (April  9, 2010)\r\n2020-07-23T07:27:49Z Using wallet /home/(edited for privacy)/BitcoinCore/Blockchain\r\n2020-07-23T07:27:49Z BerkeleyEnvironment::Open: LogDir=/home/(edited for privacy)/BitcoinCore/Blockchain/database ErrorFile=/home/(edited for privacy)/BitcoinCore/Blockchain/db.log\r\n2020-07-23T07:27:49Z init message: Loading banlist ...\r\n2020-07-23T07:27:49Z Using /16 prefix for IP bucketing\r\n2020-07-23T07:27:49Z Cache configuration:\r\n2020-07-23T07:27:49Z * Using 2.0 MiB for block index database\r\n2020-07-23T07:27:49Z * Using 1023.8 MiB for transaction index database\r\n2020-07-23T07:27:49Z * Using 8.0 MiB for chain state database\r\n2020-07-23T07:27:49Z * Using 7158.2 MiB for in-memory UTXO set (plus up to 976.6 MiB of unused mempool space)\r\n2020-07-23T07:27:49Z init message: Loading block index ...\r\n```\r\nI've edited few things (like tx and username of the machine) for privacy. Included debug.log just before crash (Bitcoin Core uses timestamp in GMT timezone looks like), then dmesg output (in my timezone which is GMT+1), and then debug.log output again from new start, so you can see my config and Core's configuration. I am using Tor only network and I added extra threads and memory to Core, as I have plenty of computing power and RAM. Bitcoin Core can run for days or weeks, but today it crashed.\r\n\r\nHopefully it helps :) Thanks.",
   "closed_at" : null,
   "closed_by" : null,
   "comments" : 10,
   "comments_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19571/comments",
   "created_at" : "2020-07-23T08:16:26Z",
   "events_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19571/events",
   "html_url" : "https://github.com/bitcoin/bitcoin/issues/19571",
   "id" : 664285121,
   "labels" : [
      {
         "color" : "FBBAAB",
         "default" : false,
         "description" : null,
         "id" : 64585,
         "name" : "Bug",
         "node_id" : "MDU6TGFiZWw2NDU4NQ==",
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug"
      }
   ],
   "labels_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19571/labels{/name}",
   "locked" : false,
   "milestone" : null,
   "node_id" : "MDU6SXNzdWU2NjQyODUxMjE=",
   "number" : 19571,
   "performed_via_github_app" : null,
   "repository_url" : "https://api.github.com/repos/bitcoin/bitcoin",
   "state" : "open",
   "title" : "Crash: b-httpworker.2[2027] general protection fault",
   "updated_at" : "2020-07-23T09:26:51Z",
   "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19571",
   "user" : {
      "avatar_url" : "https://avatars2.githubusercontent.com/u/1646393?v=4",
      "events_url" : "https://api.github.com/users/curious0101/events{/privacy}",
      "followers_url" : "https://api.github.com/users/curious0101/followers",
      "following_url" : "https://api.github.com/users/curious0101/following{/other_user}",
      "gists_url" : "https://api.github.com/users/curious0101/gists{/gist_id}",
      "gravatar_id" : "",
      "html_url" : "https://github.com/curious0101",
      "id" : 1646393,
      "login" : "curious0101",
      "node_id" : "MDQ6VXNlcjE2NDYzOTM=",
      "organizations_url" : "https://api.github.com/users/curious0101/orgs",
      "received_events_url" : "https://api.github.com/users/curious0101/received_events",
      "repos_url" : "https://api.github.com/users/curious0101/repos",
      "site_admin" : false,
      "starred_url" : "https://api.github.com/users/curious0101/starred{/owner}{/repo}",
      "subscriptions_url" : "https://api.github.com/users/curious0101/subscriptions",
      "type" : "User",
      "url" : "https://api.github.com/users/curious0101"
   }
}
