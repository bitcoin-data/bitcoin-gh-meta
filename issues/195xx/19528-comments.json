[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* #19550 (rpc: Add getindexinfo RPC by fjahr)\n* #18448 (rpc: fix/add missing RPCExamples for \"Util\" RPCs by theStack)\n* #16365 (Log RPC parameters (arguments) if -debug=rpcparams by LarryRuane)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2020-07-16T04:40:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19528#issuecomment-659153977",
      "id" : 659153977,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19528",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY1OTE1Mzk3Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-07T07:55:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/659153977",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19528#discussion_r464082546"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/464082546"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Looks like some debug output is left here? Note that unlike the original code, `appendCommand()` is more strict as it doesn't append the command If RPC is running (I guess that's the reason for the cout, you wanted to test If appendCommand returns false in practice).",
      "commit_id" : "fa77de2baa40ee828c850ef4068c76cc3619e87b",
      "created_at" : "2020-08-02T14:09:33Z",
      "diff_hunk" : "@@ -256,13 +256,8 @@ static const CRPCCommand vRPCCommands[] =\n \n CRPCTable::CRPCTable()\n {\n-    unsigned int vcidx;\n-    for (vcidx = 0; vcidx < (sizeof(vRPCCommands) / sizeof(vRPCCommands[0])); vcidx++)\n-    {\n-        const CRPCCommand *pcmd;\n-\n-        pcmd = &vRPCCommands[vcidx];\n-        mapCommands[pcmd->name].push_back(pcmd);\n+    for (const auto& c : vRPCCommands) {\n+        std::cout << appendCommand(c.name, &c) << std::endl;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19528#discussion_r464082546",
      "id" : 464082546,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA4MjU0Ng==",
      "original_commit_id" : "fa266ae6a2716784e133b2fe1335fcc510454649",
      "original_line" : 260,
      "original_position" : 12,
      "original_start_line" : null,
      "path" : "src/rpc/server.cpp",
      "position" : null,
      "pull_request_review_id" : 459651926,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-02T19:33:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/464082546",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/91535?v=4",
         "events_url" : "https://api.github.com/users/theStack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/theStack/followers",
         "following_url" : "https://api.github.com/users/theStack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/theStack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/theStack",
         "id" : 91535,
         "login" : "theStack",
         "node_id" : "MDQ6VXNlcjkxNTM1",
         "organizations_url" : "https://api.github.com/users/theStack/orgs",
         "received_events_url" : "https://api.github.com/users/theStack/received_events",
         "repos_url" : "https://api.github.com/users/theStack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/theStack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/theStack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/theStack"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks, fixed leftover",
      "created_at" : "2020-08-02T19:13:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19528#issuecomment-667713258",
      "id" : 667713258,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19528",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NzcxMzI1OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-02T19:13:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/667713258",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/19528#discussion_r467103833"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19528"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/467103833"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think multiplexing an argument on string/number type is generally a good idea. Because it's harder to use from some (statically typed) languages, and even from `bitcoin-cli` I think.. But for a test call ti's fine so no problem here specifically, but it's not something to encourage.",
      "commit_id" : "fa77de2baa40ee828c850ef4068c76cc3619e87b",
      "created_at" : "2020-08-07T15:14:44Z",
      "diff_hunk" : "@@ -575,28 +595,47 @@ UniValue logging(const JSONRPCRequest& request)\n     }\n \n     return result;\n+},\n+    };\n }\n \n-static UniValue echo(const JSONRPCRequest& request)\n+static RPCHelpMan echo(const std::string& name)\n {\n-    if (request.fHelp)\n-        throw std::runtime_error(\n-            RPCHelpMan{\"echo|echojson ...\",\n+    return RPCHelpMan{name,\n                 \"\\nSimply echo back the input arguments. This command is for testing.\\n\"\n-                \"\\nIt will return an internal bug report when exactly 100 arguments are passed.\\n\"\n+                \"\\nIt will return an internal bug report when arg9='trigger_internal_bug' is passed.\\n\"\n                 \"\\nThe difference between echo and echojson is that echojson has argument conversion enabled in the client-side table in \"\n                 \"bitcoin-cli and the GUI. There is no server-side difference.\",\n-                {},\n+                {\n+                    {\"arg0\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"\"},\n+                    {\"arg1\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"\"},\n+                    {\"arg2\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"\"},\n+                    {\"arg3\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"\"},\n+                    {\"arg4\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"\"},\n+                    {\"arg5\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"\"},\n+                    {\"arg6\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"\"},\n+                    {\"arg7\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"\"},\n+                    {\"arg8\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"\"},\n+                    {\"arg9\", RPCArg::Type::STR, RPCArg::Optional::OMITTED_NAMED_ARG, \"\"},\n+                },\n                 RPCResult{RPCResult::Type::NONE, \"\", \"Returns whatever was passed in\"},\n                 RPCExamples{\"\"},\n-            }.ToString()\n-        );\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    if (request.fHelp) throw std::runtime_error(self.ToString());\n \n-    CHECK_NONFATAL(request.params.size() != 100);\n+    if (request.params[9].isStr()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19528#discussion_r467103833",
      "id" : 467103833,
      "line" : 627,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzEwMzgzMw==",
      "original_commit_id" : "fa77de2baa40ee828c850ef4068c76cc3619e87b",
      "original_line" : 627,
      "original_position" : 322,
      "original_start_line" : null,
      "path" : "src/rpc/misc.cpp",
      "position" : 322,
      "pull_request_review_id" : 463394685,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/19528",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2020-08-07T15:14:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/467103833",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK fa77de2baa40ee828c850ef4068c76cc3619e87b",
      "created_at" : "2020-08-07T15:16:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19528#issuecomment-670568028",
      "id" : 670568028,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19528",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MDU2ODAyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-07T15:16:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/670568028",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "tested ACK fa77de2baa40ee828c850ef4068c76cc3619e87b\r\n\r\nReviewed code, used the new style from fa77de2baa40ee828c850ef4068c76cc3619e87b in #19550 and tested the change in `echo`.",
      "created_at" : "2020-08-13T15:21:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19528#issuecomment-673542053",
      "id" : 673542053,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19528",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY3MzU0MjA1Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-08-13T15:21:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/673542053",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   }
]
