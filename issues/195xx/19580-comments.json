[
   {
      "author_association" : "MEMBER",
      "body" : "I don't understand why the counts would not be correct, but agree `has_verack` as  boolean is clerer.",
      "created_at" : "2020-07-24T13:43:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19580#issuecomment-663545548",
      "id" : 663545548,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19580",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MzU0NTU0OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-24T13:43:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663545548",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> \r\n> \r\n> I don't understand why the counts would not be correct, but agree `has_verack` as boolean is clerer.\r\n\r\nIn the tests in #18638, we do `last_message.pop('ping')`, after which we simultaneously have `message_count['ping'] == 1` and `'ping' not in last_message`.\r\n\r\nThanks for the comment, I've edited the PR description to clarify what I mean by \"wrong\".",
      "created_at" : "2020-07-24T13:50:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19580#issuecomment-663548470",
      "id" : 663548470,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19580",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MzU0ODQ3MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-24T13:50:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663548470",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5553787?v=4",
         "events_url" : "https://api.github.com/users/troygiorshev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/troygiorshev/followers",
         "following_url" : "https://api.github.com/users/troygiorshev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/troygiorshev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/troygiorshev",
         "id" : 5553787,
         "login" : "troygiorshev",
         "node_id" : "MDQ6VXNlcjU1NTM3ODc=",
         "organizations_url" : "https://api.github.com/users/troygiorshev/orgs",
         "received_events_url" : "https://api.github.com/users/troygiorshev/received_events",
         "repos_url" : "https://api.github.com/users/troygiorshev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/troygiorshev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/troygiorshev"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't think this is an improvement. It's making the `P2PConnection` class less generic by hard-coding specific message types into the base class.\r\n\r\nI also don't think that it's an issue that `last_message['foo']` is empty and  `message_count['foo']` is > 0.\r\n\r\nEDIT: This is not a NACK. I don't see the benefit of removing this, but if other people do, I don't feel strongly that it needs to stay.",
      "created_at" : "2020-07-24T13:54:02Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19580#issuecomment-663550145",
      "id" : 663550145,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19580",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2MzU1MDE0NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-24T14:54:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/663550145",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/1063656?v=4",
         "events_url" : "https://api.github.com/users/jnewbery/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jnewbery/followers",
         "following_url" : "https://api.github.com/users/jnewbery/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jnewbery/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jnewbery",
         "id" : 1063656,
         "login" : "jnewbery",
         "node_id" : "MDQ6VXNlcjEwNjM2NTY=",
         "organizations_url" : "https://api.github.com/users/jnewbery/orgs",
         "received_events_url" : "https://api.github.com/users/jnewbery/received_events",
         "repos_url" : "https://api.github.com/users/jnewbery/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jnewbery/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jnewbery/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jnewbery"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK daad49020427293506d88ae4d0242937232629c7.\r\n\r\n`message_count` was only ever used to track `verack` so `has_verack` (or `verack_received` as it was named in the past) is enough.\r\n\r\n> It's making the `P2PConnection` class less generic by hard-coding specific message types into the base class.\r\n\r\n@jnewbery what do you mean? `P2PConnection` is not touched.\r\n\r\n> I don't see the benefit of removing this, but if other people do, I don't feel strongly that it needs to stay.\r\n\r\n:+1:",
      "created_at" : "2020-07-26T22:37:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19580#issuecomment-664049071",
      "id" : 664049071,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19580",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDA0OTA3MQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-27T12:59:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664049071",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Closing this in favor of #19599 \r\n\r\nI misunderstood the intended usage of `message_count` and `last_message`.  Additionally, looking deeper at the code, the intended usage (almost completely) matches the actual usage.  The comments just need to be cleaned up, which is done in the above PR.\r\n\r\nI now agree with:\r\n\r\n> I also don't think that it's an issue that last_message['foo'] is empty and message_count['foo'] is > 0.\r\n\r\nIf people are uncomfortable with unused code, this PR can be reopened but should use [2020-07-remove-message_count-v2](https://github.com/troygiorshev/bitcoin/tree/2020-07-remove-message_count-v2) instead.  It does away with `has_verack`.",
      "created_at" : "2020-07-27T12:09:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/19580#issuecomment-664357824",
      "id" : 664357824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/19580",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDY2NDM1NzgyNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2020-07-27T12:12:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/664357824",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/5553787?v=4",
         "events_url" : "https://api.github.com/users/troygiorshev/events{/privacy}",
         "followers_url" : "https://api.github.com/users/troygiorshev/followers",
         "following_url" : "https://api.github.com/users/troygiorshev/following{/other_user}",
         "gists_url" : "https://api.github.com/users/troygiorshev/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/troygiorshev",
         "id" : 5553787,
         "login" : "troygiorshev",
         "node_id" : "MDQ6VXNlcjU1NTM3ODc=",
         "organizations_url" : "https://api.github.com/users/troygiorshev/orgs",
         "received_events_url" : "https://api.github.com/users/troygiorshev/received_events",
         "repos_url" : "https://api.github.com/users/troygiorshev/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/troygiorshev/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/troygiorshev/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/troygiorshev"
      }
   }
]
