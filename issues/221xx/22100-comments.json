[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#22805](https://github.com/bitcoin/bitcoin/pull/22805) (refactor: use CWallet const shared pointers in dump{privkey,wallet} by theStack)\n* [#22019](https://github.com/bitcoin/bitcoin/pull/22019) (wallet: Introduce SelectionResult for encapsulating a coin selection solution by achow101)\n* [#21260](https://github.com/bitcoin/bitcoin/pull/21260) (wallet: indicate whether a transaction is in the mempool by danben)\n* [#20640](https://github.com/bitcoin/bitcoin/pull/20640) (wallet, refactor: return out-params of CreateTransaction() as optional struct by theStack)\n* [#20205](https://github.com/bitcoin/bitcoin/pull/20205) (wallet: Properly support a wallet id by achow101)\n* [#17355](https://github.com/bitcoin/bitcoin/pull/17355) (gui: grey out used address in address book by za-kk)\n* [#17211](https://github.com/bitcoin/bitcoin/pull/17211) (Allow fundrawtransaction and walletcreatefundedpsbt to take external inputs by achow101)\n* [#15719](https://github.com/bitcoin/bitcoin/pull/15719) (Wallet passive startup by ryanofsky)\n* [#14707](https://github.com/bitcoin/bitcoin/pull/14707) ([RPC] Include coinbase transactions in receivedby RPCs by andrewtoth)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2021-05-30T16:05:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-851022611",
      "id" : 851022611,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1MTAyMjYxMQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-02T09:30:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/851022611",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642592067"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642592067"
         }
      },
      "author_association" : "MEMBER",
      "body" : "How come you're able to move `GetCredit` but not `GetDebit`?",
      "commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "created_at" : "2021-05-31T16:29:58Z",
      "diff_hunk" : "@@ -677,25 +640,16 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n \n     isminetype IsMine(const CTxDestination& dest) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     isminetype IsMine(const CScript& script) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    isminetype IsMine(const CTxIn& txin) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     /**\n      * Returns amount of debit if the input matches the\n      * filter, otherwise returns 0\n      */\n     CAmount GetDebit(const CTxIn& txin, const isminefilter& filter) const;\n     isminetype IsMine(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    CAmount GetCredit(const CTxOut& txout, const isminefilter& filter) const;\n-    bool IsChange(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    bool IsChange(const CScript& script) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    CAmount GetChange(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     bool IsMine(const CTransaction& tx) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     /** should probably be renamed to IsRelevantToMe */\n     bool IsFromMe(const CTransaction& tx) const;\n     CAmount GetDebit(const CTransaction& tx, const isminefilter& filter) const;\n-    /** Returns whether all of the inputs match the filter */\n-    bool IsAllFromMe(const CTransaction& tx, const isminefilter& filter) const;\n-    CAmount GetCredit(const CTransaction& tx, const isminefilter& filter) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642592067",
      "id" : 642592067,
      "line" : 697,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjU5MjA2Nw==",
      "original_commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "original_line" : 697,
      "original_position" : 191,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 191,
      "pull_request_review_id" : 672442046,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-31T16:50:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642592067",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642612870"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642612870"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642592067\r\n\r\n> How come you're able to move `GetCredit` but not `GetDebit`?\r\n\r\nI would like to move it, but it's kept in place for now to avoid circular dependencies. The problem is that the `CWallet::SyncTransaction` method needs to call `CWallet::AddToWalletIfInvolvingMe` which needs to call `CWallet::IsFromMe` which needs to call `CWallet::GetDebit`. These functions can't be moved out of `wallet.cpp` to `receive.cpp`, because `wallet.cpp` can't depend on `receive.cpp` (by design, higher level `receive.cpp` `spend.cpp` and a future `sync.cpp` are all meant to depend on the lower level `wallet.cpp` `CWallet` object).\r\n\r\nI think a future fix for this will move `CWallet::SyncTransaction` along with chain attach and rescan code from `wallet.cpp` to `sync.cpp`. It should then be no problem for `sync.cpp` to depend on `receive.cpp` and for `CWallet::AddToWalletIfInvolvingMe` and related code to move to `receive.cpp`. The reason I didn't create `sync.cpp` and move these things already is that I was waiting for #20773 to split up the monolithic `CWallet::Create` function to make this easier.",
      "commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "created_at" : "2021-05-31T17:30:05Z",
      "diff_hunk" : "@@ -677,25 +640,16 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n \n     isminetype IsMine(const CTxDestination& dest) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     isminetype IsMine(const CScript& script) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    isminetype IsMine(const CTxIn& txin) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     /**\n      * Returns amount of debit if the input matches the\n      * filter, otherwise returns 0\n      */\n     CAmount GetDebit(const CTxIn& txin, const isminefilter& filter) const;\n     isminetype IsMine(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    CAmount GetCredit(const CTxOut& txout, const isminefilter& filter) const;\n-    bool IsChange(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    bool IsChange(const CScript& script) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    CAmount GetChange(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     bool IsMine(const CTransaction& tx) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     /** should probably be renamed to IsRelevantToMe */\n     bool IsFromMe(const CTransaction& tx) const;\n     CAmount GetDebit(const CTransaction& tx, const isminefilter& filter) const;\n-    /** Returns whether all of the inputs match the filter */\n-    bool IsAllFromMe(const CTransaction& tx, const isminefilter& filter) const;\n-    CAmount GetCredit(const CTransaction& tx, const isminefilter& filter) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642612870",
      "id" : 642612870,
      "in_reply_to_id" : 642592067,
      "line" : 697,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjYxMjg3MA==",
      "original_commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "original_line" : 697,
      "original_position" : 191,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 191,
      "pull_request_review_id" : 672466425,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-31T17:53:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642612870",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642653123"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642653123"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Comparing to 4e11f88320b644b67db55fe737815451ca7d0681 (which I reviewed in #21206) what is the motivation to prefix with `Cached`? Is it relevant for the caller that some caching is involved? Is it a way to remember that concurrent syncs can happen and so the return value can be out of date?",
      "commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "created_at" : "2021-05-31T19:39:48Z",
      "diff_hunk" : "@@ -10,11 +10,55 @@\n #include <wallet/transaction.h>\n #include <wallet/wallet.h>\n \n+isminetype InputIsMine(const CWallet& wallet, const CTxIn& txin) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+\n+/** Returns whether all of the inputs match the filter */\n+bool AllInputsMine(const CWallet& wallet, const CTransaction& tx, const isminefilter& filter);\n+\n+CAmount OutputGetCredit(const CWallet& wallet, const CTxOut& txout, const isminefilter& filter);\n+CAmount TxGetCredit(const CWallet& wallet, const CTransaction& tx, const isminefilter& filter);\n+\n+bool ScriptIsChange(const CWallet& wallet, const CScript& script) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+bool OutputIsChange(const CWallet& wallet, const CTxOut& txout) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+CAmount OutputGetChange(const CWallet& wallet, const CTxOut& txout) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+CAmount TxGetChange(const CWallet& wallet, const CTransaction& tx);\n+\n+CAmount CachedTxGetCredit(const CWallet& wallet, const CWalletTx& wtx, const isminefilter& filter);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642653123",
      "id" : 642653123,
      "line" : 26,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjY1MzEyMw==",
      "original_commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "original_line" : 26,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/receive.h",
      "position" : 17,
      "pull_request_review_id" : 672511585,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-31T19:44:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642653123",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642664678"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642664678"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642653123\r\n\r\n> Comparing to [4e11f88](https://github.com/bitcoin/bitcoin/commit/4e11f88320b644b67db55fe737815451ca7d0681) (which I reviewed in #21206) what is the motivation to prefix with `Cached`? Is it relevant for the caller that some caching is involved? Is it a way to remember that concurrent syncs can happen and so the return value can be out of date?\r\n\r\nThere should be no changes since #21206, but `CachedTx` is in debit/credit/change function names when the functions take `CWalletTx` arguments, since the point of `CWalletTx` class is to encapsulate `CTransaction` plus cached balance information. Functions named `Tx` instead of `CachedTx` just take plain `CTransaction` arguments by comparison. And functions named `Input`, `Output`, or `Script` take those things as arguments.\r\n\r\nI think it makes calling code more readable if function names explicitly say what they compute values from and whether values may be stale due to caching. But this is just a naming convention I settled on because I didnt like the previous convention where there are so many slightly different functions all having the same name. There could be better approaches I didn't think of though.\r\n\r\nRe: concurrency, I think cs_wallet doesn't really allow too much and there shouldn't be caching problems related to that. Caching more affects state transitions when blocks are connected disconnected and transactions are abandoned or replaced or added or removed from the mempool.",
      "commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "created_at" : "2021-05-31T20:21:39Z",
      "diff_hunk" : "@@ -10,11 +10,55 @@\n #include <wallet/transaction.h>\n #include <wallet/wallet.h>\n \n+isminetype InputIsMine(const CWallet& wallet, const CTxIn& txin) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+\n+/** Returns whether all of the inputs match the filter */\n+bool AllInputsMine(const CWallet& wallet, const CTransaction& tx, const isminefilter& filter);\n+\n+CAmount OutputGetCredit(const CWallet& wallet, const CTxOut& txout, const isminefilter& filter);\n+CAmount TxGetCredit(const CWallet& wallet, const CTransaction& tx, const isminefilter& filter);\n+\n+bool ScriptIsChange(const CWallet& wallet, const CScript& script) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+bool OutputIsChange(const CWallet& wallet, const CTxOut& txout) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+CAmount OutputGetChange(const CWallet& wallet, const CTxOut& txout) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+CAmount TxGetChange(const CWallet& wallet, const CTransaction& tx);\n+\n+CAmount CachedTxGetCredit(const CWallet& wallet, const CWalletTx& wtx, const isminefilter& filter);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642664678",
      "id" : 642664678,
      "in_reply_to_id" : 642653123,
      "line" : 26,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjY2NDY3OA==",
      "original_commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "original_line" : 26,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/receive.h",
      "position" : 17,
      "pull_request_review_id" : 672524610,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-31T20:47:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642664678",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642675557"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642675557"
         }
      },
      "author_association" : "MEMBER",
      "body" : "> Functions named Tx instead of CachedTx just take plain CTransaction arguments by comparison\r\n\r\nThanks for the clarification. An alternative prefix could be `Wallet`, so in this case, could be `WalletTxGetCredit`. But it's fine as is and agree with the convention.\r\n\r\n> Re: concurrency, I think cs_wallet doesn't really allow too much and there shouldn't be caching problems related to that. Caching more affects state transitions when blocks are connected disconnected and transactions are abandoned or replaced or added or removed from the mempool.\r\n\r\nRight, didn't mean to imply otherwise.",
      "commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "created_at" : "2021-05-31T21:02:41Z",
      "diff_hunk" : "@@ -10,11 +10,55 @@\n #include <wallet/transaction.h>\n #include <wallet/wallet.h>\n \n+isminetype InputIsMine(const CWallet& wallet, const CTxIn& txin) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+\n+/** Returns whether all of the inputs match the filter */\n+bool AllInputsMine(const CWallet& wallet, const CTransaction& tx, const isminefilter& filter);\n+\n+CAmount OutputGetCredit(const CWallet& wallet, const CTxOut& txout, const isminefilter& filter);\n+CAmount TxGetCredit(const CWallet& wallet, const CTransaction& tx, const isminefilter& filter);\n+\n+bool ScriptIsChange(const CWallet& wallet, const CScript& script) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+bool OutputIsChange(const CWallet& wallet, const CTxOut& txout) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+CAmount OutputGetChange(const CWallet& wallet, const CTxOut& txout) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+CAmount TxGetChange(const CWallet& wallet, const CTransaction& tx);\n+\n+CAmount CachedTxGetCredit(const CWallet& wallet, const CWalletTx& wtx, const isminefilter& filter);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642675557",
      "id" : 642675557,
      "in_reply_to_id" : 642653123,
      "line" : 26,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjY3NTU1Nw==",
      "original_commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "original_line" : 26,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/receive.h",
      "position" : 17,
      "pull_request_review_id" : 672536735,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-31T21:02:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642675557",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642698155"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642698155"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642664678\r\n\r\n> > Functions named Tx instead of CachedTx just take plain CTransaction arguments by comparison\r\n> \r\n> Thanks for the clarification. An alternative prefix could be `Wallet`, so in this case, could be `WalletTxGetCredit`. But it's fine as is and agree with the convention.\r\n\r\nThat suggestion is pretty good too. Maybe I should `s/CachedTx/WalletTx/g` in this PR. Will do if reviewers want that. I was anticipating renaming `CWalletTx` to `CachedTransaction` later (and namespacing so its full name would be `wallet::CachedTransaction`) but maybe I am jumping the gun a little bit and should stick with `WalletTx` here.\r\n \r\n> Right, didn't mean to imply otherwise.\r\n\r\nSorry about that, I just misinterpreted \"concurrent syncs\" it sounds like.",
      "commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "created_at" : "2021-05-31T22:54:37Z",
      "diff_hunk" : "@@ -10,11 +10,55 @@\n #include <wallet/transaction.h>\n #include <wallet/wallet.h>\n \n+isminetype InputIsMine(const CWallet& wallet, const CTxIn& txin) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+\n+/** Returns whether all of the inputs match the filter */\n+bool AllInputsMine(const CWallet& wallet, const CTransaction& tx, const isminefilter& filter);\n+\n+CAmount OutputGetCredit(const CWallet& wallet, const CTxOut& txout, const isminefilter& filter);\n+CAmount TxGetCredit(const CWallet& wallet, const CTransaction& tx, const isminefilter& filter);\n+\n+bool ScriptIsChange(const CWallet& wallet, const CScript& script) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+bool OutputIsChange(const CWallet& wallet, const CTxOut& txout) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+CAmount OutputGetChange(const CWallet& wallet, const CTxOut& txout) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+CAmount TxGetChange(const CWallet& wallet, const CTransaction& tx);\n+\n+CAmount CachedTxGetCredit(const CWallet& wallet, const CWalletTx& wtx, const isminefilter& filter);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642698155",
      "id" : 642698155,
      "in_reply_to_id" : 642653123,
      "line" : 26,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjY5ODE1NQ==",
      "original_commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "original_line" : 26,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/receive.h",
      "position" : 17,
      "pull_request_review_id" : 672560455,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-31T22:54:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642698155",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642699195"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642699195"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Both are just fine to me, as long as the motivation and convention are clear.",
      "commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "created_at" : "2021-05-31T23:01:20Z",
      "diff_hunk" : "@@ -10,11 +10,55 @@\n #include <wallet/transaction.h>\n #include <wallet/wallet.h>\n \n+isminetype InputIsMine(const CWallet& wallet, const CTxIn& txin) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+\n+/** Returns whether all of the inputs match the filter */\n+bool AllInputsMine(const CWallet& wallet, const CTransaction& tx, const isminefilter& filter);\n+\n+CAmount OutputGetCredit(const CWallet& wallet, const CTxOut& txout, const isminefilter& filter);\n+CAmount TxGetCredit(const CWallet& wallet, const CTransaction& tx, const isminefilter& filter);\n+\n+bool ScriptIsChange(const CWallet& wallet, const CScript& script) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+bool OutputIsChange(const CWallet& wallet, const CTxOut& txout) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+CAmount OutputGetChange(const CWallet& wallet, const CTxOut& txout) EXCLUSIVE_LOCKS_REQUIRED(wallet.cs_wallet);\n+CAmount TxGetChange(const CWallet& wallet, const CTransaction& tx);\n+\n+CAmount CachedTxGetCredit(const CWallet& wallet, const CWalletTx& wtx, const isminefilter& filter);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642699195",
      "id" : 642699195,
      "in_reply_to_id" : 642653123,
      "line" : 26,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MjY5OTE5NQ==",
      "original_commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "original_line" : 26,
      "original_position" : 17,
      "original_start_line" : null,
      "path" : "src/wallet/receive.h",
      "position" : 17,
      "pull_request_review_id" : 672561537,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-05-31T23:01:20Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/642699195",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-06-09T12:00:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-857634715",
      "id" : 857634715,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1NzYzNDcxNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-09T12:00:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/857634715",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased a3f623035a2653049d098f43e55b9e01850cb16c -> 642843a193c237fc7a21dffc9fbbb3e10ab8e50d ([`pr/txfun.1`](https://github.com/ryanofsky/bitcoin/commits/pr/txfun.1) -> [`pr/txfun.2`](https://github.com/ryanofsky/bitcoin/commits/pr/txfun.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/txfun.1-rebase..pr/txfun.2)) due to conflict with #22008",
      "created_at" : "2021-06-11T20:00:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-859832948",
      "id" : 859832948,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1OTgzMjk0OA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-11T20:00:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/859832948",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Code review ACK 642843a193c237fc7a21dffc9fbbb3e10ab8e50d",
      "created_at" : "2021-06-13T20:02:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-860262977",
      "id" : 860262977,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2MDI2Mjk3Nw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-13T20:02:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/860262977",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 642843a193c237fc7a21dffc9fbbb3e10ab8e50d -> b69d82094bccdf929f7d483c5031c55e6e40f103 ([`pr/txfun.2`](https://github.com/ryanofsky/bitcoin/commits/pr/txfun.2) -> [`pr/txfun.3`](https://github.com/ryanofsky/bitcoin/commits/pr/txfun.3), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/txfun.2-rebase..pr/txfun.3)) for no reason\r\nRebased b69d82094bccdf929f7d483c5031c55e6e40f103 -> 33af67edbd902e9b9c3862c3a3066798cac1a33d ([`pr/txfun.3`](https://github.com/ryanofsky/bitcoin/commits/pr/txfun.3) -> [`pr/txfun.4`](https://github.com/ryanofsky/bitcoin/commits/pr/txfun.4), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/txfun.3-rebase..pr/txfun.4)) due to conflict with #21935\r\n",
      "created_at" : "2021-06-17T13:18:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-863232535",
      "id" : 863232535,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2MzIzMjUzNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-17T13:20:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/863232535",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-07-27T09:53:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-887375662",
      "id" : 887375662,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII58405Ecu",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-27T09:53:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887375662",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 33af67edbd902e9b9c3862c3a3066798cac1a33d -> 67f8c262281feb3599ec2dab13439edd520bb5e6 ([`pr/txfun.4`](https://github.com/ryanofsky/bitcoin/commits/pr/txfun.4) -> [`pr/txfun.5`](https://github.com/ryanofsky/bitcoin/commits/pr/txfun.5), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/txfun.4-rebase..pr/txfun.5)) due to conflict with #22155",
      "created_at" : "2021-08-13T01:57:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-898100690",
      "id" : 898100690,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5841h-3S",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-13T01:57:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/898100690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "I bought a coin (DOGE3L) at Bidesk blockchain and 94 percent of the coin is on merger balance at -141.5 how can I make use of it or reverse it to available (usable) balance?",
      "created_at" : "2021-08-16T21:34:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-899833285",
      "id" : 899833285,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5841ol3F",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-16T21:34:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/899833285",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/89045963?v=4",
         "events_url" : "https://api.github.com/users/Osaka121-star/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Osaka121-star/followers",
         "following_url" : "https://api.github.com/users/Osaka121-star/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Osaka121-star/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Osaka121-star",
         "id" : 89045963,
         "login" : "Osaka121-star",
         "node_id" : "MDQ6VXNlcjg5MDQ1OTYz",
         "organizations_url" : "https://api.github.com/users/Osaka121-star/orgs",
         "received_events_url" : "https://api.github.com/users/Osaka121-star/received_events",
         "repos_url" : "https://api.github.com/users/Osaka121-star/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Osaka121-star/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Osaka121-star/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Osaka121-star"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-08-19T03:18:05Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-901577727",
      "id" : 901577727,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5841vPv_",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-19T03:18:05Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/901577727",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Rebased 67f8c262281feb3599ec2dab13439edd520bb5e6 -> 54faec818254453f8c0813f60be0164afb26558a ([`pr/txfun.5`](https://github.com/ryanofsky/bitcoin/commits/pr/txfun.5) -> [`pr/txfun.6`](https://github.com/ryanofsky/bitcoin/commits/pr/txfun.6), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/txfun.5-rebase..pr/txfun.6)) due to conflict with #19101",
      "created_at" : "2021-08-19T13:24:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-901913664",
      "id" : 901913664,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5841whxA",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-19T13:24:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/901913664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Code review re-ACK 54faec818254453f8c0813f60be0164afb26558a\r\n\r\nConfirmed changes since my last review did not change behavior and only addressed mentioned merge conflicts.",
      "created_at" : "2021-08-23T22:08:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-904167606",
      "id" : 904167606,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII58415IC2",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-23T22:08:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/904167606",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1322187?v=4",
         "events_url" : "https://api.github.com/users/fjahr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fjahr/followers",
         "following_url" : "https://api.github.com/users/fjahr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fjahr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fjahr",
         "id" : 1322187,
         "login" : "fjahr",
         "node_id" : "MDQ6VXNlcjEzMjIxODc=",
         "organizations_url" : "https://api.github.com/users/fjahr/orgs",
         "received_events_url" : "https://api.github.com/users/fjahr/received_events",
         "repos_url" : "https://api.github.com/users/fjahr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fjahr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fjahr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fjahr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Sorry about another rebase Russ, I'll review this next ð ",
      "created_at" : "2021-09-01T05:12:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-909894911",
      "id" : 909894911,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5842O-T_",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T05:12:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909894911",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n\n<sub>Want to unsubscribe from rebase notifications on this pull request? Just convert this pull request to a \"draft\".</sub>",
      "created_at" : "2021-09-01T05:16:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-909897178",
      "id" : 909897178,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5842O-3a",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T05:16:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/909897178",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> Sorry about another rebase Russ, I'll review this next smile\r\n\r\nThanks! And no problem, conflicts were trivial\r\n\r\nRebased 54faec818254453f8c0813f60be0164afb26558a -> b11a195ef450bd138aa03204a5e74fdd3ddced26 ([`pr/txfun.6`](https://github.com/ryanofsky/bitcoin/commits/pr/txfun.6) -> [`pr/txfun.7`](https://github.com/ryanofsky/bitcoin/commits/pr/txfun.7), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/txfun.6-rebase..pr/txfun.7)) due to conflict with #22009",
      "created_at" : "2021-09-01T14:59:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-910369645",
      "id" : 910369645,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5842QyNt",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T14:59:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/910369645",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I get that the point is to remove circular dependencies, but I am not sure about the new code layout which removes a lot of the object-oriented-ness of the wallet. It doesn't quite make sense to me why so many functions need or should be changed to take `CWallet` or `CWalletTx` (or both) as arguments when, conceptually, it makes more sense to have them remain as member functions.",
      "created_at" : "2021-09-01T20:09:44Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-910688118",
      "id" : 910688118,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5842R_92",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T20:09:44Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/910688118",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r700539371"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/700539371"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Given that #20773 is merged, could the change to `GetDebit` be done now?",
      "commit_id" : "b11a195ef450bd138aa03204a5e74fdd3ddced26",
      "created_at" : "2021-09-01T20:10:23Z",
      "diff_hunk" : "@@ -677,25 +640,16 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n \n     isminetype IsMine(const CTxDestination& dest) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     isminetype IsMine(const CScript& script) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    isminetype IsMine(const CTxIn& txin) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     /**\n      * Returns amount of debit if the input matches the\n      * filter, otherwise returns 0\n      */\n     CAmount GetDebit(const CTxIn& txin, const isminefilter& filter) const;\n     isminetype IsMine(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    CAmount GetCredit(const CTxOut& txout, const isminefilter& filter) const;\n-    bool IsChange(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    bool IsChange(const CScript& script) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    CAmount GetChange(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     bool IsMine(const CTransaction& tx) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     /** should probably be renamed to IsRelevantToMe */\n     bool IsFromMe(const CTransaction& tx) const;\n     CAmount GetDebit(const CTransaction& tx, const isminefilter& filter) const;\n-    /** Returns whether all of the inputs match the filter */\n-    bool IsAllFromMe(const CTransaction& tx, const isminefilter& filter) const;\n-    CAmount GetCredit(const CTransaction& tx, const isminefilter& filter) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r700539371",
      "id" : 700539371,
      "in_reply_to_id" : 642592067,
      "line" : 700,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMDUzOTM3MQ==",
      "original_commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "original_line" : 700,
      "original_position" : 191,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 191,
      "pull_request_review_id" : 744362145,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-01T20:10:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/700539371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : ">  removes a lot of the object-oriented-ness of the wallet.\r\n\r\nThis was discussed more here https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-910688118, but the general idea is that saying `object.function()` or `function(object)` does not substantively affect the object orientedness off the code, that big classes with too many interacting parts are hard to understand and maintain, and that the way you can break apart a big class without rewriting the world is to detach parts of it (possibly reorganizing related parts into smaller classes when it makes sense).",
      "created_at" : "2021-09-01T21:34:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-910785904",
      "id" : 910785904,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5842SX1w",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T21:35:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/910785904",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Is there a description of where this is going and what the end state is going to look like? To me, it feels like many of the changes made here are not well motivated (other than removing the circular dependency). I've read through #21206, #21207, and https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Wallet-Transaction-Conflict-Tracking, but it's not clear to me how these particular changes are related to the end goals stated in those places.",
      "created_at" : "2021-09-01T22:11:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-910824104",
      "id" : 910824104,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5842ShKo",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T22:11:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/910824104",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This PR is my end state for detaching methods and breaking the monolithic wallet.h/cpp into wallet.h/cpp, transaction.h/cpp, receive.h/cpp, and spend.h/spend.cpp modules. Obviously if more work is done on balance tracking and spending code more improvements can be made in these places. This PR is only fixing inconsistencies in naming and moving function declarations out of wallet.h to the new transaction/spend/receive modules where the functions are implemented, \r\n\r\nSeparately, I would like add a sync.h/cpp module and move chain notification and rescan handling code from wallet.cpp there. This should only affect a handful of CWallet methods, and my presumption is that it would be easier implement after #15719 which move some sync code out of the wallet entirely, to the node where it could be shared with other chain clients like indexes. sync.h/cpp module creation would be basically tangential to everything in this except it might detach a few more CWallet methods and follow a similar pattern.\r\n\r\n#21206 mostly concerns transaction.h/cpp and is basically the end state of transaction representation for all the potential changes described https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Wallet-Transaction-Conflict-Tracking. There would just be pretty small tweaks to the representation after #21206 required to implement the specific changes outlined on the wiki page. #21206 makes these changes safer to implement by taking away the ability to represent invalid transaction states.\r\n\r\nDefinitely you should ask if any of motivations I'm giving in PR descriptions are unclear. Or if any changes in any PR do not seem motivated. This particular PR is just tweaking function names to reflect the places those functions are currently located. So I think there is not very much to get excited about here.",
      "created_at" : "2021-09-01T23:13:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-910879195",
      "id" : 910879195,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5842Sunb",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-01T23:13:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/910879195",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Ok, I think I get it now. #21207 moved several things, including members of `CWallet` and `CWalletTx` to `spend.cpp` and `receive.cpp`. Then this PR completes that move by making the moved functions no longer members of `CWallet` and `CWalletTx` so that we don't have implementations of class members across different files. My last question is how is this refactor useful to us? I'm not convinced this change was particularly beneficial especially since it forces a rebase of ~every wallet PR. But it's a bit too late to be asking that and should've asked that prior to #21207 being merged, which also means that I should've reviewed it.\r\n\r\nI was confused by the mention of #21206 in the OP and thought this was related to that, but I think it just makes the implementation a bit easier and isn't strictly necessary.",
      "created_at" : "2021-09-02T01:43:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-911015569",
      "id" : 911015569,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5842TP6R",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-02T01:45:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/911015569",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> My last question is how is this refactor useful to us?\r\n\r\nLike you mentioned, this PR post-moveonly cleanup after #21207, and the overall motivation is described there. The goal of that PR and this one were to increase legibility and improve organization of wallet code. Before #21207 balance computing code was mixed with syncing code and coin selection code and all of this was in random order. After #21207 the code is grouped and organized into different files, separating spending and balance tracking code in different files, with the lower level functions in each file organized first and higher level functions following the lower level functions they call. In this renaming PR after the MOVEONLY PR, circular dependencies are dropped, functions with overloaded names are given distinct names, pointless CWalletTx wallet backpointers are dropped, and functions are named and arranged based on what inputs they are operate on, what they are used for, whether they cache state, how they related to other functions, and things like that, instead of arbitrary things like what convention somebody felt like using in some isolated PR 6 years ago or whether someone flipped a coin and felt like attaching a method to the CWallet class or the CWalletTx class.\r\n\r\nAll of the changes made in these two PRs are very conservative and all are very minor. In almost every case a function name is changing it is just getting longer and more descriptive, and in cases where words are actually different just they are becoming more consistent with other functions. Also, `wallet.function()` is becoming `function(wallet)` in many cases. In short, this a boring collection of renames that shouldn't affect you very much if you are a wallet expert, but should make the wallet more modular and understandable if you are trying to understand the code and don't have it memorized. This is a result of me spending a few days looking at dependencies between wallet functions, moving the functions that are related and depend on each other into different files, and then smoothing out a few obvious inconsistencies in naming.",
      "created_at" : "2021-09-02T02:35:49Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-911061060",
      "id" : 911061060,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5842TbBE",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-02T02:35:49Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/911061060",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK b11a195ef450bd138aa03204a5e74fdd3ddced26",
      "created_at" : "2021-09-02T02:52:34Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-911075369",
      "id" : 911075369,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5842Tegp",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-02T02:52:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/911075369",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r700927541"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/700927541"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Or maybe in a (more compact) followup.",
      "commit_id" : "b11a195ef450bd138aa03204a5e74fdd3ddced26",
      "created_at" : "2021-09-02T09:48:28Z",
      "diff_hunk" : "@@ -677,25 +640,16 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n \n     isminetype IsMine(const CTxDestination& dest) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     isminetype IsMine(const CScript& script) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    isminetype IsMine(const CTxIn& txin) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     /**\n      * Returns amount of debit if the input matches the\n      * filter, otherwise returns 0\n      */\n     CAmount GetDebit(const CTxIn& txin, const isminefilter& filter) const;\n     isminetype IsMine(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    CAmount GetCredit(const CTxOut& txout, const isminefilter& filter) const;\n-    bool IsChange(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    bool IsChange(const CScript& script) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    CAmount GetChange(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     bool IsMine(const CTransaction& tx) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     /** should probably be renamed to IsRelevantToMe */\n     bool IsFromMe(const CTransaction& tx) const;\n     CAmount GetDebit(const CTransaction& tx, const isminefilter& filter) const;\n-    /** Returns whether all of the inputs match the filter */\n-    bool IsAllFromMe(const CTransaction& tx, const isminefilter& filter) const;\n-    CAmount GetCredit(const CTransaction& tx, const isminefilter& filter) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r700927541",
      "id" : 700927541,
      "in_reply_to_id" : 642592067,
      "line" : 700,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMDkyNzU0MQ==",
      "original_commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "original_line" : 700,
      "original_position" : 191,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 191,
      "pull_request_review_id" : 744852199,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-02T09:58:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/700927541",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r700986601"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/700986601"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "re: https://github.com/bitcoin/bitcoin/pull/22100#discussion_r642592067\r\n\r\n>>>> How come you're able to move `GetCredit` but not `GetDebit`?\r\n\r\n>>> I would like to move it, but it's kept in place for now to avoid circular dependencies.\r\n\r\n>> Given that #20773 is merged, could the change to `GetDebit` be done now?\r\n\r\n> Or maybe in a (more compact) followup.\r\n\r\nYes #20733 does make this easier, and yes this would make sense to do as a followup. Doing it in this PR wouldn't make great sense because this PR is not moving code just doing naming/declaration cleanups after a previous move. (Also this is not a tiny change, just in terms of number of lines). Will see what this looks like and post a followup.",
      "commit_id" : "b11a195ef450bd138aa03204a5e74fdd3ddced26",
      "created_at" : "2021-09-02T11:16:54Z",
      "diff_hunk" : "@@ -677,25 +640,16 @@ class CWallet final : public WalletStorage, public interfaces::Chain::Notificati\n \n     isminetype IsMine(const CTxDestination& dest) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     isminetype IsMine(const CScript& script) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    isminetype IsMine(const CTxIn& txin) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     /**\n      * Returns amount of debit if the input matches the\n      * filter, otherwise returns 0\n      */\n     CAmount GetDebit(const CTxIn& txin, const isminefilter& filter) const;\n     isminetype IsMine(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    CAmount GetCredit(const CTxOut& txout, const isminefilter& filter) const;\n-    bool IsChange(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    bool IsChange(const CScript& script) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n-    CAmount GetChange(const CTxOut& txout) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     bool IsMine(const CTransaction& tx) const EXCLUSIVE_LOCKS_REQUIRED(cs_wallet);\n     /** should probably be renamed to IsRelevantToMe */\n     bool IsFromMe(const CTransaction& tx) const;\n     CAmount GetDebit(const CTransaction& tx, const isminefilter& filter) const;\n-    /** Returns whether all of the inputs match the filter */\n-    bool IsAllFromMe(const CTransaction& tx, const isminefilter& filter) const;\n-    CAmount GetCredit(const CTransaction& tx, const isminefilter& filter) const;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#discussion_r700986601",
      "id" : 700986601,
      "in_reply_to_id" : 642592067,
      "line" : 700,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDcwMDk4NjYwMQ==",
      "original_commit_id" : "a3f623035a2653049d098f43e55b9e01850cb16c",
      "original_line" : 700,
      "original_position" : 191,
      "original_start_line" : null,
      "path" : "src/wallet/wallet.h",
      "position" : 191,
      "pull_request_review_id" : 744930172,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/22100",
      "side" : "LEFT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-09-02T11:54:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/700986601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It would be useful to see which PR's are impacted by silent merge conflicts. Afaik most of the big upcoming work, like taproot, doesn't touch this. I also think this reorganization makes future wallet improvements less scary.",
      "created_at" : "2021-09-02T12:00:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/22100#issuecomment-911592871",
      "id" : 911592871,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22100",
      "node_id" : "IC_kwDOABII5842Vc2n",
      "performed_via_github_app" : null,
      "updated_at" : "2021-09-02T12:00:08Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/911592871",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
