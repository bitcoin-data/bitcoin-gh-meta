[
   {
      "author_association" : "NONE",
      "body" : "Rebuild of .stamp_$(final_build_id) is the expensive one.\r\nIt copies all the cached tarballs and unpacks them sequentially, one by one.\r\nTakes about 27 seconds on my box.",
      "created_at" : "2021-06-10T13:33:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22134#issuecomment-858627105",
      "id" : 858627105,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22134",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg1ODYyNzEwNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-10T13:33:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/858627105",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74753?v=4",
         "events_url" : "https://api.github.com/users/dgoncharov/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgoncharov/followers",
         "following_url" : "https://api.github.com/users/dgoncharov/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgoncharov/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgoncharov",
         "id" : 74753,
         "login" : "dgoncharov",
         "node_id" : "MDQ6VXNlcjc0NzUz",
         "organizations_url" : "https://api.github.com/users/dgoncharov/orgs",
         "received_events_url" : "https://api.github.com/users/dgoncharov/received_events",
         "repos_url" : "https://api.github.com/users/dgoncharov/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgoncharov/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgoncharov/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgoncharov"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "This is an example of the how a missing fetched stamp file causes make to skip checksum verification.\r\n\r\n```\r\n$ ls -la /home/dgoncharov/src/bitcoin/depends/sources/download-stamps/.stamp_fetched-libevent*\r\nls: cannot access '/home/dgoncharov/src/bitcoin/depends/sources/download-stamps/.stamp_fetched-libevent*': No such file or directory\r\n$ make  NO_QT=1 NO_QR=1 NO_ZMQ=1 NO_WALLET=1 NO_BDB=1 NO_SQLITE=1 NO_UPNP=1 NO_NATPMP=1\r\ncopying packages: native_b2 boost libevent\r\nto: /home/dgoncharov/src/bitcoin/depends/x86_64-pc-linux-gnu\r\n$\r\n```\r\n\r\nThis happens because check_or_remove_sources has the following shell code\r\n\r\n```\r\ntest -f $($(package)_fetched) && ( $(build_SHA256SUM) -c $($(package)_fetched) >/dev/null 2>/dev/null || \\                      \r\n    ( echo \"Checksum missing or mismatched for $(package) source. Forcing re-download.\"; \\                                        \r\n      rm -f $($(package)_all_sources) $($(1)_fetched))) || true\r\n      \r\n```\r\nEffectively, this shell code tests presence of the fetched stamp file. If the stamp file is missing no checksum verification is performed and the sources are considered good.",
      "created_at" : "2021-08-13T15:58:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22134#issuecomment-898562476",
      "id" : 898562476,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22134",
      "node_id" : "IC_kwDOABII5841jvms",
      "performed_via_github_app" : null,
      "updated_at" : "2021-08-13T15:58:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/898562476",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74753?v=4",
         "events_url" : "https://api.github.com/users/dgoncharov/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgoncharov/followers",
         "following_url" : "https://api.github.com/users/dgoncharov/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgoncharov/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgoncharov",
         "id" : 74753,
         "login" : "dgoncharov",
         "node_id" : "MDQ6VXNlcjc0NzUz",
         "organizations_url" : "https://api.github.com/users/dgoncharov/orgs",
         "received_events_url" : "https://api.github.com/users/dgoncharov/received_events",
         "repos_url" : "https://api.github.com/users/dgoncharov/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgoncharov/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgoncharov/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgoncharov"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "@hebasto, @theuni any thoughts on this? I think it'd be worthwhile to remove such a long, unnecessary step: https://github.com/bitcoin/bitcoin/issues/22134#issuecomment-858627105",
      "created_at" : "2022-02-07T21:34:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22134#issuecomment-1031949133",
      "id" : 1031949133,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22134",
      "node_id" : "IC_kwDOABII5849gktN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1031949133/reactions"
      },
      "updated_at" : "2022-02-07T21:34:16Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1031949133",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3445290?v=4",
         "events_url" : "https://api.github.com/users/dongcarl/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dongcarl/followers",
         "following_url" : "https://api.github.com/users/dongcarl/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dongcarl/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dongcarl",
         "id" : 3445290,
         "login" : "dongcarl",
         "node_id" : "MDQ6VXNlcjM0NDUyOTA=",
         "organizations_url" : "https://api.github.com/users/dongcarl/orgs",
         "received_events_url" : "https://api.github.com/users/dongcarl/received_events",
         "repos_url" : "https://api.github.com/users/dongcarl/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dongcarl/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dongcarl/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dongcarl"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @hebasto, @theuni any thoughts on this? I think it'd be worthwhile to remove such a long, unnecessary step: [#22134 (comment)](https://github.com/bitcoin/bitcoin/issues/22134#issuecomment-858627105)\r\n\r\nOnly a few developers in this repo really could concern about efficiency of consequential runs of `make -C depends`. And for me it is not an issue at all. And benefits of changing makefiles are significantly less in comparison to enabling `ccache` in depends.\r\n\r\n> Rebuild of .stamp_$(final_build_id) is the expensive one.\r\n> It copies all the cached tarballs and unpacks them sequentially, one by one.\r\n\r\nAnd I appreciate such behavior, because when using consequential runs of `make -C depends` with different `NO_<PACKAGE>=1` variables, it guaranties that prefix directory does not contain any leftovers of a previous build.",
      "created_at" : "2022-02-09T18:32:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22134#issuecomment-1034070804",
      "id" : 1034070804,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22134",
      "node_id" : "IC_kwDOABII5849oqsU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1034070804/reactions"
      },
      "updated_at" : "2022-02-09T18:32:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1034070804",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Keeping the behavior intact is an option, given that this apparently does not bother users.\r\ni think, we'd still want to fix skipped checksum verification when the stamp file is absent.\r\nThe comment in the commit says this is needed for travis.\r\nCory or Hennadii, can you please clarify why this copying is still needed?",
      "created_at" : "2022-02-09T23:20:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22134#issuecomment-1034301759",
      "id" : 1034301759,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22134",
      "node_id" : "IC_kwDOABII5849pjE_",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1034301759/reactions"
      },
      "updated_at" : "2022-02-09T23:20:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1034301759",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/74753?v=4",
         "events_url" : "https://api.github.com/users/dgoncharov/events{/privacy}",
         "followers_url" : "https://api.github.com/users/dgoncharov/followers",
         "following_url" : "https://api.github.com/users/dgoncharov/following{/other_user}",
         "gists_url" : "https://api.github.com/users/dgoncharov/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/dgoncharov",
         "id" : 74753,
         "login" : "dgoncharov",
         "node_id" : "MDQ6VXNlcjc0NzUz",
         "organizations_url" : "https://api.github.com/users/dgoncharov/orgs",
         "received_events_url" : "https://api.github.com/users/dgoncharov/received_events",
         "repos_url" : "https://api.github.com/users/dgoncharov/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/dgoncharov/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/dgoncharov/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/dgoncharov"
      }
   }
]
