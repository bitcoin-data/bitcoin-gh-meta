[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16911#discussion_r325919492"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16911"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/325919492"
         }
      },
      "author_association" : "MEMBER",
      "body" : "please remove the consensus #includes as well   ",
      "commit_id" : "cd68594dcdadc195bd2ea9394fa04edfdbdf1149",
      "created_at" : "2019-09-18T22:27:06Z",
      "diff_hunk" : "@@ -219,7 +219,7 @@ ReadKeyValue(CWallet* pwallet, CDataStream& ssKey, CDataStream& ssValue,\n             CWalletTx wtx(nullptr /* pwallet */, MakeTransactionRef());\n             ssValue >> wtx;\n             CValidationState state;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#discussion_r325919492",
      "id" : 325919492,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyNTkxOTQ5Mg==",
      "original_commit_id" : "0d1b7d03c285b620e0561fe00f3ccb2da1862740",
      "original_position" : 3,
      "path" : "src/wallet/walletdb.cpp",
      "position" : null,
      "pull_request_review_id" : 290236045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16911",
      "updated_at" : "2019-09-20T14:14:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/325919492",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK, this reverts to the original check - just check the hash. This might improve loading time if it's a big wallet and the majority of transactions have lots of inputs.",
      "created_at" : "2019-09-18T23:13:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#issuecomment-532901592",
      "id" : 532901592,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16911",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzMjkwMTU5Mg==",
      "updated_at" : "2019-09-18T23:13:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/532901592",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "For reference, the call to `CheckTransaction` was added [here](https://github.com/bitcoin/bitcoin/pull/1895/files#diff-3b5a9b7d780ff672241548edf2888fcdR206) and before [was](https://github.com/bitcoin/bitcoin/pull/1895/files#diff-3b5a9b7d780ff672241548edf2888fcdL244).",
      "created_at" : "2019-09-18T23:16:19Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#issuecomment-532902340",
      "id" : 532902340,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16911",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzMjkwMjM0MA==",
      "updated_at" : "2019-09-18T23:16:19Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/532902340",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#15921](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/15921.html) (validation: Tidy up ValidationState interface by jnewbery)\n* [#9381](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/9381.html) (Remove CWalletTx merging logic from AddToWallet by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-09-19T00:54:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#issuecomment-532920851",
      "id" : 532920851,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16911",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzMjkyMDg1MQ==",
      "updated_at" : "2019-10-09T16:07:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/532920851",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Using my big wallet environment (same one as in #16910), I did 1000 of my wallet loading benchmark (from https://github.com/bitcoin/bitcoin/pull/16910#issuecomment-532886444) and found the mean loading time on master to be 18408.14423 ms, while the mean loading time with this PR is 17870.51767 ms. This is about 0.5 second faster, which is ~3% performance improvement. So removing this check does actually result in faster loads for large wallets. I also did a proper 2 sample t-test to check that the results were statistically significant, and it appears that they are.",
      "created_at" : "2019-09-19T22:09:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#issuecomment-533327639",
      "id" : 533327639,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16911",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzMzMyNzYzOQ==",
      "updated_at" : "2019-09-19T22:09:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/533327639",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16911#discussion_r326602347"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16911"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/326602347"
         }
      },
      "author_association" : "MEMBER",
      "body" : "@achow101 ^",
      "commit_id" : "cd68594dcdadc195bd2ea9394fa04edfdbdf1149",
      "created_at" : "2019-09-20T12:23:15Z",
      "diff_hunk" : "@@ -219,7 +219,7 @@ ReadKeyValue(CWallet* pwallet, CDataStream& ssKey, CDataStream& ssValue,\n             CWalletTx wtx(nullptr /* pwallet */, MakeTransactionRef());\n             ssValue >> wtx;\n             CValidationState state;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#discussion_r326602347",
      "id" : 326602347,
      "in_reply_to_id" : 325919492,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyNjYwMjM0Nw==",
      "original_commit_id" : "0d1b7d03c285b620e0561fe00f3ccb2da1862740",
      "original_position" : 3,
      "path" : "src/wallet/walletdb.cpp",
      "position" : null,
      "pull_request_review_id" : 291127953,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16911",
      "updated_at" : "2019-09-20T14:14:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/326602347",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16911#discussion_r326638607"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16911"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/326638607"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```diff\r\n #include <wallet/walletdb.h>\r\n\r\n-#include <consensus/tx_check.h>\r\n-#include <consensus/validation.h>\r\n #include <fs.h>\r\n #include <key_io.h>\r\n #include <protocol.h>\r\n```",
      "commit_id" : "cd68594dcdadc195bd2ea9394fa04edfdbdf1149",
      "created_at" : "2019-09-20T13:53:15Z",
      "diff_hunk" : "@@ -219,7 +219,7 @@ ReadKeyValue(CWallet* pwallet, CDataStream& ssKey, CDataStream& ssValue,\n             CWalletTx wtx(nullptr /* pwallet */, MakeTransactionRef());\n             ssValue >> wtx;\n             CValidationState state;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#discussion_r326638607",
      "id" : 326638607,
      "in_reply_to_id" : 325919492,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyNjYzODYwNw==",
      "original_commit_id" : "0d1b7d03c285b620e0561fe00f3ccb2da1862740",
      "original_position" : 3,
      "path" : "src/wallet/walletdb.cpp",
      "position" : null,
      "pull_request_review_id" : 291177236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16911",
      "updated_at" : "2019-09-20T14:14:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/326638607",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16911#discussion_r326647024"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16911"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/326647024"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "cd68594dcdadc195bd2ea9394fa04edfdbdf1149",
      "created_at" : "2019-09-20T14:11:12Z",
      "diff_hunk" : "@@ -219,7 +219,7 @@ ReadKeyValue(CWallet* pwallet, CDataStream& ssKey, CDataStream& ssValue,\n             CWalletTx wtx(nullptr /* pwallet */, MakeTransactionRef());\n             ssValue >> wtx;\n             CValidationState state;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#discussion_r326647024",
      "id" : 326647024,
      "in_reply_to_id" : 325919492,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyNjY0NzAyNA==",
      "original_commit_id" : "0d1b7d03c285b620e0561fe00f3ccb2da1862740",
      "original_position" : 3,
      "path" : "src/wallet/walletdb.cpp",
      "position" : null,
      "pull_request_review_id" : 291188628,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16911",
      "updated_at" : "2019-09-20T14:14:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/326647024",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK cd68594dcdadc195bd2ea9394fa04edfdbdf1149",
      "created_at" : "2019-09-20T15:11:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#issuecomment-533593873",
      "id" : 533593873,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16911",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzMzU5Mzg3Mw==",
      "updated_at" : "2019-09-20T15:11:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/533593873",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Whenever a consensus-invalid tx has made it into the wallet (e.g. CVE-2010-5139), the db layer is not the right place to deal with it.\r\n\r\nAlso, stuff like this should probably be tested: https://github.com/bitcoin/bitcoin/blame/f8b0b190aa9d13e93ebfe34b5655dbe8ed8df3d3/src/wallet/walletdb.cpp#L484",
      "created_at" : "2019-09-20T15:26:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#issuecomment-533599938",
      "id" : 533599938,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16911",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzMzU5OTkzOA==",
      "updated_at" : "2019-09-20T15:26:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/533599938",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Whenever a consensus-invalid tx has made it into the wallet (e.g. CVE-2010-5139), the db layer is not the right place to deal with it.\r\n\r\nYet it should probably be dealt with somewhere.\r\n\r\nHow does the behaviour change here affect it?\r\n\r\n(a CVE might not be the best example to use - this would be triggered by any unconfirmed transaction becoming invalid in any softfork)",
      "created_at" : "2019-09-20T23:42:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#issuecomment-533745391",
      "id" : 533745391,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16911",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzMzc0NTM5MQ==",
      "updated_at" : "2019-09-20T23:42:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/533745391",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> > Whenever a consensus-invalid tx has made it into the wallet (e.g. CVE-2010-5139), the db layer is not the right place to deal with it.\r\n> \r\n> Yet it should probably be dealt with somewhere.\r\n> \r\n> How does the behaviour change here affect it?\r\n> \r\n> (a CVE might not be the best example to use - this would be triggered by any unconfirmed transaction becoming invalid in any softfork)\r\n\r\n~~It looks like even having this check at all doesn't do anything. All it does is trigger a rescan, but if the transaction is seen during the rescan, it isn't even updated to be the uncorrupted one found! So all that happens is that a rescan is forced on every start. The offending transactions aren't removed or touched at all. So really, this check doesn't even change anything. If we removed it entirely, it still wouldn't change anything.~~\r\n\r\nEdit: Nope, that was wrong. Just did a test and it looks it does update the tx if it can find it. But for those not in the blockchain or the mempool, they will persist in the wallet unchanged. So actually invalid transactions won't be effected at all.\r\n\r\nIf we actually implemented this check correctly, I think it would make most sense to do it in the resending logic as all we actually care about for invalid transactions are those that aren't in the main chain (either unconfirmed or got reorged out) but remain in the wallet file as rescanning wouldn't detect anything with those.",
      "created_at" : "2019-09-21T00:14:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#issuecomment-533749770",
      "id" : 533749770,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16911",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzMzc0OTc3MA==",
      "updated_at" : "2019-09-21T00:27:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/533749770",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Did some further investigating on the invalid transaction thing.\r\n\r\nInvalid transactions won't be shown in any transaction lists, they aren't added to mapWallet. With this change, such transactions would be added to mapWallet and will thus affect balances and available coins for coin selection.\r\n\r\nBut an important thing to note is that CheckTransaction doesn't fully check a transaction for validity so an invalid transaction could already exist in the wallet that passes CheckTransaction.",
      "created_at" : "2019-09-21T10:57:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#issuecomment-533788594",
      "id" : 533788594,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16911",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzMzc4ODU5NA==",
      "updated_at" : "2019-09-21T10:57:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/533788594",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK cd68594dcdadc195bd2ea9394fa04edfdbdf1149\r\n\r\nA hash is enough to check integrity.\r\n\r\nI think CVEs and potential softforks that invalidate transactions retroactively can be dealt with when they arise.\r\n",
      "created_at" : "2019-10-23T10:05:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16911#issuecomment-545369803",
      "id" : 545369803,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16911",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NTM2OTgwMw==",
      "updated_at" : "2019-10-23T10:05:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/545369803",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
