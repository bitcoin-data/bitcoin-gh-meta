[
   {
      "author_association" : "MEMBER",
      "body" : "~~ACK 36030e0a07b8adac990b38a0b544f54cb150904f, I have not tested the code, but I have reviewed it and it looks OK, I agree it can be merged.~~ Concept ACK. Will test.\r\n\r\nSee: [Special executable prefixes](https://www.freedesktop.org/software/systemd/man/systemd.service.html#ExecStart=)\r\n\r\n`PermissionsStartOnly` is deprecated since `systemd` [v240](https://github.com/systemd/systemd/releases/tag/v240).\r\n\r\nSystemd versions:\r\n- Debian:\r\n  - jessie: `215-17+deb8u13`\r\n  - stretch (via backports): `241-5~bpo9+1`\r\n  - buster: `241-7~deb10u1`\r\n- Ubuntu:\r\n  - xenial: `229-4ubuntu21.21`\r\n  - bionic: `237-3ubuntu10.29`\r\n- Fedora 30: `241-12.git1e19bcd.fc30`\r\n",
      "created_at" : "2019-09-30T11:31:45Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16994#issuecomment-536521287",
      "id" : 536521287,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16994",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjUyMTI4Nw==",
      "updated_at" : "2019-09-30T15:53:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536521287",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16994#discussion_r329541154"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/329541154"
         }
      },
      "author_association" : "MEMBER",
      "body" : "```suggestion\r\nExecStartPre=!/bin/chgrp bitcoin /etc/bitcoin\r\n```",
      "commit_id" : "bd8d659c7f944406865ba2937cab7fad2e88c614",
      "created_at" : "2019-09-30T12:06:49Z",
      "diff_hunk" : "@@ -20,8 +20,7 @@ ExecStart=/usr/bin/bitcoind -daemon \\\n                             -datadir=/var/lib/bitcoind\n \n # Make sure the config directory is readable by the service user\n-PermissionsStartOnly=true\n-ExecStartPre=/bin/chgrp bitcoin /etc/bitcoin\n+!ExecStartPre=/bin/chgrp bitcoin /etc/bitcoin",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16994#discussion_r329541154",
      "id" : 329541154,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyOTU0MTE1NA==",
      "original_commit_id" : "36030e0a07b8adac990b38a0b544f54cb150904f",
      "original_position" : 6,
      "path" : "contrib/init/bitcoind.service",
      "position" : null,
      "pull_request_review_id" : 294926078,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16994",
      "updated_at" : "2019-09-30T12:32:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/329541154",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16994#discussion_r329558881"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16994"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/329558881"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Good catch :grimacing: ",
      "commit_id" : "bd8d659c7f944406865ba2937cab7fad2e88c614",
      "created_at" : "2019-09-30T12:52:03Z",
      "diff_hunk" : "@@ -20,8 +20,7 @@ ExecStart=/usr/bin/bitcoind -daemon \\\n                             -datadir=/var/lib/bitcoind\n \n # Make sure the config directory is readable by the service user\n-PermissionsStartOnly=true\n-ExecStartPre=/bin/chgrp bitcoin /etc/bitcoin\n+!ExecStartPre=/bin/chgrp bitcoin /etc/bitcoin",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16994#discussion_r329558881",
      "id" : 329558881,
      "in_reply_to_id" : 329541154,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyOTU1ODg4MQ==",
      "original_commit_id" : "36030e0a07b8adac990b38a0b544f54cb150904f",
      "original_position" : 6,
      "path" : "contrib/init/bitcoind.service",
      "position" : null,
      "pull_request_review_id" : 294949769,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16994",
      "updated_at" : "2019-09-30T12:52:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/329558881",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/37372069?v=4",
         "events_url" : "https://api.github.com/users/setpill/events{/privacy}",
         "followers_url" : "https://api.github.com/users/setpill/followers",
         "following_url" : "https://api.github.com/users/setpill/following{/other_user}",
         "gists_url" : "https://api.github.com/users/setpill/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/setpill",
         "id" : 37372069,
         "login" : "setpill",
         "node_id" : "MDQ6VXNlcjM3MzcyMDY5",
         "organizations_url" : "https://api.github.com/users/setpill/orgs",
         "received_events_url" : "https://api.github.com/users/setpill/received_events",
         "repos_url" : "https://api.github.com/users/setpill/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/setpill/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/setpill/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/setpill"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "ACK bd8d659c7f944406865ba2937cab7fad2e88c614, tested on Linux Mint 19.2\r\n\r\n``` bash\r\nhebasto@linux-511:~$ systemctl start bitcoind.service\r\nhebasto@linux-511:~$ stat /etc/bitcoin | grep id\r\nAccess: (0710/drwx--x---)  Uid: (    0/    root)   Gid: ( 1002/ bitcoin)\r\n```",
      "created_at" : "2019-09-30T12:54:33Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16994#issuecomment-536547668",
      "id" : 536547668,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16994",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjU0NzY2OA==",
      "updated_at" : "2019-09-30T12:54:33Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536547668",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Do we know what version the prefix syntax was introduced, and if there are operating systems where the current file works but would be broken by this change?\r\n\r\nhttps://github.com/systemd/systemd/pull/10802#issuecomment-439446299 says they don't have plans to drop support for PermissionsStartOnly",
      "created_at" : "2019-09-30T15:26:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16994#issuecomment-536614935",
      "id" : 536614935,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16994",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjYxNDkzNQ==",
      "updated_at" : "2019-09-30T15:26:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536614935",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/7133040?v=4",
         "events_url" : "https://api.github.com/users/ryanofsky/events{/privacy}",
         "followers_url" : "https://api.github.com/users/ryanofsky/followers",
         "following_url" : "https://api.github.com/users/ryanofsky/following{/other_user}",
         "gists_url" : "https://api.github.com/users/ryanofsky/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/ryanofsky",
         "id" : 7133040,
         "login" : "ryanofsky",
         "node_id" : "MDQ6VXNlcjcxMzMwNDA=",
         "organizations_url" : "https://api.github.com/users/ryanofsky/orgs",
         "received_events_url" : "https://api.github.com/users/ryanofsky/received_events",
         "repos_url" : "https://api.github.com/users/ryanofsky/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/ryanofsky/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/ryanofsky/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/ryanofsky"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Do we know what version the prefix syntax was introduced..?\r\n\r\nhttps://github.com/systemd/systemd/pull/6577, since [v235](https://github.com/systemd/systemd/releases/tag/v235).\r\n\r\nSo, jessie and xenial do not comply.",
      "created_at" : "2019-09-30T15:47:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16994#issuecomment-536624645",
      "id" : 536624645,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16994",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjYyNDY0NQ==",
      "updated_at" : "2019-09-30T15:54:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536624645",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/32963518?v=4",
         "events_url" : "https://api.github.com/users/hebasto/events{/privacy}",
         "followers_url" : "https://api.github.com/users/hebasto/followers",
         "following_url" : "https://api.github.com/users/hebasto/following{/other_user}",
         "gists_url" : "https://api.github.com/users/hebasto/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/hebasto",
         "id" : 32963518,
         "login" : "hebasto",
         "node_id" : "MDQ6VXNlcjMyOTYzNTE4",
         "organizations_url" : "https://api.github.com/users/hebasto/orgs",
         "received_events_url" : "https://api.github.com/users/hebasto/received_events",
         "repos_url" : "https://api.github.com/users/hebasto/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/hebasto/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/hebasto/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/hebasto"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Since this file is mostly a suggestion for packagers/sysadmins, would a comment suffice to address pre-v235 situations?",
      "created_at" : "2019-10-01T07:08:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16994#issuecomment-536900760",
      "id" : 536900760,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16994",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjkwMDc2MA==",
      "updated_at" : "2019-10-01T07:08:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536900760",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/37372069?v=4",
         "events_url" : "https://api.github.com/users/setpill/events{/privacy}",
         "followers_url" : "https://api.github.com/users/setpill/followers",
         "following_url" : "https://api.github.com/users/setpill/following{/other_user}",
         "gists_url" : "https://api.github.com/users/setpill/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/setpill",
         "id" : 37372069,
         "login" : "setpill",
         "node_id" : "MDQ6VXNlcjM3MzcyMDY5",
         "organizations_url" : "https://api.github.com/users/setpill/orgs",
         "received_events_url" : "https://api.github.com/users/setpill/received_events",
         "repos_url" : "https://api.github.com/users/setpill/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/setpill/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/setpill/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/setpill"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Then again, if there's no immediate plans for systemd to drop `PermissionsStartOnly`, perhaps it's better to revisit this PR when pre-v235 systems are EOL.",
      "created_at" : "2019-10-01T07:10:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16994#issuecomment-536901508",
      "id" : 536901508,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16994",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNjkwMTUwOA==",
      "updated_at" : "2019-10-01T07:10:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/536901508",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/37372069?v=4",
         "events_url" : "https://api.github.com/users/setpill/events{/privacy}",
         "followers_url" : "https://api.github.com/users/setpill/followers",
         "following_url" : "https://api.github.com/users/setpill/following{/other_user}",
         "gists_url" : "https://api.github.com/users/setpill/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/setpill",
         "id" : 37372069,
         "login" : "setpill",
         "node_id" : "MDQ6VXNlcjM3MzcyMDY5",
         "organizations_url" : "https://api.github.com/users/setpill/orgs",
         "received_events_url" : "https://api.github.com/users/setpill/received_events",
         "repos_url" : "https://api.github.com/users/setpill/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/setpill/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/setpill/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/setpill"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Then again, if there's no immediate plans for systemd to drop PermissionsStartOnly, perhaps it's better to revisit this PR when pre-v235 systems are EOL.\r\n\r\nTend to agree here, if there's no hurry, and everything else is the same, staying with the old configuration option for now will result in the least surprises.",
      "created_at" : "2019-10-01T12:09:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16994#issuecomment-537006196",
      "id" : 537006196,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16994",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzAwNjE5Ng==",
      "updated_at" : "2019-10-01T12:09:07Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537006196",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Then again, if there's no immediate plans for systemd to drop PermissionsStartOnly, perhaps it's better to revisit this PR when pre-v235 systems are EOL.\r\n\r\nCan you close this until then, please?\r\n",
      "created_at" : "2019-10-30T10:34:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16994#issuecomment-547836888",
      "id" : 547836888,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16994",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NzgzNjg4OA==",
      "updated_at" : "2019-10-30T10:34:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/547836888",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/126646?v=4",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "node_id" : "MDQ6VXNlcjEyNjY0Ng==",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   }
]
