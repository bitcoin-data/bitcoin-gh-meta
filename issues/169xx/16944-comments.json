[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK",
      "created_at" : "2019-09-23T19:14:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534243460",
      "id" : 534243460,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDI0MzQ2MA==",
      "updated_at" : "2019-09-23T19:14:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534243460",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/45598?v=4",
         "events_url" : "https://api.github.com/users/jb55/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jb55/followers",
         "following_url" : "https://api.github.com/users/jb55/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jb55/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jb55",
         "id" : 45598,
         "login" : "jb55",
         "node_id" : "MDQ6VXNlcjQ1NTk4",
         "organizations_url" : "https://api.github.com/users/jb55/orgs",
         "received_events_url" : "https://api.github.com/users/jb55/received_events",
         "repos_url" : "https://api.github.com/users/jb55/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jb55/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jb55/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jb55"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Would love to see this happen +1",
      "created_at" : "2019-09-23T19:18:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534244571",
      "id" : 534244571,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDI0NDU3MQ==",
      "updated_at" : "2019-09-23T19:18:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534244571",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/797193?v=4",
         "events_url" : "https://api.github.com/users/nvk/events{/privacy}",
         "followers_url" : "https://api.github.com/users/nvk/followers",
         "following_url" : "https://api.github.com/users/nvk/following{/other_user}",
         "gists_url" : "https://api.github.com/users/nvk/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/nvk",
         "id" : 797193,
         "login" : "nvk",
         "node_id" : "MDQ6VXNlcjc5NzE5Mw==",
         "organizations_url" : "https://api.github.com/users/nvk/orgs",
         "received_events_url" : "https://api.github.com/users/nvk/received_events",
         "repos_url" : "https://api.github.com/users/nvk/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/nvk/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/nvk/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/nvk"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#17518](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17518.html) (refactor, wallet: Nuke coincontrol circular dependency by hebasto)\n* [#17463](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17463.html) (Bugfix: GUI: Restore SendConfirmationDialog button default to \"Yes\" by luke-jr)\n* [#17457](https://drahtbot.github.io/bitcoin_core_issue_redirect/r/17457.html) (gui: Fix manual coin control with multiple wallets loaded by promag)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "created_at" : "2019-09-23T20:01:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534260562",
      "id" : 534260562,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDI2MDU2Mg==",
      "updated_at" : "2019-11-22T02:50:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534260562",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "concept ACK.\r\n\r\nI do however think a proper dialogue will be required to let the user know what's going on at a minimum rather than magic resulting in a clipboard result.\r\n\r\nvery light testing also shows it appears it does what's on the tin. I'll do lots more testing later once approach is settled.",
      "created_at" : "2019-09-23T20:28:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534270538",
      "id" : 534270538,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDI3MDUzOA==",
      "updated_at" : "2019-09-23T20:31:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534270538",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "So as some of you saw, I did some related work quite awhile ago. I have a dialog with support for creating/saving/loading/signing/sending these. It's somewhat modeled after the offline signing UI in Armory. I was never _happy_ with the UI, and I think designing this to be intuitive is really hard, but I think it may already be an improvement over clipboard-only.\r\n\r\nLet me spend a few minutes figuring out what the most recent version is that builds cleanly and works, and I will link it here so people can try it.",
      "created_at" : "2019-09-23T20:58:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534282105",
      "id" : 534282105,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDI4MjEwNQ==",
      "updated_at" : "2019-09-23T20:58:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534282105",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK.",
      "created_at" : "2019-09-23T21:42:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534297117",
      "id" : 534297117,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDI5NzExNw==",
      "updated_at" : "2019-09-23T21:42:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534297117",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Ok, if you'd like to see my work on this, please have a look at https://github.com/gwillen/bitcoin/tree/feature-offline-v2 .\r\n\r\nYou will need to check preferences->wallet->enable offline transaction features. Then you'll get an 'Offline' menu, a new offline transactions dialog box, and a new pair of checkboxes in the 'send' dialog: \"Include watchonly coins\" and \"create offline transaction\" (which is forced on if you include watchonly). If you select the latter, the 'send' button becomes \"Create unsigned\" and will take you to the new dialog.\r\n\r\nThere is still some amount of jank to be ironed out, there are some XXX comments in the source and some missing error handling.\r\n\r\nI've had this vaguely shelved for awhile, but I'd be happy to bring it out and work aggressively on it now if desired; I'd also be happy to bring it out less aggressively and start prepping it as a possible sequel to the PR under discussion here.",
      "created_at" : "2019-09-23T22:20:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534307676",
      "id" : 534307676,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDMwNzY3Ng==",
      "updated_at" : "2019-09-23T22:22:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534307676",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@gwillen can you make a (draft) PR with that branch? If you rebase on top of this, you can probably drop the \"Enable offline transaction features\" checkbox as well as the \"include watchonly coins\" and \"create unsigned \"checkboxes, in favor of only allowing the functionality with watch-only wallets.\r\n\r\nI like how the send button text changes, so I'll steal that for this PR :-)\r\n\r\n<img width=\"898\" alt=\"Schermafbeelding 2019-09-24 om 13 49 21\" src=\"https://user-images.githubusercontent.com/10217/65509165-219dd100-ded2-11e9-8a3e-c6c9c93dc371.png\">\r\n\r\nOnce we have descriptor wallets and better HWI integration, the simple distinction between watch-only and wallets with private keys will no longer work. For example you might be part of a 2 of 3 multisig, with the keys in the wallet. Or maybe you don't have keys in the Core wallet, but your hardware wallet can sign its part via USB.\r\n\r\nSo in terms of your wizard, I would split into two wizards: one for composing & exporting, and one for loading.\r\n\r\n<img width=\"910\" alt=\"Schermafbeelding 2019-09-24 om 14 09 54\" src=\"https://user-images.githubusercontent.com/10217/65511729-1b125800-ded8-11e9-9a77-510e0902fcef.png\">\r\n\r\nThere's probably a step 0 where you attempt to (partially) sign with your own keys and with any connected devices. If that's not enough, then you go to step 1 where you can export the PSBT via clipboard or file system.\r\n\r\nI would introduce a fresh dialog for loading, maybe co-signing and then broadcasting a transaction. ",
      "created_at" : "2019-09-24T12:36:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534538035",
      "id" : 534538035,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDUzODAzNQ==",
      "updated_at" : "2019-09-24T12:39:02Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534538035",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Let's continue the UX brainstom here: #16954",
      "created_at" : "2019-09-24T13:34:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534560388",
      "id" : 534560388,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDU2MDM4OA==",
      "updated_at" : "2019-09-24T13:34:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534560388",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I'm afraid the current version of this PR introduces a bug in `CWallet::ListCoins`.\r\n\r\nFirst, note that `==` has higher precedence than the ternary conditional:\r\n\r\n```\r\n[cling]$ 1 == 2 ? 3 : 4\r\n(int) 4\r\n[cling]$ (1 == 2) ? 3 : 4\r\n(int) 4\r\n[cling]$ 1 == (2 ? 3 : 4)\r\n(bool) false\r\n```\r\n\r\nSecond, some context:\r\n\r\n```\r\nunsigned int IsMine(...);\r\nbool IsWalletFlagSet(...);\r\nint ISMINE_WATCH_ONLY = 1;\r\nint ISMINE_SPENDABLE = 2;\r\n```\r\n\r\nThis is being suggested in this PR:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/41c5165aa30d65d40ef3921bf4760c13f5d42b21/src/wallet/wallet.cpp#L2592-L2593\r\n\r\nShortened to highlight the issue:\r\n\r\n```\r\nif (... &&\r\n    IsMine(it->second.tx->vout[output.n]) ==\r\n      IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS) ?\r\n      ISMINE_WATCH_ONLY : ISMINE_SPENDABLE) {\r\n```\r\n\r\nWhich -- given the precedence rules -- is equivalent to:\r\n\r\n```\r\nif (... &&\r\n    (IsMine(it->second.tx->vout[output.n]) ==\r\n      IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS)) ?\r\n      ISMINE_WATCH_ONLY : ISMINE_SPENDABLE) {\r\n```\r\n\r\nWhich -- given that `ISMINE_WATCH_ONLY` and `ISMINE_SPENDABLE` are both non-zero integer constants (`1` and `2`) that will be evaluated in a boolean context -- is equivalent to:\r\n\r\n```\r\nif (... && true) {\r\n```\r\n\r\nOr simply:\r\n\r\n```\r\nif (...) {\r\n```\r\n\r\n:)\r\n\r\nI think the intention was:\r\n\r\n```\r\nif (... &&\r\n    IsMine(it->second.tx->vout[output.n]) ==\r\n      (IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS) ?\r\n      ISMINE_WATCH_ONLY : ISMINE_SPENDABLE)) {\r\n```\r\n\r\nCould that be the case? :)\r\n\r\n",
      "created_at" : "2019-09-25T11:23:07Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-534976077",
      "id" : 534976077,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNDk3NjA3Nw==",
      "updated_at" : "2019-09-25T11:26:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/534976077",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328116392"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328116392"
         }
      },
      "author_association" : "MEMBER",
      "body" : "As @practicalswift notes you likely wanted parenths around this new clause",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-09-25T13:19:04Z",
      "diff_hunk" : "@@ -2590,7 +2590,7 @@ std::map<CTxDestination, std::vector<COutput>> CWallet::ListCoins(interfaces::Ch\n         if (it != mapWallet.end()) {\n             int depth = it->second.GetDepthInMainChain(locked_chain);\n             if (depth >= 0 && output.n < it->second.tx->vout.size() &&\n-                IsMine(it->second.tx->vout[output.n]) == ISMINE_SPENDABLE) {\n+                IsMine(it->second.tx->vout[output.n]) == IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS) ? ISMINE_WATCH_ONLY : ISMINE_SPENDABLE) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328116392",
      "id" : 328116392,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyODExNjM5Mg==",
      "original_commit_id" : "0e88841b33dcb0865690fb1316f22a16aa27d8a9",
      "original_position" : 14,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 293068945,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328116392",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328117961"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328117961"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: annotate the optional bool args for clarity",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-09-25T13:22:05Z",
      "diff_hunk" : "@@ -383,17 +386,36 @@ void SendCoinsDialog::on_sendButton_clicked()\n         return;\n     }\n \n-    // now send the prepared transaction\n-    WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n-    // process sendStatus and on error generate message shown to user\n-    processSendCoinsReturn(sendStatus);\n+    bool done = false;\n+    if (model->privateKeysDisabled()) {\n+        done = true;\n+        CMutableTransaction mtx = CMutableTransaction{*(currentTransaction.getWtx())};\n+        PartiallySignedTransaction psbtx(mtx);\n+        bool complete = false;\n+        const TransactionError err = model->wallet().fillPSBT(psbtx, complete, SIGHASH_ALL, false, true);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328117961",
      "id" : 328117961,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyODExNzk2MQ==",
      "original_commit_id" : "078583e2c5a174ea081333f46790cf2dfdc3c738",
      "original_position" : 42,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 293068945,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328117961",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328121141"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328121141"
         }
      },
      "author_association" : "MEMBER",
      "body" : "`done` isn't really helping me parse what is going on here, maybe call it `send_failure` and reverse the meaning?",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-09-25T13:27:59Z",
      "diff_hunk" : "@@ -383,17 +386,36 @@ void SendCoinsDialog::on_sendButton_clicked()\n         return;\n     }\n \n-    // now send the prepared transaction\n-    WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n-    // process sendStatus and on error generate message shown to user\n-    processSendCoinsReturn(sendStatus);\n+    bool done = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328121141",
      "id" : 328121141,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyODEyMTE0MQ==",
      "original_commit_id" : "078583e2c5a174ea081333f46790cf2dfdc3c738",
      "original_position" : 36,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 293068945,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328121141",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The final dialogue should have the \"Yes\" text replace with \"Copy unsigned tx to clipboard\" or something self-explanatory.\r\n\r\nReally \"Yes\" should be \"Send\" in the average case anyways(think I might PR that change separately)",
      "created_at" : "2019-09-25T13:36:39Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535026260",
      "id" : 535026260,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTAyNjI2MA==",
      "updated_at" : "2019-09-25T13:36:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535026260",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328358110"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328358110"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should be \"clipboard\" :)",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-09-25T21:56:09Z",
      "diff_hunk" : "@@ -383,17 +392,36 @@ void SendCoinsDialog::on_sendButton_clicked()\n         return;\n     }\n \n-    // now send the prepared transaction\n-    WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n-    // process sendStatus and on error generate message shown to user\n-    processSendCoinsReturn(sendStatus);\n+    bool done = false;\n+    if (model->privateKeysDisabled()) {\n+        done = true;\n+        CMutableTransaction mtx = CMutableTransaction{*(currentTransaction.getWtx())};\n+        PartiallySignedTransaction psbtx(mtx);\n+        bool complete = false;\n+        const TransactionError err = model->wallet().fillPSBT(psbtx, complete, SIGHASH_ALL, false, true);\n+        assert(!complete);\n+        assert(err == TransactionError::OK);\n+        // Serialize the PSBT\n+        CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n+        ssTx << psbtx;\n+        GUIUtil::setClipboard(EncodeBase64(ssTx.str()).c_str());\n+        Q_EMIT message(tr(\"PSBT copied\"), \"Copied to clipbboard\", CClientUIInterface::MSG_INFORMATION);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r328358110",
      "id" : 328358110,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyODM1ODExMA==",
      "original_commit_id" : "41c5165aa30d65d40ef3921bf4760c13f5d42b21",
      "original_position" : 62,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 293387152,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/328358110",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/7826565?v=4",
         "events_url" : "https://api.github.com/users/practicalswift/events{/privacy}",
         "followers_url" : "https://api.github.com/users/practicalswift/followers",
         "following_url" : "https://api.github.com/users/practicalswift/following{/other_user}",
         "gists_url" : "https://api.github.com/users/practicalswift/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/practicalswift",
         "id" : 7826565,
         "login" : "practicalswift",
         "node_id" : "MDQ6VXNlcjc4MjY1NjU=",
         "organizations_url" : "https://api.github.com/users/practicalswift/orgs",
         "received_events_url" : "https://api.github.com/users/practicalswift/received_events",
         "repos_url" : "https://api.github.com/users/practicalswift/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/practicalswift/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/practicalswift/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/practicalswift"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Fixed the precedence bug @practicalswift found.\r\n\r\nI added some additional copy:\r\n<img width=\"391\" alt=\"Schermafbeelding 2019-09-26 om 11 15 42\" src=\"https://user-images.githubusercontent.com/10217/65675777-04424180-e04f-11e9-9bd2-426104c2bda8.png\">\r\n\r\n<img width=\"627\" alt=\"Schermafbeelding 2019-09-26 om 11 30 25\" src=\"https://user-images.githubusercontent.com/10217/65676974-14f3b700-e051-11e9-91d4-479afd086d30.png\">\r\n\r\nWith that I don't think it's necessary to show a dialog with the PSBT text. See also #16966 for a more rigorous approach (I'm trying to keep that an easy rebase), where it will be easier to integrate @gwillen's PSBT management changes (save to disk, check progress, etc).",
      "created_at" : "2019-09-26T09:46:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535427802",
      "id" : 535427802,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTQyNzgwMg==",
      "updated_at" : "2019-09-26T09:46:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535427802",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "\"e.g., and offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet\"\r\n\r\nI think that change would make me happy.",
      "created_at" : "2019-09-26T14:12:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535521894",
      "id" : 535521894,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTUyMTg5NA==",
      "updated_at" : "2019-09-26T14:12:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535521894",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@instagibbs done (I didn't update the screenshots)",
      "created_at" : "2019-09-26T14:27:30Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535529063",
      "id" : 535529063,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTUyOTA2Mw==",
      "updated_at" : "2019-09-26T14:27:30Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535529063",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "tACK https://github.com/bitcoin/bitcoin/pull/16944/commits/da869592ecf82f8a03eb4ab2339d6bffa3dcea58\r\n\r\nRan both watch-only and non-watch-only modes, tested coin control in watch-only mode, tested a Core -> HWI -> Core round-trip and successfully finalized a PSBT with the desired properties.",
      "created_at" : "2019-09-26T15:02:58Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-535546393",
      "id" : 535546393,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNTU0NjM5Mw==",
      "updated_at" : "2019-09-26T15:02:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/535546393",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r329785733"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/329785733"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This doesn't need to be outside of the `else` block since it isn't used in the no private keys case.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-09-30T21:04:23Z",
      "diff_hunk" : "@@ -383,17 +408,35 @@ void SendCoinsDialog::on_sendButton_clicked()\n         return;\n     }\n \n-    // now send the prepared transaction\n-    WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n-    // process sendStatus and on error generate message shown to user\n-    processSendCoinsReturn(sendStatus);\n+    bool send_failure = false;\n+    if (model->privateKeysDisabled()) {\n+        CMutableTransaction mtx = CMutableTransaction{*(currentTransaction.getWtx())};\n+        PartiallySignedTransaction psbtx(mtx);\n+        bool complete = false;\n+        const TransactionError err = model->wallet().fillPSBT(psbtx, complete, SIGHASH_ALL, false /* sign */, true /* bip32derivs */);\n+        assert(!complete);\n+        assert(err == TransactionError::OK);\n+        // Serialize the PSBT\n+        CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n+        ssTx << psbtx;\n+        GUIUtil::setClipboard(EncodeBase64(ssTx.str()).c_str());\n+        Q_EMIT message(tr(\"PSBT copied\"), \"Copied to clipboard\", CClientUIInterface::MSG_INFORMATION);\n+    } else {\n+        // now send the prepared transaction\n+        WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n+        // process sendStatus and on error generate message shown to user\n+        processSendCoinsReturn(sendStatus);\n \n-    if (sendStatus.status == WalletModel::OK)\n-    {\n+        if (sendStatus.status == WalletModel::OK) {\n+            Q_EMIT coinsSent(currentTransaction.getWtx()->GetHash());\n+        } else {\n+            send_failure = true;\n+        }\n+    }\n+    if (!send_failure) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r329785733",
      "id" : 329785733,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMyOTc4NTczMw==",
      "original_commit_id" : "da869592ecf82f8a03eb4ab2339d6bffa3dcea58",
      "original_position" : 95,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 97,
      "pull_request_review_id" : 295250484,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/329785733",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r330122504"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/330122504"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In the no private keys case we also clear the form. We just assume (with an `assert`) that PSBT creation can never fail, which is why `send_failure` is always `false`. ",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-01T15:26:09Z",
      "diff_hunk" : "@@ -383,17 +408,35 @@ void SendCoinsDialog::on_sendButton_clicked()\n         return;\n     }\n \n-    // now send the prepared transaction\n-    WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n-    // process sendStatus and on error generate message shown to user\n-    processSendCoinsReturn(sendStatus);\n+    bool send_failure = false;\n+    if (model->privateKeysDisabled()) {\n+        CMutableTransaction mtx = CMutableTransaction{*(currentTransaction.getWtx())};\n+        PartiallySignedTransaction psbtx(mtx);\n+        bool complete = false;\n+        const TransactionError err = model->wallet().fillPSBT(psbtx, complete, SIGHASH_ALL, false /* sign */, true /* bip32derivs */);\n+        assert(!complete);\n+        assert(err == TransactionError::OK);\n+        // Serialize the PSBT\n+        CDataStream ssTx(SER_NETWORK, PROTOCOL_VERSION);\n+        ssTx << psbtx;\n+        GUIUtil::setClipboard(EncodeBase64(ssTx.str()).c_str());\n+        Q_EMIT message(tr(\"PSBT copied\"), \"Copied to clipboard\", CClientUIInterface::MSG_INFORMATION);\n+    } else {\n+        // now send the prepared transaction\n+        WalletModel::SendCoinsReturn sendStatus = model->sendCoins(currentTransaction);\n+        // process sendStatus and on error generate message shown to user\n+        processSendCoinsReturn(sendStatus);\n \n-    if (sendStatus.status == WalletModel::OK)\n-    {\n+        if (sendStatus.status == WalletModel::OK) {\n+            Q_EMIT coinsSent(currentTransaction.getWtx()->GetHash());\n+        } else {\n+            send_failure = true;\n+        }\n+    }\n+    if (!send_failure) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r330122504",
      "id" : 330122504,
      "in_reply_to_id" : 329785733,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzMDEyMjUwNA==",
      "original_commit_id" : "da869592ecf82f8a03eb4ab2339d6bffa3dcea58",
      "original_position" : 95,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 97,
      "pull_request_review_id" : 295691930,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/330122504",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The confirmation dialog is a `QMessageBox`, which isn't very flexible. #16966 is a better place to tweak things (and I want to avoid rebase hell there).",
      "created_at" : "2019-10-01T15:28:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537091541",
      "id" : 537091541,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzA5MTU0MQ==",
      "updated_at" : "2019-10-01T15:28:53Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537091541",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What am I missing?\r\n```\r\ngetbalances\r\n{\r\n  \"mine\": {\r\n    \"trusted\": 0.00000000,\r\n    \"untrusted_pending\": 0.00000000,\r\n    \"immature\": 0.00000000\r\n  },\r\n  \"watchonly\": {\r\n    \"trusted\": 11202.50000000,\r\n    \"untrusted_pending\": 0.00000000,\r\n    \"immature\": 1250.00003320\r\n  }\r\n}\r\n```\r\nAnd then I get \"The amount exceeds your balance.\"",
      "created_at" : "2019-10-01T22:33:09Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537260062",
      "id" : 537260062,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzI2MDA2Mg==",
      "updated_at" : "2019-10-01T22:33:09Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537260062",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "My experience was that coin selection refused to select watchonly coins when I wanted it to, even if I set watchonly to true in the coincontrol object passed to preparetransaction (and hence createtransaction), unless I made some more-invasive changes, linked below. I'm not sure if that's what you're seeing, @promag. \r\n\r\nIn particular, see my changes to CWallet::ListCoins: https://github.com/gwillen/bitcoin/compare/35991b162fd142d76d83e672002846c8a40eb794...gwillen:feature-offline-v2#diff-b2bb174788c7409b671c46ccc86034bdR2362\r\n\r\nwhich aren't quite the same as the ones in this PR. When I call AvailableCoins, I force on fWatchOnly in the CCoinControl object that I hand it, which the code did not previously do even if it was called for (I had to add a flag to ListCoins.) Curiously, it seems like it worked for me _without_ the spendability-related changes that this PR makes. Not sure what's up there.",
      "created_at" : "2019-10-02T03:41:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537321922",
      "id" : 537321922,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzMyMTkyMg==",
      "updated_at" : "2019-10-02T03:42:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537321922",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/458997?v=4",
         "events_url" : "https://api.github.com/users/gwillen/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gwillen/followers",
         "following_url" : "https://api.github.com/users/gwillen/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gwillen/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gwillen",
         "id" : 458997,
         "login" : "gwillen",
         "node_id" : "MDQ6VXNlcjQ1ODk5Nw==",
         "organizations_url" : "https://api.github.com/users/gwillen/orgs",
         "received_events_url" : "https://api.github.com/users/gwillen/received_events",
         "repos_url" : "https://api.github.com/users/gwillen/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gwillen/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gwillen/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gwillen"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag how did you insert the watch-only keys into that wallet? I've only tested with [HWI](https://github.com/bitcoin-core/HWI) which imports as follows:\r\n\r\n`[{\"desc\": \"wpkh([8...4P/0/*)#36sal9a4\", \"internal\": false, \"range\": [0, 1000], \"timestamp\": \"now\", \"keypool\": true, \"watchonly\": true}, {\"desc\": \"wpkh([80..P/1/*)#nl2rc26w\", \"internal\": true, \"range\": [0, 1000], \"timestamp\": \"now\", \"keypool\": true, \"watchonly\": true}]`\r\n\r\nWhat does `getaddressinfo` tell you about the coins you're trying to spend?\r\n\r\nDoes `walletcreatefundedpsbt` fail the same way?",
      "created_at" : "2019-10-02T10:13:06Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537428633",
      "id" : 537428633,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzQyODYzMw==",
      "updated_at" : "2019-10-02T10:13:06Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537428633",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "needs rebase",
      "created_at" : "2019-10-02T14:53:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537531165",
      "id" : 537531165,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzUzMTE2NQ==",
      "updated_at" : "2019-10-02T14:53:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537531165",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-10-02T14:59:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537534197",
      "id" : 537534197,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzUzNDE5Nw==",
      "updated_at" : "2019-10-02T14:59:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537534197",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors result of `getaddressinfo`:\r\n\r\n```\r\n{\r\n  \"address\": \"2N9wHFC4dSkZMu3BCspQkApJ9Pf4coHQWUF\",\r\n  \"scriptPubKey\": \"a914b7155eadf2015c0fe4d1e17c4e29d5d58659a9d987\",\r\n  \"ismine\": false,\r\n  \"solvable\": true,\r\n  \"desc\": \"sh(wpkh([528979b9]03dce9cd688fd0a9f6dac92627691eb609b8096123455676b5b57db6abaa32f666))#w8dysyn3\",\r\n  \"iswatchonly\": true,\r\n  \"isscript\": true,\r\n  \"iswitness\": false,\r\n  \"script\": \"witness_v0_keyhash\",\r\n  \"hex\": \"0014528979b9bff424bdefb6e7d6cf98f692eb5a9d05\",\r\n  \"pubkey\": \"03dce9cd688fd0a9f6dac92627691eb609b8096123455676b5b57db6abaa32f666\",\r\n  \"embedded\": {\r\n    \"isscript\": false,\r\n    \"iswitness\": true,\r\n    \"witness_version\": 0,\r\n    \"witness_program\": \"528979b9bff424bdefb6e7d6cf98f692eb5a9d05\",\r\n    \"pubkey\": \"03dce9cd688fd0a9f6dac92627691eb609b8096123455676b5b57db6abaa32f666\",\r\n    \"address\": \"bcrt1q22yhnwdl7sjtmmakultvlx8kjt4448g9nrg59w\",\r\n    \"scriptPubKey\": \"0014528979b9bff424bdefb6e7d6cf98f692eb5a9d05\"\r\n  },\r\n  \"label\": \"\",\r\n  \"ischange\": false,\r\n  \"timestamp\": 1,\r\n  \"labels\": [\r\n    {\r\n      \"name\": \"\",\r\n      \"purpose\": \"receive\"\r\n    }\r\n  ]\r\n}\r\n```\r\nI've used `importpubkey`.\r\n\r\n> Does `walletcreatefundedpsbt` fail the same way?\r\n\r\nI'll try it.",
      "created_at" : "2019-10-02T15:43:28Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537554079",
      "id" : 537554079,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzNzU1NDA3OQ==",
      "updated_at" : "2019-10-02T15:43:28Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/537554079",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag able to reproduce issue? I'm willing to help debug.",
      "created_at" : "2019-10-08T15:29:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-539569112",
      "id" : 539569112,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzOTU2OTExMg==",
      "updated_at" : "2019-10-08T15:29:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/539569112",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> @promag able to reproduce issue?\r\n\r\n@instagibbs no, currently it's working ð",
      "created_at" : "2019-10-08T17:40:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-539623657",
      "id" : 539623657,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzOTYyMzY1Nw==",
      "updated_at" : "2019-10-08T17:40:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/539623657",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "code review and tACK 428bdc8041e2c1479b650207110de081a91a19eb\r\n\r\nTested:\r\n1) wallet with privkeys, button is \"Send\", coin control works as intended\r\n2) wallet with imported descriptors, button lets you make psbt(that I am able to sign remote, and finalize), coin control works as expected\r\n3) wallet with imported addresses only, button also \"Create unsigned\" but no funds available, nothing shows up in coin control either",
      "created_at" : "2019-10-08T20:50:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-539698694",
      "id" : 539698694,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDUzOTY5ODY5NA==",
      "updated_at" : "2019-10-08T20:52:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/539698694",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@Sjors and @gwillen thanks for working on this!  I use both the GUI and a Bitcoin Core-based cold wallet, so I'm very appreciative of this type of improvement.\r\n\r\nNit-ish.  If I try to create an unsigned spend by clicking \"Use available balance\" and checking \"Subtract fee from amount\", my transaction shouldn't have a change output.  However, on a wallet where I haven't created a keypool, I get an error message about not having a change address.\r\n\r\n![2019-10-09-10_09_12_440747090](https://user-images.githubusercontent.com/61096/66516633-30ad8300-ea7d-11e9-8c21-83697fa75e47.png)\r\n\r\nI also get a second error after that error (\"Transaction creation failed\") which seems like error message overkill.\r\n\r\nAfter importing a key to the keypool, this generated the prompt as expected.  However, I hit cancel, tried again, and it failed with the above error message.  It seems it marked the change address it allocated as used even though (1) the transaction didn't include a change address and (2) the PSBT was never sent to the clipboard (so, even if there had been a change address, it would never have been user-accessible).\r\n\r\nAfter importing another single key into the keypool and this time not cancelling, it worked as expected.  I was able to take the PSBT from the clipboard, run it through my other wallet's `walletprocesspsbt`, copy it back, run `finalizepsbt`, run `sendrawtransaction`, and verify it entered the mempool of my connected regtest node.\r\n\r\nI also tried this on a mixed wallet with some private keys and some watch-only keys, and I can confirm that it doesn't work there (as it shouldn't, per the OP).  For reference, I ran everything manually (no HWI) and only tested single-sig on regtest.\r\n\r\nThanks again for working on this!",
      "created_at" : "2019-10-09T20:46:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-540187262",
      "id" : 540187262,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MDE4NzI2Mg==",
      "updated_at" : "2019-10-09T20:46:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540187262",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/61096?v=4",
         "events_url" : "https://api.github.com/users/harding/events{/privacy}",
         "followers_url" : "https://api.github.com/users/harding/followers",
         "following_url" : "https://api.github.com/users/harding/following{/other_user}",
         "gists_url" : "https://api.github.com/users/harding/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/harding",
         "id" : 61096,
         "login" : "harding",
         "node_id" : "MDQ6VXNlcjYxMDk2",
         "organizations_url" : "https://api.github.com/users/harding/orgs",
         "received_events_url" : "https://api.github.com/users/harding/received_events",
         "repos_url" : "https://api.github.com/users/harding/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/harding/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/harding/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/harding"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "The wallet seems a bit overzealous on trying to top up the keypool. I would prefer to punt this particular bug until after #16341, unless @achow101 thinks a fix won't create rebase hell for him.",
      "created_at" : "2019-10-10T13:53:35Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-540595431",
      "id" : 540595431,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MDU5NTQzMQ==",
      "updated_at" : "2019-10-10T13:53:35Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540595431",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I get an error message about not having a change address\r\n\r\nYeah also got that one. @Sjors I think that, regardless of #16341, a solution would be nice.",
      "created_at" : "2019-10-10T13:59:51Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-540599353",
      "id" : 540599353,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MDU5OTM1Mw==",
      "updated_at" : "2019-10-10T13:59:51Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/540599353",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I reproduced the issue by creating a watch-only wallet without a keypool (using HWI's `--nokeypool` feature). Added a commit to address this.",
      "created_at" : "2019-10-11T10:49:47Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-541015526",
      "id" : 541015526,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0MTAxNTUyNg==",
      "updated_at" : "2019-10-11T10:49:47Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/541015526",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334227902"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334227902"
         }
      },
      "author_association" : "MEMBER",
      "body" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378\r\n\r\nWhy was this changed?",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-12T08:45:11Z",
      "diff_hunk" : "@@ -2969,7 +2969,9 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n             // Create change script that will be used if we need change\n             // TODO: pass in scriptChange instead of reservedest so\n             // change transaction isn't always pay-to-bitcoin-address\n-            CScript scriptChange;\n+            CScript scriptChange = CScript();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334227902",
      "id" : 334227902,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDIyNzkwMg==",
      "original_commit_id" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 300994746,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334227902",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334228153"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334228153"
         }
      },
      "author_association" : "MEMBER",
      "body" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378\r\n\r\nnit `bool failed_to_get_change_address{false}`.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-12T08:53:14Z",
      "diff_hunk" : "@@ -2969,7 +2969,9 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n             // Create change script that will be used if we need change\n             // TODO: pass in scriptChange instead of reservedest so\n             // change transaction isn't always pay-to-bitcoin-address\n-            CScript scriptChange;\n+            CScript scriptChange = CScript();\n+            bool failed_to_get_change_address = false;",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334228153",
      "id" : 334228153,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDIyODE1Mw==",
      "original_commit_id" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378",
      "original_position" : 6,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 300994746,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334228153",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334228541"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334228541"
         }
      },
      "author_association" : "MEMBER",
      "body" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378\r\n\r\nI think you don't need this, you can write the reason in `strFailReason`.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-12T09:04:13Z",
      "diff_hunk" : "@@ -2969,7 +2969,9 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n             // Create change script that will be used if we need change\n             // TODO: pass in scriptChange instead of reservedest so\n             // change transaction isn't always pay-to-bitcoin-address\n-            CScript scriptChange;\n+            CScript scriptChange = CScript();\n+            bool failed_to_get_change_address = false;\n+            std::string failed_to_get_change_address_reason = \"\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334228541",
      "id" : 334228541,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDIyODU0MQ==",
      "original_commit_id" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378",
      "original_position" : 7,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 300994746,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334228541",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334228750"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334228750"
         }
      },
      "author_association" : "MEMBER",
      "body" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378\r\n\r\nCould also test it works with `changeAddress` option?",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-12T09:10:21Z",
      "diff_hunk" : "@@ -82,5 +82,28 @@ def run_test(self):\n         assert_equal(wi['keypoolsize_hd_internal'], 100)\n         assert_equal(wi['keypoolsize'], 100)\n \n+        # create a blank wallet\n+        nodes[0].createwallet(wallet_name='w2', blank=True)\n+        w2 = nodes[0].get_wallet_rpc('w2')\n+\n+        # refer to initial wallet as w1\n+        w1 = nodes[0].get_wallet_rpc('')\n+\n+        # import private key and fund it\n+        address = addr.pop()\n+        privkey = w1.dumpprivkey(address)\n+        res = w2.importmulti([{'scriptPubKey': {'address': address}, 'keys': [privkey], 'timestamp': 'now'}])\n+        assert_equal(res[0]['success'], True)\n+        w1.walletpassphrase('test', 100)\n+        res = w1.sendtoaddress(address=address, amount=0.1)\n+        nodes[0].generate(1)\n+\n+        # creating a transaction with change should not be possible\n+        assert_raises_rpc_error(-4, \"Can't generate a change-address key. No keys in the internal keypool and can't generate any keys.\", w2.walletcreatefundedpsbt, inputs=[], outputs=[{addr.pop(): 0.05}], options={\"subtractFeeFromOutputs\": [0]})\n+\n+        # creating a transaction without change should still be possible\n+        res = w2.walletcreatefundedpsbt(inputs=[], outputs=[{addr.pop(): 0.1}], options={\"subtractFeeFromOutputs\": [0]})",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334228750",
      "id" : 334228750,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDIyODc1MA==",
      "original_commit_id" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378",
      "original_position" : 43,
      "path" : "test/functional/wallet_keypool.py",
      "position" : null,
      "pull_request_review_id" : 300994746,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334228750",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334228774"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334228774"
         }
      },
      "author_association" : "MEMBER",
      "body" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378\r\n\r\nunrelated, I wonder why this is not translated.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-12T09:11:18Z",
      "diff_hunk" : "@@ -2982,21 +2984,23 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n                 //  rediscover unknown transactions that were written with keys of ours to recover\n                 //  post-backup change.\n \n-                // Reserve a new key pair from key pool\n+                // Reserve a new key pair from key pool. If it fails, provide a dummy\n+                // destination in case we don't need change.\n                 if (!CanGetAddresses(true)) {\n-                    strFailReason = _(\"Can't generate a change-address key. No keys in the internal keypool and can't generate any keys.\").translated;\n-                    return false;\n-                }\n-                CTxDestination dest;\n-                const OutputType change_type = TransactionChangeType(coin_control.m_change_type ? *coin_control.m_change_type : m_default_change_type, vecSend);\n-                bool ret = reservedest.GetReservedDestination(change_type, dest, true);\n-                if (!ret)\n-                {\n-                    strFailReason = \"Keypool ran out, please call keypoolrefill first\";\n-                    return false;\n-                }\n+                    failed_to_get_change_address = true;\n+                    failed_to_get_change_address_reason = _(\"Can't generate a change-address key. No keys in the internal keypool and can't generate any keys.\").translated;\n+                } else {\n+                    CTxDestination dest;\n+                    const OutputType change_type = TransactionChangeType(coin_control.m_change_type ? *coin_control.m_change_type : m_default_change_type, vecSend);\n+                    bool ret = reservedest.GetReservedDestination(change_type, dest, true);\n+                    if (ret) {\n+                        scriptChange = GetScriptForDestination(dest);\n+                    } else {\n+                        failed_to_get_change_address = true;\n+                        failed_to_get_change_address_reason = \"Keypool ran out, please call keypoolrefill first\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334228774",
      "id" : 334228774,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDIyODc3NA==",
      "original_commit_id" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378",
      "original_position" : 40,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 300994746,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334228774",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334230433"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334230433"
         }
      },
      "author_association" : "MEMBER",
      "body" : "So it's not undefined when passed into coin selection.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-12T10:00:48Z",
      "diff_hunk" : "@@ -2969,7 +2969,9 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n             // Create change script that will be used if we need change\n             // TODO: pass in scriptChange instead of reservedest so\n             // change transaction isn't always pay-to-bitcoin-address\n-            CScript scriptChange;\n+            CScript scriptChange = CScript();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334230433",
      "id" : 334230433,
      "in_reply_to_id" : 334227902,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDIzMDQzMw==",
      "original_commit_id" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 300997821,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334230433",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334230594"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334230594"
         }
      },
      "author_association" : "MEMBER",
      "body" : "The empty constructor was already being called right?",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-12T10:06:54Z",
      "diff_hunk" : "@@ -2969,7 +2969,9 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n             // Create change script that will be used if we need change\n             // TODO: pass in scriptChange instead of reservedest so\n             // change transaction isn't always pay-to-bitcoin-address\n-            CScript scriptChange;\n+            CScript scriptChange = CScript();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334230594",
      "id" : 334230594,
      "in_reply_to_id" : 334227902,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDIzMDU5NA==",
      "original_commit_id" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 300998033,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334230594",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334231039"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334231039"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-12T10:17:28Z",
      "diff_hunk" : "@@ -82,5 +82,28 @@ def run_test(self):\n         assert_equal(wi['keypoolsize_hd_internal'], 100)\n         assert_equal(wi['keypoolsize'], 100)\n \n+        # create a blank wallet\n+        nodes[0].createwallet(wallet_name='w2', blank=True)\n+        w2 = nodes[0].get_wallet_rpc('w2')\n+\n+        # refer to initial wallet as w1\n+        w1 = nodes[0].get_wallet_rpc('')\n+\n+        # import private key and fund it\n+        address = addr.pop()\n+        privkey = w1.dumpprivkey(address)\n+        res = w2.importmulti([{'scriptPubKey': {'address': address}, 'keys': [privkey], 'timestamp': 'now'}])\n+        assert_equal(res[0]['success'], True)\n+        w1.walletpassphrase('test', 100)\n+        res = w1.sendtoaddress(address=address, amount=0.1)\n+        nodes[0].generate(1)\n+\n+        # creating a transaction with change should not be possible\n+        assert_raises_rpc_error(-4, \"Can't generate a change-address key. No keys in the internal keypool and can't generate any keys.\", w2.walletcreatefundedpsbt, inputs=[], outputs=[{addr.pop(): 0.05}], options={\"subtractFeeFromOutputs\": [0]})\n+\n+        # creating a transaction without change should still be possible\n+        res = w2.walletcreatefundedpsbt(inputs=[], outputs=[{addr.pop(): 0.1}], options={\"subtractFeeFromOutputs\": [0]})",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334231039",
      "id" : 334231039,
      "in_reply_to_id" : 334228750,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDIzMTAzOQ==",
      "original_commit_id" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378",
      "original_position" : 43,
      "path" : "test/functional/wallet_keypool.py",
      "position" : null,
      "pull_request_review_id" : 300998563,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334231039",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334231528"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334231528"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Added translation",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-12T10:30:29Z",
      "diff_hunk" : "@@ -2982,21 +2984,23 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n                 //  rediscover unknown transactions that were written with keys of ours to recover\n                 //  post-backup change.\n \n-                // Reserve a new key pair from key pool\n+                // Reserve a new key pair from key pool. If it fails, provide a dummy\n+                // destination in case we don't need change.\n                 if (!CanGetAddresses(true)) {\n-                    strFailReason = _(\"Can't generate a change-address key. No keys in the internal keypool and can't generate any keys.\").translated;\n-                    return false;\n-                }\n-                CTxDestination dest;\n-                const OutputType change_type = TransactionChangeType(coin_control.m_change_type ? *coin_control.m_change_type : m_default_change_type, vecSend);\n-                bool ret = reservedest.GetReservedDestination(change_type, dest, true);\n-                if (!ret)\n-                {\n-                    strFailReason = \"Keypool ran out, please call keypoolrefill first\";\n-                    return false;\n-                }\n+                    failed_to_get_change_address = true;\n+                    failed_to_get_change_address_reason = _(\"Can't generate a change-address key. No keys in the internal keypool and can't generate any keys.\").translated;\n+                } else {\n+                    CTxDestination dest;\n+                    const OutputType change_type = TransactionChangeType(coin_control.m_change_type ? *coin_control.m_change_type : m_default_change_type, vecSend);\n+                    bool ret = reservedest.GetReservedDestination(change_type, dest, true);\n+                    if (ret) {\n+                        scriptChange = GetScriptForDestination(dest);\n+                    } else {\n+                        failed_to_get_change_address = true;\n+                        failed_to_get_change_address_reason = \"Keypool ran out, please call keypoolrefill first\";",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334231528",
      "id" : 334231528,
      "in_reply_to_id" : 334228774,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDIzMTUyOA==",
      "original_commit_id" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378",
      "original_position" : 40,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 300999104,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334231528",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334232031"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334232031"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah yes, it's a class, so it's initialized... Fixed.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-12T10:43:09Z",
      "diff_hunk" : "@@ -2969,7 +2969,9 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n             // Create change script that will be used if we need change\n             // TODO: pass in scriptChange instead of reservedest so\n             // change transaction isn't always pay-to-bitcoin-address\n-            CScript scriptChange;\n+            CScript scriptChange = CScript();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r334232031",
      "id" : 334232031,
      "in_reply_to_id" : 334227902,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNDIzMjAzMQ==",
      "original_commit_id" : "1cb1381ca51d1967146a0a75fd96c1b4800ec378",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 300999626,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/334232031",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r335665339"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/335665339"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: s/Unsigned/Signed",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-16T19:25:20Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Unsigned Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r335665339",
      "id" : 335665339,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNTY2NTMzOQ==",
      "original_commit_id" : "428bdc8041e2c1479b650207110de081a91a19eb",
      "original_position" : 14,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 302819881,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/335665339",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r335670563"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/335670563"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is unused.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-16T19:37:42Z",
      "diff_hunk" : "@@ -55,6 +55,7 @@ public Q_SLOTS:\n \n Q_SIGNALS:\n     void coinsSent(const uint256& txid);\n+    void psbtCopied(const std::string& psbt);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r335670563",
      "id" : 335670563,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNTY3MDU2Mw==",
      "original_commit_id" : "428bdc8041e2c1479b650207110de081a91a19eb",
      "original_position" : 4,
      "path" : "src/qt/sendcoinsdialog.h",
      "position" : null,
      "pull_request_review_id" : 302819881,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/335670563",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r335674194"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/335674194"
         }
      },
      "author_association" : "MEMBER",
      "body" : "IMO this should be up higher at the BnB failure check. If BnB fails to find an exact match, then it is highly unlikely that KnapsackSolver will find an exact match. It is better to fail earlier, so I would prefer that this check and return occurred in https://github.com/bitcoin/bitcoin/blob/master/src/wallet/wallet.cpp#L3081-L3083",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-16T19:45:54Z",
      "diff_hunk" : "@@ -3207,6 +3210,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n                 coin_selection_params.use_bnb = false;\n                 continue;\n             }\n+\n+            // Give up if change keypool ran out and coin selection failed to find a solution without change:\n+            if (failed_to_get_change_address && nChangePosInOut != -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r335674194",
      "id" : 335674194,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNTY3NDE5NA==",
      "original_commit_id" : "ca1a9d54d652f5eee9ae2a8511fe668516a6998d",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 302819881,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/335674194",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r336909933"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/336909933"
         }
      },
      "author_association" : "MEMBER",
      "body" : "If moved this check to the start of the loop.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-21T09:10:47Z",
      "diff_hunk" : "@@ -3207,6 +3210,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n                 coin_selection_params.use_bnb = false;\n                 continue;\n             }\n+\n+            // Give up if change keypool ran out and coin selection failed to find a solution without change:\n+            if (failed_to_get_change_address && nChangePosInOut != -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r336909933",
      "id" : 336909933,
      "in_reply_to_id" : 335674194,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNjkwOTkzMw==",
      "original_commit_id" : "ca1a9d54d652f5eee9ae2a8511fe668516a6998d",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 304422294,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/336909933",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r336967659"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/336967659"
         }
      },
      "author_association" : "MEMBER",
      "body" : "~That didn't work.~ I don't like putting this deep inside hard to reason about loop & if/else branches; don't want to accidentally send change to nowhere. So I added `coin_selection_params.use_knapsack` which is set to false if `failed_to_get_change_address `, in order to skip knapsack.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-21T11:35:40Z",
      "diff_hunk" : "@@ -3207,6 +3210,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n                 coin_selection_params.use_bnb = false;\n                 continue;\n             }\n+\n+            // Give up if change keypool ran out and coin selection failed to find a solution without change:\n+            if (failed_to_get_change_address && nChangePosInOut != -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r336967659",
      "id" : 336967659,
      "in_reply_to_id" : 335674194,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNjk2NzY1OQ==",
      "original_commit_id" : "ca1a9d54d652f5eee9ae2a8511fe668516a6998d",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 304496612,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/336967659",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r337020513"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337020513"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This seems hopeless. There's a few scenarios where BNB isn't used:\r\n\r\n1. When you use manual coin selection in QT \r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/a22b62481aae95747830bd3c0db3227860b12d8e/src/wallet/wallet.cpp#L2674-L2682\r\n\r\nThis is the scenario @gwillen ran into: https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-537321922\r\n\r\n2. When we subtract fee from amount:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/a22b62481aae95747830bd3c0db3227860b12d8e/src/wallet/wallet.cpp#L3011-L3013\r\n\r\nReverted to just letting the knapsack solver do its thing.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-21T13:35:29Z",
      "diff_hunk" : "@@ -3207,6 +3210,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n                 coin_selection_params.use_bnb = false;\n                 continue;\n             }\n+\n+            // Give up if change keypool ran out and coin selection failed to find a solution without change:\n+            if (failed_to_get_change_address && nChangePosInOut != -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r337020513",
      "id" : 337020513,
      "in_reply_to_id" : 335674194,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzAyMDUxMw==",
      "original_commit_id" : "ca1a9d54d652f5eee9ae2a8511fe668516a6998d",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 304565045,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337020513",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r337031540"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337031540"
         }
      },
      "author_association" : "MEMBER",
      "body" : "At the risk of making the error message less precise, I think this whole block is easier to read if it just relies on `GetReservedDestination` to check if `CanGetAddress` is true or not. You also can just not store `ret` and use it directly in the conditional.\r\n\r\n",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-21T13:56:17Z",
      "diff_hunk" : "@@ -2982,21 +2983,23 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n                 //  rediscover unknown transactions that were written with keys of ours to recover\n                 //  post-backup change.\n \n-                // Reserve a new key pair from key pool\n+                // Reserve a new key pair from key pool. If it fails, provide a dummy\n+                // destination in case we don't need change.",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r337031540",
      "id" : 337031540,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzAzMTU0MA==",
      "original_commit_id" : "acb5891cf1b2bd478a9cd8977e2af7cad5917804",
      "original_position" : 14,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 304579932,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337031540",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r337034494"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337034494"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think the reduced efficiency is fine in that it's easier to read at least.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-21T14:01:24Z",
      "diff_hunk" : "@@ -3207,6 +3210,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n                 coin_selection_params.use_bnb = false;\n                 continue;\n             }\n+\n+            // Give up if change keypool ran out and coin selection failed to find a solution without change:\n+            if (failed_to_get_change_address && nChangePosInOut != -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r337034494",
      "id" : 337034494,
      "in_reply_to_id" : 335674194,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzNzAzNDQ5NA==",
      "original_commit_id" : "ca1a9d54d652f5eee9ae2a8511fe668516a6998d",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 304579932,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/337034494",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I extracted the keypool stuff into #17219",
      "created_at" : "2019-10-22T19:12:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-545110926",
      "id" : 545110926,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NTExMDkyNg==",
      "updated_at" : "2019-10-22T19:12:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/545110926",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r338308868"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/338308868"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Seems like we need to enable bnb for those things. Will try.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-23T22:31:29Z",
      "diff_hunk" : "@@ -3207,6 +3210,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n                 coin_selection_params.use_bnb = false;\n                 continue;\n             }\n+\n+            // Give up if change keypool ran out and coin selection failed to find a solution without change:\n+            if (failed_to_get_change_address && nChangePosInOut != -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r338308868",
      "id" : 338308868,
      "in_reply_to_id" : 335674194,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzODMwODg2OA==",
      "original_commit_id" : "ca1a9d54d652f5eee9ae2a8511fe668516a6998d",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 306229423,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/338308868",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r338629089"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/338629089"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I got part of the way there in #17219",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-10-24T15:06:03Z",
      "diff_hunk" : "@@ -3207,6 +3210,11 @@ bool CWallet::CreateTransaction(interfaces::Chain::Lock& locked_chain, const std\n                 coin_selection_params.use_bnb = false;\n                 continue;\n             }\n+\n+            // Give up if change keypool ran out and coin selection failed to find a solution without change:\n+            if (failed_to_get_change_address && nChangePosInOut != -1) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r338629089",
      "id" : 338629089,
      "in_reply_to_id" : 335674194,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDMzODYyOTA4OQ==",
      "original_commit_id" : "ca1a9d54d652f5eee9ae2a8511fe668516a6998d",
      "original_position" : 50,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 306649734,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/338629089",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Will re-review, but the diff looks good.",
      "created_at" : "2019-10-25T19:11:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-546477185",
      "id" : 546477185,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NjQ3NzE4NQ==",
      "updated_at" : "2019-10-25T19:11:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546477185",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "re-code-review ACK https://github.com/bitcoin/bitcoin/pull/16944/commits/9808f7867d9c557ba4bc253104f47fbd7f02b668\r\n\r\nonly changes from last tested review:\r\n```\r\ne081a91a19eb 9808f7867d9c557ba4bc253104f47fbd7f02b668\r\ndiff --git a/src/qt/sendcoinsdialog.cpp b/src/qt/sendcoinsdialog.cpp\r\nindex de701dbdd..3fd63a1b7 100644\r\n--- a/src/qt/sendcoinsdialog.cpp\r\n+++ b/src/qt/sendcoinsdialog.cpp\r\n@@ -189,7 +189,7 @@ void SendCoinsDialog::setModel(WalletModel *_model)\r\n \r\n         if (model->privateKeysDisabled()) {\r\n             ui->sendButton->setText(tr(\"Create Unsigned\"));\r\n-            ui->sendButton->setToolTip(tr(\"Creates a Partially Unsigned Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));\r\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));\r\n         } else {\r\n             ui->sendButton->setText(tr(\"Send\"));\r\n         }\r\ndiff --git a/src/qt/sendcoinsdialog.h b/src/qt/sendcoinsdialog.h\r\nindex df1d96576..ccd849461 100644\r\n--- a/src/qt/sendcoinsdialog.h\r\n+++ b/src/qt/sendcoinsdialog.h\r\n@@ -55,7 +55,6 @@ public Q_SLOTS:\r\n \r\n Q_SIGNALS:\r\n     void coinsSent(const uint256& txid);\r\n-    void psbtCopied(const std::string& psbt);\r\n \r\n private:\r\n     Ui::SendCoinsDialog *ui;\r\n```",
      "created_at" : "2019-10-25T19:48:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-546488758",
      "id" : 546488758,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU0NjQ4ODc1OA==",
      "updated_at" : "2019-10-25T19:50:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/546488758",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Code review ACK 9808f7867d9c557ba4bc253104f47fbd7f02b668\r\n\r\nI'll wait for one more tested ACK before merging, just to make sure.",
      "created_at" : "2019-11-06T06:24:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-550164506",
      "id" : 550164506,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDE2NDUwNg==",
      "updated_at" : "2019-11-06T06:30:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550164506",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/3211283?v=4",
         "events_url" : "https://api.github.com/users/meshcollider/events{/privacy}",
         "followers_url" : "https://api.github.com/users/meshcollider/followers",
         "following_url" : "https://api.github.com/users/meshcollider/following{/other_user}",
         "gists_url" : "https://api.github.com/users/meshcollider/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/meshcollider",
         "id" : 3211283,
         "login" : "meshcollider",
         "node_id" : "MDQ6VXNlcjMyMTEyODM=",
         "organizations_url" : "https://api.github.com/users/meshcollider/orgs",
         "received_events_url" : "https://api.github.com/users/meshcollider/received_events",
         "repos_url" : "https://api.github.com/users/meshcollider/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/meshcollider/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/meshcollider/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/meshcollider"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Sorry @Sjors, missed the notification, will review.",
      "created_at" : "2019-11-06T08:35:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-550203299",
      "id" : 550203299,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDIwMzI5OQ==",
      "updated_at" : "2019-11-06T08:35:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550203299",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r342996173"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342996173"
         }
      },
      "author_association" : "MEMBER",
      "body" : "a16d2eb0d593633d6ba733d761c56c835b0e30dc\r\n\r\nDoes it make sense to do something like:\r\n```cpp\r\n    // some comment here\r\n    isminetype is_mine_filter = IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS)\r\n                              ? ISMINE_WATCH_ONLY\r\n                              : ISMINE_SPENDABLE;\r\n\r\nâ¦\r\n                IsMine(it->second.tx->vout[output.n]) == is_mine_filter) {\r\n```",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T09:37:43Z",
      "diff_hunk" : "@@ -2590,7 +2590,9 @@ std::map<CTxDestination, std::vector<COutput>> CWallet::ListCoins(interfaces::Ch\n         if (it != mapWallet.end()) {\n             int depth = it->second.GetDepthInMainChain(locked_chain);\n             if (depth >= 0 && output.n < it->second.tx->vout.size() &&\n-                IsMine(it->second.tx->vout[output.n]) == ISMINE_SPENDABLE) {\n+                IsMine(it->second.tx->vout[output.n]) ==",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r342996173",
      "id" : 342996173,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0Mjk5NjE3Mw==",
      "original_commit_id" : "a16d2eb0d593633d6ba733d761c56c835b0e30dc",
      "original_position" : 14,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 312298209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342996173",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r342998196"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342998196"
         }
      },
      "author_association" : "MEMBER",
      "body" : "eef2b6350684f2675989b48a2d7f79c0d8a7be6e\r\n\r\nDoes this have to be here?  Couldn't this be checked in `CWallet::AvailableCoins`?",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T09:42:03Z",
      "diff_hunk" : "@@ -630,6 +630,9 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n         coin_control = *CoinControlDialog::coinControl();\n     }\n \n+    // Include watch-only for wallets without private key\n+    coin_control.fAllowWatchOnly = model->privateKeysDisabled();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r342998196",
      "id" : 342998196,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0Mjk5ODE5Ng==",
      "original_commit_id" : "eef2b6350684f2675989b48a2d7f79c0d8a7be6e",
      "original_position" : 5,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 110,
      "pull_request_review_id" : 312298209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/342998196",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343000831"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343000831"
         }
      },
      "author_association" : "MEMBER",
      "body" : "2bc10122874421ba7ce379325ebc2420955b1b9b\r\n\r\nLooks like default arguments aren't used in these interfaces, @ryanofsky coincidence or is there a reason for that?",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T09:47:14Z",
      "diff_hunk" : "@@ -195,6 +196,13 @@ class Wallet\n         bool& in_mempool,\n         int& num_blocks) = 0;\n \n+    //! Fill PSBT\n+    virtual TransactionError fillPSBT(PartiallySignedTransaction& psbtx,\n+        bool& complete,\n+        int sighash_type = 1 /* SIGHASH_ALL */,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343000831",
      "id" : 343000831,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzAwMDgzMQ==",
      "original_commit_id" : "2bc10122874421ba7ce379325ebc2420955b1b9b",
      "original_position" : 15,
      "path" : "src/interfaces/wallet.h",
      "position" : 15,
      "pull_request_review_id" : 312298209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343000831",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343000988"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343000988"
         }
      },
      "author_association" : "MEMBER",
      "body" : "2bc10122874421ba7ce379325ebc2420955b1b9b\r\n\r\nnit, comments have period here.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T09:47:32Z",
      "diff_hunk" : "@@ -195,6 +196,13 @@ class Wallet\n         bool& in_mempool,\n         int& num_blocks) = 0;\n \n+    //! Fill PSBT",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343000988",
      "id" : 343000988,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzAwMDk4OA==",
      "original_commit_id" : "2bc10122874421ba7ce379325ebc2420955b1b9b",
      "original_position" : 12,
      "path" : "src/interfaces/wallet.h",
      "position" : null,
      "pull_request_review_id" : 312298209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343000988",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343001263"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343001263"
         }
      },
      "author_association" : "MEMBER",
      "body" : "2bc10122874421ba7ce379325ebc2420955b1b9b\r\n\r\nI think you should forward declare what's necessary.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T09:48:07Z",
      "diff_hunk" : "@@ -14,6 +14,7 @@\n #include <functional>\n #include <map>\n #include <memory>\n+#include <psbt.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343001263",
      "id" : 343001263,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzAwMTI2Mw==",
      "original_commit_id" : "2bc10122874421ba7ce379325ebc2420955b1b9b",
      "original_position" : 4,
      "path" : "src/interfaces/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 312298209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343001263",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343001563"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343001563"
         }
      },
      "author_association" : "MEMBER",
      "body" : "9808f7867d9c557ba4bc253104f47fbd7f02b668\r\n\r\nnit sort.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T09:48:38Z",
      "diff_hunk" : "@@ -21,6 +21,7 @@\n #include <chainparams.h>\n #include <interfaces/node.h>\n #include <key_io.h>\n+#include <wallet/psbtwallet.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343001563",
      "id" : 343001563,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzAwMTU2Mw==",
      "original_commit_id" : "9808f7867d9c557ba4bc253104f47fbd7f02b668",
      "original_position" : 4,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 312298209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343001563",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343002142"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343002142"
         }
      },
      "author_association" : "MEMBER",
      "body" : "9808f7867d9c557ba4bc253104f47fbd7f02b668\r\n\r\nAvoid `pleaseReview` by calling `questionString.append` here and below? - like L332 above.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T09:49:50Z",
      "diff_hunk" : "@@ -319,9 +327,21 @@ void SendCoinsDialog::on_sendButton_clicked()\n         formatted.append(recipientElement);\n     }\n \n-    QString questionString = tr(\"Are you sure you want to send?\");\n+    QString questionString;\n+    if (!model->privateKeysDisabled()) {\n+        questionString.append(tr(\"Are you sure you want to send?\"));\n+    } else {\n+        questionString.append(tr(\"Do you want to draft this transaction?\"));\n+    }\n+\n     questionString.append(\"<br /><span style='font-size:10pt;'>\");\n-    questionString.append(tr(\"Please, review your transaction.\"));\n+    QString pleaseReview;\n+    if (!model->privateKeysDisabled()) {\n+        pleaseReview = tr(\"Please, review your transaction.\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343002142",
      "id" : 343002142,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzAwMjE0Mg==",
      "original_commit_id" : "9808f7867d9c557ba4bc253104f47fbd7f02b668",
      "original_position" : 38,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 312298209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343002142",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343003211"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343003211"
         }
      },
      "author_association" : "MEMBER",
      "body" : "9808f7867d9c557ba4bc253104f47fbd7f02b668\r\n\r\nUse ternary like above or just one `if (model->privateKeysDisabled())` for these.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T09:51:49Z",
      "diff_hunk" : "@@ -373,7 +393,12 @@ void SendCoinsDialog::on_sendButton_clicked()\n         questionString = questionString.arg(\"<br /><br />\" + formatted.at(0));\n     }\n \n-    SendConfirmationDialog confirmationDialog(tr(\"Confirm send coins\"), questionString, informative_text, detailed_text, SEND_CONFIRM_DELAY, this);\n+    const QString confirmation = model->privateKeysDisabled() ? tr(\"Confirm transaction proposal\") : tr(\"Confirm send coins\");\n+    QString confirmButtonText = tr(\"Send\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343003211",
      "id" : 343003211,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzAwMzIxMQ==",
      "original_commit_id" : "9808f7867d9c557ba4bc253104f47fbd7f02b668",
      "original_position" : 52,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 312298209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343003211",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343004421"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343004421"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Maybe for now move the defaults to interfaces/wallet.cpp and just have `psbtx` and `complete` arguments for now.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T09:54:14Z",
      "diff_hunk" : "@@ -195,6 +196,13 @@ class Wallet\n         bool& in_mempool,\n         int& num_blocks) = 0;\n \n+    //! Fill PSBT\n+    virtual TransactionError fillPSBT(PartiallySignedTransaction& psbtx,\n+        bool& complete,\n+        int sighash_type = 1 /* SIGHASH_ALL */,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343004421",
      "id" : 343004421,
      "in_reply_to_id" : 343000831,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzAwNDQyMQ==",
      "original_commit_id" : "2bc10122874421ba7ce379325ebc2420955b1b9b",
      "original_position" : 15,
      "path" : "src/interfaces/wallet.h",
      "position" : 15,
      "pull_request_review_id" : 312298209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343004421",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343005788"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343005788"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Or even just make this `unsignedFilllPSBT(psbtx)` which `assert(complete == false)` and makes the GUI code simpler?",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T09:56:51Z",
      "diff_hunk" : "@@ -195,6 +196,13 @@ class Wallet\n         bool& in_mempool,\n         int& num_blocks) = 0;\n \n+    //! Fill PSBT\n+    virtual TransactionError fillPSBT(PartiallySignedTransaction& psbtx,\n+        bool& complete,\n+        int sighash_type = 1 /* SIGHASH_ALL */,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343005788",
      "id" : 343005788,
      "in_reply_to_id" : 343000831,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzAwNTc4OA==",
      "original_commit_id" : "2bc10122874421ba7ce379325ebc2420955b1b9b",
      "original_position" : 15,
      "path" : "src/interfaces/wallet.h",
      "position" : 15,
      "pull_request_review_id" : 312298209,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343005788",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343189738"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343189738"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I don't think that's a good idea. The RPC sets this based on `includeWatching`, so then we'd have to make it an `Optional`.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T16:18:14Z",
      "diff_hunk" : "@@ -630,6 +630,9 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n         coin_control = *CoinControlDialog::coinControl();\n     }\n \n+    // Include watch-only for wallets without private key\n+    coin_control.fAllowWatchOnly = model->privateKeysDisabled();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343189738",
      "id" : 343189738,
      "in_reply_to_id" : 342998196,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzE4OTczOA==",
      "original_commit_id" : "eef2b6350684f2675989b48a2d7f79c0d8a7be6e",
      "original_position" : 5,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 110,
      "pull_request_review_id" : 312561228,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343189738",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343189775"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343189775"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T16:18:19Z",
      "diff_hunk" : "@@ -2590,7 +2590,9 @@ std::map<CTxDestination, std::vector<COutput>> CWallet::ListCoins(interfaces::Ch\n         if (it != mapWallet.end()) {\n             int depth = it->second.GetDepthInMainChain(locked_chain);\n             if (depth >= 0 && output.n < it->second.tx->vout.size() &&\n-                IsMine(it->second.tx->vout[output.n]) == ISMINE_SPENDABLE) {\n+                IsMine(it->second.tx->vout[output.n]) ==",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343189775",
      "id" : 343189775,
      "in_reply_to_id" : 342996173,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzE4OTc3NQ==",
      "original_commit_id" : "a16d2eb0d593633d6ba733d761c56c835b0e30dc",
      "original_position" : 14,
      "path" : "src/wallet/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 312561291,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343189775",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343192385"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343192385"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I think refactoring the interface can be done some other time. External signers #16546 will set `sign` to true, and the result may or may not be complete (e.g. multisig). ",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T16:22:38Z",
      "diff_hunk" : "@@ -195,6 +196,13 @@ class Wallet\n         bool& in_mempool,\n         int& num_blocks) = 0;\n \n+    //! Fill PSBT\n+    virtual TransactionError fillPSBT(PartiallySignedTransaction& psbtx,\n+        bool& complete,\n+        int sighash_type = 1 /* SIGHASH_ALL */,",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343192385",
      "id" : 343192385,
      "in_reply_to_id" : 343000831,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzE5MjM4NQ==",
      "original_commit_id" : "2bc10122874421ba7ce379325ebc2420955b1b9b",
      "original_position" : 15,
      "path" : "src/interfaces/wallet.h",
      "position" : 15,
      "pull_request_review_id" : 312564795,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343192385",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343201621"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343201621"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I tried, but it results in having to import stuff all over the place, and errors like this:\r\n```\r\ninterfaces/wallet.cpp:354:20: error: no matching function for call to 'FillPSBT'\r\n            return FillPSBT(m_wallet.get(), psbtx, complete, sighash_type, sign, bip32derivs);\r\n                   ^~~~~~~~\r\n./wallet/psbtwallet.h:27:28: note: candidate function not viable: cannot convert argument of incomplete type 'interfaces::PartiallySignedTransaction' to 'PartiallySignedTransaction &' for 2nd argument\r\nNODISCARD TransactionError FillPSBT(const CWallet* pwallet,\r\n                           ^\r\n1 error generated.\r\n```",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T16:37:58Z",
      "diff_hunk" : "@@ -14,6 +14,7 @@\n #include <functional>\n #include <map>\n #include <memory>\n+#include <psbt.h>",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343201621",
      "id" : 343201621,
      "in_reply_to_id" : 343001263,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzIwMTYyMQ==",
      "original_commit_id" : "2bc10122874421ba7ce379325ebc2420955b1b9b",
      "original_position" : 4,
      "path" : "src/interfaces/wallet.h",
      "position" : 4,
      "pull_request_review_id" : 312577304,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343201621",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343209088"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343209088"
         }
      },
      "author_association" : "MEMBER",
      "body" : "d474156f242dc900c221924765210ac4f7e97f7a\r\n\r\nWrong indentation.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T16:50:39Z",
      "diff_hunk" : "@@ -344,6 +345,14 @@ class WalletImpl : public Wallet\n         }\n         return {};\n     }\n+    TransactionError fillPSBT(PartiallySignedTransaction& psbtx,\n+        bool& complete,\n+        int sighash_type = 1 /* SIGHASH_ALL */,\n+        bool sign = true,\n+        bool bip32derivs = false) override\n+    {\n+            return FillPSBT(m_wallet.get(), psbtx, complete, sighash_type, sign, bip32derivs);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343209088",
      "id" : 343209088,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzIwOTA4OA==",
      "original_commit_id" : "d474156f242dc900c221924765210ac4f7e97f7a",
      "original_position" : 21,
      "path" : "src/interfaces/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 312586928,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343209088",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343213550"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343213550"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Oops, fixed.",
      "commit_id" : "c3066570dc5164d7afd5b6fa7f083b45d2060eac",
      "created_at" : "2019-11-06T16:58:34Z",
      "diff_hunk" : "@@ -344,6 +345,14 @@ class WalletImpl : public Wallet\n         }\n         return {};\n     }\n+    TransactionError fillPSBT(PartiallySignedTransaction& psbtx,\n+        bool& complete,\n+        int sighash_type = 1 /* SIGHASH_ALL */,\n+        bool sign = true,\n+        bool bip32derivs = false) override\n+    {\n+            return FillPSBT(m_wallet.get(), psbtx, complete, sighash_type, sign, bip32derivs);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343213550",
      "id" : 343213550,
      "in_reply_to_id" : 343209088,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzIxMzU1MA==",
      "original_commit_id" : "d474156f242dc900c221924765210ac4f7e97f7a",
      "original_position" : 21,
      "path" : "src/interfaces/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 312592798,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-06T16:58:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343213550",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343240006"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343240006"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-06T17:53:26Z",
      "diff_hunk" : "@@ -344,6 +345,14 @@ class WalletImpl : public Wallet\n         }\n         return {};\n     }\n+    TransactionError fillPSBT(PartiallySignedTransaction& psbtx,\n+        bool& complete,\n+        int sighash_type = 1 /* SIGHASH_ALL */,\n+        bool sign = true,\n+        bool bip32derivs = false) override\n+    {\n+            return FillPSBT(m_wallet.get(), psbtx, complete, sighash_type, sign, bip32derivs);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r343240006",
      "id" : 343240006,
      "in_reply_to_id" : 343209088,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0MzI0MDAwNg==",
      "original_commit_id" : "d474156f242dc900c221924765210ac4f7e97f7a",
      "original_position" : 21,
      "path" : "src/interfaces/wallet.cpp",
      "position" : null,
      "pull_request_review_id" : 312628236,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/343240006",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Mmm, this in an odd Travis error:\r\n```\r\n2019-11-06T17:49:26.056000Z TestFramework (INFO): sendrawtransaction with missing input\r\n198162019-11-06T17:49:42.869000Z TestFramework (ERROR): JSONRPC error\r\n19817Traceback (most recent call last):\r\n19818  File \"/home/travis/build/bitcoin/bitcoin/build/bitcoin-i686-pc-linux-gnu/test/functional/test_framework/test_framework.py\", line 111, in main\r\n19819    self.run_test()\r\n19820  File \"/home/travis/build/bitcoin/bitcoin/build/bitcoin-i686-pc-linux-gnu/test/functional/rpc_rawtransaction.py\", line 354, in run_test\r\n19821    self.nodes[2].sendrawtransaction(rawTxComb)\r\n19822  File \"/home/travis/build/bitcoin/bitcoin/build/bitcoin-i686-pc-linux-gnu/test/functional/test_framework/coverage.py\", line 47, in __call__\r\n19823    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n19824  File \"/home/travis/build/bitcoin/bitcoin/build/bitcoin-i686-pc-linux-gnu/test/functional/test_framework/authproxy.py\", line 141, in __call__\r\n19825    raise JSONRPCException(response['error'], status)\r\n19826test_framework.authproxy.JSONRPCException: non-mandatory-script-verify-flag (Signature must be zero for failed CHECK(MULTI)SIG operation) (-26)\r\n```",
      "created_at" : "2019-11-06T17:54:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-550426266",
      "id" : 550426266,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MDQyNjI2Ng==",
      "updated_at" : "2019-11-06T17:54:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/550426266",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->Needs rebase",
      "created_at" : "2019-11-08T11:04:57Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-551589697",
      "id" : 551589697,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1MTU4OTY5Nw==",
      "updated_at" : "2019-11-08T11:04:57Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/551589697",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555157"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555157"
         }
      },
      "author_association" : "MEMBER",
      "body" : "\"Bitcoin Core\" should be replaced with %1 and `PACKAGE_NAME`",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T03:28:53Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555157",
      "id" : 345555157,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTU1NTE1Nw==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 22,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 315981929,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555157",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555238"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555238"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Do we want to imply the Bitcoin Core GUI can sign these yet?",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T03:29:24Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555238",
      "id" : 345555238,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTU1NTIzOA==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 22,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 315982030,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555238",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555495"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555495"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Do we need this? Each wallet gets its own `SendCoinsDialog`, and can't change `privateKeysDisabled` AFAIK...",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T03:30:55Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));\n+        } else {\n+            ui->sendButton->setText(tr(\"Send\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555495",
      "id" : 345555495,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTU1NTQ5NQ==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 24,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 315982299,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555495",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555549"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555549"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[If we do need it,] remove duplicate from .ui file",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T03:31:14Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));\n+        } else {\n+            ui->sendButton->setText(tr(\"Send\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555549",
      "id" : 345555549,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTU1NTU0OQ==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 24,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 315982378,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555549",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555607"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555607"
         }
      },
      "author_association" : "MEMBER",
      "body" : "[If we do need it,] should be \"S&end\" for the shortcut key.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T03:31:38Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));\n+        } else {\n+            ui->sendButton->setText(tr(\"Send\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555607",
      "id" : 345555607,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTU1NTYwNw==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 24,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 315982448,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555607",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555697"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555697"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Please handle the true case first.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T03:32:08Z",
      "diff_hunk" : "@@ -305,9 +313,19 @@ void SendCoinsDialog::on_sendButton_clicked()\n         formatted.append(recipientElement);\n     }\n \n-    QString questionString = tr(\"Are you sure you want to send?\");\n+    QString questionString;\n+    if (!model->privateKeysDisabled()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555697",
      "id" : 345555697,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTU1NTY5Nw==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 36,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 315982566,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555697",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555833"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555833"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not sure we need to change this message.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T03:32:46Z",
      "diff_hunk" : "@@ -305,9 +313,19 @@ void SendCoinsDialog::on_sendButton_clicked()\n         formatted.append(recipientElement);\n     }\n \n-    QString questionString = tr(\"Are you sure you want to send?\");\n+    QString questionString;\n+    if (!model->privateKeysDisabled()) {\n+        questionString.append(tr(\"Are you sure you want to send?\"));\n+    } else {\n+        questionString.append(tr(\"Do you want to draft this transaction?\"));\n+    }\n+\n     questionString.append(\"<br /><span style='font-size:10pt;'>\");\n-    questionString.append(tr(\"Please, review your transaction.\"));\n+    if (!model->privateKeysDisabled()) {\n+        questionString.append(tr(\"Please, review your transaction.\"));\n+    } else {\n+        questionString.append(tr(\"Please, review your transaction proposal. This will produce a Partially Signed Bitcoin Transaction (PSBT) which you can copy and then sign with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345555833",
      "id" : 345555833,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTU1NTgzMw==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 47,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 315982688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345555833",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345556226"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345556226"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Suggest using 4e10bdd433f5d1ba9069f4942cb89e69dd83d816 for this (part of #15987)",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T03:35:12Z",
      "diff_hunk" : "@@ -908,11 +950,11 @@ void SendConfirmationDialog::updateYesButton()\n     if(secDelay > 0)\n     {\n         yesButton->setEnabled(false);\n-        yesButton->setText(tr(\"Send\") + \" (\" + QString::number(secDelay) + \")\");\n+        yesButton->setText(confirmButtonText + \" (\" + QString::number(secDelay) + \")\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345556226",
      "id" : 345556226,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTU1NjIyNg==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 142,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 140,
      "pull_request_review_id" : 315983205,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345556226",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345557957"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345557957"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'd make a `const bool include_watch_only` to check the wallet flag once outside the loops...",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T03:45:25Z",
      "diff_hunk" : "@@ -2160,7 +2160,7 @@ std::map<CTxDestination, std::vector<COutput>> CWallet::ListCoins(interfaces::Ch\n \n     for (const COutput& coin : availableCoins) {\n         CTxDestination address;\n-        if (coin.fSpendable &&\n+        if ((coin.fSpendable || (IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS) && coin.fSolvable)) &&",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345557957",
      "id" : 345557957,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTU1Nzk1Nw==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 315985412,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345557957",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345558163"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345558163"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Something like this above:\r\n\r\n```C++\r\n    // Include watch-only for wallets without private keys\r\n    const bool include_watch_only = IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS);\r\n    const isminetype is_mine_filter = include_watch_only ? ISMINE_WATCH_ONLY : ISMINE_SPENDABLE;\r\n```",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T03:46:33Z",
      "diff_hunk" : "@@ -2160,7 +2160,7 @@ std::map<CTxDestination, std::vector<COutput>> CWallet::ListCoins(interfaces::Ch\n \n     for (const COutput& coin : availableCoins) {\n         CTxDestination address;\n-        if (coin.fSpendable &&\n+        if ((coin.fSpendable || (IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS) && coin.fSolvable)) &&",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345558163",
      "id" : 345558163,
      "in_reply_to_id" : 345557957,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTU1ODE2Mw==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 315985636,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345558163",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345880896"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345880896"
         }
      },
      "author_association" : "MEMBER",
      "body" : "In reference to \"offline Bitcoin Core wallet\"? It doesn't say GUI :-)",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T16:59:37Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345880896",
      "id" : 345880896,
      "in_reply_to_id" : 345555238,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTg4MDg5Ng==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 22,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316403350,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345880896",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345893996"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345893996"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Not sure what you mean here. We set these strings in `setModel(WalletModel *_model)`. That's the first time we know `privateKeysDisabled`. The constructor doesn't know.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T17:23:45Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));\n+        } else {\n+            ui->sendButton->setText(tr(\"Send\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345893996",
      "id" : 345893996,
      "in_reply_to_id" : 345555495,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTg5Mzk5Ng==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 24,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316419737,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345893996",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345897117"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345897117"
         }
      },
      "author_association" : "MEMBER",
      "body" : "This is the only place where it's not in a toolbox.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T17:29:18Z",
      "diff_hunk" : "@@ -305,9 +313,19 @@ void SendCoinsDialog::on_sendButton_clicked()\n         formatted.append(recipientElement);\n     }\n \n-    QString questionString = tr(\"Are you sure you want to send?\");\n+    QString questionString;\n+    if (!model->privateKeysDisabled()) {\n+        questionString.append(tr(\"Are you sure you want to send?\"));\n+    } else {\n+        questionString.append(tr(\"Do you want to draft this transaction?\"));\n+    }\n+\n     questionString.append(\"<br /><span style='font-size:10pt;'>\");\n-    questionString.append(tr(\"Please, review your transaction.\"));\n+    if (!model->privateKeysDisabled()) {\n+        questionString.append(tr(\"Please, review your transaction.\"));\n+    } else {\n+        questionString.append(tr(\"Please, review your transaction proposal. This will produce a Partially Signed Bitcoin Transaction (PSBT) which you can copy and then sign with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345897117",
      "id" : 345897117,
      "in_reply_to_id" : 345555833,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTg5NzExNw==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 47,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316423419,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345897117",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345909139"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345909139"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Hence \"imply\".",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T17:53:59Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345909139",
      "id" : 345909139,
      "in_reply_to_id" : 345555238,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTkwOTEzOQ==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 22,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316438813,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345909139",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345909400"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345909400"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I mean there is never a case where we need to change the text *back* to \"Send\" (which is set in the .ui)",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T17:54:32Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));\n+        } else {\n+            ui->sendButton->setText(tr(\"Send\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345909400",
      "id" : 345909400,
      "in_reply_to_id" : 345555495,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTkwOTQwMA==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 24,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316439153,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345909400",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345909606"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345909606"
         }
      },
      "author_association" : "MEMBER",
      "body" : "???",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T17:54:58Z",
      "diff_hunk" : "@@ -305,9 +313,19 @@ void SendCoinsDialog::on_sendButton_clicked()\n         formatted.append(recipientElement);\n     }\n \n-    QString questionString = tr(\"Are you sure you want to send?\");\n+    QString questionString;\n+    if (!model->privateKeysDisabled()) {\n+        questionString.append(tr(\"Are you sure you want to send?\"));\n+    } else {\n+        questionString.append(tr(\"Do you want to draft this transaction?\"));\n+    }\n+\n     questionString.append(\"<br /><span style='font-size:10pt;'>\");\n-    questionString.append(tr(\"Please, review your transaction.\"));\n+    if (!model->privateKeysDisabled()) {\n+        questionString.append(tr(\"Please, review your transaction.\"));\n+    } else {\n+        questionString.append(tr(\"Please, review your transaction proposal. This will produce a Partially Signed Bitcoin Transaction (PSBT) which you can copy and then sign with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345909606",
      "id" : 345909606,
      "in_reply_to_id" : 345555833,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTkwOTYwNg==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 47,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316439411,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345909606",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345909846"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345909846"
         }
      },
      "author_association" : "MEMBER",
      "body" : "~Ok, I removed the tooltip and button text from the UI file.~ I also added the `s` keyboard shortcut back, though I can't test that on macOS.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T17:55:30Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));\n+        } else {\n+            ui->sendButton->setText(tr(\"Send\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345909846",
      "id" : 345909846,
      "in_reply_to_id" : 345555549,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTkwOTg0Ng==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 24,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316439695,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345909846",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345910614"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345910614"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I mean tool tip.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T17:57:00Z",
      "diff_hunk" : "@@ -305,9 +313,19 @@ void SendCoinsDialog::on_sendButton_clicked()\n         formatted.append(recipientElement);\n     }\n \n-    QString questionString = tr(\"Are you sure you want to send?\");\n+    QString questionString;\n+    if (!model->privateKeysDisabled()) {\n+        questionString.append(tr(\"Are you sure you want to send?\"));\n+    } else {\n+        questionString.append(tr(\"Do you want to draft this transaction?\"));\n+    }\n+\n     questionString.append(\"<br /><span style='font-size:10pt;'>\");\n-    questionString.append(tr(\"Please, review your transaction.\"));\n+    if (!model->privateKeysDisabled()) {\n+        questionString.append(tr(\"Please, review your transaction.\"));\n+    } else {\n+        questionString.append(tr(\"Please, review your transaction proposal. This will produce a Partially Signed Bitcoin Transaction (PSBT) which you can copy and then sign with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345910614",
      "id" : 345910614,
      "in_reply_to_id" : 345555833,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTkxMDYxNA==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 47,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316440688,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345910614",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345910700"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345910700"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T17:57:09Z",
      "diff_hunk" : "@@ -305,9 +313,19 @@ void SendCoinsDialog::on_sendButton_clicked()\n         formatted.append(recipientElement);\n     }\n \n-    QString questionString = tr(\"Are you sure you want to send?\");\n+    QString questionString;\n+    if (!model->privateKeysDisabled()) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345910700",
      "id" : 345910700,
      "in_reply_to_id" : 345555697,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTkxMDcwMA==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 36,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316440809,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345910700",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345911899"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345911899"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Should be `\"S&end\"`",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T17:59:21Z",
      "diff_hunk" : "@@ -186,6 +187,14 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"&Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline %1 wallet, or a PSBT-compatible hardware wallet.\").arg(PACKAGE_NAME));\n+        } else {\n+            ui->sendButton->setText(tr(\"&Send\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345911899",
      "id" : 345911899,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTkxMTg5OQ==",
      "original_commit_id" : "f80b0b96932635f96554498636c15cf078817ab8",
      "original_position" : 24,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316442302,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345911899",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345912214"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345912214"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I only expect people to use this feature (watch only wallets in general) based on some tutorial, so I don't think this needs to be perfect. Hopefully we can add signing PSBT from the GUI soon too.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T17:59:55Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345912214",
      "id" : 345912214,
      "in_reply_to_id" : 345555238,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTkxMjIxNA==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 22,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316442704,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345912214",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345912878"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345912878"
         }
      },
      "author_association" : "MEMBER",
      "body" : "I'll rebase if that's merged first, but that's not a trivial enough commit.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T18:01:17Z",
      "diff_hunk" : "@@ -908,11 +950,11 @@ void SendConfirmationDialog::updateYesButton()\n     if(secDelay > 0)\n     {\n         yesButton->setEnabled(false);\n-        yesButton->setText(tr(\"Send\") + \" (\" + QString::number(secDelay) + \")\");\n+        yesButton->setText(confirmButtonText + \" (\" + QString::number(secDelay) + \")\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345912878",
      "id" : 345912878,
      "in_reply_to_id" : 345556226,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTkxMjg3OA==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 142,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 140,
      "pull_request_review_id" : 316443569,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345912878",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345915227"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345915227"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Ah I see. Ok, I dropped the else branch (keeping the original in the `.ui` file).",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T18:06:34Z",
      "diff_hunk" : "@@ -186,6 +187,13 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"Create Unsigned\"));\n+            ui->sendButton->setToolTip(tr(\"Creates a Partially Signed Bitcoin Transaction (PSBT) for use with e.g. an offline Bitcoin Core wallet, or a PSBT-compatible hardware wallet.\"));\n+        } else {\n+            ui->sendButton->setText(tr(\"Send\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345915227",
      "id" : 345915227,
      "in_reply_to_id" : 345555495,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTkxNTIyNw==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 24,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316446656,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345915227",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345921586"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345921586"
         }
      },
      "author_association" : "MEMBER",
      "body" : "You didn't resolve this...",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T18:20:24Z",
      "diff_hunk" : "@@ -2160,7 +2160,7 @@ std::map<CTxDestination, std::vector<COutput>> CWallet::ListCoins(interfaces::Ch\n \n     for (const COutput& coin : availableCoins) {\n         CTxDestination address;\n-        if (coin.fSpendable &&\n+        if ((coin.fSpendable || (IsWalletFlagSet(WALLET_FLAG_DISABLE_PRIVATE_KEYS) && coin.fSolvable)) &&",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345921586",
      "id" : 345921586,
      "in_reply_to_id" : 345557957,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTkyMTU4Ng==",
      "original_commit_id" : "33a766fdb619fe334b04f0188f023e3417c91d70",
      "original_position" : 5,
      "path" : "src/wallet/wallet.cpp",
      "position" : 5,
      "pull_request_review_id" : 316454874,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345921586",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345923209"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345923209"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Perhaps use `\"Cr&eate Unsigned\"` so the \"E\" shortcut matches with `\"S&end\"`",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T18:23:59Z",
      "diff_hunk" : "@@ -186,6 +187,11 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"C&reate Unsigned\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345923209",
      "id" : 345923209,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTkyMzIwOQ==",
      "original_commit_id" : "e0053c40e60951c6a13286ba5b143eaf432aeaed",
      "original_position" : 21,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316457053,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345923209",
      "user" : {
         "avatar_url" : "https://avatars2.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345943613"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345943613"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Done",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-13T19:03:54Z",
      "diff_hunk" : "@@ -186,6 +187,11 @@ void SendCoinsDialog::setModel(WalletModel *_model)\n         // set default rbf checkbox state\n         ui->optInRBF->setCheckState(Qt::Checked);\n \n+        if (model->privateKeysDisabled()) {\n+            ui->sendButton->setText(tr(\"C&reate Unsigned\"));",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r345943613",
      "id" : 345943613,
      "in_reply_to_id" : 345923209,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NTk0MzYxMw==",
      "original_commit_id" : "e0053c40e60951c6a13286ba5b143eaf432aeaed",
      "original_position" : 21,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : null,
      "pull_request_review_id" : 316482340,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-13T19:03:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/345943613",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "test and code review ACK https://github.com/bitcoin/bitcoin/pull/16944/commits/c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-14T17:50:27Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-554001865",
      "id" : 554001865,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NDAwMTg2NQ==",
      "updated_at" : "2019-11-14T17:50:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554001865",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/5767891?v=4",
         "events_url" : "https://api.github.com/users/instagibbs/events{/privacy}",
         "followers_url" : "https://api.github.com/users/instagibbs/followers",
         "following_url" : "https://api.github.com/users/instagibbs/following{/other_user}",
         "gists_url" : "https://api.github.com/users/instagibbs/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/instagibbs",
         "id" : 5767891,
         "login" : "instagibbs",
         "node_id" : "MDQ6VXNlcjU3Njc4OTE=",
         "organizations_url" : "https://api.github.com/users/instagibbs/orgs",
         "received_events_url" : "https://api.github.com/users/instagibbs/received_events",
         "repos_url" : "https://api.github.com/users/instagibbs/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/instagibbs/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/instagibbs/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/instagibbs"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Concept ACK",
      "created_at" : "2019-11-15T22:49:56Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-554559630",
      "id" : 554559630,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NDU1OTYzMA==",
      "updated_at" : "2019-11-15T22:49:56Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/554559630",
      "user" : {
         "avatar_url" : "https://avatars3.githubusercontent.com/u/178464?v=4",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "node_id" : "MDQ6VXNlcjE3ODQ2NA==",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r347170115"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347170115"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point.",
      "commit_id" : "c6dd565c8820aa8a98b190621e10c6e2821a9ecc",
      "created_at" : "2019-11-18T00:21:39Z",
      "diff_hunk" : "@@ -630,6 +630,9 @@ void SendCoinsDialog::useAvailableBalance(SendCoinsEntry* entry)\n         coin_control = *CoinControlDialog::coinControl();\n     }\n \n+    // Include watch-only for wallets without private key\n+    coin_control.fAllowWatchOnly = model->privateKeysDisabled();",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#discussion_r347170115",
      "id" : 347170115,
      "in_reply_to_id" : 342998196,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM0NzE3MDExNQ==",
      "original_commit_id" : "eef2b6350684f2675989b48a2d7f79c0d8a7be6e",
      "original_position" : 5,
      "path" : "src/qt/sendcoinsdialog.cpp",
      "position" : 110,
      "pull_request_review_id" : 318057545,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/16944",
      "updated_at" : "2019-11-18T00:21:39Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/347170115",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Is it possible to create multi-part/fountain code QR code?\r\n\r\nI don't want to see compromises like what Electrum had done before reappear on Bitcoin Core... Electrum allowed signing of incomplete PSBTs which lack previous transaction data (for non-SegWit inputs), which was a compromise that sacrificed security in exchange for viability of encoding a PSBT into one single QR code.\r\n\r\nThere might be some privacy related concerns, like lazy users may tend to pass their PSBTs through less secure communication channels, however, I think this should be surmountable.",
      "created_at" : "2019-11-23T06:28:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-557771894",
      "id" : 557771894,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1Nzc3MTg5NA==",
      "updated_at" : "2019-11-23T06:35:43Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/557771894",
      "user" : {
         "avatar_url" : "https://avatars0.githubusercontent.com/u/4075106?v=4",
         "events_url" : "https://api.github.com/users/andronoob/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andronoob/followers",
         "following_url" : "https://api.github.com/users/andronoob/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andronoob/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andronoob",
         "id" : 4075106,
         "login" : "andronoob",
         "node_id" : "MDQ6VXNlcjQwNzUxMDY=",
         "organizations_url" : "https://api.github.com/users/andronoob/orgs",
         "received_events_url" : "https://api.github.com/users/andronoob/received_events",
         "repos_url" : "https://api.github.com/users/andronoob/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andronoob/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andronoob/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andronoob"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I've used the \"Use available balance\" which filled the amount, but below balance is still zero. \r\n\r\n<img width=\"1034\" alt=\"Screenshot 2019-11-24 at 21 27 50\" src=\"https://user-images.githubusercontent.com/3534524/69501927-9193fc00-0f01-11ea-95c0-f84ab12675a6.png\">\r\n\r\nSomething that can be fixed in a follow up - the button could change and/or the balance info on the bottom too.\r\n\r\nTested ACK c6dd565c8820aa8a98b190621e10c6e2821a9ecc.",
      "created_at" : "2019-11-24T21:40:23Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-557930796",
      "id" : 557930796,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1NzkzMDc5Ng==",
      "updated_at" : "2019-11-24T21:40:23Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/557930796",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/3534524?v=4",
         "events_url" : "https://api.github.com/users/promag/events{/privacy}",
         "followers_url" : "https://api.github.com/users/promag/followers",
         "following_url" : "https://api.github.com/users/promag/following{/other_user}",
         "gists_url" : "https://api.github.com/users/promag/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/promag",
         "id" : 3534524,
         "login" : "promag",
         "node_id" : "MDQ6VXNlcjM1MzQ1MjQ=",
         "organizations_url" : "https://api.github.com/users/promag/orgs",
         "received_events_url" : "https://api.github.com/users/promag/received_events",
         "repos_url" : "https://api.github.com/users/promag/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/promag/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/promag/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/promag"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag the balance seems unrelated, though obviously a bug",
      "created_at" : "2019-11-25T10:05:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-558082376",
      "id" : 558082376,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1ODA4MjM3Ng==",
      "updated_at" : "2019-11-25T10:05:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558082376",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "@promag fixed in #17587",
      "created_at" : "2019-11-25T10:39:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/16944#issuecomment-558096211",
      "id" : 558096211,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/16944",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDU1ODA5NjIxMQ==",
      "updated_at" : "2019-11-25T10:39:41Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/558096211",
      "user" : {
         "avatar_url" : "https://avatars1.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
