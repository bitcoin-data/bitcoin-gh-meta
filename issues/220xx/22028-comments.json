[
   {
      "author_association" : "MEMBER",
      "body" : "Mastering Bitcoin is not the definitive protocol documentation. It is descriptive, i.e. it describes what occurs. It is not prescriptive, i.e. it does not say what should occur. The document that is prescriptive in this case is [BIP 125](https://github.com/bitcoin/bips/blob/master/bip-0125.mediawiki). It states:\r\n\r\n> Inherited signaling: Transactions that don't explicitly signal replaceability are replaceable under this policy for as long as any one of their ancestors signals replaceability and remains unconfirmed.\r\n> ...\r\n> 1. The original transactions signal replaceability explicitly or through inheritance as described in the above Summary section.\r\n\r\nTherefore the CVE is not incorrect.\r\n\r\n***\r\n\r\nOrphan transactions are unrelated to this. Orphan transactions are not those that reference unconfirmed parents, they are those that reference unconfirmed parents **that the node has not received yet**. This is a completely different situation where the node is missing information, not that the parent itself is merely unconfirmed.",
      "created_at" : "2021-05-23T22:58:16Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22028#issuecomment-846637385",
      "id" : 846637385,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22028",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0NjYzNzM4NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-23T23:05:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/846637385",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "NONE",
      "body" : "Hey Andrew! \n\nWith all due respect, I believe you're wrong on this matter. \n\nWhile MasteringBitcoin [1] does not govern the protocol, the link that I\nsent here not only outlines how the protocol behaves, it also provides\nexcerpts explicitly from the source code (and it is still present\ntoday). \n\nFor a more thorough breakdown of how this facet of Bitcoin behaved,\nplease refer to this (somewhat aged) piece by NCC -\nhttps://cryptoservices.github.io/fde/2018/12/14/bitcoin-orphan-TX-CVE.html\n\n\nAs of right now, the portion of Bitcoin's source code that governs how\norphan transactions are to be handled can be found here:\nhttps://github.com/bitcoin/bitcoin/blob/7fcf53f7b4524572d1d0c9a5fdc388e87eb02416/src/txorphanage.cpp\n\n\n\t* It appears that there were a few measures taken to reduce the risk of\nDDoS [2] (which the CVE also mentions as a risk for some reason despite\nthe existence of this code)\n\n\t* There is an expiry time placed on the orphan transactions\n\n \t* There is a max total # of orphans that any given node will hold\n(100)\n\nOther parts of the Bitcoin source introduce a # of tools that individual\nclients can use to protect themselves from DDoS [2] attempts. \n\nSwitching to another file: \n\nCode explicitly includes: static const unsigned int\nDEFAULT_MAX_ORPHAN_TRANSACTIONS = 100 \n\nThe most informative (and evidential) proof that the behavior the CVE\ndescribes as erroneous is actually indicative of it performing as it\nshould can be found within the code of the 'txorphange' header file. \n\nsource:\nhttps://github.com/bitcoin/bitcoin/blob/7fcf53f7b4524572d1d0c9a5fdc388e87eb02416/src/txorphanage.h\n\n\nIf we head to line 46 in the header file, the code notes state, \"Add any\norphans that list a particular tx as a parent into a peer's work set (ie\norphans that may have found their final missing parent, and so should be\nreconsidered for the mempool)\". \n\nAnother file in the Bitcoin source that outlines the instantiation of\nthe 'orphan pool' here (Doxygen):\nhttps://doxygen.bitcoincore.org/txorphanage_8cpp_source.html \n\nThere is nothing that I can see anywhere in the source code that\nstipulates that t \n\nLinks:\n------\n[1] file:///home/libre/.ephemeral/Bitcoin/Technical/MasteringBitcoin.txt\n[2] file:///home/libre/.ephemeral/Bitcoin/Technical/DDoS.txt",
      "created_at" : "2021-05-23T23:44:00Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22028#issuecomment-846644705",
      "id" : 846644705,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22028",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0NjY0NDcwNQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-23T23:44:00Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/846644705",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/59129716?v=4",
         "events_url" : "https://api.github.com/users/Librechain/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Librechain/followers",
         "following_url" : "https://api.github.com/users/Librechain/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Librechain/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Librechain",
         "id" : 59129716,
         "login" : "Librechain",
         "node_id" : "MDQ6VXNlcjU5MTI5NzE2",
         "organizations_url" : "https://api.github.com/users/Librechain/orgs",
         "received_events_url" : "https://api.github.com/users/Librechain/received_events",
         "repos_url" : "https://api.github.com/users/Librechain/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Librechain/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Librechain/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Librechain"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "It is not clear to me how CVE-2021-31876 is related to orphan transactions at all, or why you think that orphan transactions are related to this CVE. The email to the bitcoin-dev mailing list describing this issue does not mention orphan txs at all.\r\n\r\nThe CVE merely describes how Bitcoin Core's RBF implementation is not consistent with the specification described with BIP 125. This statement is correct. The [submitter](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-May/018924.html) agrees that this is not a vulnerability in Core per se, but rather it is a missing behavior in Core that other software have been relying on, and so those software may be vulnerable.",
      "created_at" : "2021-05-23T23:56:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22028#issuecomment-846646699",
      "id" : 846646699,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22028",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0NjY0NjY5OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-23T23:56:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/846646699",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/3782274?v=4",
         "events_url" : "https://api.github.com/users/achow101/events{/privacy}",
         "followers_url" : "https://api.github.com/users/achow101/followers",
         "following_url" : "https://api.github.com/users/achow101/following{/other_user}",
         "gists_url" : "https://api.github.com/users/achow101/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/achow101",
         "id" : 3782274,
         "login" : "achow101",
         "node_id" : "MDQ6VXNlcjM3ODIyNzQ=",
         "organizations_url" : "https://api.github.com/users/achow101/orgs",
         "received_events_url" : "https://api.github.com/users/achow101/received_events",
         "repos_url" : "https://api.github.com/users/achow101/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/achow101/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/achow101/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/achow101"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks everyone for your thoughtful input. I am going to close this issue for now, but please feel free to continue the discussion in this thread.",
      "created_at" : "2021-05-24T10:10:37Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/22028#issuecomment-846937892",
      "id" : 846937892,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/22028",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg0NjkzNzg5Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-05-24T10:10:37Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/846937892",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   }
]
