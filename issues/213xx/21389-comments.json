[
   {
      "author_association" : "MEMBER",
      "body" : "Yes, this might be similar to what I've been reporting from the field:\r\n\r\n- https://github.com/bitcoin/bitcoin/pull/20685#issuecomment-785811984\r\n- https://github.com/bitcoin/bitcoin/pull/20685#pullrequestreview-599729825\r\n- https://github.com/bitcoin/bitcoin/pull/20685#issuecomment-791315141\r\n\r\nDouble connection from the same inbound peer around the same time:\r\n\r\n![Screenshot from 2021-03-02 18-13-06](https://user-images.githubusercontent.com/2415484/110358349-33c2ef00-8034-11eb-84d5-5be5665ef252.png)\r\n\r\nidem, different peer, larger interval (56 minutes apart):\r\n\r\n![Screenshot from 2021-03-05 01-59-28](https://user-images.githubusercontent.com/2415484/110357862-a97a8b00-8033-11eb-8edf-6560c6250bcc.png)\r\n\r\nThe inbound connections are probably all manual (addnode) ones.",
      "created_at" : "2021-03-08T17:38:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-792938917",
      "id" : 792938917,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21389",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5MjkzODkxNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-08T17:38:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/792938917",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Fix pending at https://github.com/bitcoin/bitcoin/pull/21514.",
      "created_at" : "2021-03-24T10:13:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-805673902",
      "id" : 805673902,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21389",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgwNTY3MzkwMg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-24T10:13:38Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/805673902",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Possible approaches to resolve this:\r\n\r\n1. Merge #21514. It may cause problems if/when we start using SAM 3.2 which supports ports. But if we advertise ourselves as i2p:1234 and receive incoming connection with TO_PORT=5678 (!=1234) why not accept it? That is, maybe it would make most sense to keep ignoring ports even if using SAM 3.2. So #21514 may not cause problems in the future.\r\n\r\n2. Merge #22112. It would disrupt the nascent bitcoin-over-I2P network - a dozen nodes which run pre-release and are all known with port 8333. #22112 would silently stop connecting to all of them and even if they re-advertise themselves with same I2P address but port 0, that change will not be reflected in addrman which will keep the old entries with port 8333 to which we never connect.\r\n\r\n3. Extend #22112 to `s/8333/0/` ports of I2P addresses in addrman. This would require re-bucketing in addrman.\r\n\r\n4. Do nothing and leave this issue unresolved.",
      "created_at" : "2021-06-23T15:13:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-866925116",
      "id" : 866925116,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21389",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2NjkyNTExNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-23T15:13:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866925116",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Thanks for the summary.  It seems the first three options would best be chosen before v22 or not done at all.  I suppose option 2 would mean deleting our `peers.dat` files for nodes already running an I2P service; we don't have a hidden removepeeraddress rpc like the existing addpeeraddress.",
      "created_at" : "2021-06-23T15:38:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-866945589",
      "id" : 866945589,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21389",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2Njk0NTU4OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-23T15:38:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866945589",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/2415484?v=4",
         "events_url" : "https://api.github.com/users/jonatack/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonatack/followers",
         "following_url" : "https://api.github.com/users/jonatack/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonatack/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonatack",
         "id" : 2415484,
         "login" : "jonatack",
         "node_id" : "MDQ6VXNlcjI0MTU0ODQ=",
         "organizations_url" : "https://api.github.com/users/jonatack/orgs",
         "received_events_url" : "https://api.github.com/users/jonatack/received_events",
         "repos_url" : "https://api.github.com/users/jonatack/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonatack/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonatack/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonatack"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : ">  It seems the first three options would best be chosen before v22 or not done at all.\r\n\r\nYes, good point.\r\n\r\n> deleting our `peers.dat` files\r\n\r\nWhat about adding a new p2p message which acts as a command to delete `peers.dat` from disk? Then we can remotely fix this without bothering the users?",
      "created_at" : "2021-06-23T16:03:22Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-866967746",
      "id" : 866967746,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21389",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2Njk2Nzc0Ng==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-23T16:03:22Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866967746",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> What about adding a new p2p message which acts as a command to delete peers.dat from disk? Then we can remotely fix this without bothering the users?\n\nAre you serious?",
      "created_at" : "2021-06-23T16:07:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-866971375",
      "id" : 866971375,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21389",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2Njk3MTM3NQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-23T16:07:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866971375",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/548488?v=4",
         "events_url" : "https://api.github.com/users/sipa/events{/privacy}",
         "followers_url" : "https://api.github.com/users/sipa/followers",
         "following_url" : "https://api.github.com/users/sipa/following{/other_user}",
         "gists_url" : "https://api.github.com/users/sipa/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/sipa",
         "id" : 548488,
         "login" : "sipa",
         "node_id" : "MDQ6VXNlcjU0ODQ4OA==",
         "organizations_url" : "https://api.github.com/users/sipa/orgs",
         "received_events_url" : "https://api.github.com/users/sipa/received_events",
         "repos_url" : "https://api.github.com/users/sipa/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/sipa/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/sipa/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/sipa"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> What about adding a new p2p message which acts as a command to delete peers.dat from disk? Then we can remotely fix this without bothering the users?\r\n\r\nHow would you ensure this is not exploited? Do we have already have any such p2p messages?",
      "created_at" : "2021-06-23T16:18:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-866979117",
      "id" : 866979117,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21389",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2Njk3OTExNw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-23T16:18:25Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/866979117",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/13405205?v=4",
         "events_url" : "https://api.github.com/users/prayank23/events{/privacy}",
         "followers_url" : "https://api.github.com/users/prayank23/followers",
         "following_url" : "https://api.github.com/users/prayank23/following{/other_user}",
         "gists_url" : "https://api.github.com/users/prayank23/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/prayank23",
         "id" : 13405205,
         "login" : "prayank23",
         "node_id" : "MDQ6VXNlcjEzNDA1MjA1",
         "organizations_url" : "https://api.github.com/users/prayank23/orgs",
         "received_events_url" : "https://api.github.com/users/prayank23/received_events",
         "repos_url" : "https://api.github.com/users/prayank23/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/prayank23/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/prayank23/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/prayank23"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Just kidding :rofl: ",
      "created_at" : "2021-06-24T06:46:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-867384943",
      "id" : 867384943,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21389",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg2NzM4NDk0Mw==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-24T06:46:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/867384943",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I implemented option 3 from [the above list](https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-866925116) as the topmost commit in https://github.com/bitcoin/bitcoin/pull/22112.",
      "created_at" : "2021-06-29T13:10:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-870585852",
      "id" : 870585852,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21389",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDg3MDU4NTg1Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-06-29T13:10:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/870585852",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/266751?v=4",
         "events_url" : "https://api.github.com/users/vasild/events{/privacy}",
         "followers_url" : "https://api.github.com/users/vasild/followers",
         "following_url" : "https://api.github.com/users/vasild/following{/other_user}",
         "gists_url" : "https://api.github.com/users/vasild/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/vasild",
         "id" : 266751,
         "login" : "vasild",
         "node_id" : "MDQ6VXNlcjI2Njc1MQ==",
         "organizations_url" : "https://api.github.com/users/vasild/orgs",
         "received_events_url" : "https://api.github.com/users/vasild/received_events",
         "repos_url" : "https://api.github.com/users/vasild/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/vasild/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/vasild/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/vasild"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "This issue should be opened again re: #22559 ",
      "created_at" : "2021-07-27T10:59:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21389#issuecomment-887416257",
      "id" : 887416257,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21389",
      "node_id" : "IC_kwDOABII58405OXB",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-27T10:59:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/887416257",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/8435003?v=4",
         "events_url" : "https://api.github.com/users/tryphe/events{/privacy}",
         "followers_url" : "https://api.github.com/users/tryphe/followers",
         "following_url" : "https://api.github.com/users/tryphe/following{/other_user}",
         "gists_url" : "https://api.github.com/users/tryphe/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/tryphe",
         "id" : 8435003,
         "login" : "tryphe",
         "node_id" : "MDQ6VXNlcjg0MzUwMDM=",
         "organizations_url" : "https://api.github.com/users/tryphe/orgs",
         "received_events_url" : "https://api.github.com/users/tryphe/received_events",
         "repos_url" : "https://api.github.com/users/tryphe/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/tryphe/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/tryphe/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/tryphe"
      }
   }
]
