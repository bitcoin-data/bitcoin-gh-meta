[
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21319#discussion_r586681928"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586681928"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "Why read the block from disk twice when `verbosity <= 0` ?\r\n1. in the `if (verbosity <= 0 && !RPCSerializationFlags()) {}` to `raw_block`\r\n2. with `block = GetBlockChecked(pblockindex);`\r\n",
      "commit_id" : "7b23e32c35eaff2fc59fdfae326a554f06a1cc63",
      "created_at" : "2021-03-03T18:36:22Z",
      "diff_hunk" : "@@ -958,14 +959,29 @@ static RPCHelpMan getblock()\n             throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n         }\n \n+        if (IsBlockPruned(pblockindex)) {\n+            throw JSONRPCError(RPC_MISC_ERROR, \"Block not available (pruned data)\");\n+        }\n+\n+        if (verbosity <= 0 && !RPCSerializationFlags()) {\n+            if (!ReadRawBlockFromDisk(raw_block, pblockindex, Params().MessageStart())) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n+            }\n+        }\n+\n         block = GetBlockChecked(pblockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#discussion_r586681928",
      "id" : 586681928,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NjY4MTkyOA==",
      "original_commit_id" : "33cead541509c7bb4aac321f786790a0bfab36f7",
      "original_line" : 972,
      "original_position" : 22,
      "original_start_line" : 967,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 603223985,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21319",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-03T23:37:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586681928",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21319#discussion_r586884371"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586884371"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Good point. Needs an else here.",
      "commit_id" : "7b23e32c35eaff2fc59fdfae326a554f06a1cc63",
      "created_at" : "2021-03-03T23:36:08Z",
      "diff_hunk" : "@@ -958,14 +959,29 @@ static RPCHelpMan getblock()\n             throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n         }\n \n+        if (IsBlockPruned(pblockindex)) {\n+            throw JSONRPCError(RPC_MISC_ERROR, \"Block not available (pruned data)\");\n+        }\n+\n+        if (verbosity <= 0 && !RPCSerializationFlags()) {\n+            if (!ReadRawBlockFromDisk(raw_block, pblockindex, Params().MessageStart())) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n+            }\n+        }\n+\n         block = GetBlockChecked(pblockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#discussion_r586884371",
      "id" : 586884371,
      "in_reply_to_id" : 586681928,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4Njg4NDM3MQ==",
      "original_commit_id" : "33cead541509c7bb4aac321f786790a0bfab36f7",
      "original_line" : 972,
      "original_position" : 22,
      "original_start_line" : 967,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 603467728,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21319",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-03T23:37:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586884371",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21319#discussion_r586885780"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586885780"
         }
      },
      "author_association" : "MEMBER",
      "body" : "Fixed",
      "commit_id" : "7b23e32c35eaff2fc59fdfae326a554f06a1cc63",
      "created_at" : "2021-03-03T23:37:50Z",
      "diff_hunk" : "@@ -958,14 +959,29 @@ static RPCHelpMan getblock()\n             throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n         }\n \n+        if (IsBlockPruned(pblockindex)) {\n+            throw JSONRPCError(RPC_MISC_ERROR, \"Block not available (pruned data)\");\n+        }\n+\n+        if (verbosity <= 0 && !RPCSerializationFlags()) {\n+            if (!ReadRawBlockFromDisk(raw_block, pblockindex, Params().MessageStart())) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Block not found on disk\");\n+            }\n+        }\n+\n         block = GetBlockChecked(pblockindex);",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#discussion_r586885780",
      "id" : 586885780,
      "in_reply_to_id" : 586681928,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4Njg4NTc4MA==",
      "original_commit_id" : "33cead541509c7bb4aac321f786790a0bfab36f7",
      "original_line" : 972,
      "original_position" : 22,
      "original_start_line" : 967,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 603468481,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21319",
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : "RIGHT",
      "updated_at" : "2021-03-03T23:37:58Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/586885780",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21319#discussion_r587269785"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587269785"
         }
      },
      "author_association" : "CONTRIBUTOR",
      "body" : "nit: _could_ be moved into the `if (verbosity <= 0 && !RPCSerializationFlags())` as we check if the block is pruned in `GetBlockChecked()` again, but happy with leaving where it is.\r\n\r\nedit: I mean the whole `if (IsBlockPruned(pblockindex)) {}`. It's not clear on GH",
      "commit_id" : "68226673ed01136c244b0ef56335ef728872e38a",
      "created_at" : "2021-03-04T08:44:39Z",
      "diff_hunk" : "@@ -958,14 +959,30 @@ static RPCHelpMan getblock()\n             throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n         }\n \n-        block = GetBlockChecked(pblockindex);\n+        if (IsBlockPruned(pblockindex)) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#discussion_r587269785",
      "id" : 587269785,
      "line" : null,
      "node_id" : "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NzI2OTc4NQ==",
      "original_commit_id" : "7b23e32c35eaff2fc59fdfae326a554f06a1cc63",
      "original_line" : 1080,
      "original_position" : 13,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : null,
      "pull_request_review_id" : 603841520,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587269785/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2021-03-04T10:07:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/587269785",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/19157360?v=4",
         "events_url" : "https://api.github.com/users/0xB10C/events{/privacy}",
         "followers_url" : "https://api.github.com/users/0xB10C/followers",
         "following_url" : "https://api.github.com/users/0xB10C/following{/other_user}",
         "gists_url" : "https://api.github.com/users/0xB10C/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/0xB10C",
         "id" : 19157360,
         "login" : "0xB10C",
         "node_id" : "MDQ6VXNlcjE5MTU3MzYw",
         "organizations_url" : "https://api.github.com/users/0xB10C/orgs",
         "received_events_url" : "https://api.github.com/users/0xB10C/received_events",
         "repos_url" : "https://api.github.com/users/0xB10C/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/0xB10C/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/0xB10C/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/0xB10C"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [andrewtoth](https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1304584664) |\n\nIf your review is incorrectly listed, please react with ð to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26415](https://github.com/bitcoin/bitcoin/pull/26415) (rpc,rest: faster getblock and rest_block by reading raw block by andrewtoth)\n* [#25232](https://github.com/bitcoin/bitcoin/pull/25232) (rpc: Faster getblock API by AaronDewes)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "created_at" : "2021-07-28T21:39:53Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-888639629",
      "id" : 888639629,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII584095CN",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/888639629/reactions"
      },
      "updated_at" : "2022-12-08T11:38:42Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/888639629",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Closing due to lack of interest. Can reopen if people want to review.",
      "created_at" : "2021-07-28T22:06:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-888652169",
      "id" : 888652169,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII584098GJ",
      "performed_via_github_app" : null,
      "updated_at" : "2021-07-28T22:06:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/888652169",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2022-11-05T16:39:24Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1304583252",
      "id" : 1304583252,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585NwlxU",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304583252/reactions"
      },
      "updated_at" : "2022-11-05T16:39:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304583252",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Concept ACK. This RPC is used by a lot of projects and optimizing it would be a big benefit.\r\n\r\nI think the main problem though is serving potentially corrupted blocks. It was suggested in https://github.com/bitcoin/bitcoin/pull/13151#issuecomment-386037456 that CRC32Cs can be added to the on disk blocks, which I think would be sufficient. How to do that though I'm not sure of. Ideally they would be in the meta header of the on disk block. Adding them to every block on disk would require rewriting the entire blockchain on already synced nodes, which would take a very long time and not allow downgrading. We would also need to update code that assumes a fixed 8 byte header before the block. Maybe we could add a block file version and only do this for blocks added to the new version type.\r\n\r\nAlternatively it could be added to the block index. That would take less time to upgrade but would require a migration that would not allow downgrading.\r\n\r\nI tried adding CRCs as a new index type in https://github.com/bitcoin/bitcoin/pull/26415, but that requires storing all the 4 byte CRCs along with the 32 byte block hash so it's a lot more data on disk. It also adds the CRCs after the block is stored on the scheduler thread, so potentially a system that got notified of the new block and called `getblock` wouldn't have the CRC yet.",
      "created_at" : "2022-11-05T16:46:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1304584664",
      "id" : 1304584664,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585NwmHY",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304584664/reactions"
      },
      "updated_at" : "2022-11-05T16:46:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304584664",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't think we need CRCs to make this change. The code already assumes no corruption in lots of other places.\r\n\r\nRebased",
      "created_at" : "2022-11-05T17:07:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1304591236",
      "id" : 1304591236,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585NwnuE",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304591236/reactions"
      },
      "updated_at" : "2022-11-05T17:07:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304591236",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "The only other place using `ReadRawBlockFromDisk` is in net processing, where we assume the peer will validate correctly and disconnect. The same assumption can't be made for consumers of the RPC. All other block reads deserialize the block which will fail if the data is corrupt.",
      "created_at" : "2022-11-05T17:25:01Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1304595411",
      "id" : 1304595411,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585NwovT",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304595411/reactions"
      },
      "updated_at" : "2022-11-05T17:25:01Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304595411",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "What happens if you corrupt the chainstate?",
      "created_at" : "2022-11-05T17:48:12Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1304599532",
      "id" : 1304599532,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585Nwpvs",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304599532/reactions"
      },
      "updated_at" : "2022-11-05T17:48:12Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304599532",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Chainstate is separate from blocksdir. They can live on a different storage device. If an old block file gets corrupted it doesn't affect the chainstate.",
      "created_at" : "2022-11-06T14:37:29Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1304815824",
      "id" : 1304815824,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585NxejQ",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304815824/reactions"
      },
      "updated_at" : "2022-11-06T14:37:29Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304815824",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Nevertheless, I don't think we guarantee anything in the case of disk corruption, nor should or can we.",
      "created_at" : "2022-11-06T17:55:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1304856690",
      "id" : 1304856690,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585Nxohy",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304856690/reactions"
      },
      "updated_at" : "2022-11-06T17:55:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304856690",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Well, I think currently we do guarantee we won't serve a corrupt block when we use `ReadBlockFromDisk`.",
      "created_at" : "2022-11-06T18:39:18Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1304865955",
      "id" : 1304865955,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585Nxqyj",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304865955/reactions"
      },
      "updated_at" : "2022-11-06T18:39:18Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1304865955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "<!--cf906140f33d8803c4a75a2196329ecb-->\nð This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "created_at" : "2022-12-08T09:58:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1342408937",
      "id" : 1342408937,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585QA4jp",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1342408937/reactions"
      },
      "updated_at" : "2022-12-08T09:58:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1342408937",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/39886733?v=4",
         "events_url" : "https://api.github.com/users/DrahtBot/events{/privacy}",
         "followers_url" : "https://api.github.com/users/DrahtBot/followers",
         "following_url" : "https://api.github.com/users/DrahtBot/following{/other_user}",
         "gists_url" : "https://api.github.com/users/DrahtBot/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/DrahtBot",
         "id" : 39886733,
         "login" : "DrahtBot",
         "node_id" : "MDQ6VXNlcjM5ODg2NzMz",
         "organizations_url" : "https://api.github.com/users/DrahtBot/orgs",
         "received_events_url" : "https://api.github.com/users/DrahtBot/received_events",
         "repos_url" : "https://api.github.com/users/DrahtBot/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/DrahtBot/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/DrahtBot/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/DrahtBot"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> Well, I think currently we do guarantee we won't serve a corrupt block when we use ReadBlockFromDisk.\r\n\r\nDo we?\r\n\r\nThe block header is checked, but not the transaction payload itself",
      "created_at" : "2022-12-08T11:38:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1342584955",
      "id" : 1342584955,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585QBjh7",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1342584955/reactions"
      },
      "updated_at" : "2022-12-08T11:38:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1342584955",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> The block header is checked, but not the transaction payload itself\r\n\r\nIndeed, I tested by modifying https://github.com/bitcoin/bitcoin/pull/26415/files#diff-186034bc1b6a0e662a59c81182b3d4a0318d44dc28810d2b837c92033e0d5630R142 in my PR to use `ReadBlockFromDisk` and it passes, but if I switch it to a byte inside the header (like 50), it fails. Looks like I was mistaken. The risk is just limited to the header then. Would it be worth it to modify `ReadRawBlockFromDIsk` to check the header hash at least then, or does that remove enough of the speed benefit here?",
      "created_at" : "2022-12-08T16:43:38Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1343000634",
      "id" : 1343000634,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585QDJA6",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1343000634/reactions"
      },
      "updated_at" : "2022-12-08T16:45:24Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1343000634",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I don't think there's a benefit to checking the header, or trying to plan for corrupt data in general (aside from startup verification of high-risk/recent data).",
      "created_at" : "2022-12-11T18:08:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1345620310",
      "id" : 1345620310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585QNIlW",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345620310/reactions"
      },
      "updated_at" : "2022-12-11T18:08:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345620310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1095675?v=4",
         "events_url" : "https://api.github.com/users/luke-jr/events{/privacy}",
         "followers_url" : "https://api.github.com/users/luke-jr/followers",
         "following_url" : "https://api.github.com/users/luke-jr/following{/other_user}",
         "gists_url" : "https://api.github.com/users/luke-jr/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/luke-jr",
         "id" : 1095675,
         "login" : "luke-jr",
         "node_id" : "MDQ6VXNlcjEwOTU2NzU=",
         "organizations_url" : "https://api.github.com/users/luke-jr/orgs",
         "received_events_url" : "https://api.github.com/users/luke-jr/received_events",
         "repos_url" : "https://api.github.com/users/luke-jr/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/luke-jr/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/luke-jr/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/luke-jr"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/21319#discussion_r1045518754"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21319"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045518754"
         }
      },
      "author_association" : "MEMBER",
      "body" : "nit: Maybe move this into a GetRawBlockChecked to avoid the duplicate pruned check when `GetBlockChecked` below is called?",
      "commit_id" : "68226673ed01136c244b0ef56335ef728872e38a",
      "created_at" : "2022-12-12T08:21:25Z",
      "diff_hunk" : "@@ -722,14 +723,30 @@ static RPCHelpMan getblock()\n             throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Block not found\");\n         }\n \n-        block = GetBlockChecked(chainman.m_blockman, pblockindex);\n+        if (chainman.m_blockman.IsBlockPruned(pblockindex)) {\n+            throw JSONRPCError(RPC_MISC_ERROR, \"Block not available (pruned data)\");\n+        }\n+\n+        if (verbosity <= 0 && !RPCSerializationFlags()) {\n+            // This one case doesn't need to parse the block at all\n+            if (!node::ReadRawBlockFromDisk(raw_block, pblockindex->GetBlockPos(), Params().MessageStart())) {",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#discussion_r1045518754",
      "id" : 1045518754,
      "line" : 732,
      "node_id" : "PRRC_kwDOABII584-UVmi",
      "original_commit_id" : "68226673ed01136c244b0ef56335ef728872e38a",
      "original_line" : 732,
      "original_position" : 19,
      "original_start_line" : null,
      "path" : "src/rpc/blockchain.cpp",
      "position" : 19,
      "pull_request_review_id" : 1213071717,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/21319",
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045518754/reactions"
      },
      "side" : "RIGHT",
      "start_line" : null,
      "start_side" : null,
      "updated_at" : "2022-12-12T08:21:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1045518754",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6399679?v=4",
         "events_url" : "https://api.github.com/users/MarcoFalke/events{/privacy}",
         "followers_url" : "https://api.github.com/users/MarcoFalke/followers",
         "following_url" : "https://api.github.com/users/MarcoFalke/following{/other_user}",
         "gists_url" : "https://api.github.com/users/MarcoFalke/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/MarcoFalke",
         "id" : 6399679,
         "login" : "MarcoFalke",
         "node_id" : "MDQ6VXNlcjYzOTk2Nzk=",
         "organizations_url" : "https://api.github.com/users/MarcoFalke/orgs",
         "received_events_url" : "https://api.github.com/users/MarcoFalke/received_events",
         "repos_url" : "https://api.github.com/users/MarcoFalke/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/MarcoFalke/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/MarcoFalke/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/MarcoFalke"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Still needs a rebase. Maybe someone wants to take this over?",
      "created_at" : "2023-02-06T15:57:36Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1419317109",
      "id" : 1419317109,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585UmQ91",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1419317109/reactions"
      },
      "updated_at" : "2023-02-06T15:57:36Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1419317109",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "I can add this functionality to https://github.com/bitcoin/bitcoin/pull/26415.",
      "created_at" : "2023-02-06T16:09:11Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1419336348",
      "id" : 1419336348,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585UmVqc",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1419336348/reactions"
      },
      "updated_at" : "2023-02-06T16:09:11Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1419336348",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/237213?v=4",
         "events_url" : "https://api.github.com/users/andrewtoth/events{/privacy}",
         "followers_url" : "https://api.github.com/users/andrewtoth/followers",
         "following_url" : "https://api.github.com/users/andrewtoth/following{/other_user}",
         "gists_url" : "https://api.github.com/users/andrewtoth/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/andrewtoth",
         "id" : 237213,
         "login" : "andrewtoth",
         "node_id" : "MDQ6VXNlcjIzNzIxMw==",
         "organizations_url" : "https://api.github.com/users/andrewtoth/orgs",
         "received_events_url" : "https://api.github.com/users/andrewtoth/received_events",
         "repos_url" : "https://api.github.com/users/andrewtoth/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/andrewtoth/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/andrewtoth/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/andrewtoth"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> I can add this functionality to https://github.com/bitcoin/bitcoin/pull/26415.\r\n\r\n@andrewtoth ok. Will close this for now.",
      "created_at" : "2023-02-06T16:28:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/21319#issuecomment-1419367893",
      "id" : 1419367893,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21319",
      "node_id" : "IC_kwDOABII585UmdXV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1419367893/reactions"
      },
      "updated_at" : "2023-02-06T16:28:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1419367893",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   }
]
