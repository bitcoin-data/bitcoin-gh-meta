[
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "**Can** replicate on a 2020 Macbook Pro macOS 11.2.2 with a fresh install of LLVM off of brew. Ran through your steps and was able to configure and build without errors. \r\n\r\nI do get a couple million of the following warning:\r\n `clang-11: warning: argument unused during compilation: '-fstack-clash-protection' [-Wunused-command-line-argument]` \r\n\r\nBut, the built `bitcoind` and `bitcoin-qt` binaries are unusable. They do not work. But I never ran into a fatal error that prevented me from configuring or building.\r\n\r\nI see a similar report in my log:\r\n\r\n```\r\n\r\nclang-11: error: linker command failed with exit code 1 (use -v to see invocation)\r\nconfigure:25433: $? = 1\r\nconfigure: failed program was:\r\n| /* confdefs.h */\r\n| #define PACKAGE_NAME \"Bitcoin Core\"\r\n| #define PACKAGE_TARNAME \"bitcoin\"\r\n| #define PACKAGE_VERSION \"21.99.0\"\r\n| #define PACKAGE_STRING \"Bitcoin Core 21.99.0\"\r\n| #define PACKAGE_BUGREPORT \"https://github.com/bitcoin/bitcoin/issues\"\r\n| #define PACKAGE_URL \"https://bitcoincore.org/\"\r\n| #define HAVE_CXX17 1\r\n| #define STDC_HEADERS 1\r\n| #define HAVE_SYS_TYPES_H 1\r\n| #define HAVE_SYS_STAT_H 1\r\n| #define HAVE_STDLIB_H 1\r\n| #define HAVE_STRING_H 1\r\n| #define HAVE_MEMORY_H 1\r\n| #define HAVE_STRINGS_H 1\r\n| #define HAVE_INTTYPES_H 1\r\n| #define HAVE_STDINT_H 1\r\n| #define HAVE_UNISTD_H 1\r\n| #define HAVE_DLFCN_H 1\r\n| #define LT_OBJDIR \".libs/\"\r\n| #define USE_ASM 1\r\n| #define ENABLE_SSE41 1\r\n| #define ENABLE_AVX2 1\r\n| #define ENABLE_SHANI 1\r\n| #define HAVE___INT128 1\r\n| #define HAVE_PTHREAD_PRIO_INHERIT 1\r\n| #define HAVE_PTHREAD 1\r\n| #define HAVE_DECL_STRERROR_R 1\r\n| #define HAVE_STRERROR_R 1\r\n| /* end confdefs.h.  */\r\n| \r\n| int\r\n| main ()\r\n| {\r\n| \r\n|   ;\r\n|   return 0;\r\n| }\r\n\r\n```\r\n",
      "created_at" : "2021-03-09T18:51:42Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21396#issuecomment-794301036",
      "id" : 794301036,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21396",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NDMwMTAzNg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-09T19:01:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/794301036",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23396902?v=4",
         "events_url" : "https://api.github.com/users/jarolrod/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jarolrod/followers",
         "following_url" : "https://api.github.com/users/jarolrod/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jarolrod/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jarolrod",
         "id" : 23396902,
         "login" : "jarolrod",
         "node_id" : "MDQ6VXNlcjIzMzk2OTAy",
         "organizations_url" : "https://api.github.com/users/jarolrod/orgs",
         "received_events_url" : "https://api.github.com/users/jarolrod/received_events",
         "repos_url" : "https://api.github.com/users/jarolrod/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jarolrod/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jarolrod/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jarolrod"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "Where your configure fails, mine succeeds:\r\n\r\n```\r\nconfigure:4204: /usr/local/opt/llvm/bin/clang++ -qversion >&5\r\nclang-11: error: unknown argument '-qversion'; did you mean '--version'?\r\nclang-11: error: no input files\r\nconfigure:4215: $? = 1\r\nconfigure:4235: checking whether the C++ compiler works\r\nconfigure:4257: /usr/local/opt/llvm/bin/clang++    conftest.cpp  >&5\r\nconfigure:4261: $? = 0\r\nconfigure:4309: result: yes\r\n```\r\n\r\nfull log: https://gist.github.com/jarolrod/93b8bee8e6ee75417188f95bcc4da2b0",
      "created_at" : "2021-03-09T19:06:17Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21396#issuecomment-794318882",
      "id" : 794318882,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21396",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NDMxODg4Mg==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-09T19:06:17Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/794318882",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23396902?v=4",
         "events_url" : "https://api.github.com/users/jarolrod/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jarolrod/followers",
         "following_url" : "https://api.github.com/users/jarolrod/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jarolrod/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jarolrod",
         "id" : 23396902,
         "login" : "jarolrod",
         "node_id" : "MDQ6VXNlcjIzMzk2OTAy",
         "organizations_url" : "https://api.github.com/users/jarolrod/orgs",
         "received_events_url" : "https://api.github.com/users/jarolrod/received_events",
         "repos_url" : "https://api.github.com/users/jarolrod/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jarolrod/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jarolrod/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jarolrod"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "> **Can** replicate on a 2020 Macbook Pro macOS 11.2.2 with a fresh install of LLVM off of brew. Ran through your steps and was able to configure and build without errors.\r\n\r\nSo you mean you _can't_ replicate my error? :-)\r\n\r\nI'll go and update macOS to 11.2.3 just in case. It's very strange we don't get the same error, but there might just be a bunch of junk on my system from previous experiments. Come to think of it, I might have been on the v0.21 branch. So I'll retry on the latest master and note the commit...",
      "created_at" : "2021-03-09T19:52:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21396#issuecomment-794371960",
      "id" : 794371960,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21396",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NDM3MTk2MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-09T19:53:27Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/794371960",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> So you mean you _can't_ replicate my error? :-)\n\nI can configure and build (with 100+ warnings generated) but the binaries don't actually work.",
      "created_at" : "2021-03-09T20:02:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21396#issuecomment-794383360",
      "id" : 794383360,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21396",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NDM4MzM2MA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-09T20:02:21Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/794383360",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/23396902?v=4",
         "events_url" : "https://api.github.com/users/jarolrod/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jarolrod/followers",
         "following_url" : "https://api.github.com/users/jarolrod/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jarolrod/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jarolrod",
         "id" : 23396902,
         "login" : "jarolrod",
         "node_id" : "MDQ6VXNlcjIzMzk2OTAy",
         "organizations_url" : "https://api.github.com/users/jarolrod/orgs",
         "received_events_url" : "https://api.github.com/users/jarolrod/received_events",
         "repos_url" : "https://api.github.com/users/jarolrod/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jarolrod/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jarolrod/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jarolrod"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "This isn't a Bitcoin Core issue. Your compiler is broken. Does just compiling a program with `/usr/local/opt/llvm/bin/clang++` work?",
      "created_at" : "2021-03-10T00:35:15Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21396#issuecomment-794659889",
      "id" : 794659889,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21396",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NDY1OTg4OQ==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-10T00:35:15Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/794659889",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "I got the same error on master @ eea6196c3d8056e51e1780a44ac7f599331247e5 on macOS 11.2.2\r\n\r\nI reinstalled llvm (which I hadn't done after upgrading to Big Sur). I'm able to compile and run a hello world c++ program with it.\r\n\r\nThis time I got a bit further, but configuring univalue fails:\r\n\r\n```\r\n./configure CC=/usr/local/opt/llvm/bin/clang CXX=/usr/local/opt/llvm/bin/clang++ --without-gui --disable-zmq --without-miniupnpc --without-natpmp --without-bdb --disable-bench\r\n...\r\nchecking for gcc... /usr/local/opt/llvm/bin/clang\r\nchecking whether the C compiler works... yes\r\nchecking for C compiler default output file name... a.out\r\nchecking for suffix of executables... \r\nchecking whether we are cross compiling... configure: error: in `/Users/sjors/dev/bitcoin-fuzz/src/univalue':\r\nconfigure: error: cannot run C compiled programs.\r\nIf you meant to cross compile, use `--host'.\r\n```\r\nFull [log](https://gist.github.com/Sjors/dd7920d3f242a5ae75a3fb8232f33987#file-config2-log).\r\n\r\nIt seems to think I'm trying to cross compile. If I install Univalue on my system and use `--with-system-univalue` then the error just repeats for `secp256k1`.",
      "created_at" : "2021-03-10T08:11:21Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21396#issuecomment-795059924",
      "id" : 795059924,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21396",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDc5NTA1OTkyNA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-03-10T08:15:14Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/795059924",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   },
   {
      "author_association" : "CONTRIBUTOR",
      "body" : "> I got the same error on master @ [eea6196](https://github.com/bitcoin/bitcoin/commit\r\n> ```\r\n> ./configure CC=/usr/local/opt/llvm/bin/clang CXX=/usr/local/opt/llvm/bin/clang++ --without-gui --disable-zmq --without-miniupnpc --without-natpmp --without-bdb --disable-bench\r\n> ...\r\n> checking for gcc... /usr/local/opt/llvm/bin/clang\r\n> checking whether the C compiler works... yes\r\n> checking for C compiler default output file name... a.out\r\n> checking for suffix of executables... \r\n> checking whether we are cross compiling... configure: error: in `/Users/sjors/dev/bitcoin-fuzz/src/univalue':\r\n> configure: error: cannot run C compiled programs.\r\n> If you meant to cross compile, use `--host'.\r\n> ```\r\n> \r\n> Full [log](https://gist.github.com/Sjors/dd7920d3f242a5ae75a3fb8232f33987#file-config2-log).\r\n> \r\n\r\nIs this the right log? It doesn't contain the string \"cannot run C compiled programs\".\r\n\r\n",
      "created_at" : "2021-04-06T17:44:03Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21396#issuecomment-814309128",
      "id" : 814309128,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21396",
      "node_id" : "MDEyOklzc3VlQ29tbWVudDgxNDMwOTEyOA==",
      "performed_via_github_app" : null,
      "updated_at" : "2021-04-06T17:44:03Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/814309128",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1071625?v=4",
         "events_url" : "https://api.github.com/users/real-or-random/events{/privacy}",
         "followers_url" : "https://api.github.com/users/real-or-random/followers",
         "following_url" : "https://api.github.com/users/real-or-random/following{/other_user}",
         "gists_url" : "https://api.github.com/users/real-or-random/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/real-or-random",
         "id" : 1071625,
         "login" : "real-or-random",
         "node_id" : "MDQ6VXNlcjEwNzE2MjU=",
         "organizations_url" : "https://api.github.com/users/real-or-random/orgs",
         "received_events_url" : "https://api.github.com/users/real-or-random/received_events",
         "repos_url" : "https://api.github.com/users/real-or-random/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/real-or-random/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/real-or-random/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/real-or-random"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Going to close this. I can't recreate the problem, and I'm still convinced this is/was an issue with your system.",
      "created_at" : "2022-01-21T02:23:46Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21396#issuecomment-1018104661",
      "id" : 1018104661,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21396",
      "node_id" : "IC_kwDOABII5848rwtV",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018104661/reactions"
      },
      "updated_at" : "2022-01-21T02:23:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018104661",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=4",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "node_id" : "MDQ6VXNlcjg2MzczMA==",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "author_association" : "MEMBER",
      "body" : "Sounds good. I also don't have a Big Sur system anymore.",
      "created_at" : "2022-01-21T14:08:55Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/issues/21396#issuecomment-1018535909",
      "id" : 1018535909,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/21396",
      "node_id" : "IC_kwDOABII5848tZ_l",
      "performed_via_github_app" : null,
      "reactions" : {
         "+1" : 0,
         "-1" : 0,
         "confused" : 0,
         "eyes" : 0,
         "heart" : 0,
         "hooray" : 0,
         "laugh" : 0,
         "rocket" : 0,
         "total_count" : 0,
         "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018535909/reactions"
      },
      "updated_at" : "2022-01-21T14:08:55Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1018535909",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/10217?v=4",
         "events_url" : "https://api.github.com/users/Sjors/events{/privacy}",
         "followers_url" : "https://api.github.com/users/Sjors/followers",
         "following_url" : "https://api.github.com/users/Sjors/following{/other_user}",
         "gists_url" : "https://api.github.com/users/Sjors/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/Sjors",
         "id" : 10217,
         "login" : "Sjors",
         "node_id" : "MDQ6VXNlcjEwMjE3",
         "organizations_url" : "https://api.github.com/users/Sjors/orgs",
         "received_events_url" : "https://api.github.com/users/Sjors/received_events",
         "repos_url" : "https://api.github.com/users/Sjors/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/Sjors/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/Sjors/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/Sjors"
      }
   }
]
