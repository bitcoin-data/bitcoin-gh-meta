[
   {
      "body" : "utACK",
      "created_at" : "2015-02-08T10:14:31Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5770#issuecomment-73404817",
      "id" : 73404817,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5770",
      "updated_at" : "2015-02-08T10:14:31Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73404817",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "ut ACK\r\n",
      "created_at" : "2015-02-08T10:44:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5770#issuecomment-73405682",
      "id" : 73405682,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5770",
      "updated_at" : "2015-02-08T10:44:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73405682",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/494411?v=3",
         "events_url" : "https://api.github.com/users/jgarzik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jgarzik/followers",
         "following_url" : "https://api.github.com/users/jgarzik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jgarzik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jgarzik",
         "id" : 494411,
         "login" : "jgarzik",
         "organizations_url" : "https://api.github.com/users/jgarzik/orgs",
         "received_events_url" : "https://api.github.com/users/jgarzik/received_events",
         "repos_url" : "https://api.github.com/users/jgarzik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jgarzik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jgarzik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jgarzik"
      }
   },
   {
      "body" : "ACK",
      "created_at" : "2015-02-08T10:45:48Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5770#issuecomment-73405705",
      "id" : 73405705,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5770",
      "updated_at" : "2015-02-08T10:45:48Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73405705",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "utACK",
      "created_at" : "2015-02-08T11:07:04Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5770#issuecomment-73406310",
      "id" : 73406310,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5770",
      "updated_at" : "2015-02-08T11:07:04Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73406310",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/863730?v=3",
         "events_url" : "https://api.github.com/users/fanquake/events{/privacy}",
         "followers_url" : "https://api.github.com/users/fanquake/followers",
         "following_url" : "https://api.github.com/users/fanquake/following{/other_user}",
         "gists_url" : "https://api.github.com/users/fanquake/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/fanquake",
         "id" : 863730,
         "login" : "fanquake",
         "organizations_url" : "https://api.github.com/users/fanquake/orgs",
         "received_events_url" : "https://api.github.com/users/fanquake/received_events",
         "repos_url" : "https://api.github.com/users/fanquake/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/fanquake/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/fanquake/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/fanquake"
      }
   },
   {
      "body" : "There's another one here: https://github.com/bitcoin/bitcoin/blob/master/src/main.cpp#L3453\r\n\r\nEdit: and here https://github.com/bitcoin/bitcoin/blob/master/src/net.cpp#L1974  although arguably, it's less important as it only logs outgoing messages.\r\n",
      "created_at" : "2015-02-08T11:11:25Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5770#issuecomment-73406437",
      "id" : 73406437,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5770",
      "updated_at" : "2015-02-08T11:14:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73406437",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "Hmm, can't we call sanitize on the command string directly on input instead later on every LogPrint?",
      "created_at" : "2015-02-08T11:16:32Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5770#issuecomment-73406601",
      "id" : 73406601,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5770",
      "updated_at" : "2015-02-08T11:16:32Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73406601",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/6848764?v=3",
         "events_url" : "https://api.github.com/users/paveljanik/events{/privacy}",
         "followers_url" : "https://api.github.com/users/paveljanik/followers",
         "following_url" : "https://api.github.com/users/paveljanik/following{/other_user}",
         "gists_url" : "https://api.github.com/users/paveljanik/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/paveljanik",
         "id" : 6848764,
         "login" : "paveljanik",
         "organizations_url" : "https://api.github.com/users/paveljanik/orgs",
         "received_events_url" : "https://api.github.com/users/paveljanik/received_events",
         "repos_url" : "https://api.github.com/users/paveljanik/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/paveljanik/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/paveljanik/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/paveljanik"
      }
   },
   {
      "body" : "Somehow related: #5492",
      "created_at" : "2015-02-08T11:54:50Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5770#issuecomment-73407717",
      "id" : 73407717,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5770",
      "updated_at" : "2015-02-08T11:54:50Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73407717",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/178464?v=3",
         "events_url" : "https://api.github.com/users/jonasschnelli/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jonasschnelli/followers",
         "following_url" : "https://api.github.com/users/jonasschnelli/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jonasschnelli/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jonasschnelli",
         "id" : 178464,
         "login" : "jonasschnelli",
         "organizations_url" : "https://api.github.com/users/jonasschnelli/orgs",
         "received_events_url" : "https://api.github.com/users/jonasschnelli/received_events",
         "repos_url" : "https://api.github.com/users/jonasschnelli/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jonasschnelli/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jonasschnelli/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jonasschnelli"
      }
   },
   {
      "body" : "The problem here is the output, hence the point is to sanitize on *output*, not the input. Operations on valid input may still result in output strings that are 'dangerous'. Filtering out the characters on input would result in the counter-intuitive behavior that `\"get\\x1bblock\" `is an alias for `\"getblock\" ` (for another example of input and output sanitization being confused only look as far as PHP's 'magic quotes' disaster, which has corrupted texts with extra \\ and didn't solve the underlying SQL injection at all). \r\n\r\n(Prematurely *rejecting* commands with control or non-ASCII characters would of course be more reasonable, as there are none of those that we handle anyway)\r\n\r\nBut in any case, we'd like to minimize code impact outside of immediate logging/debugging code. E.g. @gmaxwell and I have talked about changing LogPrintStr to replace with ' ' any control characters except a '\\n' at the end of the string. This would solve this problem thoroughly without any potential side-impact on the code.\r\n\r\nEdit: and this specific code change should go in as well, it'd just be a last ditch catch-all.\r\n",
      "created_at" : "2015-02-08T13:23:14Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5770#issuecomment-73410607",
      "id" : 73410607,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5770",
      "updated_at" : "2015-02-08T13:25:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73410607",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/126646?v=3",
         "events_url" : "https://api.github.com/users/laanwj/events{/privacy}",
         "followers_url" : "https://api.github.com/users/laanwj/followers",
         "following_url" : "https://api.github.com/users/laanwj/following{/other_user}",
         "gists_url" : "https://api.github.com/users/laanwj/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/laanwj",
         "id" : 126646,
         "login" : "laanwj",
         "organizations_url" : "https://api.github.com/users/laanwj/orgs",
         "received_events_url" : "https://api.github.com/users/laanwj/received_events",
         "repos_url" : "https://api.github.com/users/laanwj/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/laanwj/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/laanwj/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/laanwj"
      }
   },
   {
      "body" : "@laanwj good catch; I saw the one at 1974 but because it was outgoing I didn't hit it. Since it caught your attention to, I'll just add it; better than people in the future spending time thinking about it being okay or not.",
      "created_at" : "2015-02-08T20:01:13Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5770#issuecomment-73428501",
      "id" : 73428501,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5770",
      "updated_at" : "2015-02-08T20:01:13Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/73428501",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/858454?v=3",
         "events_url" : "https://api.github.com/users/gmaxwell/events{/privacy}",
         "followers_url" : "https://api.github.com/users/gmaxwell/followers",
         "following_url" : "https://api.github.com/users/gmaxwell/following{/other_user}",
         "gists_url" : "https://api.github.com/users/gmaxwell/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/gmaxwell",
         "id" : 858454,
         "login" : "gmaxwell",
         "organizations_url" : "https://api.github.com/users/gmaxwell/orgs",
         "received_events_url" : "https://api.github.com/users/gmaxwell/received_events",
         "repos_url" : "https://api.github.com/users/gmaxwell/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/gmaxwell/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/gmaxwell/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/gmaxwell"
      }
   }
]
