[
   {
      "body" : "Needed rebase",
      "created_at" : "2015-02-03T19:57:59Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5709#issuecomment-72722374",
      "id" : 72722374,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5709",
      "updated_at" : "2015-02-03T19:57:59Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/72722374",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "@luke-jr you once said you would like GetMinRelayFee to become part of policy, I would prefer to destroy it (and then pick it up as part of a new CPolicy method) instead.\r\nDo you like this? \r\nBy the way, in case it wasn't clear, this is supposed to be a 1 commit PR, as said it is just separated for easier review.",
      "created_at" : "2015-06-25T19:29:40Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5709#issuecomment-115370411",
      "id" : 115370411,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5709",
      "updated_at" : "2015-06-25T19:29:40Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/115370411",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "I bet it will take very long until I have to rebase this because the refactored code is way too ugly for anyone to want to touch it. Hopefully by the time this gets any attention, +47 Ã¢ÂÂ67 while 0-functional-changes will be enough of an argument in favor of this single-commit refactor (I know, I have to s/SQUASHME:/fixup! but as said that may never happen because this may never need rebase). I would love to hear @morcos 's opinion.",
      "created_at" : "2015-06-26T16:27:08Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5709#issuecomment-115746574",
      "id" : 115746574,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5709",
      "updated_at" : "2015-06-26T16:28:34Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/115746574",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "_links" : {
         "html" : {
            "href" : "https://github.com/bitcoin/bitcoin/pull/5709#discussion_r33372016"
         },
         "pull_request" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5709"
         },
         "self" : {
            "href" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33372016"
         }
      },
      "body" : "Probably \"insufficient fee\" should be replaced with \"bad-txns-fee-negative\" to better keep track of the validation duplication.",
      "commit_id" : "f03b16a53f19d9705ead3fd10ee942f3b643c2cc",
      "created_at" : "2015-06-26T16:33:11Z",
      "diff_hunk" : "@@ -1003,6 +974,13 @@ bool AcceptToMemoryPool(CTxMemPool& pool, CValidationState &state, const CTransa\n         view.SetBackend(dummy);\n         }\n \n+        CAmount nValueOut = tx.GetValueOut();\n+        CAmount nFees = nValueIn-nValueOut;\n+        // Don't accept it if it can't get into a block\n+        if (nFees < 0)\n+            return state.DoS(0, error(\"%s: negative fees %s, %d\", __func__, hash.ToString(), nFees),\n+                             REJECT_INSUFFICIENTFEE, \"insufficient fee\");",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5709#discussion_r33372016",
      "id" : 33372016,
      "original_commit_id" : "f03b16a53f19d9705ead3fd10ee942f3b643c2cc",
      "original_position" : 54,
      "path" : "src/main.cpp",
      "position" : 54,
      "pull_request_url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/5709",
      "updated_at" : "2015-06-26T16:33:45Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/33372016",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "I took a first pass at reviewing this.  I think if you're going to do a refactor here, you should improve the readability of the code.  Although I like this code better than the original in some ways, it feels like you over optimized it instead of clarifying it.\r\n\r\nIn any case, I don't feel strongly, if you get some concept ACK's, I'm happy to test it for you.\r\n\r\nI don't think your second commit is right though, why do you think minRelayTxFee is in MoneyRange already?",
      "created_at" : "2015-06-26T17:16:54Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5709#issuecomment-115776462",
      "id" : 115776462,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5709",
      "updated_at" : "2015-06-26T17:16:54Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/115776462",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/4360349?v=3",
         "events_url" : "https://api.github.com/users/morcos/events{/privacy}",
         "followers_url" : "https://api.github.com/users/morcos/followers",
         "following_url" : "https://api.github.com/users/morcos/following{/other_user}",
         "gists_url" : "https://api.github.com/users/morcos/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/morcos",
         "id" : 4360349,
         "login" : "morcos",
         "organizations_url" : "https://api.github.com/users/morcos/orgs",
         "received_events_url" : "https://api.github.com/users/morcos/received_events",
         "repos_url" : "https://api.github.com/users/morcos/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/morcos/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/morcos/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/morcos"
      }
   },
   {
      "body" : "Well, I was hoping that by doing the stuff change by change it could become obvious for reviewers that this doesn't change anything functionally, but thanks for the testing offer (probably better to do it after some more review like you say).\r\n\r\n> I don't think your second commit is right though, why do you think minRelayTxFee is in MoneyRange already?\r\n\r\nYou are right, I thought, ParseMoney had a moneyRange check. I should add one there or in https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L817\r\n\r\nThe other place where minRelayTxFee is initialized is in https://github.com/bitcoin/bitcoin/blob/master/src/main.cpp#L67\r\n\r\nI will fix that commit.\r\n\r\nRe optimizing: that's just a nice side effect. The main goal is to reduce the amount of code before moving it to policy.",
      "created_at" : "2015-06-27T11:17:10Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5709#issuecomment-116012216",
      "id" : 116012216,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5709",
      "updated_at" : "2015-06-27T11:17:10Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/116012216",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Updated fixing the second commit. Also reword \"SQUASHME:\" with \"fixup!\" in the commit descriptions.",
      "created_at" : "2015-06-29T09:03:41Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5709#issuecomment-116540818",
      "id" : 116540818,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5709",
      "updated_at" : "2015-06-29T09:03:46Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/116540818",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   },
   {
      "body" : "Rebased",
      "created_at" : "2015-07-06T23:36:26Z",
      "html_url" : "https://github.com/bitcoin/bitcoin/pull/5709#issuecomment-119027746",
      "id" : 119027746,
      "issue_url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/5709",
      "updated_at" : "2015-07-06T23:36:26Z",
      "url" : "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/119027746",
      "user" : {
         "avatar_url" : "https://avatars.githubusercontent.com/u/1008458?v=3",
         "events_url" : "https://api.github.com/users/jtimon/events{/privacy}",
         "followers_url" : "https://api.github.com/users/jtimon/followers",
         "following_url" : "https://api.github.com/users/jtimon/following{/other_user}",
         "gists_url" : "https://api.github.com/users/jtimon/gists{/gist_id}",
         "gravatar_id" : "",
         "html_url" : "https://github.com/jtimon",
         "id" : 1008458,
         "login" : "jtimon",
         "organizations_url" : "https://api.github.com/users/jtimon/orgs",
         "received_events_url" : "https://api.github.com/users/jtimon/received_events",
         "repos_url" : "https://api.github.com/users/jtimon/repos",
         "site_admin" : false,
         "starred_url" : "https://api.github.com/users/jtimon/starred{/owner}{/repo}",
         "subscriptions_url" : "https://api.github.com/users/jtimon/subscriptions",
         "type" : "User",
         "url" : "https://api.github.com/users/jtimon"
      }
   }
]
